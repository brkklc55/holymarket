"use strict";exports.id=4914,exports.ids=[4914],exports.modules={5335:(a,b,c)=>{c.d(b,{k:()=>i});var d=c(679),e=c(73993),f=c(75605),g=c(1556),h=c(91205);async function i(a,b){let c;async function i(b){if(b.endsWith(h.vB.slice(2))){let c=(0,e.B)((0,d.iN)(b,-64,-32)),g=(0,d.iN)(b,0,-64).slice(2).match(/.{1,64}/g),i=await Promise.all(g.map(b=>h.BH.slice(2)!==b?a.request({method:"eth_getTransactionReceipt",params:[`0x${b}`]},{dedupe:!0}):void 0)),j=i.some(a=>null===a)?100:i.every(a=>a?.status==="0x1")?200:i.every(a=>a?.status==="0x0")?500:600;return{atomic:!1,chainId:(0,f.ME)(c),receipts:i.filter(Boolean),status:j,version:"2.0.0"}}return a.request({method:"wallet_getCallsStatus",params:[b]})}let{atomic:j=!1,chainId:k,receipts:l,version:m="2.0.0",...n}=await i(b.id),[o,p]=(c=n.status)>=100&&c<200?["pending",c]:c>=200&&c<300?["success",c]:c>=300&&c<700?["failure",c]:"CONFIRMED"===c?["success",200]:"PENDING"===c?["pending",100]:[void 0,c];return{...n,atomic:j,chainId:k?(0,f.ME)(k):void 0,receipts:l?.map(a=>({...a,blockNumber:(0,f.uU)(a.blockNumber),gasUsed:(0,f.uU)(a.gasUsed),status:g.Lj[a.status]}))??[],statusCode:p,status:o,version:m}}},17827:(a,b,c)=>{c.d(b,{l:()=>f});var d=c(6674),e=c(16363);function f(a){let{key:b="public",name:c="Public Client"}=a;return(0,d.U)({...a,key:b,name:c,type:"publicClient"}).extend(e.$)}},31869:(a,b,c)=>{c.d(b,{c:()=>m});var d=c(51382);class e extends d.C{constructor(a){super(`Call bundle failed with status: ${a.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=a}}var f=c(5474),g=c(50532),h=c(82643),i=c(60129),j=c(58564),k=c(18453),l=c(5335);async function m(a,b){let c,{id:d,pollingInterval:m=a.pollingInterval,status:o=({statusCode:a})=>200===a||a>=300,retryCount:p=4,retryDelay:q=({count:a})=>200*~~(1<<a),timeout:r=6e4,throwOnFailure:s=!1}=b,t=(0,k.A)(["waitForCallsStatus",a.uid,d]),{promise:u,resolve:v,reject:w}=(0,i.Y)(),x=(0,g.lB)(t,{resolve:v,reject:w},b=>{let g=(0,h.w)(async()=>{let h=a=>{clearTimeout(c),g(),a(),x()};try{let c=await (0,j.b)(async()=>{let b=await (0,f.T)(a,l.k,"getCallsStatus")({id:d});if(s&&"failure"===b.status)throw new e(b);return b},{retryCount:p,delay:q});if(!o(c))return;h(()=>b.resolve(c))}catch(a){h(()=>b.reject(a))}},{interval:m,emitOnBegin:!0});return g});return c=r?setTimeout(()=>{x(),clearTimeout(c),w(new n({id:d}))},r):void 0,await u}class n extends d.C{constructor({id:a}){super(`Timed out while waiting for call bundle with id "${a}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}},41664:(a,b,c)=>{c.d(b,{h:()=>j});var d=c(59879),e=c(66731),f=c(94311),g=c(5474),h=c(79892),i=c(78361);async function j(a,b){let{account:c=a.account,chainId:j,nonce:k}=b;if(!c)throw new e.T({docsPath:"/docs/eip7702/prepareAuthorization"});let l=(0,d.J)(c),m=(()=>{if(b.executor)return"self"===b.executor?b.executor:(0,d.J)(b.executor)})(),n={address:b.contractAddress??b.address,chainId:j,nonce:k};return void 0===n.chainId&&(n.chainId=a.chain?.id??await (0,g.T)(a,h.T,"getChainId")({})),void 0===n.nonce&&(n.nonce=await (0,g.T)(a,i.y,"getTransactionCount")({address:l.address,blockTag:"pending"}),("self"===m||m?.address&&(0,f.h)(m.address,l.address))&&(n.nonce+=1)),n}},51516:(a,b,c)=>{c.d(b,{v:()=>s});var d=c(59879),e=c(66731),f=c(51382),g=c(70934),h=c(94020),i=c(6643),j=c(96903),k=c(13905),l=c(5474),m=c(24637),n=c(69088),o=c(79892),p=c(24696),q=c(25352);let r=new m.A(128);async function s(a,b){let{account:c=a.account,chain:m=a.chain,accessList:s,authorizationList:t,blobs:u,data:v,gas:w,gasPrice:x,maxFeePerBlobGas:y,maxFeePerGas:z,maxPriorityFeePerGas:A,nonce:B,type:C,value:D,...E}=b;if(void 0===c)throw new e.T({docsPath:"/docs/actions/wallet/sendTransaction"});let F=c?(0,d.J)(c):null;try{(0,n.c)(b);let c=await (async()=>b.to?b.to:null!==b.to&&t&&t.length>0?await (0,g.g)({authorization:t[0]}).catch(()=>{throw new f.C("`to` is required. Could not infer from `authorizationList`.")}):void 0)();if(F?.type==="json-rpc"||null===F){let b;null!==m&&(b=await (0,l.T)(a,o.T,"getChainId")({}),(0,h.v)({currentChainId:b,chain:m}));let d=a.chain?.formatters?.transactionRequest?.format,e=(d||k.Bv)({...(0,j.o)(E,{format:d}),accessList:s,account:F,authorizationList:t,blobs:u,chainId:b,data:v,gas:w,gasPrice:x,maxFeePerBlobGas:y,maxFeePerGas:z,maxPriorityFeePerGas:A,nonce:B,to:c,type:C,value:D},"sendTransaction"),f=r.get(a.uid);try{return await a.request({method:f?"wallet_sendTransaction":"eth_sendTransaction",params:[e]},{retryCount:0})}catch(b){if(!1===f)throw b;if("InvalidInputRpcError"===b.name||"InvalidParamsRpcError"===b.name||"MethodNotFoundRpcError"===b.name||"MethodNotSupportedRpcError"===b.name)return await a.request({method:"wallet_sendTransaction",params:[e]},{retryCount:0}).then(b=>(r.set(a.uid,!0),b)).catch(c=>{if("MethodNotFoundRpcError"===c.name||"MethodNotSupportedRpcError"===c.name)throw r.set(a.uid,!1),b;throw c});throw b}}if(F?.type==="local"){let b=await (0,l.T)(a,p.ft,"prepareTransactionRequest")({account:F,accessList:s,authorizationList:t,blobs:u,chain:m,data:v,gas:w,gasPrice:x,maxFeePerBlobGas:y,maxFeePerGas:z,maxPriorityFeePerGas:A,nonce:B,nonceManager:F.nonceManager,parameters:[...p.MM,"sidecars"],type:C,value:D,...E,to:c}),d=m?.serializers?.transaction,e=await F.signTransaction(b,{serializer:d});return await (0,l.T)(a,q.L,"sendRawTransaction")({serializedTransaction:e})}if(F?.type==="smart")throw new e.Z({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"});throw new e.Z({docsPath:"/docs/actions/wallet/sendTransaction",type:F?.type})}catch(a){if(a instanceof e.Z)throw a;throw(0,i.p)(a,{...b,account:F,chain:b.chain||void 0})}}},91205:(a,b,c)=>{c.d(b,{BH:()=>n,vB:()=>m,yM:()=>o});var d=c(59879),e=c(51382),f=c(70771),g=c(86899),h=c(58313),i=c(75605),j=c(9318),k=c(6643),l=c(51516);let m="0x5792579257925792579257925792579257925792579257925792579257925792",n=(0,j.cK)(0,{size:32});async function o(a,b){let{account:c=a.account,capabilities:o,chain:p=a.chain,experimental_fallback:q,experimental_fallbackDelay:r=32,forceAtomic:s=!1,id:t,version:u="2.0.0"}=b,v=c?(0,d.J)(c):null,w=b.calls.map(a=>{let b=a.abi?(0,g.p)({abi:a.abi,functionName:a.functionName,args:a.args}):a.data;return{data:a.dataSuffix&&b?(0,h.xW)([b,a.dataSuffix]):b,to:a.to,value:a.value?(0,j.cK)(a.value):void 0}});try{let b=await a.request({method:"wallet_sendCalls",params:[{atomicRequired:s,calls:w,capabilities:o,chainId:(0,j.cK)(p.id),from:v?.address,id:t,version:u}]},{retryCount:0});if("string"==typeof b)return{id:b};return b}catch(c){if(q&&("MethodNotFoundRpcError"===c.name||"MethodNotSupportedRpcError"===c.name||"UnknownRpcError"===c.name||c.details.toLowerCase().includes("does not exist / is not available")||c.details.toLowerCase().includes("missing or invalid. request()")||c.details.toLowerCase().includes("did not match any variant of untagged enum")||c.details.toLowerCase().includes("account upgraded to unsupported contract")||c.details.toLowerCase().includes("eip-7702 not supported")||c.details.toLowerCase().includes("unsupported wc_ method")||c.details.toLowerCase().includes("feature toggled misconfigured")||c.details.toLowerCase().includes("jsonrpcengine: response has no error or result for request"))){if(o&&Object.values(o).some(a=>!a.optional)){let a="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new f.L5(new e.C(a,{details:a}))}if(s&&w.length>1){let a="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new f.jz(new e.C(a,{details:a}))}let b=[];for(let c of w){let d=(0,l.v)(a,{account:v,chain:p,data:c.data,to:c.to,value:c.value?(0,i.uU)(c.value):void 0});b.push(d),r>0&&await new Promise(a=>setTimeout(a,r))}let c=await Promise.allSettled(b);if(c.every(a=>"rejected"===a.status))throw c[0].reason;let d=c.map(a=>"fulfilled"===a.status?a.value:n);return{id:(0,h.xW)([...d,(0,j.cK)(p.id,{size:32}),m])}}throw(0,k.p)(c,{...b,account:v,chain:b.chain})}}},94020:(a,b,c)=>{c.d(b,{v:()=>e});var d=c(9773);function e({chain:a,currentChainId:b}){if(!a)throw new d.jF;if(b!==a.id)throw new d.EH({chain:a,currentChainId:b})}}};