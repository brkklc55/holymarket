(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{26421:(e,t,s)=>{Promise.resolve().then(s.bind(s,70032))},52836:(e,t,s)=>{"use strict";s.d(t,{d:()=>i,t:()=>n});var a=s(95155),l=s(12115);let r=(0,l.createContext)(null);function n({children:e}){let[t,s]=(0,l.useState)([]),n=(0,l.useRef)({}),i=(0,l.useCallback)(e=>{s(t=>t.filter(t=>t.id!==e));let t=n.current[e];t&&(window.clearTimeout(t),delete n.current[e])},[]),o=(0,l.useCallback)(({title:e,message:t,variant:a="default",durationMs:l=3800})=>{let r=`${Date.now()}-${Math.random().toString(16).slice(2)}`,o=Date.now();s(s=>[{id:r,title:e,message:t,variant:a,createdAt:o},...s].slice(0,4)),n.current[r]=window.setTimeout(()=>i(r),l)},[i]),d=(0,l.useMemo)(()=>({toast:o}),[o]);return(0,a.jsxs)(r.Provider,{value:d,children:[e,(0,a.jsx)("div",{className:"fixed top-4 right-4 z-[10000] w-[calc(100%-2rem)] max-w-sm space-y-2",children:t.map(e=>{let t="success"===e.variant?"border-emerald-500/20 bg-emerald-500/10":"error"===e.variant?"border-rose-500/20 bg-rose-500/10":"warning"===e.variant?"border-amber-500/20 bg-amber-500/10":"border-slate-800 bg-slate-900/70",s="success"===e.variant?"text-emerald-300":"error"===e.variant?"text-rose-300":"warning"===e.variant?"text-amber-300":"text-white";return(0,a.jsx)("div",{className:`premium-card p-4 border ${t}`,children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{children:[e.title&&(0,a.jsx)("div",{className:`text-sm font-extrabold ${s}`,children:e.title}),(0,a.jsx)("div",{className:"text-[12px] text-slate-300 mt-1 leading-relaxed",children:e.message})]}),(0,a.jsx)("button",{type:"button",onClick:()=>i(e.id),className:"h-8 w-8 rounded-xl bg-slate-900/40 border border-slate-800 text-slate-400 hover:text-white hover:border-slate-700 transition-all","aria-label":"Close",children:"✕"})]})},e.id)})})]})}function i(){let e=(0,l.useContext)(r);if(!e)throw Error("useToast must be used within a ToastProvider");return e}},70032:(e,t,s)=>{"use strict";s.d(t,{default:()=>k});var a=s(95155),l=s(12115),r=s(13581),n=s(45795),i=s(70536),o=s(5697),d=s(79829),c=s(10452),m=s(37357),x=s(36513),u=s(36872),p=s(57321),b=s(44071),h=s(50538),f=s(68822),g=s(42869),y=s(53810),v=s(88449);let N="0xd62a41360a66f748ae3777a27a86b47b84a80a08",w=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marketId",type:"uint256"},{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"bool",name:"outcome",type:"bool"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"BetPlaced",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marketId",type:"uint256"},{indexed:!1,internalType:"string",name:"question",type:"string"},{indexed:!1,internalType:"uint256",name:"endTime",type:"uint256"}],name:"MarketCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marketId",type:"uint256"},{indexed:!1,internalType:"bool",name:"outcome",type:"bool"}],name:"MarketResolved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marketId",type:"uint256"},{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"WinningsClaimed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"marketId",type:"uint256"},{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"EmergencyWithdrawn",type:"event"},{inputs:[],name:"admin",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_marketId",type:"uint256"},{internalType:"bool",name:"_outcome",type:"bool"}],name:"bet",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"_marketId",type:"uint256"}],name:"claim",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_question",type:"string"},{internalType:"uint256",name:"_duration",type:"uint256"}],name:"createMarket",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"emergencyReset",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_marketId",type:"uint256"}],name:"emergencyWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_marketId",type:"uint256"},{internalType:"address",name:"_user",type:"address"}],name:"getUserBet",outputs:[{internalType:"uint256",name:"yesAmount",type:"uint256"},{internalType:"uint256",name:"noAmount",type:"uint256"},{internalType:"bool",name:"claimed",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"marketCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"resetAfterMarketId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"markets",outputs:[{internalType:"string",name:"question",type:"string"},{internalType:"uint256",name:"endTime",type:"uint256"},{internalType:"uint256",name:"yesPool",type:"uint256"},{internalType:"uint256",name:"noPool",type:"uint256"},{internalType:"bool",name:"resolved",type:"bool"},{internalType:"bool",name:"outcome",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_marketId",type:"uint256"},{internalType:"bool",name:"_outcome",type:"bool"}],name:"resolveMarket",outputs:[],stateMutability:"nonpayable",type:"function"}];var j=s(52836);function k(){let{address:e,isConnected:t}=(0,x.w)(),s=(0,u.i)(),{toast:k}=(0,j.d)(),[S,T]=(0,l.useState)(1n),[C,B]=(0,l.useState)(0n),[A,P]=(0,l.useState)(0n),[$,I]=(0,l.useState)(null),[E,F]=(0,l.useState)([]),[O,M]=(0,l.useState)(!0),[R,D]=(0,l.useState)(!1),[U,q]=(0,l.useState)("0.001"),[_,L]=(0,l.useState)(null),[W,Y]=(0,l.useState)(!1),[z,J]=(0,l.useState)("market"),[V,H]=(0,l.useState)([]),[K,G]=(0,l.useState)([]),[Q,X]=(0,l.useState)([]),[Z,ee]=(0,l.useState)(""),[et,es]=(0,l.useState)(!1),[ea,el]=(0,l.useState)(null),[er,en]=(0,l.useState)([]),[ei,eo]=(0,l.useState)(""),[ed,ec]=(0,l.useState)("admin"),[em,ex]=(0,l.useState)(!1),[eu,ep]=(0,l.useState)(!1),[eb,eh]=(0,l.useState)(null),[ef,eg]=(0,l.useState)(null),[ey,ev]=(0,l.useState)(!1),[eN,ew]=(0,l.useState)(null),[ej,ek]=(0,l.useState)("0"),[eS,eT]=(0,l.useState)({}),[eC,eB]=(0,l.useState)(0),[eA,eP]=(0,l.useState)([]),[e$,eI]=(0,l.useState)([]),[eE,eF]=(0,l.useState)({}),[eO,eM]=(0,l.useState)(null),[eR,eD]=(0,l.useState)(!1),[eU,eq]=(0,l.useState)({}),[e_,eL]=(0,l.useState)({}),[eW,eY]=(0,l.useState)([]),[ez,eJ]=(0,l.useState)(""),[eV,eH]=(0,l.useState)("link"),[eK,eG]=(0,l.useState)("none"),[eQ,eX]=(0,l.useState)(""),[eZ,e0]=(0,l.useState)(""),[e1,e5]=(0,l.useState)(""),[e2,e4]=(0,l.useState)("50"),[e6,e3]=(0,l.useState)(!0),[e8,e9]=(0,l.useState)(""),[e7,te]=(0,l.useState)(""),[tt,ts]=(0,l.useState)(""),[ta,tl]=(0,l.useState)(""),[tr,tn]=(0,l.useState)(""),[ti,to]=(0,l.useState)(!1),[td,tc]=(0,l.useState)(""),[tm,tx]=(0,l.useState)("3600"),tu=t&&s!==m.c.id,tp=()=>{try{let e="holymarket_device_id_v1",t=window.localStorage.getItem(e);if(t)return t;let s=`${Date.now()}-${Math.random().toString(16).slice(2)}`;return window.localStorage.setItem(e,s),s}catch{return"unknown"}},tb=e=>{if(!e)return"";let t=new Date(e);if(Number.isNaN(t.getTime()))return"";let s=e=>String(e).padStart(2,"0"),a=t.getFullYear(),l=s(t.getMonth()+1),r=s(t.getDate()),n=s(t.getHours()),i=s(t.getMinutes());return`${a}-${l}-${r}T${n}:${i}`},th=e=>{let t=e.trim();if(!t)return;if(t.endsWith("Z")||/[+-]\d\d:\d\d$/.test(t))return t;let s=new Date(t);if(!Number.isNaN(s.getTime()))return s.toISOString()},tf=async()=>{if(!e||!t||tu)return void L(null);Y(!0);try{let t=await tI.getBalance({address:e});L(t)}catch{L(null)}finally{Y(!1)}},tg=async()=>{eD(!0);try{let t=new URLSearchParams({tasks:"1"});e&&t.set("user",e);let s=await fetch(`/api/points?${t.toString()}`,{cache:"no-store",headers:{"x-device-id":tp()}}),a=await s.json().catch(()=>null);if(!s.ok)return void k({title:"Failed to load tasks",message:a?.error||"Unknown error",variant:"error"});eI(Array.isArray(a?.tasks)?a.tasks:[]),eF(a?.claims&&"object"==typeof a.claims?a.claims:{}),eM(a?.stats||null)}catch(e){k({title:"Failed to load tasks",message:e?.message||"Unknown error",variant:"error"})}finally{eD(!1)}},ty=e=>`holymarket_tasks_opened_v1_${e.toLowerCase()}`,tv=async t=>{if(!e)return void k({title:"Wallet not connected",message:"Connect your wallet to claim tasks.",variant:"warning"});eq(e=>({...e,[t]:!0}));try{let s=await fetch("/api/points",{method:"POST",headers:{"Content-Type":"application/json","x-device-id":tp()},body:JSON.stringify({action:"taskClaim",user:e,taskId:t})}),a=await s.json().catch(()=>null);if(!s.ok)return void k({title:"Task claim failed",message:a?.error||"Unknown error",variant:"error"});a?.skipped?k({title:"Already claimed",message:"You already claimed this task.",variant:"warning"}):k({title:"Task claimed",message:`+${a?.awarded??""} points awarded.`,variant:"success"}),await tg(),await tA()}catch(e){k({title:"Task claim failed",message:e?.message||"Unknown error",variant:"error"})}finally{eq(e=>({...e,[t]:!1}))}},tN=async()=>{if(e&&ea)try{let t=await fetch("/api/points",{method:"POST",headers:{"Content-Type":"application/json","x-device-id":tp()},body:JSON.stringify({action:"adminTaskList",adminAddress:e})}),s=await t.json().catch(()=>null);if(!t.ok)return;eY(Array.isArray(s?.tasks)?s.tasks:[])}catch{}},tw=async()=>{if(!e||!ea)return void k({title:"Not authorized",message:"Admin role required.",variant:"error"});to(!0);try{let t={};tt.trim()&&(t.minPoints=Number(tt)),ta.trim()&&(t.minVolumeBnb=Number(ta)),tr.trim()&&(t.minFollowTasks=Number(tr));let s=await fetch("/api/points",{method:"POST",headers:{"Content-Type":"application/json","x-device-id":tp()},body:JSON.stringify({action:"adminTaskUpsert",adminAddress:e,id:ez.trim()||void 0,type:eV,repeat:eK,title:eQ,description:eZ,url:e1,points:Number(e2),active:e6,startAt:th(e8),endAt:th(e7),requirements:t})}),a=await s.text(),l=(()=>{try{return a?JSON.parse(a):null}catch{return null}})();if(!s.ok){let e=l?.error||(a?a.slice(0,160):`HTTP ${s.status}`);k({title:"Task save failed",message:e,variant:"error"});return}k({title:"Task saved",message:"Task updated.",variant:"success"}),eJ(""),eX(""),e0(""),e5(""),e4("50"),e3(!0),eG("none"),e9(""),te(""),ts(""),tl(""),tn(""),await tN()}catch(e){k({title:"Task save failed",message:e?.message||"Unknown error",variant:"error"})}finally{to(!1)}},tj=async t=>{if(e&&ea&&confirm("Remove this task?")){to(!0);try{let s=await fetch("/api/points",{method:"POST",headers:{"Content-Type":"application/json","x-device-id":tp()},body:JSON.stringify({action:"adminTaskRemove",adminAddress:e,id:t})}),a=await s.json().catch(()=>null);if(!s.ok)return void k({title:"Remove failed",message:a?.error||"Unknown error",variant:"error"});k({title:"Task removed",message:"Task deleted.",variant:"success"}),await tN()}finally{to(!1)}}},tk=async(t,s)=>{if(e){ev(!0);try{let a=await fetch("/api/points",{method:"POST",headers:{"Content-Type":"application/json","x-device-id":tp()},body:JSON.stringify({action:"shareBoost",user:e,txHash:t,amountBnb:Number(s)})}),l=await a.json().catch(()=>null);if(!a.ok)return void k({title:"Share boost failed",message:l?.error||"Unknown error",variant:"error"});l?.leaderboard&&eP(l.leaderboard),await tA(),l?.skipped?k({title:"Already claimed",message:"Share boost was already applied for this bet.",variant:"warning"}):k({title:"2x points claimed",message:`Bonus +${l?.extra??""} points added.`,variant:"success"})}catch(e){k({title:"Share boost failed",message:e?.message||"Unknown error",variant:"error"})}finally{ev(!1)}}},tS=async()=>{if(!e){el(null),es(!1);return}try{let t=await fetch(`/api/points?whoami=${encodeURIComponent(e)}`,{cache:"no-store",headers:{"x-device-id":tp()}});if(!t.ok){el(null),es(!1);return}let s=await t.json(),a=s?.role==="admin"||s?.role==="superadmin"?s.role:null;el(a),es(!!a)}catch{el(null),es(!1)}},tT=async()=>{if(e)try{let t=await fetch("/api/points",{method:"POST",headers:{"Content-Type":"application/json","x-device-id":tp()},body:JSON.stringify({action:"adminList",adminAddress:e})});if(!t.ok)return;let s=await t.json();Array.isArray(s?.admins)&&en(s.admins.map(e=>({address:e.address,role:e.role})))}catch{}},tC=async()=>{if(e){ex(!0);try{let t=await fetch("/api/points",{method:"POST",headers:{"Content-Type":"application/json","x-device-id":tp()},body:JSON.stringify({action:"adminUpsert",adminAddress:e,target:ei,role:ed})});if(!t.ok){let e=await t.json().catch(()=>null);k({title:"Admin update failed",message:e?.error||"Not authorized",variant:"error"});return}k({title:"Admin updated",message:"Admin role saved.",variant:"success"}),eo(""),await tT()}finally{ex(!1)}}},tB=async t=>{if(e){ex(!0);try{let s=await fetch("/api/points",{method:"POST",headers:{"Content-Type":"application/json","x-device-id":tp()},body:JSON.stringify({action:"adminRemove",adminAddress:e,target:t})});if(!s.ok){let e=await s.json().catch(()=>null);k({title:"Remove failed",message:e?.error||"Not authorized",variant:"error"});return}k({title:"Admin removed",message:"Admin access removed.",variant:"success"}),await tT(),await tS()}finally{ex(!1)}}},tA=async()=>{try{let t=e?`/api/points?user=${encodeURIComponent(e)}`:"/api/points",s=await fetch(t,{cache:"no-store",headers:{"x-device-id":tp()}});if(!s.ok)return;let a=await s.json();eP(a.leaderboard||[]),a.user?.points!==void 0&&a.user?.points!==null?eB(Number(a.user.points)||0):e||eB(0)}catch(e){console.error("Failed to fetch points:",e)}},tP=async()=>{if(e)try{let t=new URL(window.location.href).searchParams.get("ref");if(!t||t.toLowerCase()===e.toLowerCase())return;(await fetch("/api/points",{method:"POST",headers:{"Content-Type":"application/json","x-device-id":tp()},body:JSON.stringify({action:"bindReferral",user:e,referrer:t})})).ok&&await tA()}catch(e){console.error("Failed to bind referral:",e)}},t$=async t=>{if(!e)return;let s=Number(t);if(Number.isFinite(s)&&!(s<=0))try{let t=await fetch("/api/points",{method:"POST",headers:{"Content-Type":"application/json","x-device-id":tp()},body:JSON.stringify({action:"earn",user:e,amountBnb:s})});if(!t.ok)return;let a=await t.json();a?.leaderboard&&eP(a.leaderboard),await tA()}catch(e){console.error("Failed to earn points:",e)}},tI=(0,r.l)({chain:m.c,transport:(0,n.L)("https://bsc-testnet-rpc.publicnode.com")});(0,l.useEffect)(()=>{tF()},[]),(0,l.useEffect)(()=>{if($?.resolved&&eN&&!eN.claimed&&void 0!==$.outcome){let e=BigInt(eN.yesAmount),t=BigInt(eN.noAmount),s=$.outcome?BigInt($.yesPool):BigInt($.noPool),a=BigInt($.yesPool)+BigInt($.noPool),l=$.outcome?e:t;if(l>0n&&s>0n){let e=l*a/s;ek((0,i.c)(e-5n*e/100n))}else ek("0")}else ek("0")},[$,eN]);let tE=async()=>{if(e&&S)try{let t=await tI.readContract({address:N,abi:w,functionName:"getUserBet",args:[S,e]});ew({yesAmount:t[0],noAmount:t[1],claimed:t[2]})}catch(e){console.error("Failed to fetch user bet:",e)}};(0,l.useEffect)(()=>{S&&(tq(),tL(),tW(),e&&tE())},[S,e]),(0,l.useEffect)(()=>{e?(tS(),tO(),tA(),tP(),tf()):(es(!1),el(null),X([]),eB(0),L(null),tA())},[e]),(0,l.useEffect)(()=>{tM(Q,A)},[Q,A,e]),(0,l.useEffect)(()=>{tf()},[t,tu]),(0,l.useEffect)(()=>{"admin"===z&&e&&ea&&(tT(),tN())},[z,e,ea]),(0,l.useEffect)(()=>{"tasks"===z&&(tg(),(e=>{if(!e)return eL({});try{let t=window.localStorage.getItem(ty(e)),s=t?JSON.parse(t):{};if(s&&"object"==typeof s){let e={};for(let[t,a]of Object.entries(s))e[String(t)]=!!a;eL(e)}else eL({})}catch{eL({})}})(e))},[z,e]),(0,l.useEffect)(()=>{tA()},[]);let tF=async()=>{await tR()},tO=async()=>{if(e)try{let t=await tI.getBlockNumber(),s=(await tI.getContractEvents({address:N,abi:w,eventName:"BetPlaced",args:{user:e},fromBlock:t-20000n})).map(e=>({marketId:e.args.marketId,amount:e.args.amount,outcome:e.args.outcome,blockNumber:e.blockNumber})).reverse();X(s)}catch(e){console.error("Failed to fetch user history:",e)}},tM=async(t,s)=>{if(!e||!t||0===t.length)return void eT({});try{let a={};for(let l of Array.from(new Set(t.map(e=>e.marketId.toString())))){let t=BigInt(l);if(!(t>s))try{let[s,r,n]=await tI.readContract({address:N,abi:w,functionName:"getUserBet",args:[t,e]});a[l]={yesAmount:s,noAmount:r,claimed:n}}catch(e){if(String(e?.shortMessage||e?.message||"").toLowerCase().includes("market reset"))continue;console.error("Failed to fetch getUserBet for market",l,e)}}eT(a)}catch(e){console.error("Failed to fetch history user bets:",e)}},tR=async()=>{try{let e=await tI.readContract({address:N,abi:w,functionName:"resetAfterMarketId"}),t=await tI.readContract({address:N,abi:w,functionName:"marketCount"});P(e),B(t);let s=e+1n;t>0n&&T(a=>!a||a<=e||a>t?s:a),tD(t,e)}catch(e){console.error("Failed to fetch market count:",e)}},tD=async(e,t=A)=>{try{let s=[],a=t+1n,l=e>10n?e-9n:1n,r=l<a?a:l;if(r>e)return void F([]);for(let t=e;t>=r;t--){let e=await tI.readContract({address:N,abi:w,functionName:"markets",args:[t]});s.push({id:t,question:e[0],endTime:e[1],yesPool:e[2],noPool:e[3],resolved:e[4],outcome:e[5]})}F(s)}catch(e){console.error("Failed to fetch all markets:",e)}};(0,l.useEffect)(()=>{let e=setInterval(()=>{if($?.endTime){let e=Math.floor(Date.now()/1e3),t=Number($.endTime)-e;if(t<=0)ee("ENDED");else{let e=Math.floor(t/60);ee(`${e}M ${t%60}S`)}}},1e3);return()=>clearInterval(e)},[$?.endTime]);let tU=async()=>{if(window.ethereum)try{let e=await window.ethereum.request({method:"eth_chainId"});if("0x61"!==e)try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x61"}]})}catch(e){if(4902===e.code)await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x61",chainName:"BNB Smart Chain Testnet",nativeCurrency:{name:"BNB",symbol:"tBNB",decimals:18},rpcUrls:["https://data-seed-prebsc-1-s1.binance.org:8545"],blockExplorerUrls:["https://testnet.bscscan.com"]}]});else throw e}}catch(e){throw console.error("Failed to switch network:",e),Error("Please switch to BNB Testnet")}},tq=async()=>{M(!0);try{let e=await tI.readContract({address:N,abi:w,functionName:"markets",args:[S]});I({question:e[0],endTime:e[1],yesPool:e[2],noPool:e[3],resolved:e[4],outcome:e[5]})}catch(e){console.error("Failed to fetch market:",e)}finally{M(!1)}},t_=async e=>{if(e.preventDefault(),"superadmin"!==ea)return void k({title:"Not authorized",message:"Only superadmin can create markets.",variant:"error"});D(!0);try{await tU();let e=(0,o.F)({chain:m.c,transport:(0,d.I)(window.ethereum)}),[t]=await e.requestAddresses(),s=await e.writeContract({address:N,abi:w,functionName:"createMarket",args:[td,BigInt(tm)],account:t});k({title:"Market created",message:`Transaction submitted: ${s}`,variant:"success"}),await tR(),tc("")}catch(e){k({title:"Create market failed",message:e?.message||"Unknown error",variant:"error"})}finally{D(!1)}},tL=async()=>{try{let e=await tI.getBlockNumber(),t=await tI.getContractEvents({address:N,abi:w,eventName:"BetPlaced",args:{marketId:S},fromBlock:e-10000n}),s={};t.forEach(e=>{let t=e.args.user,a=e.args.amount;s[t]=(s[t]||0n)+a});let a=Object.entries(s).map(([e,t])=>({user:e,amount:t})).sort((e,t)=>Number(t.amount-e.amount)).slice(0,10);H(a)}catch(e){console.error("Failed to fetch leaderboard:",e)}},tW=async()=>{try{let e=await tI.getBlockNumber(),t=(await tI.getContractEvents({address:N,abi:w,eventName:"BetPlaced",args:{marketId:S},fromBlock:e-10000n})).map(e=>({user:e.args.user,amount:e.args.amount,outcome:e.args.outcome,timestamp:Date.now()})).reverse().slice(0,10);G(t)}catch(e){console.error("Failed to fetch recent bets:",e)}},tY=async e=>{D(!0);try{await tU();let t=(0,o.F)({chain:m.c,transport:(0,d.I)(window.ethereum)}),[s]=await t.requestAddresses(),a=await t.writeContract({address:N,abi:w,functionName:"bet",args:[S,e],value:(0,c.g)(U),account:s,gas:300000n});k({title:"Bet submitted",message:`Transaction: ${a}`,variant:"success"}),await tq(),await tL(),await tW(),await t$(U),eh(a),eg(U),ep(!0)}catch(t){let e=String(t?.message||"Unknown error");e.toLowerCase().includes("market reset")?(k({title:"Market was reset",message:"This market is no longer active. Please pick the latest market.",variant:"warning"}),await tR()):k({title:"Bet failed",message:e,variant:"error"})}finally{D(!1)}},tz=async()=>{if(0>=parseFloat(ej))return void k({title:"Nothing to claim",message:"Your claimable reward is 0.",variant:"warning"});D(!0);try{await tU();let e=(0,o.F)({chain:m.c,transport:(0,d.I)(window.ethereum)}),[t]=await e.requestAddresses(),s=await e.writeContract({address:N,abi:w,functionName:"claim",args:[S],account:t});k({title:"Claim submitted",message:`Transaction: ${s}`,variant:"success"}),await tq(),await tE()}catch(e){k({title:"Claim failed",message:e?.message||"Unknown error",variant:"error"})}finally{D(!1)}},tJ=async e=>{if("superadmin"!==ea)return void k({title:"Not authorized",message:"Only superadmin can resolve markets.",variant:"error"});D(!0);try{await tU();let t=(0,o.F)({chain:m.c,transport:(0,d.I)(window.ethereum)}),[s]=await t.requestAddresses(),a=await t.writeContract({address:N,abi:w,functionName:"resolveMarket",args:[S,e],account:s,gas:500000n});k({title:"Resolve submitted",message:`Transaction: ${a}`,variant:"success"}),await tq()}catch(e){k({title:"Resolve failed",message:e?.message||"Unknown error",variant:"error"})}finally{D(!1)}},tV=async()=>{if(confirm("Are you sure you want to reset all markets?")){D(!0);try{let e=(0,o.F)({chain:m.c,transport:(0,d.I)(window.ethereum)}),[t]=await e.getAddresses(),s=await e.writeContract({address:N,abi:w,functionName:"emergencyReset",account:t});await tI.waitForTransactionReceipt({hash:s}),k({title:"Markets reset",message:"All markets were reset.",variant:"success"}),await tR(),J("market")}catch(e){k({title:"Reset failed",message:e?.message||"Unknown error",variant:"error"})}D(!1)}},tH=async e=>{if(!t)return void k({title:"Wallet not connected",message:"Connect your wallet to withdraw.",variant:"warning"});if(tu)return void k({title:"Wrong network",message:"Switch to BNB Testnet to withdraw.",variant:"warning"});D(!0);try{let t=(0,o.F)({chain:m.c,transport:(0,d.I)(window.ethereum)}),[s]=await t.getAddresses(),a=await t.writeContract({address:N,abi:w,functionName:"emergencyWithdraw",args:[e],account:s});k({title:"Withdraw submitted",message:`Transaction: ${a}`,variant:"success"}),await tI.waitForTransactionReceipt({hash:a}),k({title:"Withdrawn",message:"Refund sent to your wallet.",variant:"success"}),await tf(),await tO()}catch(e){k({title:"Withdraw failed",message:e?.message||"Unknown error",variant:"error"})}finally{D(!1)}},tK=e=>{if(!$)return"1.00";let t=Number($.yesPool)/1e18,s=Number($.noPool)/1e18,a=t+s;return e?t>0?(a/t).toFixed(2):"1.00":s>0?(a/s).toFixed(2):"1.00"},tG=e=>{if(!U||!$)return"0.000";try{let t=(0,c.g)(U),s=BigInt($.yesPool)+BigInt($.noPool)+t,a=(e?BigInt($.yesPool):BigInt($.noPool))+t,l=t*s/a;return(0,i.c)(l-5n*l/100n).slice(0,7)}catch{return"0.000"}};return O&&!$?(0,a.jsxs)("div",{className:"w-full max-w-2xl mx-auto space-y-4 sm:space-y-6",children:[(0,a.jsxs)("div",{className:"premium-card p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,a.jsx)("div",{className:"h-6 w-44 bg-slate-800/70 rounded-lg animate-pulse"}),(0,a.jsx)("div",{className:"h-10 w-28 bg-slate-800/70 rounded-xl animate-pulse"})]}),(0,a.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,a.jsx)("div",{className:"h-4 w-24 bg-slate-800/70 rounded animate-pulse"}),(0,a.jsx)("div",{className:"h-8 w-full bg-slate-800/70 rounded-xl animate-pulse"}),(0,a.jsx)("div",{className:"h-8 w-2/3 bg-slate-800/70 rounded-xl animate-pulse"})]})]}),(0,a.jsx)("div",{className:"premium-card p-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)("div",{className:"h-32 bg-slate-900/50 border border-slate-800 rounded-2xl animate-pulse"}),(0,a.jsx)("div",{className:"h-32 bg-slate-900/50 border border-slate-800 rounded-2xl animate-pulse"})]})})]}):$||O?(0,a.jsxs)("div",{className:"w-full max-w-2xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center gap-4",children:[(0,a.jsx)("div",{className:"flex-1 premium-card p-1.5 flex gap-1 bg-slate-900/50",children:[{id:"market",label:"Overview",icon:(0,a.jsx)(b.A,{size:14})},{id:"leaderboard",label:"Leaderboard",icon:(0,a.jsx)(b.A,{size:14})},{id:"activity",label:"Live",icon:(0,a.jsx)(h.A,{size:14})},{id:"airdrop",label:"Airdrop",icon:(0,a.jsx)(f.A,{size:14}),disabled:!0,badge:"SOON"},{id:"tasks",label:"Tasks",icon:(0,a.jsx)(f.A,{size:14})},{id:"profile",label:"Profile",icon:(0,a.jsx)(g.A,{size:14})},{id:"admin",label:"Admin",icon:(0,a.jsx)(f.A,{size:14})}].map(e=>("admin"!==e.id||et)&&(0,a.jsxs)("button",{disabled:e.disabled,onClick:()=>{e.disabled||J(e.id)},className:`flex-1 py-2.5 rounded-xl text-[10px] font-bold transition-all flex items-center justify-center gap-2 ${e.disabled?"opacity-60 cursor-not-allowed":""} ${z===e.id?"bg-sky-500 text-white shadow-lg shadow-sky-500/20":"text-slate-400 hover:text-white hover:bg-slate-800"}`,children:[e.icon,(0,a.jsx)("span",{className:"hidden sm:inline",children:e.label}),e.badge&&(0,a.jsx)("span",{className:"ml-1 px-1.5 py-0.5 rounded bg-slate-800 text-slate-400 text-[8px] font-black border border-slate-700",children:e.badge})]},e.id))}),(0,a.jsx)(p.pK,{accountStatus:"avatar",chainStatus:"icon",showBalance:!1})]}),(0,a.jsx)("div",{className:"premium-card p-4 bg-slate-900/30 border border-slate-800",children:(0,a.jsx)("div",{className:"flex items-start justify-between gap-4",children:(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("div",{className:"mt-0.5 px-2 py-1 rounded-lg bg-sky-500/10 text-sky-400 text-[10px] font-black border border-sky-500/20",children:"BETA"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-extrabold text-white",children:"Beta test"}),(0,a.jsx)("div",{className:"text-xs text-slate-400 mt-1",children:"This app is in beta. Testnet funds are for testing only. Earned points may be used for future airdrop eligibility."}),(0,a.jsxs)("div",{className:"text-xs text-slate-500 mt-1",children:["Winnings claims include a ",(0,a.jsx)("span",{className:"text-slate-200 font-bold",children:"5%"})," protocol fee."]})]})]})})}),tu&&(0,a.jsx)("div",{className:"premium-card p-4 border border-amber-500/20 bg-amber-500/5",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("div",{className:"mt-0.5 w-8 h-8 rounded-xl bg-amber-500/10 text-amber-400 flex items-center justify-center",children:(0,a.jsx)(f.A,{size:16})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-extrabold text-white",children:"Wrong network"}),(0,a.jsxs)("div",{className:"text-xs text-slate-400 mt-1",children:["This dApp runs on ",(0,a.jsx)("span",{className:"font-bold text-slate-200",children:"BNB Smart Chain Testnet"}),". Switch your wallet network to continue."]})]})]}),(0,a.jsx)("button",{onClick:()=>tU(),className:"premium-btn py-2 px-3 text-xs whitespace-nowrap",children:"Switch Network"})]})}),(0,a.jsxs)("div",{className:"premium-card p-6 min-h-[400px]",children:["market"===z&&$&&(0,a.jsxs)("div",{className:"animate-in fade-in duration-500 flex flex-col h-full",children:[(0,a.jsx)("div",{className:"flex gap-3 overflow-x-auto pb-6 mb-6 custom-scrollbar no-scrollbar",children:E.map(e=>{let t,s,l;return(0,a.jsxs)("button",{onClick:()=>T(e.id),className:`flex-shrink-0 w-48 p-3 rounded-xl border transition-all text-left ${S===e.id?"border-sky-500 bg-sky-500/10":"border-slate-800 bg-slate-900/40 hover:border-slate-700"}`,children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,a.jsx)("span",{className:`text-[8px] font-black px-1.5 py-0.5 rounded border ${e.resolved?"bg-slate-900/60 text-slate-400 border-slate-800":"bg-emerald-500/10 text-emerald-400 border-emerald-500/20"}`,children:e.resolved?`ENDED • ${e.outcome?"YES":"NO"}`:"LIVE"}),(0,a.jsxs)("span",{className:"text-[8px] font-mono text-slate-600",children:["#",e.id.toString()]})]}),(0,a.jsx)("p",{className:"text-[10px] font-bold text-slate-200 truncate mb-2",children:e.question}),(0,a.jsxs)("div",{className:"text-[9px] font-black text-sky-400",children:[(Number(e.yesPool+e.noPool)/1e18).toFixed(3)," BNB"]}),(0,a.jsxs)("div",{className:"mt-1 flex justify-between text-[9px] font-bold text-slate-500",children:[(0,a.jsxs)("span",{children:["YES ",(Number(e.yesPool)/1e18).toFixed(3)]}),(0,a.jsxs)("span",{children:["NO ",(Number(e.noPool)/1e18).toFixed(3)]})]}),(0,a.jsx)("div",{className:"mt-2 h-1.5 w-full rounded-full bg-slate-800 overflow-hidden",children:(l=(s=(t=Number(e.yesPool))+Number(e.noPool))>0?Math.max(4,Math.min(96,t/s*100)):50,(0,a.jsx)("div",{className:"h-full bg-emerald-500/70",style:{width:`${l}%`}}))})]},e.id.toString())})}),(0,a.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsxs)("span",{className:"px-2 py-0.5 bg-sky-500/10 text-sky-500 rounded text-[10px] font-extrabold uppercase border border-sky-500/20",children:["Market #",S.toString()]}),(0,a.jsx)("span",{className:`px-2 py-0.5 rounded text-[10px] font-extrabold border ${"ENDED"===Z?"bg-red-500/10 text-red-500 border-red-500/20":"bg-amber-500/10 text-amber-500 border-amber-500/20"}`,children:"ENDED"===Z?"EXPIRED":Z})]}),(0,a.jsx)("h2",{className:"text-2xl font-extrabold text-white leading-tight",children:$.question})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>window.open(`https://warpcast.com/~/compose?text=Predicting on HolyMarket: ${$.question}&embeds[]=${window.location.href}`),className:"p-2.5 rounded-xl bg-slate-800 text-slate-400 hover:text-white hover:bg-slate-700 transition-all",title:"Share on Warpcast",children:(0,a.jsx)(y.A,{size:18})}),(0,a.jsx)("button",{onClick:()=>window.open(`https://twitter.com/intent/tweet?text=I'm predicting on HolyMarket: ${$.question}&url=${window.location.href}`),className:"p-2.5 rounded-xl bg-slate-800 text-slate-400 hover:text-white hover:bg-slate-700 transition-all",title:"Share on Twitter",children:(0,a.jsx)(v.A,{size:18})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[(0,a.jsx)("div",{className:"space-y-4 md:space-y-0 md:grid md:grid-cols-1 md:gap-4",children:(0,a.jsxs)("div",{className:"p-5 rounded-2xl bg-emerald-500/5 border border-emerald-500/10 flex flex-col",children:[(0,a.jsxs)("span",{className:"text-[10px] font-bold text-emerald-500 mb-3 uppercase tracking-tighter",children:["YES Pool (",tK(!0),"x)"]}),(0,a.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,a.jsx)("span",{className:"text-2xl font-black text-white",children:(Number($.yesPool)/1e18).toFixed(3)}),(0,a.jsx)("span",{className:"text-xs text-slate-500 font-bold",children:"BNB"})]}),(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-emerald-500/10",children:[(0,a.jsx)("span",{className:"text-[10px] text-slate-500 block mb-1",children:"Potential Payout"}),(0,a.jsxs)("span",{className:"text-xs font-bold text-emerald-400",children:[tG(!0)," BNB"]})]})]})}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"p-5 rounded-2xl bg-rose-500/5 border border-rose-500/10 flex flex-col",children:[(0,a.jsxs)("span",{className:"text-[10px] font-bold text-rose-500 mb-3 uppercase tracking-tighter",children:["NO Pool (",tK(!1),"x)"]}),(0,a.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,a.jsx)("span",{className:"text-2xl font-black text-white",children:(Number($.noPool)/1e18).toFixed(3)}),(0,a.jsx)("span",{className:"text-xs text-slate-500 font-bold",children:"BNB"})]}),(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-rose-500/10",children:[(0,a.jsx)("span",{className:"text-[10px] text-slate-500 block mb-1",children:"Potential Payout"}),(0,a.jsxs)("span",{className:"text-xs font-bold text-rose-400",children:[tG(!1)," BNB"]})]})]})})]}),(0,a.jsx)("div",{className:"mt-auto",children:$.resolved?(0,a.jsxs)("div",{className:"p-6 rounded-2xl bg-slate-800/50 border border-slate-700 flex flex-col items-center text-center",children:[(0,a.jsx)("span",{className:"text-[10px] font-bold text-slate-500 mb-4 uppercase tracking-widest",children:"Winning Outcome"}),(0,a.jsx)("div",{className:`text-4xl font-black mb-6 ${$.outcome?"text-emerald-400":"text-rose-500"}`,children:$.outcome?"YES ✓":"NO ✓"}),(0,a.jsxs)("div",{className:"w-full p-4 rounded-2xl bg-slate-900/40 border border-slate-800 text-left mb-4",children:[(0,a.jsx)("div",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Your bet"}),(0,a.jsxs)("div",{className:"mt-2 flex justify-between gap-4",children:[(0,a.jsxs)("div",{className:"text-xs font-bold text-emerald-400",children:["YES: ",eN?Number((0,i.c)(eN.yesAmount)).toFixed(4):"0.0000"," BNB"]}),(0,a.jsxs)("div",{className:"text-xs font-bold text-rose-400",children:["NO: ",eN?Number((0,i.c)(eN.noAmount)).toFixed(4):"0.0000"," BNB"]})]})]}),eN?.claimed?(0,a.jsx)("div",{className:"w-full p-4 rounded-2xl bg-slate-900/40 border border-slate-800 text-sm text-slate-300 font-bold",children:"Already claimed."}):eN&&0n===eN.yesAmount&&0n===eN.noAmount?(0,a.jsx)("div",{className:"w-full p-4 rounded-2xl bg-slate-900/40 border border-slate-800 text-sm text-slate-400 font-bold",children:"You did not place a bet in this market."}):0>=parseFloat(ej)?(0,a.jsx)("div",{className:"w-full p-4 rounded-2xl bg-slate-900/40 border border-slate-800 text-sm text-slate-400 font-bold",children:"No winnings for this wallet."}):(0,a.jsx)("button",{onClick:tz,disabled:R||tu||!t||0>=parseFloat(ej),className:"w-full premium-btn py-4 bg-white text-slate-900 hover:bg-slate-100 disabled:opacity-60 disabled:cursor-not-allowed",children:R?"Processing...":`Claim ${Number(ej).toFixed(4)} BNB Reward`}),(!t||tu)&&(0,a.jsx)("div",{className:"mt-3 text-[11px] text-slate-500",children:"Connect your wallet and switch to BNB Testnet to claim."})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-1",children:[(0,a.jsx)("div",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Amount"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[W?(0,a.jsx)("span",{className:"text-[10px] font-bold text-slate-500",children:"Loading..."}):null!==_?(0,a.jsxs)("span",{className:"text-[10px] font-bold text-slate-500",children:["Available: ",Number((0,i.c)(_)).toFixed(4)," BNB"]}):(0,a.jsx)("span",{className:"text-[10px] font-bold text-slate-600",children:"Available: —"}),(0,a.jsx)("button",{type:"button",disabled:null===_||W||tu||!t,onClick:()=>{if(null===_)return;let e=(0,c.g)("0.0002"),t=_>e?_-e:0n;t<=0n?k({title:"Insufficient balance",message:"Not enough BNB for a bet (after gas reserve).",variant:"warning"}):q((0,i.c)(t))},className:"px-2 py-1 rounded-lg bg-slate-900/60 border border-slate-800 text-[10px] font-extrabold text-slate-300 hover:border-slate-700 hover:text-white disabled:opacity-60 disabled:cursor-not-allowed",children:"MAX"})]})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:[{label:"0.001",value:"0.001"},{label:"0.005",value:"0.005"},{label:"0.01",value:"0.01"},{label:"0.05",value:"0.05"}].map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>q(e.value),className:`px-3 py-1.5 rounded-full text-[10px] font-extrabold border transition-all ${U===e.value?"bg-sky-500/15 text-sky-300 border-sky-500/30":"bg-slate-900/40 text-slate-400 border-slate-800 hover:border-slate-700 hover:text-slate-200"}`,children:[e.label," BNB"]},e.value))}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"number",value:U,onChange:e=>q(e.target.value),className:"w-full premium-input py-4 text-xl pr-16 bg-slate-900/80"}),(0,a.jsx)("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-500 font-bold",children:"BNB"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)("button",{onClick:()=>tY(!0),disabled:R||tu||!t,className:`premium-btn py-4 bg-emerald-600 hover:bg-emerald-500 shadow-xl shadow-emerald-600/20 ${R||tu||!t?"opacity-60 cursor-not-allowed hover:transform-none":""}`,children:R?"Processing...":"VOTE YES"}),(0,a.jsx)("button",{onClick:()=>tY(!1),disabled:R||tu||!t,className:`premium-btn py-4 bg-rose-600 hover:bg-rose-500 shadow-xl shadow-rose-600/20 ${R||tu||!t?"opacity-60 cursor-not-allowed hover:transform-none":""}`,children:R?"Processing...":"VOTE NO"})]}),!t&&(0,a.jsx)("div",{className:"text-center text-xs text-slate-500",children:"Connect your wallet to place a vote."})]})})]}),"tasks"===z&&(0,a.jsxs)("div",{className:"space-y-6 animate-in fade-in",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-white",children:"Tasks"}),(0,a.jsx)("button",{type:"button",onClick:()=>tg(),className:"px-3 py-1.5 rounded-full bg-slate-900/40 border border-slate-800 text-[10px] font-extrabold text-slate-400 hover:text-white hover:border-slate-700 transition-all",children:"Refresh"})]}),(0,a.jsxs)("div",{className:"p-4 rounded-2xl bg-slate-900/40 border border-slate-800",children:[(0,a.jsx)("div",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Eligibility"}),(0,a.jsxs)("div",{className:"mt-2 grid grid-cols-1 sm:grid-cols-3 gap-3",children:[(0,a.jsxs)("div",{className:"p-3 rounded-xl bg-slate-950/30 border border-slate-800",children:[(0,a.jsx)("div",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Points"}),(0,a.jsx)("div",{className:"mt-1 text-sm font-black text-slate-200",children:eO?eO.points:"—"})]}),(0,a.jsxs)("div",{className:"p-3 rounded-xl bg-slate-950/30 border border-slate-800",children:[(0,a.jsx)("div",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Volume"}),(0,a.jsx)("div",{className:"mt-1 text-sm font-black text-slate-200",children:eO?`${Number(eO.volumeBnb).toFixed(4)} BNB`:"—"})]}),(0,a.jsxs)("div",{className:"p-3 rounded-xl bg-slate-950/30 border border-slate-800",children:[(0,a.jsx)("div",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Follow tasks"}),(0,a.jsx)("div",{className:"mt-1 text-sm font-black text-slate-200",children:eO?eO.followTasks:"—"})]})]}),!e&&(0,a.jsx)("div",{className:"mt-3 text-[11px] text-slate-500",children:"Connect your wallet to track eligibility and claim tasks."})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[eR?(0,a.jsx)("div",{className:"text-slate-500 text-sm",children:"Loading tasks..."}):(e$||[]).filter(e=>e?.active!==!1).map(t=>{let s=!!eE?.[t.id],l=!!eU?.[t.id],r=t.requirements||{},n=[],i=Number(eO?.points??0),o=Number(eO?.volumeBnb??0),d=Number(eO?.followTasks??0),c=Date.now(),m=t.startAt?Date.parse(t.startAt):NaN,x=t.endAt?Date.parse(t.endAt):NaN,u=t.startAt&&Number.isFinite(m)&&c<m,p=t.endAt&&Number.isFinite(x)&&c>x;u&&n.push("not started"),p&&n.push("ended"),void 0!==r.minPoints&&i<Number(r.minPoints)&&n.push(`${Number(r.minPoints)} pts`),void 0!==r.minVolumeBnb&&o<Number(r.minVolumeBnb)&&n.push(`${Number(r.minVolumeBnb)} BNB volume`),void 0!==r.minFollowTasks&&d<Number(r.minFollowTasks)&&n.push(`${Number(r.minFollowTasks)} follow tasks`);let b=e&&0===n.length,h=("link"===t.type||"follow"===t.type)&&!!t.url,f=!h||!!e_?.[t.id],g=[void 0!==r.minPoints?`min ${r.minPoints} pts`:null,void 0!==r.minVolumeBnb?`min ${r.minVolumeBnb} BNB volume`:null,void 0!==r.minFollowTasks?`min ${r.minFollowTasks} follow tasks`:null].filter(Boolean).join(" • ");return(0,a.jsx)("div",{className:"p-5 rounded-2xl bg-slate-900/50 border border-slate-800",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:`px-2 py-0.5 rounded text-[8px] font-black uppercase border ${"follow"===t.type?"bg-sky-500/10 text-sky-400 border-sky-500/20":"bg-emerald-500/10 text-emerald-400 border-emerald-500/20"}`,children:t.type}),"daily"===t.repeat&&(0,a.jsx)("span",{className:"px-2 py-0.5 rounded text-[8px] font-black uppercase border bg-purple-500/10 text-purple-300 border-purple-500/20",children:"DAILY"}),!s&&e&&n.length>0&&(0,a.jsx)("span",{className:"px-2 py-0.5 rounded text-[8px] font-black uppercase border bg-amber-500/10 text-amber-400 border-amber-500/20",children:"LOCKED"}),(0,a.jsx)("div",{className:"text-sm font-black text-white truncate",children:t.title})]}),t.description&&(0,a.jsx)("div",{className:"mt-1 text-[11px] text-slate-500",children:t.description}),g&&(0,a.jsxs)("div",{className:"mt-2 text-[10px] font-bold text-slate-600 uppercase tracking-widest",children:["Requires: ",g]}),(t.startAt||t.endAt)&&(0,a.jsxs)("div",{className:"mt-2 text-[11px] text-slate-500",children:[t.startAt?`Starts: ${new Date(t.startAt).toLocaleString()}`:"",t.startAt&&t.endAt?" • ":"",t.endAt?`Ends: ${new Date(t.endAt).toLocaleString()}`:""]}),!s&&e&&n.length>0&&(0,a.jsxs)("div",{className:"mt-2 text-[11px] text-amber-400 font-bold",children:["Missing: ",n.join(" • ")]}),!s&&e&&0===n.length&&h&&!f&&(0,a.jsx)("div",{className:"mt-2 text-[11px] text-slate-500",children:"Open the link to unlock claim."}),!e&&(0,a.jsx)("div",{className:"mt-2 text-[11px] text-slate-500",children:"Connect wallet to check eligibility."})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-sm font-black text-sky-400",children:["+",t.points," PTS"]}),(0,a.jsxs)("div",{className:"mt-2 flex gap-2 justify-end",children:[t.url&&("link"===t.type||"follow"===t.type)&&(0,a.jsx)("button",{type:"button",onClick:()=>{window.open(t.url,"_blank"),(t=>{if(e)try{let s=ty(e),a=window.localStorage.getItem(s),l=a?JSON.parse(a):{},r={...l&&"object"==typeof l?l:{},[t]:!0};window.localStorage.setItem(s,JSON.stringify(r)),eL(e=>({...e,[t]:!0}))}catch{eL(e=>({...e,[t]:!0}))}})(t.id)},className:"px-3 py-2 rounded-lg bg-slate-900/40 border border-slate-800 text-[10px] font-extrabold text-slate-300 hover:text-white hover:border-slate-700 transition-all",children:"Open"}),(0,a.jsx)("button",{type:"button",disabled:s||l||!(b&&f),onClick:()=>tv(t.id),className:"px-3 py-2 rounded-lg bg-white text-slate-900 text-[10px] font-extrabold hover:bg-slate-100 disabled:opacity-60 disabled:cursor-not-allowed",children:s?"Claimed":l?"Claiming...":"Claim"})]})]})]})},t.id)}),!eR&&(!e$||0===e$.length)&&(0,a.jsx)("div",{className:"text-center py-20 bg-slate-900/30 rounded-2xl border border-dashed border-slate-800",children:(0,a.jsx)("p",{className:"text-slate-500 text-sm",children:"No tasks yet."})})]})]}),"airdrop"===z&&(0,a.jsx)("div",{className:"animate-in fade-in duration-500 flex flex-col items-center justify-center min-h-[360px] text-center",children:(0,a.jsxs)("div",{className:"w-full max-w-md premium-card p-8 bg-slate-900/40",children:[(0,a.jsx)("div",{className:"w-14 h-14 rounded-2xl bg-slate-800/60 border border-slate-700 mx-auto flex items-center justify-center text-slate-300 font-black text-lg",children:"⏳"}),(0,a.jsx)("h3",{className:"mt-5 text-xl font-black text-white",children:"Airdrop"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-slate-400",children:"Soon."}),(0,a.jsx)("div",{className:"mt-6 text-[11px] text-slate-500",children:"This section is disabled during test phase."})]})}),"profile"===z&&(0,a.jsxs)("div",{className:"space-y-6 animate-in fade-in",children:[(0,a.jsxs)("div",{className:"p-6 rounded-3xl bg-sky-500/10 border border-sky-500/20 mb-8 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-black text-white mb-1",children:"Your Dashboard"}),(0,a.jsxs)("p",{className:"text-xs text-sky-400 font-bold uppercase tracking-widest",children:[Q.length," Predictions Made"]}),(0,a.jsxs)("p",{className:"text-[11px] text-slate-300 font-bold mt-2",children:["Points: ",(0,a.jsx)("span",{className:"text-white",children:eC})]}),(0,a.jsxs)("p",{className:"text-[11px] text-slate-500 mt-2",children:["Points are important for future airdrops. Winnings claims have a ",(0,a.jsx)("span",{className:"text-slate-200 font-bold",children:"5%"})," protocol fee."]})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-sky-500/20 rounded-2xl flex items-center justify-center text-sky-400",children:(0,a.jsx)(b.A,{size:24})})]}),e&&(0,a.jsxs)("div",{className:"p-4 rounded-2xl bg-slate-900/40 border border-slate-800",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Your referral link"}),(0,a.jsx)("div",{className:"mt-2 font-mono text-[11px] text-slate-300 break-all",children:`${window.location.origin}/?ref=${e}`})]}),(0,a.jsx)("button",{type:"button",className:"premium-btn py-2 px-3 text-xs",onClick:async()=>{let t=`${window.location.origin}/?ref=${e}`;try{await navigator.clipboard.writeText(t),k({title:"Copied",message:"Referral link copied.",variant:"success"})}catch{k({title:"Copy failed",message:t,variant:"warning"})}},children:"Copy"})]}),(0,a.jsxs)("div",{className:"mt-3 text-[11px] text-slate-500",children:["When someone joins with your link: both sides get ",(0,a.jsx)("span",{className:"text-slate-200 font-bold",children:"+50"})," points. You also earn ",(0,a.jsx)("span",{className:"text-slate-200 font-bold",children:"10%"})," of their future points."]})]}),(0,a.jsxs)("div",{className:"p-5 rounded-2xl bg-slate-900/40 border border-slate-800",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs font-extrabold text-white",children:"BNB Testnet Faucet"}),(0,a.jsx)("div",{className:"mt-1 text-[11px] text-slate-500",children:"Need test BNB to place bets? Use a faucet and fund your wallet."})]}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full bg-amber-500/10 text-amber-400 text-[10px] font-black border border-amber-500/20",children:"TESTNET"})]}),(0,a.jsxs)("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,a.jsxs)("a",{href:"https://testnet.binance.org/faucet-smart",target:"_blank",rel:"noreferrer",className:"p-4 rounded-xl bg-slate-950/40 border border-slate-800 hover:border-slate-700 transition-all",children:[(0,a.jsx)("div",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Official"}),(0,a.jsx)("div",{className:"mt-1 text-sm font-black text-slate-200",children:"BSC Testnet Faucet"}),(0,a.jsx)("div",{className:"mt-1 text-[11px] text-slate-500",children:"testnet.binance.org"})]}),(0,a.jsxs)("a",{href:"https://faucet.quicknode.com/binance-smart-chain/bnb-testnet",target:"_blank",rel:"noreferrer",className:"p-4 rounded-xl bg-slate-950/40 border border-slate-800 hover:border-slate-700 transition-all",children:[(0,a.jsx)("div",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Alt"}),(0,a.jsx)("div",{className:"mt-1 text-sm font-black text-slate-200",children:"QuickNode Faucet"}),(0,a.jsx)("div",{className:"mt-1 text-[11px] text-slate-500",children:"faucet.quicknode.com"})]})]}),(0,a.jsxs)("div",{className:"mt-4 p-3 rounded-xl bg-slate-950/30 border border-slate-800",children:[(0,a.jsx)("div",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Your wallet address"}),(0,a.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex-1 font-mono text-[11px] text-slate-300 break-all",children:e||"Connect your wallet to copy your address"}),(0,a.jsx)("button",{type:"button",disabled:!e,className:"premium-btn py-2 px-3 text-xs disabled:opacity-60 disabled:cursor-not-allowed",onClick:async()=>{if(e)try{await navigator.clipboard.writeText(e),k({title:"Copied",message:"Wallet address copied.",variant:"success"})}catch{k({title:"Copy failed",message:e,variant:"warning"})}},children:"Copy"})]}),(0,a.jsxs)("div",{className:"mt-2 text-[11px] text-slate-500",children:["Make sure your wallet network is set to ",(0,a.jsx)("span",{className:"text-slate-200 font-bold",children:"BNB Smart Chain Testnet"}),"."]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"text-xs font-bold text-slate-500 uppercase tracking-[0.2em] ml-1",children:"Betting History"}),(0,a.jsxs)("div",{className:"space-y-3 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar",children:[Q.map((e,s)=>{let l,r;return(0,a.jsxs)("div",{className:"p-4 rounded-2xl bg-slate-900/50 border border-slate-800 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("span",{className:"text-[10px] text-slate-500 font-bold mb-1",children:["MARKET #",e.marketId.toString()]}),(0,a.jsxs)("span",{className:`text-xs font-black ${e.outcome?"text-emerald-400":"text-rose-400"}`,children:["Voted ",e.outcome?"YES":"NO"]}),(r=(l=eS[e.marketId.toString()])?l.yesAmount+l.noAmount:0n,e.marketId<=A&&l&&!l.claimed&&r>0n?(0,a.jsx)("button",{type:"button",disabled:R||tu||!t,onClick:()=>tH(e.marketId),className:"mt-2 inline-flex w-fit px-3 py-1.5 rounded-full bg-amber-500/10 text-amber-400 border border-amber-500/20 text-[10px] font-extrabold hover:bg-amber-500/15 disabled:opacity-60 disabled:cursor-not-allowed",children:"Emergency Withdraw"}):null)]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("span",{className:"text-sm font-black text-white",children:[Number((0,i.c)(e.amount)).toFixed(4)," BNB"]}),(0,a.jsxs)("span",{className:"block text-[10px] text-slate-600",children:["Block #",e.blockNumber.toString()]})]})]},s)}),0===Q.length&&(0,a.jsx)("div",{className:"text-center py-20 bg-slate-900/30 rounded-2xl border border-dashed border-slate-800",children:(0,a.jsx)("p",{className:"text-slate-500 text-sm",children:"No activity found for this wallet."})})]})]})]}),"leaderboard"===z&&(0,a.jsxs)("div",{className:"space-y-6 animate-in fade-in",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-white",children:"Leaderboard"}),(0,a.jsx)("button",{type:"button",onClick:()=>tA(),className:"px-3 py-1.5 rounded-full bg-slate-900/40 border border-slate-800 text-[10px] font-extrabold text-slate-400 hover:text-white hover:border-slate-700 transition-all",children:"Refresh"})]}),(0,a.jsxs)("div",{className:"text-[11px] text-slate-500",children:["Points are tracked for potential future airdrops. Winnings claims have a ",(0,a.jsx)("span",{className:"text-slate-200 font-bold",children:"5%"})," protocol fee."]}),(0,a.jsxs)("div",{className:"space-y-2",children:[eA.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-900/50 rounded-xl border border-slate-800/50 hover:border-slate-700 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center font-black text-sm ${0===t?"bg-amber-500/20 text-amber-500":1===t?"bg-slate-300/20 text-slate-300":2===t?"bg-orange-500/20 text-orange-400":"bg-slate-800 text-slate-500"}`,children:t+1}),(0,a.jsxs)("span",{className:"text-sm font-mono text-slate-300",children:[e.user.slice(0,8),"...",e.user.slice(-4)]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("span",{className:"text-sm font-black text-sky-400",children:e.points}),(0,a.jsx)("span",{className:"text-[10px] text-slate-600 ml-1 font-bold",children:"PTS"})]})]},t)),0===eA.length&&(0,a.jsx)("div",{className:"text-center py-20 bg-slate-900/30 rounded-2xl border border-dashed border-slate-800",children:(0,a.jsx)("p",{className:"text-slate-500 text-sm",children:"No points yet."})})]})]}),"activity"===z&&(0,a.jsxs)("div",{className:"space-y-6 animate-in fade-in",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-white",children:"Live Activity"}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5 bg-sky-500/10 px-2 py-1 rounded-full text-sky-500 text-[10px] font-bold",children:[(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-sky-500 rounded-full animate-pulse"}),"LIVE"]})]}),(0,a.jsx)("div",{className:"space-y-3",children:0===K.length?(0,a.jsx)("p",{className:"text-slate-500 text-center py-20",children:"Monitoring blockchain activity..."}):K.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-900/30 rounded-xl border border-slate-800 transition-all hover:bg-slate-900/50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:`px-2 py-0.5 rounded text-[8px] font-black uppercase border ${e.outcome?"bg-emerald-500/10 text-emerald-500 border-emerald-500/20":"bg-rose-500/10 text-rose-500 border-rose-500/20"}`,children:e.outcome?"YES":"NO"}),(0,a.jsxs)("span",{className:"text-xs font-mono text-slate-400",children:[e.user.slice(0,6),"..."]})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("span",{className:"text-xs font-bold text-white",children:["+",Number((0,i.c)(e.amount)).toFixed(4)," BNB"]})})]},t))})]}),"admin"===z&&(0,a.jsxs)("div",{className:"space-y-8 animate-in zoom-in-95 duration-300",children:[(0,a.jsxs)("div",{className:"p-6 rounded-2xl bg-slate-900/50 border border-slate-800",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-bold text-slate-300 uppercase tracking-widest",children:"Admin Access"}),(0,a.jsxs)("div",{className:"mt-2 text-xs text-slate-400",children:["Your role: ",(0,a.jsx)("span",{className:"text-slate-200 font-bold",children:ea||"none"})]}),(0,a.jsxs)("div",{className:"mt-1 text-[11px] text-slate-500",children:["Only ",(0,a.jsx)("span",{className:"text-slate-200 font-bold",children:"superadmin"})," can add/remove admins or change roles."]})]}),(0,a.jsx)("button",{type:"button",onClick:()=>{tS(),tT(),tN()},disabled:!e||!ea,className:"px-3 py-1.5 rounded-full bg-slate-900/40 border border-slate-800 text-[10px] font-extrabold text-slate-400 hover:text-white hover:border-slate-700 transition-all disabled:opacity-60 disabled:cursor-not-allowed",children:"Refresh"})]}),!ea&&(0,a.jsx)("div",{className:"mt-6 text-[11px] text-slate-500",children:"You don't have admin access."}),ea&&(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 rounded-xl bg-slate-900/30 border border-slate-800",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("div",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Admins"}),(0,a.jsx)("div",{className:"text-[10px] font-bold text-slate-600",children:er.length})]}),(0,a.jsxs)("div",{className:"space-y-2 max-h-[220px] overflow-y-auto pr-2 custom-scrollbar",children:[er.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3 p-3 rounded-lg bg-slate-900/40 border border-slate-800",children:[(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("div",{className:"text-xs font-mono text-slate-300 truncate",children:e.address}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-[9px] font-black uppercase border ${"superadmin"===e.role?"bg-amber-500/10 text-amber-400 border-amber-500/20":"bg-sky-500/10 text-sky-400 border-sky-500/20"}`,children:e.role})})]}),(0,a.jsx)("button",{type:"button",disabled:"superadmin"!==ea||em,onClick:()=>tB(e.address),className:"px-3 py-2 rounded-lg bg-rose-500/10 text-rose-500 border border-rose-500/20 text-[10px] font-extrabold hover:bg-rose-600 hover:text-white transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Remove"})]},e.address)),0===er.length&&(0,a.jsx)("div",{className:"text-center py-10 bg-slate-900/20 rounded-xl border border-dashed border-slate-800",children:(0,a.jsx)("p",{className:"text-slate-500 text-xs",children:"No admins found."})})]})]}),(0,a.jsxs)("div",{className:"p-4 rounded-xl bg-slate-900/30 border border-slate-800",children:[(0,a.jsx)("div",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-3",children:"Add / Update Admin"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-widest ml-1",children:"Wallet address"}),(0,a.jsx)("input",{value:ei,onChange:e=>eo(e.target.value),placeholder:"0x...",className:"w-full premium-input focus:bg-slate-900",disabled:"superadmin"!==ea||em})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-widest ml-1",children:"Role"}),(0,a.jsxs)("select",{value:ed,onChange:e=>ec(e.target.value),className:"w-full premium-input focus:bg-slate-900",disabled:"superadmin"!==ea||em,children:[(0,a.jsx)("option",{value:"admin",children:"admin"}),(0,a.jsx)("option",{value:"superadmin",children:"superadmin"})]})]}),(0,a.jsx)("button",{type:"button",onClick:()=>tC(),disabled:"superadmin"!==ea||em||!ei.trim(),className:"w-full premium-btn py-3 disabled:opacity-60 disabled:cursor-not-allowed",children:em?"Saving...":"Save Admin"}),"superadmin"!==ea&&(0,a.jsxs)("div",{className:"text-[11px] text-slate-500",children:["You need ",(0,a.jsx)("span",{className:"text-slate-200 font-bold",children:"superadmin"})," role to manage admins."]})]})]})]})]}),ea&&(0,a.jsxs)("div",{className:"p-6 rounded-2xl bg-slate-900/50 border border-slate-800",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-bold text-slate-300 uppercase tracking-widest",children:"Tasks"}),(0,a.jsx)("div",{className:"mt-1 text-[11px] text-slate-500",children:"Create link or follow tasks with optional requirements."})]}),(0,a.jsx)("button",{type:"button",onClick:()=>tN(),disabled:!e||!ea||ti,className:"px-3 py-1.5 rounded-full bg-slate-900/40 border border-slate-800 text-[10px] font-extrabold text-slate-400 hover:text-white hover:border-slate-700 transition-all disabled:opacity-60 disabled:cursor-not-allowed",children:"Refresh"})]}),(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 rounded-xl bg-slate-900/30 border border-slate-800",children:[(0,a.jsx)("div",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Create / Update Task"}),(0,a.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,a.jsxs)("select",{value:eV,onChange:e=>eH(e.target.value),className:"w-full premium-input focus:bg-slate-900",children:[(0,a.jsx)("option",{value:"link",children:"link"}),(0,a.jsx)("option",{value:"follow",children:"follow"}),(0,a.jsx)("option",{value:"checkin",children:"checkin"})]}),(0,a.jsxs)("select",{value:eK,onChange:e=>eG(e.target.value),className:"w-full premium-input focus:bg-slate-900",children:[(0,a.jsx)("option",{value:"none",children:"one-time"}),(0,a.jsx)("option",{value:"daily",children:"daily"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 text-xs text-slate-300 font-bold",children:[(0,a.jsx)("input",{type:"checkbox",checked:e6,onChange:e=>e3(e.target.checked)}),"Active"]})]}),(0,a.jsx)("input",{value:eQ,onChange:e=>eX(e.target.value),placeholder:"Task title",className:"w-full premium-input focus:bg-slate-900"}),"checkin"!==eV&&(0,a.jsx)("input",{value:e1,onChange:e=>e5(e.target.value),placeholder:"https://...",className:"w-full premium-input focus:bg-slate-900"}),(0,a.jsx)("textarea",{value:eZ,onChange:e=>e0(e.target.value),placeholder:"Description (optional)",className:"w-full premium-input focus:bg-slate-900",rows:3}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-widest ml-1",children:"Reward points"}),(0,a.jsx)("input",{value:e2,onChange:e=>e4(e.target.value),placeholder:"e.g. 100",className:"w-full premium-input focus:bg-slate-900"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-widest ml-1",children:"Task ID"}),(0,a.jsx)("input",{value:ez,onChange:e=>eJ(e.target.value),placeholder:"e.g. x_follow_holymarket",className:"w-full premium-input focus:bg-slate-900"})]})]}),(0,a.jsx)("div",{className:"text-[11px] text-slate-600",children:"Leave Task ID empty to auto-generate. Use a fixed ID to update the same task later."}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-widest ml-1",children:"Start time (optional)"}),(0,a.jsx)("input",{value:e8,onChange:e=>e9(e.target.value),type:"datetime-local",className:"w-full premium-input focus:bg-slate-900"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-widest ml-1",children:"End time (optional)"}),(0,a.jsx)("input",{value:e7,onChange:e=>te(e.target.value),type:"datetime-local",className:"w-full premium-input focus:bg-slate-900"})]})]}),(0,a.jsxs)("div",{className:"text-[11px] text-slate-600",children:["Times are entered in your local timezone and stored/enforced as UTC. Daily tasks reset at ",(0,a.jsx)("span",{className:"font-mono",children:"00:00 UTC"}),"."]}),(0,a.jsxs)("div",{className:"p-3 rounded-xl bg-slate-950/30 border border-slate-800",children:[(0,a.jsx)("div",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Optional requirements"}),(0,a.jsx)("div",{className:"mt-1 text-[11px] text-slate-600",children:"Set any of these to lock the task until the user qualifies."}),(0,a.jsxs)("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-3 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-widest ml-1",children:"Min points"}),(0,a.jsx)("input",{value:tt,onChange:e=>ts(e.target.value),placeholder:"e.g. 500",className:"w-full premium-input focus:bg-slate-900"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-widest ml-1",children:"Min volume (BNB)"}),(0,a.jsx)("input",{value:ta,onChange:e=>tl(e.target.value),placeholder:"e.g. 0.25",className:"w-full premium-input focus:bg-slate-900"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-widest ml-1",children:"Min follow tasks"}),(0,a.jsx)("input",{value:tr,onChange:e=>tn(e.target.value),placeholder:"e.g. 3",className:"w-full premium-input focus:bg-slate-900"})]})]}),(0,a.jsx)("div",{className:"mt-2 text-[11px] text-slate-600",children:"Leave blank to disable a specific requirement."})]}),(0,a.jsx)("button",{type:"button",disabled:ti||!eQ||!e1,onClick:()=>tw(),className:"w-full premium-btn py-3 disabled:opacity-60 disabled:cursor-not-allowed",children:ti?"Saving...":"Save Task"})]})]}),(0,a.jsxs)("div",{className:"p-4 rounded-xl bg-slate-900/30 border border-slate-800",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("div",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Existing Tasks"}),(0,a.jsx)("div",{className:"text-[10px] font-bold text-slate-600",children:eW.length})]}),(0,a.jsxs)("div",{className:"space-y-2 max-h-[340px] overflow-y-auto pr-2 custom-scrollbar",children:[eW.map(e=>(0,a.jsx)("div",{className:"p-3 rounded-lg bg-slate-900/40 border border-slate-800",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("div",{className:"text-xs font-black text-slate-200 truncate",children:e.title}),(0,a.jsx)("div",{className:"mt-1 text-[10px] font-mono text-slate-500 truncate",children:e.id}),(0,a.jsxs)("div",{className:"mt-1 text-[10px] text-slate-600",children:[e.type," • ",e.active?"active":"inactive"," • +",e.points," pts"]}),"daily"===e.repeat&&(0,a.jsx)("div",{className:"mt-1 text-[10px] text-slate-600",children:"repeat: daily"}),(e.startAt||e.endAt)&&(0,a.jsxs)("div",{className:"mt-1 text-[10px] text-slate-600 truncate",children:[e.startAt?`start ${new Date(e.startAt).toLocaleString()}`:"",e.startAt&&e.endAt?" • ":"",e.endAt?`end ${new Date(e.endAt).toLocaleString()}`:""]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{eJ(e.id||""),eH(e.type),eG("daily"===e.repeat?"daily":"none"),eX(e.title||""),e0(e.description||""),e5(e.url||""),e4(String(e.points??"")),e3(!!e.active),e9(tb(e.startAt?String(e.startAt):"")),te(tb(e.endAt?String(e.endAt):"")),ts(e.requirements?.minPoints!==void 0?String(e.requirements.minPoints):""),tl(e.requirements?.minVolumeBnb!==void 0?String(e.requirements.minVolumeBnb):""),tn(e.requirements?.minFollowTasks!==void 0?String(e.requirements.minFollowTasks):"")},className:"px-3 py-2 rounded-lg bg-slate-900/40 border border-slate-800 text-[10px] font-extrabold text-slate-300 hover:text-white hover:border-slate-700",children:"Edit"}),(0,a.jsx)("button",{type:"button",disabled:ti,onClick:()=>tj(e.id),className:"px-3 py-2 rounded-lg bg-rose-500/10 text-rose-500 border border-rose-500/20 text-[10px] font-extrabold hover:bg-rose-600 hover:text-white disabled:opacity-60 disabled:cursor-not-allowed",children:"Remove"})]})]})},e.id)),0===eW.length&&(0,a.jsx)("div",{className:"text-center py-16 bg-slate-900/30 rounded-2xl border border-dashed border-slate-800",children:(0,a.jsx)("p",{className:"text-slate-500 text-sm",children:"No tasks yet."})})]})]})]})]}),(0,a.jsxs)("div",{className:"p-6 rounded-2xl bg-sky-500/5 border border-sky-500/10",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-white mb-6",children:"New Discovery Market"}),(0,a.jsxs)("form",{onSubmit:t_,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest ml-1",children:"Market Question"}),(0,a.jsx)("input",{type:"text",required:!0,value:td,onChange:e=>tc(e.target.value),placeholder:"e.g., Will BTC hit $100k this month?",className:"w-full premium-input focus:bg-slate-900"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest ml-1",children:"Duration Window (s)"}),(0,a.jsx)("input",{type:"number",required:!0,value:tm,onChange:e=>tx(e.target.value),className:"w-full premium-input focus:bg-slate-900"}),(0,a.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>tx("3600"),className:"flex-1 py-1.5 bg-slate-800 text-[10px] rounded-lg hover:bg-slate-700 font-bold transition-all",children:"1 Hour"}),(0,a.jsx)("button",{type:"button",onClick:()=>tx("86400"),className:"flex-1 py-1.5 bg-slate-800 text-[10px] rounded-lg hover:bg-slate-700 font-bold transition-all",children:"24 Hours"}),(0,a.jsx)("button",{type:"button",onClick:()=>tx("604800"),className:"flex-1 py-1.5 bg-slate-800 text-[10px] rounded-lg hover:bg-slate-700 font-bold transition-all",children:"7 Days"})]})]}),(0,a.jsx)("button",{type:"submit",disabled:R||tu||!t||"superadmin"!==ea,className:"w-full premium-btn py-4 shadow-xl shadow-sky-500/20 disabled:opacity-60 disabled:cursor-not-allowed",children:R?"Simulating...":"Launch Discovery Market "}),(!t||tu)&&(0,a.jsx)("div",{className:"mt-4 text-[11px] text-slate-500",children:"Connect your wallet and switch to BNB Testnet to use admin actions."}),t&&!tu&&"superadmin"!==ea&&(0,a.jsxs)("div",{className:"mt-4 text-[11px] text-slate-500",children:["Only ",(0,a.jsx)("span",{className:"text-slate-200 font-bold",children:"superadmin"})," can create markets."]})]})]}),!$?.resolved&&(0,a.jsxs)("div",{className:"p-6 rounded-2xl bg-slate-900/50 border border-slate-800",children:[(0,a.jsx)("h3",{className:"text-sm font-bold text-slate-300 mb-6 uppercase tracking-widest text-center",children:"Resolve Market Discovery"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)("button",{onClick:()=>tJ(!0),disabled:R||tu||!t||"superadmin"!==ea,className:"py-3 bg-emerald-600/10 text-emerald-500 border border-emerald-500/20 rounded-xl text-xs font-bold hover:bg-emerald-600 hover:text-white transition-all disabled:opacity-60 disabled:cursor-not-allowed",children:"YES Outcome"}),(0,a.jsx)("button",{onClick:()=>tJ(!1),disabled:R||tu||!t||"superadmin"!==ea,className:"py-3 bg-rose-600/10 text-rose-500 border border-rose-500/20 rounded-xl text-xs font-bold hover:bg-rose-600 hover:text-white transition-all disabled:opacity-60 disabled:cursor-not-allowed",children:"NO Outcome"})]}),t&&!tu&&"superadmin"!==ea&&(0,a.jsxs)("div",{className:"mt-4 text-[11px] text-slate-500",children:["Only ",(0,a.jsx)("span",{className:"text-slate-200 font-bold",children:"superadmin"})," can resolve markets."]})]}),(0,a.jsxs)("div",{className:"p-6 rounded-2xl bg-rose-500/5 border border-rose-500/10",children:[(0,a.jsx)("h3",{className:"text-sm font-bold text-rose-500 mb-4 uppercase tracking-widest",children:"Protocol Safety"}),(0,a.jsx)("button",{onClick:tV,disabled:R||tu||!t||"superadmin"!==ea,className:"w-full py-3 bg-rose-500/10 text-rose-500 border border-rose-500/20 rounded-xl text-xs font-bold hover:bg-rose-600 hover:text-white transition-all disabled:opacity-60 disabled:cursor-not-allowed",children:"EMERGENCY GLOBAL RESET"}),t&&!tu&&"superadmin"!==ea&&(0,a.jsxs)("div",{className:"mt-4 text-[11px] text-slate-500",children:["Only ",(0,a.jsx)("span",{className:"text-slate-200 font-bold",children:"superadmin"})," can use emergency actions."]})]})]})]}),eu&&eb&&ef&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 px-4",children:(0,a.jsxs)("div",{className:"w-full max-w-md premium-card p-6 border border-slate-800 bg-slate-950",children:[(0,a.jsx)("div",{className:"text-lg font-extrabold text-white",children:"Claim 2x points"}),(0,a.jsx)("div",{className:"mt-2 text-sm text-slate-400",children:"Share your bet on Twitter, Farcaster, or Base to claim a one-time 2x points bonus for this bet."}),(0,a.jsxs)("div",{className:"mt-4 p-3 rounded-xl bg-slate-900/40 border border-slate-800",children:[(0,a.jsx)("div",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Bet tx"}),(0,a.jsx)("div",{className:"mt-1 text-xs font-mono text-slate-300 break-all",children:eb})]}),(0,a.jsxs)("div",{className:"mt-5 grid grid-cols-1 gap-2",children:[(0,a.jsx)("button",{type:"button",disabled:ey,className:"w-full premium-btn py-3 disabled:opacity-60 disabled:cursor-not-allowed",onClick:async()=>{let e=`I just placed a prediction on HolyMarket: ${$?.question||""}`,t=window.location.href;window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(e)}&url=${encodeURIComponent(t)}`),await tk(eb,ef),ep(!1)},children:"Share on Twitter + Claim 2x"}),(0,a.jsx)("button",{type:"button",disabled:ey,className:"w-full premium-btn py-3 disabled:opacity-60 disabled:cursor-not-allowed",onClick:async()=>{let e=`Predicting on HolyMarket: ${$?.question||""}`,t=window.location.href;window.open(`https://warpcast.com/~/compose?text=${encodeURIComponent(e)}&embeds[]=${encodeURIComponent(t)}`),await tk(eb,ef),ep(!1)},children:"Share on Farcaster + Claim 2x"}),(0,a.jsx)("button",{type:"button",disabled:ey,className:"w-full premium-btn py-3 disabled:opacity-60 disabled:cursor-not-allowed",onClick:async()=>{let e=`I just placed a prediction on HolyMarket: ${$?.question||""}`,t=window.location.href;window.open(`https://base.app/?text=${encodeURIComponent(e)}&url=${encodeURIComponent(t)}`),await tk(eb,ef),ep(!1)},children:"Share on Base + Claim 2x"})]}),(0,a.jsx)("div",{className:"mt-4 flex gap-2",children:(0,a.jsx)("button",{type:"button",className:"flex-1 py-2.5 rounded-xl bg-slate-900/60 border border-slate-800 text-xs font-bold text-slate-300 hover:bg-slate-900 transition-all",onClick:()=>{ep(!1)},disabled:ey,children:"Skip"})}),(0,a.jsx)("div",{className:"mt-3 text-[11px] text-slate-500",children:"Note: This bonus is best-effort and can be claimed once per bet transaction."})]})})]}):(0,a.jsxs)("div",{className:"w-full max-w-md p-8 premium-card text-center mx-auto",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-red-500/10 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,a.jsx)("span",{className:"text-2xl",children:"⚠️"})}),(0,a.jsx)("h2",{className:"text-xl font-bold text-white mb-2",children:"Market Not Found"}),(0,a.jsx)("p",{className:"text-slate-400 text-sm mb-6",children:"Failed to fetch prediction data. Please ensure you are connected to BNB Testnet."}),(0,a.jsx)("div",{className:"p-3 bg-slate-800/50 rounded-lg border border-slate-700 font-mono text-[10px] text-slate-500 mb-6 break-all",children:N}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"w-full premium-btn",children:"Try Again"})]})}}},e=>{e.O(0,[8451,8055,1292,643,8441,3794,7358],()=>e(e.s=26421)),_N_E=e.O()}]);