module.exports=[231285,e=>{"use strict";var t=e.i(435354);class r extends t.Hash{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,(0,t.ahash)(e);const a=(0,t.toBytes)(r);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,s=new Uint8Array(n);s.set(a.length>n?e.create().update(a).digest():a);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),(0,t.clean)(s)}update(e){return(0,t.aexists)(this),this.iHash.update(e),this}digestInto(e){(0,t.aexists)(this),(0,t.abytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:a,destroyed:n,blockLen:s,outputLen:i}=this;return e.finished=a,e.destroyed=n,e.blockLen=s,e.outputLen=i,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let a=(e,t,a)=>new r(e,t).update(a).digest();a.create=(e,t)=>new r(e,t),e.s(["hmac",0,a])},11553,e=>{"use strict";var t=e.i(915830),r=e.i(775309),a=e.i(458661),n=e.i(870579);function s(e){let s=[];if("string"==typeof e){let t=(0,n.splitParameters)(e),a=t.length;for(let e=0;e<a;e++)s.push((0,n.parseAbiParameter)(t[e],{modifiers:r.modifiers}))}else{let t=(0,a.parseStructs)(e),i=e.length;for(let a=0;a<i;a++){let i=e[a];if((0,r.isStructSignature)(i))continue;let o=(0,n.splitParameters)(i),l=o.length;for(let e=0;e<l;e++)s.push((0,n.parseAbiParameter)(o[e],{modifiers:r.modifiers,structs:t}))}}if(0===s.length)throw new t.InvalidAbiParametersError({params:e});return s}e.s(["parseAbiParameters",()=>s])},339052,e=>{"use strict";var t=e.i(184391),r=e.i(471323),a=e.i(983075),n=e.i(378517),s=e.i(295386),i=e.i(4201),o=e.i(632472),l=e.i(216780),u=e.i(646040),c=e.i(16173),d=e.i(695888),p=e.i(431036),h=e.i(736439),f=e.i(52097),m=e.i(785221),R=e.i(193695);e.i(153158);var g=e.i(664430),E=e.i(506452),y=e.i(291577),v=e.i(783894),x=e.i(499243),b=e.i(801207);let C=process.env.BASE_SEPOLIA_RPC_URL||x.baseSepolia.rpcUrls.default.http[0],w=(0,y.createPublicClient)({chain:x.baseSepolia,transport:(0,v.http)(C)});async function _(e){let t,r,a,n=process.env.PREDICTION_MARKET_ADDRESS||process.env.NEXT_PUBLIC_PREDICTION_MARKET_ADDRESS||b.PREDICTION_MARKET_ADDRESS;try{if(r=await w.getChainId(),!(a=await w.getBytecode({address:n}))||"0x"===a)return E.NextResponse.json({error:"Contract not found at address on current RPC",address:n,rpcUrl:C,chainId:r},{status:500})}catch(e){return E.NextResponse.json({error:"RPC/chain check failed",address:n,rpcUrl:C,chainId:r,details:e instanceof Error?e.message:String(e)},{status:500})}try{t=await w.readContract({address:n,abi:b.PREDICTION_MARKET_ABI,functionName:"markets",args:[1n]})}catch(e){return console.error("Error fetching market:",e),E.NextResponse.json({error:"Error fetching market data",address:n,rpcUrl:C,chainId:r,bytecodeLength:"string"==typeof a?a.length:null,details:e instanceof Error?e.message:String(e)},{status:500})}let[s,i,o,l,u,c]=t,d=o+l,p=d>0n?Number(o)/Number(d)*100:50,h=d>0n?Number(l)/Number(d)*100:50,f=process.env.NEXT_PUBLIC_URL||e.nextUrl.origin||"http://localhost:3000";return new E.NextResponse(`
        <!DOCTYPE html>
        <html>
            <head>
                <meta property="fc:frame" content="vNext" />
                <meta property="fc:frame:image" content="${f}/icon.png" />
                <meta property="fc:frame:image:aspect_ratio" content="1.91:1" />
                <meta property="fc:frame:post_url" content="${f}/api/frame" />
                <meta property="fc:frame:button:1" content="Yes (${p.toFixed(1)}%)" />
                <meta property="fc:frame:button:1:action" content="tx" />
                <meta property="fc:frame:button:1:target" content="${f}/api/tx?outcome=true" />
                <meta property="fc:frame:button:2" content="No (${h.toFixed(1)}%)" />
                <meta property="fc:frame:button:2:action" content="tx" />
                <meta property="fc:frame:button:2:target" content="${f}/api/tx?outcome=false" />
            </head>
            <body style="font-family: sans-serif; padding: 20px;">
                <h1>HolyMarket Frame Endpoint</h1>
                <p>This is a Farcaster Frame (v1).</p>
                <p>To test this frame, please use the <a href="https://warpcast.com/~/developers/frames">Frame Validator</a>.</p>
                <p>Debug Info:</p>
                <ul>
                    <li>Question: ${s}</li>
                    <li>Yes: ${p.toFixed(1)}%</li>
                    <li>No: ${h.toFixed(1)}%</li>
                </ul>
            </body>
        </html>
    `,{headers:{"Content-Type":"text/html"}})}async function A(e){return _(e)}e.s(["GET",()=>_,"POST",()=>A],79407);var P=e.i(79407);let N=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/frame/route",pathname:"/api/frame",filename:"route",bundlePath:""},distDir:"build_next",relativeProjectDir:"",resolvedPagePath:"[project]/.gemini/antigravity/scratch/folymarket/app/api/frame/route.ts",nextConfigOutput:"",userland:P}),{workAsyncStorage:T,workUnitAsyncStorage:H,serverHooks:I}=N;function S(){return(0,a.patchFetch)({workAsyncStorage:T,workUnitAsyncStorage:H})}async function O(e,t,a){N.isDev&&(0,n.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let E="/api/frame/route";E=E.replace(/\/index$/,"")||"/";let y=await N.prepare(e,t,{srcPage:E,multiZoneDraftMode:!1});if(!y)return t.statusCode=400,t.end("Bad Request"),null==a.waitUntil||a.waitUntil.call(a,Promise.resolve()),null;let{buildId:v,params:x,nextConfig:b,parsedUrl:C,isDraftMode:w,prerenderManifest:_,routerServerContext:A,isOnDemandRevalidate:P,revalidateOnlyGenerated:T,resolvedPathname:H,clientReferenceManifest:I,serverActionsManifest:S}=y,O=(0,o.normalizeAppPath)(E),D=!!(_.dynamicRoutes[O]||_.routes[H]),k=async()=>((null==A?void 0:A.render404)?await A.render404(e,t,C,!1):t.end("This page could not be found"),null);if(D&&!w){let e=!!_.routes[H],t=_.dynamicRoutes[O];if(t&&!1===t.fallback&&!e){if(b.experimental.adapterPath)return await k();throw new R.NoFallbackError}}let U=null;!D||N.isDev||w||(U="/index"===(U=H)?"/":U);let L=!0===N.isDev||!D,$=D&&!L;S&&I&&(0,i.setManifestsSingleton)({page:E,clientReferenceManifest:I,serverActionsManifest:S});let M=e.method||"GET",F=(0,s.getTracer)(),q=F.getActiveScopeSpan(),j={params:x,prerenderManifest:_,renderOpts:{experimental:{authInterrupts:!!b.experimental.authInterrupts},cacheComponents:!!b.cacheComponents,supportsDynamicResponse:L,incrementalCache:(0,n.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:b.cacheLife,waitUntil:a.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,a,n)=>N.onRequestError(e,t,a,n,A)},sharedContext:{buildId:v}},K=new l.NodeNextRequest(e),B=new l.NodeNextResponse(t),X=u.NextRequestAdapter.fromNodeNextRequest(K,(0,u.signalFromNodeResponse)(t));try{let i=async e=>N.handle(X,j).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=F.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==c.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let a=r.get("next.route");if(a){let t=`${M} ${a}`;e.setAttributes({"next.route":a,"http.route":a,"next.span_name":t}),e.updateName(t)}else e.updateName(`${M} ${E}`)}),o=!!(0,n.getRequestMeta)(e,"minimalMode"),l=async n=>{var s,l;let u=async({previousCacheEntry:r})=>{try{if(!o&&P&&T&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let s=await i(n);e.fetchMetrics=j.renderOpts.fetchMetrics;let l=j.renderOpts.pendingWaitUntil;l&&a.waitUntil&&(a.waitUntil(l),l=void 0);let u=j.renderOpts.collectedTags;if(!D)return await (0,p.sendResponse)(K,B,s,j.renderOpts.pendingWaitUntil),null;{let e=await s.blob(),t=(0,h.toNodeOutgoingHttpHeaders)(s.headers);u&&(t[m.NEXT_CACHE_TAGS_HEADER]=u),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==j.renderOpts.collectedRevalidate&&!(j.renderOpts.collectedRevalidate>=m.INFINITE_CACHE)&&j.renderOpts.collectedRevalidate,a=void 0===j.renderOpts.collectedExpire||j.renderOpts.collectedExpire>=m.INFINITE_CACHE?void 0:j.renderOpts.collectedExpire;return{value:{kind:g.CachedRouteKind.APP_ROUTE,status:s.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:a}}}}catch(t){throw(null==r?void 0:r.isStale)&&await N.onRequestError(e,t,{routerKind:"App Router",routePath:E,routeType:"route",revalidateReason:(0,d.getRevalidateReason)({isStaticGeneration:$,isOnDemandRevalidate:P})},!1,A),t}},c=await N.handleResponse({req:e,nextConfig:b,cacheKey:U,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:_,isRoutePPREnabled:!1,isOnDemandRevalidate:P,revalidateOnlyGenerated:T,responseGenerator:u,waitUntil:a.waitUntil,isMinimalMode:o});if(!D)return null;if((null==c||null==(s=c.value)?void 0:s.kind)!==g.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==c||null==(l=c.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});o||t.setHeader("x-nextjs-cache",P?"REVALIDATED":c.isMiss?"MISS":c.isStale?"STALE":"HIT"),w&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let R=(0,h.fromNodeOutgoingHttpHeaders)(c.value.headers);return o&&D||R.delete(m.NEXT_CACHE_TAGS_HEADER),!c.cacheControl||t.getHeader("Cache-Control")||R.get("Cache-Control")||R.set("Cache-Control",(0,f.getCacheControlHeader)(c.cacheControl)),await (0,p.sendResponse)(K,B,new Response(c.value.body,{headers:R,status:c.value.status||200})),null};q?await l(q):await F.withPropagatedContext(e.headers,()=>F.trace(c.BaseServerSpan.handleRequest,{spanName:`${M} ${E}`,kind:s.SpanKind.SERVER,attributes:{"http.method":M,"http.target":e.url}},l))}catch(t){if(t instanceof R.NoFallbackError||await N.onRequestError(e,t,{routerKind:"App Router",routePath:O,routeType:"route",revalidateReason:(0,d.getRevalidateReason)({isStaticGeneration:$,isOnDemandRevalidate:P})},!1,A),D)throw t;return await (0,p.sendResponse)(K,B,new Response(null,{status:500})),null}}e.s(["handler",()=>O,"patchFetch",()=>S,"routeModule",()=>N,"serverHooks",()=>I,"workAsyncStorage",()=>T,"workUnitAsyncStorage",()=>H],339052)},980413,e=>{e.v(t=>Promise.all(["server/chunks/28ea8_viem__esm_utils_ccip_aff08e38.js"].map(t=>e.l(t))).then(()=>t(129038)))},88266,e=>{e.v(e=>Promise.resolve().then(()=>e(266160)))}];

//# sourceMappingURL=28ea8_193d021c._.js.map