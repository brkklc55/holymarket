module.exports=[491801,a=>{"use strict";let b;a.s([],511542),a.i(511542),(bh=bk||(bk={})).assertEqual=a=>{},bh.assertIs=function(a){},bh.assertNever=function(a){throw Error()},bh.arrayToEnum=a=>{let b={};for(let c of a)b[c]=c;return b},bh.getValidEnumValues=a=>{let b=bh.objectKeys(a).filter(b=>"number"!=typeof a[a[b]]),c={};for(let d of b)c[d]=a[d];return bh.objectValues(c)},bh.objectValues=a=>bh.objectKeys(a).map(function(b){return a[b]}),bh.objectKeys="function"==typeof Object.keys?a=>Object.keys(a):a=>{let b=[];for(let c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b},bh.find=(a,b)=>{for(let c of a)if(b(c))return c},bh.isInteger="function"==typeof Number.isInteger?a=>Number.isInteger(a):a=>"number"==typeof a&&Number.isFinite(a)&&Math.floor(a)===a,bh.joinValues=function(a,b=" | "){return a.map(a=>"string"==typeof a?`'${a}'`:a).join(b)},bh.jsonStringifyReplacer=(a,b)=>"bigint"==typeof b?b.toString():b,(bl||(bl={})).mergeShapes=(a,b)=>({...a,...b});let c=bk.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),d=a=>{switch(typeof a){case"undefined":return c.undefined;case"string":return c.string;case"number":return Number.isNaN(a)?c.nan:c.number;case"boolean":return c.boolean;case"function":return c.function;case"bigint":return c.bigint;case"symbol":return c.symbol;case"object":if(Array.isArray(a))return c.array;if(null===a)return c.null;if(a.then&&"function"==typeof a.then&&a.catch&&"function"==typeof a.catch)return c.promise;if("undefined"!=typeof Map&&a instanceof Map)return c.map;if("undefined"!=typeof Set&&a instanceof Set)return c.set;if("undefined"!=typeof Date&&a instanceof Date)return c.date;return c.object;default:return c.unknown}};a.s(["ZodParsedType",0,c,"getParsedType",0,d,"objectUtil",()=>bl,"util",()=>bk],863390);let e=bk.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),f=a=>JSON.stringify(a,null,2).replace(/"([^"]+)":/g,"$1:");class g extends Error{get errors(){return this.issues}constructor(a){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};const b=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,b):this.__proto__=b,this.name="ZodError",this.issues=a}format(a){let b=a||function(a){return a.message},c={_errors:[]},d=a=>{for(let e of a.issues)if("invalid_union"===e.code)e.unionErrors.map(d);else if("invalid_return_type"===e.code)d(e.returnTypeError);else if("invalid_arguments"===e.code)d(e.argumentsError);else if(0===e.path.length)c._errors.push(b(e));else{let a=c,d=0;for(;d<e.path.length;){let c=e.path[d];d===e.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(b(e))):a[c]=a[c]||{_errors:[]},a=a[c],d++}}};return d(this),c}static assert(a){if(!(a instanceof g))throw Error(`Not a ZodError: ${a}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,bk.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(a=a=>a.message){let b={},c=[];for(let d of this.issues)if(d.path.length>0){let c=d.path[0];b[c]=b[c]||[],b[c].push(a(d))}else c.push(a(d));return{formErrors:c,fieldErrors:b}}get formErrors(){return this.flatten()}}g.create=a=>new g(a),a.s(["ZodError",()=>g,"ZodIssueCode",0,e,"quotelessJson",0,f],142454);let h=(a,b)=>{let d;switch(a.code){case e.invalid_type:d=a.received===c.undefined?"Required":`Expected ${a.expected}, received ${a.received}`;break;case e.invalid_literal:d=`Invalid literal value, expected ${JSON.stringify(a.expected,bk.jsonStringifyReplacer)}`;break;case e.unrecognized_keys:d=`Unrecognized key(s) in object: ${bk.joinValues(a.keys,", ")}`;break;case e.invalid_union:d="Invalid input";break;case e.invalid_union_discriminator:d=`Invalid discriminator value. Expected ${bk.joinValues(a.options)}`;break;case e.invalid_enum_value:d=`Invalid enum value. Expected ${bk.joinValues(a.options)}, received '${a.received}'`;break;case e.invalid_arguments:d="Invalid function arguments";break;case e.invalid_return_type:d="Invalid function return type";break;case e.invalid_date:d="Invalid date";break;case e.invalid_string:"object"==typeof a.validation?"includes"in a.validation?(d=`Invalid input: must include "${a.validation.includes}"`,"number"==typeof a.validation.position&&(d=`${d} at one or more positions greater than or equal to ${a.validation.position}`)):"startsWith"in a.validation?d=`Invalid input: must start with "${a.validation.startsWith}"`:"endsWith"in a.validation?d=`Invalid input: must end with "${a.validation.endsWith}"`:bk.assertNever(a.validation):d="regex"!==a.validation?`Invalid ${a.validation}`:"Invalid";break;case e.too_small:d="array"===a.type?`Array must contain ${a.exact?"exactly":a.inclusive?"at least":"more than"} ${a.minimum} element(s)`:"string"===a.type?`String must contain ${a.exact?"exactly":a.inclusive?"at least":"over"} ${a.minimum} character(s)`:"number"===a.type||"bigint"===a.type?`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:"date"===a.type?`Date must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(a.minimum))}`:"Invalid input";break;case e.too_big:d="array"===a.type?`Array must contain ${a.exact?"exactly":a.inclusive?"at most":"less than"} ${a.maximum} element(s)`:"string"===a.type?`String must contain ${a.exact?"exactly":a.inclusive?"at most":"under"} ${a.maximum} character(s)`:"number"===a.type?`Number must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:"bigint"===a.type?`BigInt must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:"date"===a.type?`Date must be ${a.exact?"exactly":a.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(a.maximum))}`:"Invalid input";break;case e.custom:d="Invalid input";break;case e.invalid_intersection_types:d="Intersection results could not be merged";break;case e.not_multiple_of:d=`Number must be a multiple of ${a.multipleOf}`;break;case e.not_finite:d="Number must be finite";break;default:d=b.defaultError,bk.assertNever(a)}return{message:d}},i=h;function j(a){i=a}function k(){return i}a.s(["getErrorMap",()=>k,"setErrorMap",()=>j],591830),a.i(591830),a.s(["defaultErrorMap",0,h,"getErrorMap",()=>k,"setErrorMap",()=>j],220691),a.i(220691);let l=a=>{let{data:b,path:c,errorMaps:d,issueData:e}=a,f=[...c,...e.path||[]],g={...e,path:f};if(void 0!==e.message)return{...e,path:f,message:e.message};let h="";for(let a of d.filter(a=>!!a).slice().reverse())h=a(g,{data:b,defaultError:h}).message;return{...e,path:f,message:h}},m=[];function n(a,b){let c=i,d=l({issueData:b,data:a.data,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,c,c===h?void 0:h].filter(a=>!!a)});a.common.issues.push(d)}class o{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(a,b){let c=[];for(let d of b){if("aborted"===d.status)return p;"dirty"===d.status&&a.dirty(),c.push(d.value)}return{status:a.value,value:c}}static async mergeObjectAsync(a,b){let c=[];for(let a of b){let b=await a.key,d=await a.value;c.push({key:b,value:d})}return o.mergeObjectSync(a,c)}static mergeObjectSync(a,b){let c={};for(let d of b){let{key:b,value:e}=d;if("aborted"===b.status||"aborted"===e.status)return p;"dirty"===b.status&&a.dirty(),"dirty"===e.status&&a.dirty(),"__proto__"!==b.value&&(void 0!==e.value||d.alwaysSet)&&(c[b.value]=e.value)}return{status:a.value,value:c}}}let p=Object.freeze({status:"aborted"}),q=a=>({status:"dirty",value:a}),r=a=>({status:"valid",value:a}),s=a=>"aborted"===a.status,t=a=>"dirty"===a.status,u=a=>"valid"===a.status,v=a=>"undefined"!=typeof Promise&&a instanceof Promise;a.s(["DIRTY",0,q,"EMPTY_PATH",0,m,"INVALID",0,p,"OK",0,r,"ParseStatus",()=>o,"addIssueToContext",()=>n,"isAborted",0,s,"isAsync",0,v,"isDirty",0,t,"isValid",0,u,"makeIssue",0,l],746485),a.i(746485),a.s([],856792),a.i(856792),a.i(863390),(bi=bm||(bm={})).errToObj=a=>"string"==typeof a?{message:a}:a||{},bi.toString=a=>"string"==typeof a?a:a?.message;class w{constructor(a,b,c,d){this._cachedPath=[],this.parent=a,this.data=b,this._path=c,this._key=d}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let x=(a,b)=>{if(u(b))return{success:!0,data:b.value};if(!a.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let b=new g(a.common.issues);return this._error=b,this._error}}};function y(a){if(!a)return{};let{errorMap:b,invalid_type_error:c,required_error:d,description:e}=a;if(b&&(c||d))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return b?{errorMap:b,description:e}:{errorMap:(b,e)=>{let{message:f}=a;return"invalid_enum_value"===b.code?{message:f??e.defaultError}:void 0===e.data?{message:f??d??e.defaultError}:"invalid_type"!==b.code?{message:e.defaultError}:{message:f??c??e.defaultError}},description:e}}class z{get description(){return this._def.description}_getType(a){return d(a.data)}_getOrReturnCtx(a,b){return b||{common:a.parent.common,data:a.data,parsedType:d(a.data),schemaErrorMap:this._def.errorMap,path:a.path,parent:a.parent}}_processInputParams(a){return{status:new o,ctx:{common:a.parent.common,data:a.data,parsedType:d(a.data),schemaErrorMap:this._def.errorMap,path:a.path,parent:a.parent}}}_parseSync(a){let b=this._parse(a);if(v(b))throw Error("Synchronous parse encountered promise.");return b}_parseAsync(a){return Promise.resolve(this._parse(a))}parse(a,b){let c=this.safeParse(a,b);if(c.success)return c.data;throw c.error}safeParse(a,b){let c={common:{issues:[],async:b?.async??!1,contextualErrorMap:b?.errorMap},path:b?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:d(a)},e=this._parseSync({data:a,path:c.path,parent:c});return x(c,e)}"~validate"(a){let b={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:d(a)};if(!this["~standard"].async)try{let c=this._parseSync({data:a,path:[],parent:b});return u(c)?{value:c.value}:{issues:b.common.issues}}catch(a){a?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),b.common={issues:[],async:!0}}return this._parseAsync({data:a,path:[],parent:b}).then(a=>u(a)?{value:a.value}:{issues:b.common.issues})}async parseAsync(a,b){let c=await this.safeParseAsync(a,b);if(c.success)return c.data;throw c.error}async safeParseAsync(a,b){let c={common:{issues:[],contextualErrorMap:b?.errorMap,async:!0},path:b?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:d(a)},e=this._parse({data:a,path:c.path,parent:c});return x(c,await (v(e)?e:Promise.resolve(e)))}refine(a,b){return this._refinement((c,d)=>{let f=a(c),g=()=>d.addIssue({code:e.custom,..."string"==typeof b||void 0===b?{message:b}:"function"==typeof b?b(c):b});return"undefined"!=typeof Promise&&f instanceof Promise?f.then(a=>!!a||(g(),!1)):!!f||(g(),!1)})}refinement(a,b){return this._refinement((c,d)=>!!a(c)||(d.addIssue("function"==typeof b?b(c,d):b),!1))}_refinement(a){return new at({schema:this,typeName:bn.ZodEffects,effect:{type:"refinement",refinement:a}})}superRefine(a){return this._refinement(a)}constructor(a){this.spa=this.safeParseAsync,this._def=a,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:a=>this["~validate"](a)}}optional(){return au.create(this,this._def)}nullable(){return av.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ac.create(this)}promise(){return as.create(this,this._def)}or(a){return ae.create([this,a],this._def)}and(a){return ah.create(this,a,this._def)}transform(a){return new at({...y(this._def),schema:this,typeName:bn.ZodEffects,effect:{type:"transform",transform:a}})}default(a){return new aw({...y(this._def),innerType:this,defaultValue:"function"==typeof a?a:()=>a,typeName:bn.ZodDefault})}brand(){return new aA({typeName:bn.ZodBranded,type:this,...y(this._def)})}catch(a){return new ax({...y(this._def),innerType:this,catchValue:"function"==typeof a?a:()=>a,typeName:bn.ZodCatch})}describe(a){return new this.constructor({...this._def,description:a})}pipe(a){return aB.create(this,a)}readonly(){return aC.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let A=/^c[^\s-]{8,}$/i,B=/^[0-9a-z]+$/,C=/^[0-9A-HJKMNP-TV-Z]{26}$/i,D=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,E=/^[a-z0-9_-]{21}$/i,F=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,G=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,H=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,I=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,J=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,K=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,L=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,M=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,N=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,O="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",P=RegExp(`^${O}$`);function Q(a){let b="[0-5]\\d";a.precision?b=`${b}\\.\\d{${a.precision}}`:null==a.precision&&(b=`${b}(\\.\\d+)?`);let c=a.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${b})${c}`}function R(a){let b=`${O}T${Q(a)}`,c=[];return c.push(a.local?"Z?":"Z"),a.offset&&c.push("([+-]\\d{2}:?\\d{2})"),b=`${b}(${c.join("|")})`,RegExp(`^${b}$`)}class S extends z{_parse(a){var d,f,g,h;let i;if(this._def.coerce&&(a.data=String(a.data)),this._getType(a)!==c.string){let b=this._getOrReturnCtx(a);return n(b,{code:e.invalid_type,expected:c.string,received:b.parsedType}),p}let j=new o;for(let c of this._def.checks)if("min"===c.kind)a.data.length<c.value&&(n(i=this._getOrReturnCtx(a,i),{code:e.too_small,minimum:c.value,type:"string",inclusive:!0,exact:!1,message:c.message}),j.dirty());else if("max"===c.kind)a.data.length>c.value&&(n(i=this._getOrReturnCtx(a,i),{code:e.too_big,maximum:c.value,type:"string",inclusive:!0,exact:!1,message:c.message}),j.dirty());else if("length"===c.kind){let b=a.data.length>c.value,d=a.data.length<c.value;(b||d)&&(i=this._getOrReturnCtx(a,i),b?n(i,{code:e.too_big,maximum:c.value,type:"string",inclusive:!0,exact:!0,message:c.message}):d&&n(i,{code:e.too_small,minimum:c.value,type:"string",inclusive:!0,exact:!0,message:c.message}),j.dirty())}else if("email"===c.kind)H.test(a.data)||(n(i=this._getOrReturnCtx(a,i),{validation:"email",code:e.invalid_string,message:c.message}),j.dirty());else if("emoji"===c.kind)b||(b=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),b.test(a.data)||(n(i=this._getOrReturnCtx(a,i),{validation:"emoji",code:e.invalid_string,message:c.message}),j.dirty());else if("uuid"===c.kind)D.test(a.data)||(n(i=this._getOrReturnCtx(a,i),{validation:"uuid",code:e.invalid_string,message:c.message}),j.dirty());else if("nanoid"===c.kind)E.test(a.data)||(n(i=this._getOrReturnCtx(a,i),{validation:"nanoid",code:e.invalid_string,message:c.message}),j.dirty());else if("cuid"===c.kind)A.test(a.data)||(n(i=this._getOrReturnCtx(a,i),{validation:"cuid",code:e.invalid_string,message:c.message}),j.dirty());else if("cuid2"===c.kind)B.test(a.data)||(n(i=this._getOrReturnCtx(a,i),{validation:"cuid2",code:e.invalid_string,message:c.message}),j.dirty());else if("ulid"===c.kind)C.test(a.data)||(n(i=this._getOrReturnCtx(a,i),{validation:"ulid",code:e.invalid_string,message:c.message}),j.dirty());else if("url"===c.kind)try{new URL(a.data)}catch{n(i=this._getOrReturnCtx(a,i),{validation:"url",code:e.invalid_string,message:c.message}),j.dirty()}else"regex"===c.kind?(c.regex.lastIndex=0,c.regex.test(a.data)||(n(i=this._getOrReturnCtx(a,i),{validation:"regex",code:e.invalid_string,message:c.message}),j.dirty())):"trim"===c.kind?a.data=a.data.trim():"includes"===c.kind?a.data.includes(c.value,c.position)||(n(i=this._getOrReturnCtx(a,i),{code:e.invalid_string,validation:{includes:c.value,position:c.position},message:c.message}),j.dirty()):"toLowerCase"===c.kind?a.data=a.data.toLowerCase():"toUpperCase"===c.kind?a.data=a.data.toUpperCase():"startsWith"===c.kind?a.data.startsWith(c.value)||(n(i=this._getOrReturnCtx(a,i),{code:e.invalid_string,validation:{startsWith:c.value},message:c.message}),j.dirty()):"endsWith"===c.kind?a.data.endsWith(c.value)||(n(i=this._getOrReturnCtx(a,i),{code:e.invalid_string,validation:{endsWith:c.value},message:c.message}),j.dirty()):"datetime"===c.kind?R(c).test(a.data)||(n(i=this._getOrReturnCtx(a,i),{code:e.invalid_string,validation:"datetime",message:c.message}),j.dirty()):"date"===c.kind?P.test(a.data)||(n(i=this._getOrReturnCtx(a,i),{code:e.invalid_string,validation:"date",message:c.message}),j.dirty()):"time"===c.kind?RegExp(`^${Q(c)}$`).test(a.data)||(n(i=this._getOrReturnCtx(a,i),{code:e.invalid_string,validation:"time",message:c.message}),j.dirty()):"duration"===c.kind?G.test(a.data)||(n(i=this._getOrReturnCtx(a,i),{validation:"duration",code:e.invalid_string,message:c.message}),j.dirty()):"ip"===c.kind?(d=a.data,!(("v4"===(f=c.version)||!f)&&I.test(d)||("v6"===f||!f)&&K.test(d))&&1&&(n(i=this._getOrReturnCtx(a,i),{validation:"ip",code:e.invalid_string,message:c.message}),j.dirty())):"jwt"===c.kind?!function(a,b){if(!F.test(a))return!1;try{let[c]=a.split(".");if(!c)return!1;let d=c.replace(/-/g,"+").replace(/_/g,"/").padEnd(c.length+(4-c.length%4)%4,"="),e=JSON.parse(atob(d));if("object"!=typeof e||null===e||"typ"in e&&e?.typ!=="JWT"||!e.alg||b&&e.alg!==b)return!1;return!0}catch{return!1}}(a.data,c.alg)&&(n(i=this._getOrReturnCtx(a,i),{validation:"jwt",code:e.invalid_string,message:c.message}),j.dirty()):"cidr"===c.kind?(g=a.data,!(("v4"===(h=c.version)||!h)&&J.test(g)||("v6"===h||!h)&&L.test(g))&&1&&(n(i=this._getOrReturnCtx(a,i),{validation:"cidr",code:e.invalid_string,message:c.message}),j.dirty())):"base64"===c.kind?M.test(a.data)||(n(i=this._getOrReturnCtx(a,i),{validation:"base64",code:e.invalid_string,message:c.message}),j.dirty()):"base64url"===c.kind?N.test(a.data)||(n(i=this._getOrReturnCtx(a,i),{validation:"base64url",code:e.invalid_string,message:c.message}),j.dirty()):bk.assertNever(c);return{status:j.value,value:a.data}}_regex(a,b,c){return this.refinement(b=>a.test(b),{validation:b,code:e.invalid_string,...bm.errToObj(c)})}_addCheck(a){return new S({...this._def,checks:[...this._def.checks,a]})}email(a){return this._addCheck({kind:"email",...bm.errToObj(a)})}url(a){return this._addCheck({kind:"url",...bm.errToObj(a)})}emoji(a){return this._addCheck({kind:"emoji",...bm.errToObj(a)})}uuid(a){return this._addCheck({kind:"uuid",...bm.errToObj(a)})}nanoid(a){return this._addCheck({kind:"nanoid",...bm.errToObj(a)})}cuid(a){return this._addCheck({kind:"cuid",...bm.errToObj(a)})}cuid2(a){return this._addCheck({kind:"cuid2",...bm.errToObj(a)})}ulid(a){return this._addCheck({kind:"ulid",...bm.errToObj(a)})}base64(a){return this._addCheck({kind:"base64",...bm.errToObj(a)})}base64url(a){return this._addCheck({kind:"base64url",...bm.errToObj(a)})}jwt(a){return this._addCheck({kind:"jwt",...bm.errToObj(a)})}ip(a){return this._addCheck({kind:"ip",...bm.errToObj(a)})}cidr(a){return this._addCheck({kind:"cidr",...bm.errToObj(a)})}datetime(a){return"string"==typeof a?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:a}):this._addCheck({kind:"datetime",precision:void 0===a?.precision?null:a?.precision,offset:a?.offset??!1,local:a?.local??!1,...bm.errToObj(a?.message)})}date(a){return this._addCheck({kind:"date",message:a})}time(a){return"string"==typeof a?this._addCheck({kind:"time",precision:null,message:a}):this._addCheck({kind:"time",precision:void 0===a?.precision?null:a?.precision,...bm.errToObj(a?.message)})}duration(a){return this._addCheck({kind:"duration",...bm.errToObj(a)})}regex(a,b){return this._addCheck({kind:"regex",regex:a,...bm.errToObj(b)})}includes(a,b){return this._addCheck({kind:"includes",value:a,position:b?.position,...bm.errToObj(b?.message)})}startsWith(a,b){return this._addCheck({kind:"startsWith",value:a,...bm.errToObj(b)})}endsWith(a,b){return this._addCheck({kind:"endsWith",value:a,...bm.errToObj(b)})}min(a,b){return this._addCheck({kind:"min",value:a,...bm.errToObj(b)})}max(a,b){return this._addCheck({kind:"max",value:a,...bm.errToObj(b)})}length(a,b){return this._addCheck({kind:"length",value:a,...bm.errToObj(b)})}nonempty(a){return this.min(1,bm.errToObj(a))}trim(){return new S({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new S({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new S({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(a=>"datetime"===a.kind)}get isDate(){return!!this._def.checks.find(a=>"date"===a.kind)}get isTime(){return!!this._def.checks.find(a=>"time"===a.kind)}get isDuration(){return!!this._def.checks.find(a=>"duration"===a.kind)}get isEmail(){return!!this._def.checks.find(a=>"email"===a.kind)}get isURL(){return!!this._def.checks.find(a=>"url"===a.kind)}get isEmoji(){return!!this._def.checks.find(a=>"emoji"===a.kind)}get isUUID(){return!!this._def.checks.find(a=>"uuid"===a.kind)}get isNANOID(){return!!this._def.checks.find(a=>"nanoid"===a.kind)}get isCUID(){return!!this._def.checks.find(a=>"cuid"===a.kind)}get isCUID2(){return!!this._def.checks.find(a=>"cuid2"===a.kind)}get isULID(){return!!this._def.checks.find(a=>"ulid"===a.kind)}get isIP(){return!!this._def.checks.find(a=>"ip"===a.kind)}get isCIDR(){return!!this._def.checks.find(a=>"cidr"===a.kind)}get isBase64(){return!!this._def.checks.find(a=>"base64"===a.kind)}get isBase64url(){return!!this._def.checks.find(a=>"base64url"===a.kind)}get minLength(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return a}get maxLength(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return a}}S.create=a=>new S({checks:[],typeName:bn.ZodString,coerce:a?.coerce??!1,...y(a)});class T extends z{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(a){let b;if(this._def.coerce&&(a.data=Number(a.data)),this._getType(a)!==c.number){let b=this._getOrReturnCtx(a);return n(b,{code:e.invalid_type,expected:c.number,received:b.parsedType}),p}let d=new o;for(let c of this._def.checks)"int"===c.kind?bk.isInteger(a.data)||(n(b=this._getOrReturnCtx(a,b),{code:e.invalid_type,expected:"integer",received:"float",message:c.message}),d.dirty()):"min"===c.kind?(c.inclusive?a.data<c.value:a.data<=c.value)&&(n(b=this._getOrReturnCtx(a,b),{code:e.too_small,minimum:c.value,type:"number",inclusive:c.inclusive,exact:!1,message:c.message}),d.dirty()):"max"===c.kind?(c.inclusive?a.data>c.value:a.data>=c.value)&&(n(b=this._getOrReturnCtx(a,b),{code:e.too_big,maximum:c.value,type:"number",inclusive:c.inclusive,exact:!1,message:c.message}),d.dirty()):"multipleOf"===c.kind?0!==function(a,b){let c=(a.toString().split(".")[1]||"").length,d=(b.toString().split(".")[1]||"").length,e=c>d?c:d;return Number.parseInt(a.toFixed(e).replace(".",""))%Number.parseInt(b.toFixed(e).replace(".",""))/10**e}(a.data,c.value)&&(n(b=this._getOrReturnCtx(a,b),{code:e.not_multiple_of,multipleOf:c.value,message:c.message}),d.dirty()):"finite"===c.kind?Number.isFinite(a.data)||(n(b=this._getOrReturnCtx(a,b),{code:e.not_finite,message:c.message}),d.dirty()):bk.assertNever(c);return{status:d.value,value:a.data}}gte(a,b){return this.setLimit("min",a,!0,bm.toString(b))}gt(a,b){return this.setLimit("min",a,!1,bm.toString(b))}lte(a,b){return this.setLimit("max",a,!0,bm.toString(b))}lt(a,b){return this.setLimit("max",a,!1,bm.toString(b))}setLimit(a,b,c,d){return new T({...this._def,checks:[...this._def.checks,{kind:a,value:b,inclusive:c,message:bm.toString(d)}]})}_addCheck(a){return new T({...this._def,checks:[...this._def.checks,a]})}int(a){return this._addCheck({kind:"int",message:bm.toString(a)})}positive(a){return this._addCheck({kind:"min",value:0,inclusive:!1,message:bm.toString(a)})}negative(a){return this._addCheck({kind:"max",value:0,inclusive:!1,message:bm.toString(a)})}nonpositive(a){return this._addCheck({kind:"max",value:0,inclusive:!0,message:bm.toString(a)})}nonnegative(a){return this._addCheck({kind:"min",value:0,inclusive:!0,message:bm.toString(a)})}multipleOf(a,b){return this._addCheck({kind:"multipleOf",value:a,message:bm.toString(b)})}finite(a){return this._addCheck({kind:"finite",message:bm.toString(a)})}safe(a){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:bm.toString(a)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:bm.toString(a)})}get minValue(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return a}get maxValue(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return a}get isInt(){return!!this._def.checks.find(a=>"int"===a.kind||"multipleOf"===a.kind&&bk.isInteger(a.value))}get isFinite(){let a=null,b=null;for(let c of this._def.checks)if("finite"===c.kind||"int"===c.kind||"multipleOf"===c.kind)return!0;else"min"===c.kind?(null===b||c.value>b)&&(b=c.value):"max"===c.kind&&(null===a||c.value<a)&&(a=c.value);return Number.isFinite(b)&&Number.isFinite(a)}}T.create=a=>new T({checks:[],typeName:bn.ZodNumber,coerce:a?.coerce||!1,...y(a)});class U extends z{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(a){let b;if(this._def.coerce)try{a.data=BigInt(a.data)}catch{return this._getInvalidInput(a)}if(this._getType(a)!==c.bigint)return this._getInvalidInput(a);let d=new o;for(let c of this._def.checks)"min"===c.kind?(c.inclusive?a.data<c.value:a.data<=c.value)&&(n(b=this._getOrReturnCtx(a,b),{code:e.too_small,type:"bigint",minimum:c.value,inclusive:c.inclusive,message:c.message}),d.dirty()):"max"===c.kind?(c.inclusive?a.data>c.value:a.data>=c.value)&&(n(b=this._getOrReturnCtx(a,b),{code:e.too_big,type:"bigint",maximum:c.value,inclusive:c.inclusive,message:c.message}),d.dirty()):"multipleOf"===c.kind?a.data%c.value!==BigInt(0)&&(n(b=this._getOrReturnCtx(a,b),{code:e.not_multiple_of,multipleOf:c.value,message:c.message}),d.dirty()):bk.assertNever(c);return{status:d.value,value:a.data}}_getInvalidInput(a){let b=this._getOrReturnCtx(a);return n(b,{code:e.invalid_type,expected:c.bigint,received:b.parsedType}),p}gte(a,b){return this.setLimit("min",a,!0,bm.toString(b))}gt(a,b){return this.setLimit("min",a,!1,bm.toString(b))}lte(a,b){return this.setLimit("max",a,!0,bm.toString(b))}lt(a,b){return this.setLimit("max",a,!1,bm.toString(b))}setLimit(a,b,c,d){return new U({...this._def,checks:[...this._def.checks,{kind:a,value:b,inclusive:c,message:bm.toString(d)}]})}_addCheck(a){return new U({...this._def,checks:[...this._def.checks,a]})}positive(a){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:bm.toString(a)})}negative(a){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:bm.toString(a)})}nonpositive(a){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:bm.toString(a)})}nonnegative(a){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:bm.toString(a)})}multipleOf(a,b){return this._addCheck({kind:"multipleOf",value:a,message:bm.toString(b)})}get minValue(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return a}get maxValue(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return a}}U.create=a=>new U({checks:[],typeName:bn.ZodBigInt,coerce:a?.coerce??!1,...y(a)});class V extends z{_parse(a){if(this._def.coerce&&(a.data=!!a.data),this._getType(a)!==c.boolean){let b=this._getOrReturnCtx(a);return n(b,{code:e.invalid_type,expected:c.boolean,received:b.parsedType}),p}return r(a.data)}}V.create=a=>new V({typeName:bn.ZodBoolean,coerce:a?.coerce||!1,...y(a)});class W extends z{_parse(a){let b;if(this._def.coerce&&(a.data=new Date(a.data)),this._getType(a)!==c.date){let b=this._getOrReturnCtx(a);return n(b,{code:e.invalid_type,expected:c.date,received:b.parsedType}),p}if(Number.isNaN(a.data.getTime()))return n(this._getOrReturnCtx(a),{code:e.invalid_date}),p;let d=new o;for(let c of this._def.checks)"min"===c.kind?a.data.getTime()<c.value&&(n(b=this._getOrReturnCtx(a,b),{code:e.too_small,message:c.message,inclusive:!0,exact:!1,minimum:c.value,type:"date"}),d.dirty()):"max"===c.kind?a.data.getTime()>c.value&&(n(b=this._getOrReturnCtx(a,b),{code:e.too_big,message:c.message,inclusive:!0,exact:!1,maximum:c.value,type:"date"}),d.dirty()):bk.assertNever(c);return{status:d.value,value:new Date(a.data.getTime())}}_addCheck(a){return new W({...this._def,checks:[...this._def.checks,a]})}min(a,b){return this._addCheck({kind:"min",value:a.getTime(),message:bm.toString(b)})}max(a,b){return this._addCheck({kind:"max",value:a.getTime(),message:bm.toString(b)})}get minDate(){let a=null;for(let b of this._def.checks)"min"===b.kind&&(null===a||b.value>a)&&(a=b.value);return null!=a?new Date(a):null}get maxDate(){let a=null;for(let b of this._def.checks)"max"===b.kind&&(null===a||b.value<a)&&(a=b.value);return null!=a?new Date(a):null}}W.create=a=>new W({checks:[],coerce:a?.coerce||!1,typeName:bn.ZodDate,...y(a)});class X extends z{_parse(a){if(this._getType(a)!==c.symbol){let b=this._getOrReturnCtx(a);return n(b,{code:e.invalid_type,expected:c.symbol,received:b.parsedType}),p}return r(a.data)}}X.create=a=>new X({typeName:bn.ZodSymbol,...y(a)});class Y extends z{_parse(a){if(this._getType(a)!==c.undefined){let b=this._getOrReturnCtx(a);return n(b,{code:e.invalid_type,expected:c.undefined,received:b.parsedType}),p}return r(a.data)}}Y.create=a=>new Y({typeName:bn.ZodUndefined,...y(a)});class Z extends z{_parse(a){if(this._getType(a)!==c.null){let b=this._getOrReturnCtx(a);return n(b,{code:e.invalid_type,expected:c.null,received:b.parsedType}),p}return r(a.data)}}Z.create=a=>new Z({typeName:bn.ZodNull,...y(a)});class $ extends z{constructor(){super(...arguments),this._any=!0}_parse(a){return r(a.data)}}$.create=a=>new $({typeName:bn.ZodAny,...y(a)});class _ extends z{constructor(){super(...arguments),this._unknown=!0}_parse(a){return r(a.data)}}_.create=a=>new _({typeName:bn.ZodUnknown,...y(a)});class aa extends z{_parse(a){let b=this._getOrReturnCtx(a);return n(b,{code:e.invalid_type,expected:c.never,received:b.parsedType}),p}}aa.create=a=>new aa({typeName:bn.ZodNever,...y(a)});class ab extends z{_parse(a){if(this._getType(a)!==c.undefined){let b=this._getOrReturnCtx(a);return n(b,{code:e.invalid_type,expected:c.void,received:b.parsedType}),p}return r(a.data)}}ab.create=a=>new ab({typeName:bn.ZodVoid,...y(a)});class ac extends z{_parse(a){let{ctx:b,status:d}=this._processInputParams(a),f=this._def;if(b.parsedType!==c.array)return n(b,{code:e.invalid_type,expected:c.array,received:b.parsedType}),p;if(null!==f.exactLength){let a=b.data.length>f.exactLength.value,c=b.data.length<f.exactLength.value;(a||c)&&(n(b,{code:a?e.too_big:e.too_small,minimum:c?f.exactLength.value:void 0,maximum:a?f.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:f.exactLength.message}),d.dirty())}if(null!==f.minLength&&b.data.length<f.minLength.value&&(n(b,{code:e.too_small,minimum:f.minLength.value,type:"array",inclusive:!0,exact:!1,message:f.minLength.message}),d.dirty()),null!==f.maxLength&&b.data.length>f.maxLength.value&&(n(b,{code:e.too_big,maximum:f.maxLength.value,type:"array",inclusive:!0,exact:!1,message:f.maxLength.message}),d.dirty()),b.common.async)return Promise.all([...b.data].map((a,c)=>f.type._parseAsync(new w(b,a,b.path,c)))).then(a=>o.mergeArray(d,a));let g=[...b.data].map((a,c)=>f.type._parseSync(new w(b,a,b.path,c)));return o.mergeArray(d,g)}get element(){return this._def.type}min(a,b){return new ac({...this._def,minLength:{value:a,message:bm.toString(b)}})}max(a,b){return new ac({...this._def,maxLength:{value:a,message:bm.toString(b)}})}length(a,b){return new ac({...this._def,exactLength:{value:a,message:bm.toString(b)}})}nonempty(a){return this.min(1,a)}}ac.create=(a,b)=>new ac({type:a,minLength:null,maxLength:null,exactLength:null,typeName:bn.ZodArray,...y(b)});class ad extends z{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let a=this._def.shape(),b=bk.objectKeys(a);return this._cached={shape:a,keys:b},this._cached}_parse(a){if(this._getType(a)!==c.object){let b=this._getOrReturnCtx(a);return n(b,{code:e.invalid_type,expected:c.object,received:b.parsedType}),p}let{status:b,ctx:d}=this._processInputParams(a),{shape:f,keys:g}=this._getCached(),h=[];if(!(this._def.catchall instanceof aa&&"strip"===this._def.unknownKeys))for(let a in d.data)g.includes(a)||h.push(a);let i=[];for(let a of g){let b=f[a],c=d.data[a];i.push({key:{status:"valid",value:a},value:b._parse(new w(d,c,d.path,a)),alwaysSet:a in d.data})}if(this._def.catchall instanceof aa){let a=this._def.unknownKeys;if("passthrough"===a)for(let a of h)i.push({key:{status:"valid",value:a},value:{status:"valid",value:d.data[a]}});else if("strict"===a)h.length>0&&(n(d,{code:e.unrecognized_keys,keys:h}),b.dirty());else if("strip"===a);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let a=this._def.catchall;for(let b of h){let c=d.data[b];i.push({key:{status:"valid",value:b},value:a._parse(new w(d,c,d.path,b)),alwaysSet:b in d.data})}}return d.common.async?Promise.resolve().then(async()=>{let a=[];for(let b of i){let c=await b.key,d=await b.value;a.push({key:c,value:d,alwaysSet:b.alwaysSet})}return a}).then(a=>o.mergeObjectSync(b,a)):o.mergeObjectSync(b,i)}get shape(){return this._def.shape()}strict(a){return bm.errToObj,new ad({...this._def,unknownKeys:"strict",...void 0!==a?{errorMap:(b,c)=>{let d=this._def.errorMap?.(b,c).message??c.defaultError;return"unrecognized_keys"===b.code?{message:bm.errToObj(a).message??d}:{message:d}}}:{}})}strip(){return new ad({...this._def,unknownKeys:"strip"})}passthrough(){return new ad({...this._def,unknownKeys:"passthrough"})}extend(a){return new ad({...this._def,shape:()=>({...this._def.shape(),...a})})}merge(a){return new ad({unknownKeys:a._def.unknownKeys,catchall:a._def.catchall,shape:()=>({...this._def.shape(),...a._def.shape()}),typeName:bn.ZodObject})}setKey(a,b){return this.augment({[a]:b})}catchall(a){return new ad({...this._def,catchall:a})}pick(a){let b={};for(let c of bk.objectKeys(a))a[c]&&this.shape[c]&&(b[c]=this.shape[c]);return new ad({...this._def,shape:()=>b})}omit(a){let b={};for(let c of bk.objectKeys(this.shape))a[c]||(b[c]=this.shape[c]);return new ad({...this._def,shape:()=>b})}deepPartial(){return function a(b){if(b instanceof ad){let c={};for(let d in b.shape){let e=b.shape[d];c[d]=au.create(a(e))}return new ad({...b._def,shape:()=>c})}if(b instanceof ac)return new ac({...b._def,type:a(b.element)});if(b instanceof au)return au.create(a(b.unwrap()));if(b instanceof av)return av.create(a(b.unwrap()));if(b instanceof ai)return ai.create(b.items.map(b=>a(b)));else return b}(this)}partial(a){let b={};for(let c of bk.objectKeys(this.shape)){let d=this.shape[c];a&&!a[c]?b[c]=d:b[c]=d.optional()}return new ad({...this._def,shape:()=>b})}required(a){let b={};for(let c of bk.objectKeys(this.shape))if(a&&!a[c])b[c]=this.shape[c];else{let a=this.shape[c];for(;a instanceof au;)a=a._def.innerType;b[c]=a}return new ad({...this._def,shape:()=>b})}keyof(){return ap(bk.objectKeys(this.shape))}}ad.create=(a,b)=>new ad({shape:()=>a,unknownKeys:"strip",catchall:aa.create(),typeName:bn.ZodObject,...y(b)}),ad.strictCreate=(a,b)=>new ad({shape:()=>a,unknownKeys:"strict",catchall:aa.create(),typeName:bn.ZodObject,...y(b)}),ad.lazycreate=(a,b)=>new ad({shape:a,unknownKeys:"strip",catchall:aa.create(),typeName:bn.ZodObject,...y(b)});class ae extends z{_parse(a){let{ctx:b}=this._processInputParams(a),c=this._def.options;if(b.common.async)return Promise.all(c.map(async a=>{let c={...b,common:{...b.common,issues:[]},parent:null};return{result:await a._parseAsync({data:b.data,path:b.path,parent:c}),ctx:c}})).then(function(a){for(let b of a)if("valid"===b.result.status)return b.result;for(let c of a)if("dirty"===c.result.status)return b.common.issues.push(...c.ctx.common.issues),c.result;let c=a.map(a=>new g(a.ctx.common.issues));return n(b,{code:e.invalid_union,unionErrors:c}),p});{let a,d=[];for(let e of c){let c={...b,common:{...b.common,issues:[]},parent:null},f=e._parseSync({data:b.data,path:b.path,parent:c});if("valid"===f.status)return f;"dirty"!==f.status||a||(a={result:f,ctx:c}),c.common.issues.length&&d.push(c.common.issues)}if(a)return b.common.issues.push(...a.ctx.common.issues),a.result;let f=d.map(a=>new g(a));return n(b,{code:e.invalid_union,unionErrors:f}),p}}get options(){return this._def.options}}ae.create=(a,b)=>new ae({options:a,typeName:bn.ZodUnion,...y(b)});let af=a=>{if(a instanceof an)return af(a.schema);if(a instanceof at)return af(a.innerType());if(a instanceof ao)return[a.value];if(a instanceof aq)return a.options;if(a instanceof ar)return bk.objectValues(a.enum);else if(a instanceof aw)return af(a._def.innerType);else if(a instanceof Y)return[void 0];else if(a instanceof Z)return[null];else if(a instanceof au)return[void 0,...af(a.unwrap())];else if(a instanceof av)return[null,...af(a.unwrap())];else if(a instanceof aA)return af(a.unwrap());else if(a instanceof aC)return af(a.unwrap());else if(a instanceof ax)return af(a._def.innerType);else return[]};class ag extends z{_parse(a){let{ctx:b}=this._processInputParams(a);if(b.parsedType!==c.object)return n(b,{code:e.invalid_type,expected:c.object,received:b.parsedType}),p;let d=this.discriminator,f=b.data[d],g=this.optionsMap.get(f);return g?b.common.async?g._parseAsync({data:b.data,path:b.path,parent:b}):g._parseSync({data:b.data,path:b.path,parent:b}):(n(b,{code:e.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[d]}),p)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(a,b,c){let d=new Map;for(let c of b){let b=af(c.shape[a]);if(!b.length)throw Error(`A discriminator value for key \`${a}\` could not be extracted from all schema options`);for(let e of b){if(d.has(e))throw Error(`Discriminator property ${String(a)} has duplicate value ${String(e)}`);d.set(e,c)}}return new ag({typeName:bn.ZodDiscriminatedUnion,discriminator:a,options:b,optionsMap:d,...y(c)})}}class ah extends z{_parse(a){let{status:b,ctx:f}=this._processInputParams(a),g=(a,g)=>{if(s(a)||s(g))return p;let h=function a(b,e){let f=d(b),g=d(e);if(b===e)return{valid:!0,data:b};if(f===c.object&&g===c.object){let c=bk.objectKeys(e),d=bk.objectKeys(b).filter(a=>-1!==c.indexOf(a)),f={...b,...e};for(let c of d){let d=a(b[c],e[c]);if(!d.valid)return{valid:!1};f[c]=d.data}return{valid:!0,data:f}}if(f===c.array&&g===c.array){if(b.length!==e.length)return{valid:!1};let c=[];for(let d=0;d<b.length;d++){let f=a(b[d],e[d]);if(!f.valid)return{valid:!1};c.push(f.data)}return{valid:!0,data:c}}if(f===c.date&&g===c.date&&+b==+e)return{valid:!0,data:b};return{valid:!1}}(a.value,g.value);return h.valid?((t(a)||t(g))&&b.dirty(),{status:b.value,value:h.data}):(n(f,{code:e.invalid_intersection_types}),p)};return f.common.async?Promise.all([this._def.left._parseAsync({data:f.data,path:f.path,parent:f}),this._def.right._parseAsync({data:f.data,path:f.path,parent:f})]).then(([a,b])=>g(a,b)):g(this._def.left._parseSync({data:f.data,path:f.path,parent:f}),this._def.right._parseSync({data:f.data,path:f.path,parent:f}))}}ah.create=(a,b,c)=>new ah({left:a,right:b,typeName:bn.ZodIntersection,...y(c)});class ai extends z{_parse(a){let{status:b,ctx:d}=this._processInputParams(a);if(d.parsedType!==c.array)return n(d,{code:e.invalid_type,expected:c.array,received:d.parsedType}),p;if(d.data.length<this._def.items.length)return n(d,{code:e.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),p;!this._def.rest&&d.data.length>this._def.items.length&&(n(d,{code:e.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),b.dirty());let f=[...d.data].map((a,b)=>{let c=this._def.items[b]||this._def.rest;return c?c._parse(new w(d,a,d.path,b)):null}).filter(a=>!!a);return d.common.async?Promise.all(f).then(a=>o.mergeArray(b,a)):o.mergeArray(b,f)}get items(){return this._def.items}rest(a){return new ai({...this._def,rest:a})}}ai.create=(a,b)=>{if(!Array.isArray(a))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new ai({items:a,typeName:bn.ZodTuple,rest:null,...y(b)})};class aj extends z{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(a){let{status:b,ctx:d}=this._processInputParams(a);if(d.parsedType!==c.object)return n(d,{code:e.invalid_type,expected:c.object,received:d.parsedType}),p;let f=[],g=this._def.keyType,h=this._def.valueType;for(let a in d.data)f.push({key:g._parse(new w(d,a,d.path,a)),value:h._parse(new w(d,d.data[a],d.path,a)),alwaysSet:a in d.data});return d.common.async?o.mergeObjectAsync(b,f):o.mergeObjectSync(b,f)}get element(){return this._def.valueType}static create(a,b,c){return new aj(b instanceof z?{keyType:a,valueType:b,typeName:bn.ZodRecord,...y(c)}:{keyType:S.create(),valueType:a,typeName:bn.ZodRecord,...y(b)})}}class ak extends z{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(a){let{status:b,ctx:d}=this._processInputParams(a);if(d.parsedType!==c.map)return n(d,{code:e.invalid_type,expected:c.map,received:d.parsedType}),p;let f=this._def.keyType,g=this._def.valueType,h=[...d.data.entries()].map(([a,b],c)=>({key:f._parse(new w(d,a,d.path,[c,"key"])),value:g._parse(new w(d,b,d.path,[c,"value"]))}));if(d.common.async){let a=new Map;return Promise.resolve().then(async()=>{for(let c of h){let d=await c.key,e=await c.value;if("aborted"===d.status||"aborted"===e.status)return p;("dirty"===d.status||"dirty"===e.status)&&b.dirty(),a.set(d.value,e.value)}return{status:b.value,value:a}})}{let a=new Map;for(let c of h){let d=c.key,e=c.value;if("aborted"===d.status||"aborted"===e.status)return p;("dirty"===d.status||"dirty"===e.status)&&b.dirty(),a.set(d.value,e.value)}return{status:b.value,value:a}}}}ak.create=(a,b,c)=>new ak({valueType:b,keyType:a,typeName:bn.ZodMap,...y(c)});class al extends z{_parse(a){let{status:b,ctx:d}=this._processInputParams(a);if(d.parsedType!==c.set)return n(d,{code:e.invalid_type,expected:c.set,received:d.parsedType}),p;let f=this._def;null!==f.minSize&&d.data.size<f.minSize.value&&(n(d,{code:e.too_small,minimum:f.minSize.value,type:"set",inclusive:!0,exact:!1,message:f.minSize.message}),b.dirty()),null!==f.maxSize&&d.data.size>f.maxSize.value&&(n(d,{code:e.too_big,maximum:f.maxSize.value,type:"set",inclusive:!0,exact:!1,message:f.maxSize.message}),b.dirty());let g=this._def.valueType;function h(a){let c=new Set;for(let d of a){if("aborted"===d.status)return p;"dirty"===d.status&&b.dirty(),c.add(d.value)}return{status:b.value,value:c}}let i=[...d.data.values()].map((a,b)=>g._parse(new w(d,a,d.path,b)));return d.common.async?Promise.all(i).then(a=>h(a)):h(i)}min(a,b){return new al({...this._def,minSize:{value:a,message:bm.toString(b)}})}max(a,b){return new al({...this._def,maxSize:{value:a,message:bm.toString(b)}})}size(a,b){return this.min(a,b).max(a,b)}nonempty(a){return this.min(1,a)}}al.create=(a,b)=>new al({valueType:a,minSize:null,maxSize:null,typeName:bn.ZodSet,...y(b)});class am extends z{constructor(){super(...arguments),this.validate=this.implement}_parse(a){let{ctx:b}=this._processInputParams(a);if(b.parsedType!==c.function)return n(b,{code:e.invalid_type,expected:c.function,received:b.parsedType}),p;function d(a,c){return l({data:a,path:b.path,errorMaps:[b.common.contextualErrorMap,b.schemaErrorMap,i,h].filter(a=>!!a),issueData:{code:e.invalid_arguments,argumentsError:c}})}function f(a,c){return l({data:a,path:b.path,errorMaps:[b.common.contextualErrorMap,b.schemaErrorMap,i,h].filter(a=>!!a),issueData:{code:e.invalid_return_type,returnTypeError:c}})}let j={errorMap:b.common.contextualErrorMap},k=b.data;if(this._def.returns instanceof as){let a=this;return r(async function(...b){let c=new g([]),e=await a._def.args.parseAsync(b,j).catch(a=>{throw c.addIssue(d(b,a)),c}),h=await Reflect.apply(k,this,e);return await a._def.returns._def.type.parseAsync(h,j).catch(a=>{throw c.addIssue(f(h,a)),c})})}{let a=this;return r(function(...b){let c=a._def.args.safeParse(b,j);if(!c.success)throw new g([d(b,c.error)]);let e=Reflect.apply(k,this,c.data),h=a._def.returns.safeParse(e,j);if(!h.success)throw new g([f(e,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...a){return new am({...this._def,args:ai.create(a).rest(_.create())})}returns(a){return new am({...this._def,returns:a})}implement(a){return this.parse(a)}strictImplement(a){return this.parse(a)}static create(a,b,c){return new am({args:a||ai.create([]).rest(_.create()),returns:b||_.create(),typeName:bn.ZodFunction,...y(c)})}}class an extends z{get schema(){return this._def.getter()}_parse(a){let{ctx:b}=this._processInputParams(a);return this._def.getter()._parse({data:b.data,path:b.path,parent:b})}}an.create=(a,b)=>new an({getter:a,typeName:bn.ZodLazy,...y(b)});class ao extends z{_parse(a){if(a.data!==this._def.value){let b=this._getOrReturnCtx(a);return n(b,{received:b.data,code:e.invalid_literal,expected:this._def.value}),p}return{status:"valid",value:a.data}}get value(){return this._def.value}}function ap(a,b){return new aq({values:a,typeName:bn.ZodEnum,...y(b)})}ao.create=(a,b)=>new ao({value:a,typeName:bn.ZodLiteral,...y(b)});class aq extends z{_parse(a){if("string"!=typeof a.data){let b=this._getOrReturnCtx(a),c=this._def.values;return n(b,{expected:bk.joinValues(c),received:b.parsedType,code:e.invalid_type}),p}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(a.data)){let b=this._getOrReturnCtx(a),c=this._def.values;return n(b,{received:b.data,code:e.invalid_enum_value,options:c}),p}return r(a.data)}get options(){return this._def.values}get enum(){let a={};for(let b of this._def.values)a[b]=b;return a}get Values(){let a={};for(let b of this._def.values)a[b]=b;return a}get Enum(){let a={};for(let b of this._def.values)a[b]=b;return a}extract(a,b=this._def){return aq.create(a,{...this._def,...b})}exclude(a,b=this._def){return aq.create(this.options.filter(b=>!a.includes(b)),{...this._def,...b})}}aq.create=ap;class ar extends z{_parse(a){let b=bk.getValidEnumValues(this._def.values),d=this._getOrReturnCtx(a);if(d.parsedType!==c.string&&d.parsedType!==c.number){let a=bk.objectValues(b);return n(d,{expected:bk.joinValues(a),received:d.parsedType,code:e.invalid_type}),p}if(this._cache||(this._cache=new Set(bk.getValidEnumValues(this._def.values))),!this._cache.has(a.data)){let a=bk.objectValues(b);return n(d,{received:d.data,code:e.invalid_enum_value,options:a}),p}return r(a.data)}get enum(){return this._def.values}}ar.create=(a,b)=>new ar({values:a,typeName:bn.ZodNativeEnum,...y(b)});class as extends z{unwrap(){return this._def.type}_parse(a){let{ctx:b}=this._processInputParams(a);return b.parsedType!==c.promise&&!1===b.common.async?(n(b,{code:e.invalid_type,expected:c.promise,received:b.parsedType}),p):r((b.parsedType===c.promise?b.data:Promise.resolve(b.data)).then(a=>this._def.type.parseAsync(a,{path:b.path,errorMap:b.common.contextualErrorMap})))}}as.create=(a,b)=>new as({type:a,typeName:bn.ZodPromise,...y(b)});class at extends z{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===bn.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(a){let{status:b,ctx:c}=this._processInputParams(a),d=this._def.effect||null,e={addIssue:a=>{n(c,a),a.fatal?b.abort():b.dirty()},get path(){return c.path}};if(e.addIssue=e.addIssue.bind(e),"preprocess"===d.type){let a=d.transform(c.data,e);if(c.common.async)return Promise.resolve(a).then(async a=>{if("aborted"===b.value)return p;let d=await this._def.schema._parseAsync({data:a,path:c.path,parent:c});return"aborted"===d.status?p:"dirty"===d.status||"dirty"===b.value?q(d.value):d});{if("aborted"===b.value)return p;let d=this._def.schema._parseSync({data:a,path:c.path,parent:c});return"aborted"===d.status?p:"dirty"===d.status||"dirty"===b.value?q(d.value):d}}if("refinement"===d.type){let a=a=>{let b=d.refinement(a,e);if(c.common.async)return Promise.resolve(b);if(b instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(!1!==c.common.async)return this._def.schema._parseAsync({data:c.data,path:c.path,parent:c}).then(c=>"aborted"===c.status?p:("dirty"===c.status&&b.dirty(),a(c.value).then(()=>({status:b.value,value:c.value}))));{let d=this._def.schema._parseSync({data:c.data,path:c.path,parent:c});return"aborted"===d.status?p:("dirty"===d.status&&b.dirty(),a(d.value),{status:b.value,value:d.value})}}if("transform"===d.type)if(!1!==c.common.async)return this._def.schema._parseAsync({data:c.data,path:c.path,parent:c}).then(a=>u(a)?Promise.resolve(d.transform(a.value,e)).then(a=>({status:b.value,value:a})):p);else{let a=this._def.schema._parseSync({data:c.data,path:c.path,parent:c});if(!u(a))return p;let f=d.transform(a.value,e);if(f instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:b.value,value:f}}bk.assertNever(d)}}at.create=(a,b,c)=>new at({schema:a,typeName:bn.ZodEffects,effect:b,...y(c)}),at.createWithPreprocess=(a,b,c)=>new at({schema:b,effect:{type:"preprocess",transform:a},typeName:bn.ZodEffects,...y(c)});class au extends z{_parse(a){return this._getType(a)===c.undefined?r(void 0):this._def.innerType._parse(a)}unwrap(){return this._def.innerType}}au.create=(a,b)=>new au({innerType:a,typeName:bn.ZodOptional,...y(b)});class av extends z{_parse(a){return this._getType(a)===c.null?r(null):this._def.innerType._parse(a)}unwrap(){return this._def.innerType}}av.create=(a,b)=>new av({innerType:a,typeName:bn.ZodNullable,...y(b)});class aw extends z{_parse(a){let{ctx:b}=this._processInputParams(a),d=b.data;return b.parsedType===c.undefined&&(d=this._def.defaultValue()),this._def.innerType._parse({data:d,path:b.path,parent:b})}removeDefault(){return this._def.innerType}}aw.create=(a,b)=>new aw({innerType:a,typeName:bn.ZodDefault,defaultValue:"function"==typeof b.default?b.default:()=>b.default,...y(b)});class ax extends z{_parse(a){let{ctx:b}=this._processInputParams(a),c={...b,common:{...b.common,issues:[]}},d=this._def.innerType._parse({data:c.data,path:c.path,parent:{...c}});return v(d)?d.then(a=>({status:"valid",value:"valid"===a.status?a.value:this._def.catchValue({get error(){return new g(c.common.issues)},input:c.data})})):{status:"valid",value:"valid"===d.status?d.value:this._def.catchValue({get error(){return new g(c.common.issues)},input:c.data})}}removeCatch(){return this._def.innerType}}ax.create=(a,b)=>new ax({innerType:a,typeName:bn.ZodCatch,catchValue:"function"==typeof b.catch?b.catch:()=>b.catch,...y(b)});class ay extends z{_parse(a){if(this._getType(a)!==c.nan){let b=this._getOrReturnCtx(a);return n(b,{code:e.invalid_type,expected:c.nan,received:b.parsedType}),p}return{status:"valid",value:a.data}}}ay.create=a=>new ay({typeName:bn.ZodNaN,...y(a)});let az=Symbol("zod_brand");class aA extends z{_parse(a){let{ctx:b}=this._processInputParams(a),c=b.data;return this._def.type._parse({data:c,path:b.path,parent:b})}unwrap(){return this._def.type}}class aB extends z{_parse(a){let{status:b,ctx:c}=this._processInputParams(a);if(c.common.async)return(async()=>{let a=await this._def.in._parseAsync({data:c.data,path:c.path,parent:c});return"aborted"===a.status?p:"dirty"===a.status?(b.dirty(),q(a.value)):this._def.out._parseAsync({data:a.value,path:c.path,parent:c})})();{let a=this._def.in._parseSync({data:c.data,path:c.path,parent:c});return"aborted"===a.status?p:"dirty"===a.status?(b.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:c.path,parent:c})}}static create(a,b){return new aB({in:a,out:b,typeName:bn.ZodPipeline})}}class aC extends z{_parse(a){let b=this._def.innerType._parse(a),c=a=>(u(a)&&(a.value=Object.freeze(a.value)),a);return v(b)?b.then(a=>c(a)):c(b)}unwrap(){return this._def.innerType}}function aD(a,b){let c="function"==typeof a?a(b):"string"==typeof a?{message:a}:a;return"string"==typeof c?{message:c}:c}function aE(a,b={},c){return a?$.create().superRefine((d,e)=>{let f=a(d);if(f instanceof Promise)return f.then(a=>{if(!a){let a=aD(b,d),f=a.fatal??c??!0;e.addIssue({code:"custom",...a,fatal:f})}});if(!f){let a=aD(b,d),f=a.fatal??c??!0;e.addIssue({code:"custom",...a,fatal:f})}}):$.create()}aC.create=(a,b)=>new aC({innerType:a,typeName:bn.ZodReadonly,...y(b)});let aF={object:ad.lazycreate};(bj=bn||(bn={})).ZodString="ZodString",bj.ZodNumber="ZodNumber",bj.ZodNaN="ZodNaN",bj.ZodBigInt="ZodBigInt",bj.ZodBoolean="ZodBoolean",bj.ZodDate="ZodDate",bj.ZodSymbol="ZodSymbol",bj.ZodUndefined="ZodUndefined",bj.ZodNull="ZodNull",bj.ZodAny="ZodAny",bj.ZodUnknown="ZodUnknown",bj.ZodNever="ZodNever",bj.ZodVoid="ZodVoid",bj.ZodArray="ZodArray",bj.ZodObject="ZodObject",bj.ZodUnion="ZodUnion",bj.ZodDiscriminatedUnion="ZodDiscriminatedUnion",bj.ZodIntersection="ZodIntersection",bj.ZodTuple="ZodTuple",bj.ZodRecord="ZodRecord",bj.ZodMap="ZodMap",bj.ZodSet="ZodSet",bj.ZodFunction="ZodFunction",bj.ZodLazy="ZodLazy",bj.ZodLiteral="ZodLiteral",bj.ZodEnum="ZodEnum",bj.ZodEffects="ZodEffects",bj.ZodNativeEnum="ZodNativeEnum",bj.ZodOptional="ZodOptional",bj.ZodNullable="ZodNullable",bj.ZodDefault="ZodDefault",bj.ZodCatch="ZodCatch",bj.ZodPromise="ZodPromise",bj.ZodBranded="ZodBranded",bj.ZodPipeline="ZodPipeline",bj.ZodReadonly="ZodReadonly";let aG=(a,b={message:`Input not instance of ${a.name}`})=>aE(b=>b instanceof a,b),aH=S.create,aI=T.create,aJ=ay.create,aK=U.create,aL=V.create,aM=W.create,aN=X.create,aO=Y.create,aP=Z.create,aQ=$.create,aR=_.create,aS=aa.create,aT=ab.create,aU=ac.create,aV=ad.create,aW=ad.strictCreate,aX=ae.create,aY=ag.create,aZ=ah.create,a$=ai.create,a_=aj.create,a0=ak.create,a1=al.create,a2=am.create,a3=an.create,a4=ao.create,a5=aq.create,a6=ar.create,a7=as.create,a8=at.create,a9=au.create,ba=av.create,bb=at.createWithPreprocess,bc=aB.create,bd=()=>aH().optional(),be=()=>aI().optional(),bf=()=>aL().optional(),bg={string:a=>S.create({...a,coerce:!0}),number:a=>T.create({...a,coerce:!0}),boolean:a=>V.create({...a,coerce:!0}),bigint:a=>U.create({...a,coerce:!0}),date:a=>W.create({...a,coerce:!0})};a.s(["BRAND",0,az,"NEVER",0,p,"Schema",()=>z,"ZodAny",()=>$,"ZodArray",()=>ac,"ZodBigInt",()=>U,"ZodBoolean",()=>V,"ZodBranded",()=>aA,"ZodCatch",()=>ax,"ZodDate",()=>W,"ZodDefault",()=>aw,"ZodDiscriminatedUnion",()=>ag,"ZodEffects",()=>at,"ZodEnum",()=>aq,"ZodFirstPartyTypeKind",()=>bn,"ZodFunction",()=>am,"ZodIntersection",()=>ah,"ZodLazy",()=>an,"ZodLiteral",()=>ao,"ZodMap",()=>ak,"ZodNaN",()=>ay,"ZodNativeEnum",()=>ar,"ZodNever",()=>aa,"ZodNull",()=>Z,"ZodNullable",()=>av,"ZodNumber",()=>T,"ZodObject",()=>ad,"ZodOptional",()=>au,"ZodPipeline",()=>aB,"ZodPromise",()=>as,"ZodReadonly",()=>aC,"ZodRecord",()=>aj,"ZodSchema",()=>z,"ZodSet",()=>al,"ZodString",()=>S,"ZodSymbol",()=>X,"ZodTransformer",()=>at,"ZodTuple",()=>ai,"ZodType",()=>z,"ZodUndefined",()=>Y,"ZodUnion",()=>ae,"ZodUnknown",()=>_,"ZodVoid",()=>ab,"any",()=>aQ,"array",()=>aU,"bigint",()=>aK,"boolean",()=>aL,"coerce",0,bg,"custom",()=>aE,"date",()=>aM,"datetimeRegex",()=>R,"discriminatedUnion",()=>aY,"effect",()=>a8,"enum",()=>a5,"function",()=>a2,"instanceof",()=>aG,"intersection",()=>aZ,"late",0,aF,"lazy",()=>a3,"literal",()=>a4,"map",()=>a0,"nan",()=>aJ,"nativeEnum",()=>a6,"never",()=>aS,"null",()=>aP,"nullable",()=>ba,"number",()=>aI,"object",()=>aV,"oboolean",()=>bf,"onumber",()=>be,"optional",()=>a9,"ostring",()=>bd,"pipeline",()=>bc,"preprocess",()=>bb,"promise",()=>a7,"record",()=>a_,"set",()=>a1,"strictObject",()=>aW,"string",()=>aH,"symbol",()=>aN,"transformer",()=>a8,"tuple",()=>a$,"undefined",()=>aO,"union",()=>aX,"unknown",()=>aR,"void",()=>aT],689277),a.i(689277),a.i(142454),a.s(["BRAND",0,az,"DIRTY",0,q,"EMPTY_PATH",0,m,"INVALID",0,p,"NEVER",0,p,"OK",0,r,"ParseStatus",()=>o,"Schema",()=>z,"ZodAny",()=>$,"ZodArray",()=>ac,"ZodBigInt",()=>U,"ZodBoolean",()=>V,"ZodBranded",()=>aA,"ZodCatch",()=>ax,"ZodDate",()=>W,"ZodDefault",()=>aw,"ZodDiscriminatedUnion",()=>ag,"ZodEffects",()=>at,"ZodEnum",()=>aq,"ZodError",()=>g,"ZodFirstPartyTypeKind",()=>bn,"ZodFunction",()=>am,"ZodIntersection",()=>ah,"ZodIssueCode",0,e,"ZodLazy",()=>an,"ZodLiteral",()=>ao,"ZodMap",()=>ak,"ZodNaN",()=>ay,"ZodNativeEnum",()=>ar,"ZodNever",()=>aa,"ZodNull",()=>Z,"ZodNullable",()=>av,"ZodNumber",()=>T,"ZodObject",()=>ad,"ZodOptional",()=>au,"ZodParsedType",0,c,"ZodPipeline",()=>aB,"ZodPromise",()=>as,"ZodReadonly",()=>aC,"ZodRecord",()=>aj,"ZodSchema",()=>z,"ZodSet",()=>al,"ZodString",()=>S,"ZodSymbol",()=>X,"ZodTransformer",()=>at,"ZodTuple",()=>ai,"ZodType",()=>z,"ZodUndefined",()=>Y,"ZodUnion",()=>ae,"ZodUnknown",()=>_,"ZodVoid",()=>ab,"addIssueToContext",()=>n,"any",()=>aQ,"array",()=>aU,"bigint",()=>aK,"boolean",()=>aL,"coerce",0,bg,"custom",()=>aE,"date",()=>aM,"datetimeRegex",()=>R,"defaultErrorMap",0,h,"discriminatedUnion",()=>aY,"effect",()=>a8,"enum",()=>a5,"function",()=>a2,"getErrorMap",()=>k,"getParsedType",0,d,"instanceof",()=>aG,"intersection",()=>aZ,"isAborted",0,s,"isAsync",0,v,"isDirty",0,t,"isValid",0,u,"late",0,aF,"lazy",()=>a3,"literal",()=>a4,"makeIssue",0,l,"map",()=>a0,"nan",()=>aJ,"nativeEnum",()=>a6,"never",()=>aS,"null",()=>aP,"nullable",()=>ba,"number",()=>aI,"object",()=>aV,"objectUtil",()=>bl,"oboolean",()=>bf,"onumber",()=>be,"optional",()=>a9,"ostring",()=>bd,"pipeline",()=>bc,"preprocess",()=>bb,"promise",()=>a7,"quotelessJson",0,f,"record",()=>a_,"set",()=>a1,"setErrorMap",()=>j,"strictObject",()=>aW,"string",()=>aH,"symbol",()=>aN,"transformer",()=>a8,"tuple",()=>a$,"undefined",()=>aO,"union",()=>aX,"unknown",()=>aR,"util",()=>bk,"void",()=>aT],61661);var bh,bi,bj,bk,bl,bm,bn,bo=a.i(61661);a.s(["z",0,bo],491801)},994148,(a,b,c)=>{!function(b,c){"use strict";function d(a,b){if(!a)throw Error(b||"Assertion failed")}function e(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}function f(a,b,c){if(f.isBN(a))return a;this.negative=0,this.words=null,this.length=0,this.red=null,null!==a&&(("le"===b||"be"===b)&&(c=b,b=10),this._init(a||0,b||10,c||"be"))}b.exports=f,f.BN=f,f.wordSize=26;try{l=a.r(500874).Buffer}catch(a){}function g(a,b){var c=a.charCodeAt(b);return c>=48&&c<=57?c-48:c>=65&&c<=70?c-55:c>=97&&c<=102?c-87:void d(!1,"Invalid character in "+a)}function h(a,b,c){var d=g(a,c);return c-1>=b&&(d|=g(a,c-1)<<4),d}function i(a,b,c,e){for(var f=0,g=0,h=Math.min(a.length,c),i=b;i<h;i++){var j=a.charCodeAt(i)-48;f*=e,g=j>=49?j-49+10:j>=17?j-17+10:j,d(j>=0&&g<e,"Invalid character"),f+=g}return f}function j(a,b){a.words=b.words,a.length=b.length,a.negative=b.negative,a.red=b.red}if(f.isBN=function(a){return a instanceof f||null!==a&&"object"==typeof a&&a.constructor.wordSize===f.wordSize&&Array.isArray(a.words)},f.max=function(a,b){return a.cmp(b)>0?a:b},f.min=function(a,b){return 0>a.cmp(b)?a:b},f.prototype._init=function(a,b,c){if("number"==typeof a)return this._initNumber(a,b,c);if("object"==typeof a)return this._initArray(a,b,c);"hex"===b&&(b=16),d(b===(0|b)&&b>=2&&b<=36);var e=0;"-"===(a=a.toString().replace(/\s+/g,""))[0]&&(e++,this.negative=1),e<a.length&&(16===b?this._parseHex(a,e,c):(this._parseBase(a,b,e),"le"===c&&this._initArray(this.toArray(),b,c)))},f.prototype._initNumber=function(a,b,c){a<0&&(this.negative=1,a=-a),a<0x4000000?(this.words=[0x3ffffff&a],this.length=1):a<0x10000000000000?(this.words=[0x3ffffff&a,a/0x4000000&0x3ffffff],this.length=2):(d(a<0x20000000000000),this.words=[0x3ffffff&a,a/0x4000000&0x3ffffff,1],this.length=3),"le"===c&&this._initArray(this.toArray(),b,c)},f.prototype._initArray=function(a,b,c){if(d("number"==typeof a.length),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=Array(this.length);for(var e,f,g=0;g<this.length;g++)this.words[g]=0;var h=0;if("be"===c)for(g=a.length-1,e=0;g>=0;g-=3)f=a[g]|a[g-1]<<8|a[g-2]<<16,this.words[e]|=f<<h&0x3ffffff,this.words[e+1]=f>>>26-h&0x3ffffff,(h+=24)>=26&&(h-=26,e++);else if("le"===c)for(g=0,e=0;g<a.length;g+=3)f=a[g]|a[g+1]<<8|a[g+2]<<16,this.words[e]|=f<<h&0x3ffffff,this.words[e+1]=f>>>26-h&0x3ffffff,(h+=24)>=26&&(h-=26,e++);return this._strip()},f.prototype._parseHex=function(a,b,c){this.length=Math.ceil((a.length-b)/6),this.words=Array(this.length);for(var d,e=0;e<this.length;e++)this.words[e]=0;var f=0,g=0;if("be"===c)for(e=a.length-1;e>=b;e-=2)d=h(a,b,e)<<f,this.words[g]|=0x3ffffff&d,f>=18?(f-=18,g+=1,this.words[g]|=d>>>26):f+=8;else for(e=(a.length-b)%2==0?b+1:b;e<a.length;e+=2)d=h(a,b,e)<<f,this.words[g]|=0x3ffffff&d,f>=18?(f-=18,g+=1,this.words[g]|=d>>>26):f+=8;this._strip()},f.prototype._parseBase=function(a,b,c){this.words=[0],this.length=1;for(var d=0,e=1;e<=0x3ffffff;e*=b)d++;d--,e=e/b|0;for(var f=a.length-c,g=f%d,h=Math.min(f,f-g)+c,j=0,k=c;k<h;k+=d)j=i(a,k,k+d,b),this.imuln(e),this.words[0]+j<0x4000000?this.words[0]+=j:this._iaddn(j);if(0!==g){var l=1;for(j=i(a,k,a.length,b),k=0;k<g;k++)l*=b;this.imuln(l),this.words[0]+j<0x4000000?this.words[0]+=j:this._iaddn(j)}this._strip()},f.prototype.copy=function(a){a.words=Array(this.length);for(var b=0;b<this.length;b++)a.words[b]=this.words[b];a.length=this.length,a.negative=this.negative,a.red=this.red},f.prototype._move=function(a){j(a,this)},f.prototype.clone=function(){var a=new f(null);return this.copy(a),a},f.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},f.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},f.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{f.prototype[Symbol.for("nodejs.util.inspect.custom")]=k}catch(a){f.prototype.inspect=k}else f.prototype.inspect=k;function k(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var l,m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],n=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],o=[0,0,0x2000000,0x290d741,0x1000000,0x2e90edd,0x39aa400,0x267bf47,0x1000000,0x290d741,1e7,0x12959c3,0x222c000,0x3bd7765,7529536,0xadcea1,0x1000000,0x1704f61,0x206fc40,0x2cddcf9,64e6,4084101,5153632,6436343,7962624,9765625,0xb54ba0,0xdaf26b,0x1069c00,0x138f9ad,243e5,0x1b4d89f,0x2000000,0x25528a1,0x2b54a20,0x3216b93,0x39aa400];function p(a,b,c){c.negative=b.negative^a.negative;var d=a.length+b.length|0;c.length=d,d=d-1|0;var e=0|a.words[0],f=0|b.words[0],g=e*f,h=0x3ffffff&g,i=g/0x4000000|0;c.words[0]=h;for(var j=1;j<d;j++){for(var k=i>>>26,l=0x3ffffff&i,m=Math.min(j,b.length-1),n=Math.max(0,j-a.length+1);n<=m;n++){var o=j-n|0;k+=(g=(e=0|a.words[o])*(f=0|b.words[n])+l)/0x4000000|0,l=0x3ffffff&g}c.words[j]=0|l,i=0|k}return 0!==i?c.words[j]=0|i:c.length--,c._strip()}f.prototype.toString=function(a,b){if(b=0|b||1,16===(a=a||10)||"hex"===a){for(var c="",e=0,f=0,g=0;g<this.length;g++){var h=this.words[g],i=((h<<e|f)&0xffffff).toString(16);f=h>>>24-e&0xffffff,(e+=2)>=26&&(e-=26,g--),c=0!==f||g!==this.length-1?m[6-i.length]+i+c:i+c}for(0!==f&&(c=f.toString(16)+c);c.length%b!=0;)c="0"+c;return 0!==this.negative&&(c="-"+c),c}if(a===(0|a)&&a>=2&&a<=36){var j=n[a],k=o[a];c="";var l=this.clone();for(l.negative=0;!l.isZero();){var p=l.modrn(k).toString(a);c=(l=l.idivn(k)).isZero()?p+c:m[j-p.length]+p+c}for(this.isZero()&&(c="0"+c);c.length%b!=0;)c="0"+c;return 0!==this.negative&&(c="-"+c),c}d(!1,"Base should be between 2 and 36")},f.prototype.toNumber=function(){var a=this.words[0];return 2===this.length?a+=0x4000000*this.words[1]:3===this.length&&1===this.words[2]?a+=0x10000000000000+0x4000000*this.words[1]:this.length>2&&d(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-a:a},f.prototype.toJSON=function(){return this.toString(16,2)},l&&(f.prototype.toBuffer=function(a,b){return this.toArrayLike(l,a,b)}),f.prototype.toArray=function(a,b){return this.toArrayLike(Array,a,b)},f.prototype.toArrayLike=function(a,b,c){this._strip();var e=this.byteLength(),f=c||Math.max(1,e);d(e<=f,"byte array longer than desired length"),d(f>0,"Requested array length <= 0");var g=a.allocUnsafe?a.allocUnsafe(f):new a(f);return this["_toArrayLike"+("le"===b?"LE":"BE")](g,e),g},f.prototype._toArrayLikeLE=function(a,b){for(var c=0,d=0,e=0,f=0;e<this.length;e++){var g=this.words[e]<<f|d;a[c++]=255&g,c<a.length&&(a[c++]=g>>8&255),c<a.length&&(a[c++]=g>>16&255),6===f?(c<a.length&&(a[c++]=g>>24&255),d=0,f=0):(d=g>>>24,f+=2)}if(c<a.length)for(a[c++]=d;c<a.length;)a[c++]=0},f.prototype._toArrayLikeBE=function(a,b){for(var c=a.length-1,d=0,e=0,f=0;e<this.length;e++){var g=this.words[e]<<f|d;a[c--]=255&g,c>=0&&(a[c--]=g>>8&255),c>=0&&(a[c--]=g>>16&255),6===f?(c>=0&&(a[c--]=g>>24&255),d=0,f=0):(d=g>>>24,f+=2)}if(c>=0)for(a[c--]=d;c>=0;)a[c--]=0},Math.clz32?f.prototype._countBits=function(a){return 32-Math.clz32(a)}:f.prototype._countBits=function(a){var b=a,c=0;return b>=4096&&(c+=13,b>>>=13),b>=64&&(c+=7,b>>>=7),b>=8&&(c+=4,b>>>=4),b>=2&&(c+=2,b>>>=2),c+b},f.prototype._zeroBits=function(a){if(0===a)return 26;var b=a,c=0;return(8191&b)==0&&(c+=13,b>>>=13),(127&b)==0&&(c+=7,b>>>=7),(15&b)==0&&(c+=4,b>>>=4),(3&b)==0&&(c+=2,b>>>=2),(1&b)==0&&c++,c},f.prototype.bitLength=function(){var a=this.words[this.length-1],b=this._countBits(a);return(this.length-1)*26+b},f.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,b=0;b<this.length;b++){var c=this._zeroBits(this.words[b]);if(a+=c,26!==c)break}return a},f.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},f.prototype.toTwos=function(a){return 0!==this.negative?this.abs().inotn(a).iaddn(1):this.clone()},f.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},f.prototype.isNeg=function(){return 0!==this.negative},f.prototype.neg=function(){return this.clone().ineg()},f.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},f.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var b=0;b<a.length;b++)this.words[b]=this.words[b]|a.words[b];return this._strip()},f.prototype.ior=function(a){return d((this.negative|a.negative)==0),this.iuor(a)},f.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},f.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},f.prototype.iuand=function(a){var b;b=this.length>a.length?a:this;for(var c=0;c<b.length;c++)this.words[c]=this.words[c]&a.words[c];return this.length=b.length,this._strip()},f.prototype.iand=function(a){return d((this.negative|a.negative)==0),this.iuand(a)},f.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},f.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},f.prototype.iuxor=function(a){this.length>a.length?(b=this,c=a):(b=a,c=this);for(var b,c,d=0;d<c.length;d++)this.words[d]=b.words[d]^c.words[d];if(this!==b)for(;d<b.length;d++)this.words[d]=b.words[d];return this.length=b.length,this._strip()},f.prototype.ixor=function(a){return d((this.negative|a.negative)==0),this.iuxor(a)},f.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},f.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},f.prototype.inotn=function(a){d("number"==typeof a&&a>=0);var b=0|Math.ceil(a/26),c=a%26;this._expand(b),c>0&&b--;for(var e=0;e<b;e++)this.words[e]=0x3ffffff&~this.words[e];return c>0&&(this.words[e]=~this.words[e]&0x3ffffff>>26-c),this._strip()},f.prototype.notn=function(a){return this.clone().inotn(a)},f.prototype.setn=function(a,b){d("number"==typeof a&&a>=0);var c=a/26|0,e=a%26;return this._expand(c+1),b?this.words[c]=this.words[c]|1<<e:this.words[c]=this.words[c]&~(1<<e),this._strip()},f.prototype.iadd=function(a){if(0!==this.negative&&0===a.negative)return this.negative=0,b=this.isub(a),this.negative^=1,this._normSign();if(0===this.negative&&0!==a.negative)return a.negative=0,b=this.isub(a),a.negative=1,b._normSign();this.length>a.length?(c=this,d=a):(c=a,d=this);for(var b,c,d,e=0,f=0;f<d.length;f++)b=(0|c.words[f])+(0|d.words[f])+e,this.words[f]=0x3ffffff&b,e=b>>>26;for(;0!==e&&f<c.length;f++)b=(0|c.words[f])+e,this.words[f]=0x3ffffff&b,e=b>>>26;if(this.length=c.length,0!==e)this.words[this.length]=e,this.length++;else if(c!==this)for(;f<c.length;f++)this.words[f]=c.words[f];return this},f.prototype.add=function(a){var b;return 0!==a.negative&&0===this.negative?(a.negative=0,b=this.sub(a),a.negative^=1,b):0===a.negative&&0!==this.negative?(this.negative=0,b=a.sub(this),this.negative=1,b):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},f.prototype.isub=function(a){if(0!==a.negative){a.negative=0;var b,c,d=this.iadd(a);return a.negative=1,d._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var e=this.cmp(a);if(0===e)return this.negative=0,this.length=1,this.words[0]=0,this;e>0?(b=this,c=a):(b=a,c=this);for(var f=0,g=0;g<c.length;g++)f=(d=(0|b.words[g])-(0|c.words[g])+f)>>26,this.words[g]=0x3ffffff&d;for(;0!==f&&g<b.length;g++)f=(d=(0|b.words[g])+f)>>26,this.words[g]=0x3ffffff&d;if(0===f&&g<b.length&&b!==this)for(;g<b.length;g++)this.words[g]=b.words[g];return this.length=Math.max(this.length,g),b!==this&&(this.negative=1),this._strip()},f.prototype.sub=function(a){return this.clone().isub(a)};var q=function(a,b,c){var d,e,f,g=a.words,h=b.words,i=c.words,j=0,k=0|g[0],l=8191&k,m=k>>>13,n=0|g[1],o=8191&n,p=n>>>13,q=0|g[2],r=8191&q,s=q>>>13,t=0|g[3],u=8191&t,v=t>>>13,w=0|g[4],x=8191&w,y=w>>>13,z=0|g[5],A=8191&z,B=z>>>13,C=0|g[6],D=8191&C,E=C>>>13,F=0|g[7],G=8191&F,H=F>>>13,I=0|g[8],J=8191&I,K=I>>>13,L=0|g[9],M=8191&L,N=L>>>13,O=0|h[0],P=8191&O,Q=O>>>13,R=0|h[1],S=8191&R,T=R>>>13,U=0|h[2],V=8191&U,W=U>>>13,X=0|h[3],Y=8191&X,Z=X>>>13,$=0|h[4],_=8191&$,aa=$>>>13,ab=0|h[5],ac=8191&ab,ad=ab>>>13,ae=0|h[6],af=8191&ae,ag=ae>>>13,ah=0|h[7],ai=8191&ah,aj=ah>>>13,ak=0|h[8],al=8191&ak,am=ak>>>13,an=0|h[9],ao=8191&an,ap=an>>>13;c.negative=a.negative^b.negative,c.length=19,d=Math.imul(l,P);var aq=(j+d|0)+((8191&(e=(e=Math.imul(l,Q))+Math.imul(m,P)|0))<<13)|0;j=((f=Math.imul(m,Q))+(e>>>13)|0)+(aq>>>26)|0,aq&=0x3ffffff,d=Math.imul(o,P),e=(e=Math.imul(o,Q))+Math.imul(p,P)|0,f=Math.imul(p,Q),d=d+Math.imul(l,S)|0;var ar=(j+d|0)+((8191&(e=(e=e+Math.imul(l,T)|0)+Math.imul(m,S)|0))<<13)|0;j=((f=f+Math.imul(m,T)|0)+(e>>>13)|0)+(ar>>>26)|0,ar&=0x3ffffff,d=Math.imul(r,P),e=(e=Math.imul(r,Q))+Math.imul(s,P)|0,f=Math.imul(s,Q),d=d+Math.imul(o,S)|0,e=(e=e+Math.imul(o,T)|0)+Math.imul(p,S)|0,f=f+Math.imul(p,T)|0,d=d+Math.imul(l,V)|0;var as=(j+d|0)+((8191&(e=(e=e+Math.imul(l,W)|0)+Math.imul(m,V)|0))<<13)|0;j=((f=f+Math.imul(m,W)|0)+(e>>>13)|0)+(as>>>26)|0,as&=0x3ffffff,d=Math.imul(u,P),e=(e=Math.imul(u,Q))+Math.imul(v,P)|0,f=Math.imul(v,Q),d=d+Math.imul(r,S)|0,e=(e=e+Math.imul(r,T)|0)+Math.imul(s,S)|0,f=f+Math.imul(s,T)|0,d=d+Math.imul(o,V)|0,e=(e=e+Math.imul(o,W)|0)+Math.imul(p,V)|0,f=f+Math.imul(p,W)|0,d=d+Math.imul(l,Y)|0;var at=(j+d|0)+((8191&(e=(e=e+Math.imul(l,Z)|0)+Math.imul(m,Y)|0))<<13)|0;j=((f=f+Math.imul(m,Z)|0)+(e>>>13)|0)+(at>>>26)|0,at&=0x3ffffff,d=Math.imul(x,P),e=(e=Math.imul(x,Q))+Math.imul(y,P)|0,f=Math.imul(y,Q),d=d+Math.imul(u,S)|0,e=(e=e+Math.imul(u,T)|0)+Math.imul(v,S)|0,f=f+Math.imul(v,T)|0,d=d+Math.imul(r,V)|0,e=(e=e+Math.imul(r,W)|0)+Math.imul(s,V)|0,f=f+Math.imul(s,W)|0,d=d+Math.imul(o,Y)|0,e=(e=e+Math.imul(o,Z)|0)+Math.imul(p,Y)|0,f=f+Math.imul(p,Z)|0,d=d+Math.imul(l,_)|0;var au=(j+d|0)+((8191&(e=(e=e+Math.imul(l,aa)|0)+Math.imul(m,_)|0))<<13)|0;j=((f=f+Math.imul(m,aa)|0)+(e>>>13)|0)+(au>>>26)|0,au&=0x3ffffff,d=Math.imul(A,P),e=(e=Math.imul(A,Q))+Math.imul(B,P)|0,f=Math.imul(B,Q),d=d+Math.imul(x,S)|0,e=(e=e+Math.imul(x,T)|0)+Math.imul(y,S)|0,f=f+Math.imul(y,T)|0,d=d+Math.imul(u,V)|0,e=(e=e+Math.imul(u,W)|0)+Math.imul(v,V)|0,f=f+Math.imul(v,W)|0,d=d+Math.imul(r,Y)|0,e=(e=e+Math.imul(r,Z)|0)+Math.imul(s,Y)|0,f=f+Math.imul(s,Z)|0,d=d+Math.imul(o,_)|0,e=(e=e+Math.imul(o,aa)|0)+Math.imul(p,_)|0,f=f+Math.imul(p,aa)|0,d=d+Math.imul(l,ac)|0;var av=(j+d|0)+((8191&(e=(e=e+Math.imul(l,ad)|0)+Math.imul(m,ac)|0))<<13)|0;j=((f=f+Math.imul(m,ad)|0)+(e>>>13)|0)+(av>>>26)|0,av&=0x3ffffff,d=Math.imul(D,P),e=(e=Math.imul(D,Q))+Math.imul(E,P)|0,f=Math.imul(E,Q),d=d+Math.imul(A,S)|0,e=(e=e+Math.imul(A,T)|0)+Math.imul(B,S)|0,f=f+Math.imul(B,T)|0,d=d+Math.imul(x,V)|0,e=(e=e+Math.imul(x,W)|0)+Math.imul(y,V)|0,f=f+Math.imul(y,W)|0,d=d+Math.imul(u,Y)|0,e=(e=e+Math.imul(u,Z)|0)+Math.imul(v,Y)|0,f=f+Math.imul(v,Z)|0,d=d+Math.imul(r,_)|0,e=(e=e+Math.imul(r,aa)|0)+Math.imul(s,_)|0,f=f+Math.imul(s,aa)|0,d=d+Math.imul(o,ac)|0,e=(e=e+Math.imul(o,ad)|0)+Math.imul(p,ac)|0,f=f+Math.imul(p,ad)|0,d=d+Math.imul(l,af)|0;var aw=(j+d|0)+((8191&(e=(e=e+Math.imul(l,ag)|0)+Math.imul(m,af)|0))<<13)|0;j=((f=f+Math.imul(m,ag)|0)+(e>>>13)|0)+(aw>>>26)|0,aw&=0x3ffffff,d=Math.imul(G,P),e=(e=Math.imul(G,Q))+Math.imul(H,P)|0,f=Math.imul(H,Q),d=d+Math.imul(D,S)|0,e=(e=e+Math.imul(D,T)|0)+Math.imul(E,S)|0,f=f+Math.imul(E,T)|0,d=d+Math.imul(A,V)|0,e=(e=e+Math.imul(A,W)|0)+Math.imul(B,V)|0,f=f+Math.imul(B,W)|0,d=d+Math.imul(x,Y)|0,e=(e=e+Math.imul(x,Z)|0)+Math.imul(y,Y)|0,f=f+Math.imul(y,Z)|0,d=d+Math.imul(u,_)|0,e=(e=e+Math.imul(u,aa)|0)+Math.imul(v,_)|0,f=f+Math.imul(v,aa)|0,d=d+Math.imul(r,ac)|0,e=(e=e+Math.imul(r,ad)|0)+Math.imul(s,ac)|0,f=f+Math.imul(s,ad)|0,d=d+Math.imul(o,af)|0,e=(e=e+Math.imul(o,ag)|0)+Math.imul(p,af)|0,f=f+Math.imul(p,ag)|0,d=d+Math.imul(l,ai)|0;var ax=(j+d|0)+((8191&(e=(e=e+Math.imul(l,aj)|0)+Math.imul(m,ai)|0))<<13)|0;j=((f=f+Math.imul(m,aj)|0)+(e>>>13)|0)+(ax>>>26)|0,ax&=0x3ffffff,d=Math.imul(J,P),e=(e=Math.imul(J,Q))+Math.imul(K,P)|0,f=Math.imul(K,Q),d=d+Math.imul(G,S)|0,e=(e=e+Math.imul(G,T)|0)+Math.imul(H,S)|0,f=f+Math.imul(H,T)|0,d=d+Math.imul(D,V)|0,e=(e=e+Math.imul(D,W)|0)+Math.imul(E,V)|0,f=f+Math.imul(E,W)|0,d=d+Math.imul(A,Y)|0,e=(e=e+Math.imul(A,Z)|0)+Math.imul(B,Y)|0,f=f+Math.imul(B,Z)|0,d=d+Math.imul(x,_)|0,e=(e=e+Math.imul(x,aa)|0)+Math.imul(y,_)|0,f=f+Math.imul(y,aa)|0,d=d+Math.imul(u,ac)|0,e=(e=e+Math.imul(u,ad)|0)+Math.imul(v,ac)|0,f=f+Math.imul(v,ad)|0,d=d+Math.imul(r,af)|0,e=(e=e+Math.imul(r,ag)|0)+Math.imul(s,af)|0,f=f+Math.imul(s,ag)|0,d=d+Math.imul(o,ai)|0,e=(e=e+Math.imul(o,aj)|0)+Math.imul(p,ai)|0,f=f+Math.imul(p,aj)|0,d=d+Math.imul(l,al)|0;var ay=(j+d|0)+((8191&(e=(e=e+Math.imul(l,am)|0)+Math.imul(m,al)|0))<<13)|0;j=((f=f+Math.imul(m,am)|0)+(e>>>13)|0)+(ay>>>26)|0,ay&=0x3ffffff,d=Math.imul(M,P),e=(e=Math.imul(M,Q))+Math.imul(N,P)|0,f=Math.imul(N,Q),d=d+Math.imul(J,S)|0,e=(e=e+Math.imul(J,T)|0)+Math.imul(K,S)|0,f=f+Math.imul(K,T)|0,d=d+Math.imul(G,V)|0,e=(e=e+Math.imul(G,W)|0)+Math.imul(H,V)|0,f=f+Math.imul(H,W)|0,d=d+Math.imul(D,Y)|0,e=(e=e+Math.imul(D,Z)|0)+Math.imul(E,Y)|0,f=f+Math.imul(E,Z)|0,d=d+Math.imul(A,_)|0,e=(e=e+Math.imul(A,aa)|0)+Math.imul(B,_)|0,f=f+Math.imul(B,aa)|0,d=d+Math.imul(x,ac)|0,e=(e=e+Math.imul(x,ad)|0)+Math.imul(y,ac)|0,f=f+Math.imul(y,ad)|0,d=d+Math.imul(u,af)|0,e=(e=e+Math.imul(u,ag)|0)+Math.imul(v,af)|0,f=f+Math.imul(v,ag)|0,d=d+Math.imul(r,ai)|0,e=(e=e+Math.imul(r,aj)|0)+Math.imul(s,ai)|0,f=f+Math.imul(s,aj)|0,d=d+Math.imul(o,al)|0,e=(e=e+Math.imul(o,am)|0)+Math.imul(p,al)|0,f=f+Math.imul(p,am)|0,d=d+Math.imul(l,ao)|0;var az=(j+d|0)+((8191&(e=(e=e+Math.imul(l,ap)|0)+Math.imul(m,ao)|0))<<13)|0;j=((f=f+Math.imul(m,ap)|0)+(e>>>13)|0)+(az>>>26)|0,az&=0x3ffffff,d=Math.imul(M,S),e=(e=Math.imul(M,T))+Math.imul(N,S)|0,f=Math.imul(N,T),d=d+Math.imul(J,V)|0,e=(e=e+Math.imul(J,W)|0)+Math.imul(K,V)|0,f=f+Math.imul(K,W)|0,d=d+Math.imul(G,Y)|0,e=(e=e+Math.imul(G,Z)|0)+Math.imul(H,Y)|0,f=f+Math.imul(H,Z)|0,d=d+Math.imul(D,_)|0,e=(e=e+Math.imul(D,aa)|0)+Math.imul(E,_)|0,f=f+Math.imul(E,aa)|0,d=d+Math.imul(A,ac)|0,e=(e=e+Math.imul(A,ad)|0)+Math.imul(B,ac)|0,f=f+Math.imul(B,ad)|0,d=d+Math.imul(x,af)|0,e=(e=e+Math.imul(x,ag)|0)+Math.imul(y,af)|0,f=f+Math.imul(y,ag)|0,d=d+Math.imul(u,ai)|0,e=(e=e+Math.imul(u,aj)|0)+Math.imul(v,ai)|0,f=f+Math.imul(v,aj)|0,d=d+Math.imul(r,al)|0,e=(e=e+Math.imul(r,am)|0)+Math.imul(s,al)|0,f=f+Math.imul(s,am)|0,d=d+Math.imul(o,ao)|0;var aA=(j+d|0)+((8191&(e=(e=e+Math.imul(o,ap)|0)+Math.imul(p,ao)|0))<<13)|0;j=((f=f+Math.imul(p,ap)|0)+(e>>>13)|0)+(aA>>>26)|0,aA&=0x3ffffff,d=Math.imul(M,V),e=(e=Math.imul(M,W))+Math.imul(N,V)|0,f=Math.imul(N,W),d=d+Math.imul(J,Y)|0,e=(e=e+Math.imul(J,Z)|0)+Math.imul(K,Y)|0,f=f+Math.imul(K,Z)|0,d=d+Math.imul(G,_)|0,e=(e=e+Math.imul(G,aa)|0)+Math.imul(H,_)|0,f=f+Math.imul(H,aa)|0,d=d+Math.imul(D,ac)|0,e=(e=e+Math.imul(D,ad)|0)+Math.imul(E,ac)|0,f=f+Math.imul(E,ad)|0,d=d+Math.imul(A,af)|0,e=(e=e+Math.imul(A,ag)|0)+Math.imul(B,af)|0,f=f+Math.imul(B,ag)|0,d=d+Math.imul(x,ai)|0,e=(e=e+Math.imul(x,aj)|0)+Math.imul(y,ai)|0,f=f+Math.imul(y,aj)|0,d=d+Math.imul(u,al)|0,e=(e=e+Math.imul(u,am)|0)+Math.imul(v,al)|0,f=f+Math.imul(v,am)|0,d=d+Math.imul(r,ao)|0;var aB=(j+d|0)+((8191&(e=(e=e+Math.imul(r,ap)|0)+Math.imul(s,ao)|0))<<13)|0;j=((f=f+Math.imul(s,ap)|0)+(e>>>13)|0)+(aB>>>26)|0,aB&=0x3ffffff,d=Math.imul(M,Y),e=(e=Math.imul(M,Z))+Math.imul(N,Y)|0,f=Math.imul(N,Z),d=d+Math.imul(J,_)|0,e=(e=e+Math.imul(J,aa)|0)+Math.imul(K,_)|0,f=f+Math.imul(K,aa)|0,d=d+Math.imul(G,ac)|0,e=(e=e+Math.imul(G,ad)|0)+Math.imul(H,ac)|0,f=f+Math.imul(H,ad)|0,d=d+Math.imul(D,af)|0,e=(e=e+Math.imul(D,ag)|0)+Math.imul(E,af)|0,f=f+Math.imul(E,ag)|0,d=d+Math.imul(A,ai)|0,e=(e=e+Math.imul(A,aj)|0)+Math.imul(B,ai)|0,f=f+Math.imul(B,aj)|0,d=d+Math.imul(x,al)|0,e=(e=e+Math.imul(x,am)|0)+Math.imul(y,al)|0,f=f+Math.imul(y,am)|0,d=d+Math.imul(u,ao)|0;var aC=(j+d|0)+((8191&(e=(e=e+Math.imul(u,ap)|0)+Math.imul(v,ao)|0))<<13)|0;j=((f=f+Math.imul(v,ap)|0)+(e>>>13)|0)+(aC>>>26)|0,aC&=0x3ffffff,d=Math.imul(M,_),e=(e=Math.imul(M,aa))+Math.imul(N,_)|0,f=Math.imul(N,aa),d=d+Math.imul(J,ac)|0,e=(e=e+Math.imul(J,ad)|0)+Math.imul(K,ac)|0,f=f+Math.imul(K,ad)|0,d=d+Math.imul(G,af)|0,e=(e=e+Math.imul(G,ag)|0)+Math.imul(H,af)|0,f=f+Math.imul(H,ag)|0,d=d+Math.imul(D,ai)|0,e=(e=e+Math.imul(D,aj)|0)+Math.imul(E,ai)|0,f=f+Math.imul(E,aj)|0,d=d+Math.imul(A,al)|0,e=(e=e+Math.imul(A,am)|0)+Math.imul(B,al)|0,f=f+Math.imul(B,am)|0,d=d+Math.imul(x,ao)|0;var aD=(j+d|0)+((8191&(e=(e=e+Math.imul(x,ap)|0)+Math.imul(y,ao)|0))<<13)|0;j=((f=f+Math.imul(y,ap)|0)+(e>>>13)|0)+(aD>>>26)|0,aD&=0x3ffffff,d=Math.imul(M,ac),e=(e=Math.imul(M,ad))+Math.imul(N,ac)|0,f=Math.imul(N,ad),d=d+Math.imul(J,af)|0,e=(e=e+Math.imul(J,ag)|0)+Math.imul(K,af)|0,f=f+Math.imul(K,ag)|0,d=d+Math.imul(G,ai)|0,e=(e=e+Math.imul(G,aj)|0)+Math.imul(H,ai)|0,f=f+Math.imul(H,aj)|0,d=d+Math.imul(D,al)|0,e=(e=e+Math.imul(D,am)|0)+Math.imul(E,al)|0,f=f+Math.imul(E,am)|0,d=d+Math.imul(A,ao)|0;var aE=(j+d|0)+((8191&(e=(e=e+Math.imul(A,ap)|0)+Math.imul(B,ao)|0))<<13)|0;j=((f=f+Math.imul(B,ap)|0)+(e>>>13)|0)+(aE>>>26)|0,aE&=0x3ffffff,d=Math.imul(M,af),e=(e=Math.imul(M,ag))+Math.imul(N,af)|0,f=Math.imul(N,ag),d=d+Math.imul(J,ai)|0,e=(e=e+Math.imul(J,aj)|0)+Math.imul(K,ai)|0,f=f+Math.imul(K,aj)|0,d=d+Math.imul(G,al)|0,e=(e=e+Math.imul(G,am)|0)+Math.imul(H,al)|0,f=f+Math.imul(H,am)|0,d=d+Math.imul(D,ao)|0;var aF=(j+d|0)+((8191&(e=(e=e+Math.imul(D,ap)|0)+Math.imul(E,ao)|0))<<13)|0;j=((f=f+Math.imul(E,ap)|0)+(e>>>13)|0)+(aF>>>26)|0,aF&=0x3ffffff,d=Math.imul(M,ai),e=(e=Math.imul(M,aj))+Math.imul(N,ai)|0,f=Math.imul(N,aj),d=d+Math.imul(J,al)|0,e=(e=e+Math.imul(J,am)|0)+Math.imul(K,al)|0,f=f+Math.imul(K,am)|0,d=d+Math.imul(G,ao)|0;var aG=(j+d|0)+((8191&(e=(e=e+Math.imul(G,ap)|0)+Math.imul(H,ao)|0))<<13)|0;j=((f=f+Math.imul(H,ap)|0)+(e>>>13)|0)+(aG>>>26)|0,aG&=0x3ffffff,d=Math.imul(M,al),e=(e=Math.imul(M,am))+Math.imul(N,al)|0,f=Math.imul(N,am),d=d+Math.imul(J,ao)|0;var aH=(j+d|0)+((8191&(e=(e=e+Math.imul(J,ap)|0)+Math.imul(K,ao)|0))<<13)|0;j=((f=f+Math.imul(K,ap)|0)+(e>>>13)|0)+(aH>>>26)|0,aH&=0x3ffffff,d=Math.imul(M,ao);var aI=(j+d|0)+((8191&(e=(e=Math.imul(M,ap))+Math.imul(N,ao)|0))<<13)|0;return j=((f=Math.imul(N,ap))+(e>>>13)|0)+(aI>>>26)|0,aI&=0x3ffffff,i[0]=aq,i[1]=ar,i[2]=as,i[3]=at,i[4]=au,i[5]=av,i[6]=aw,i[7]=ax,i[8]=ay,i[9]=az,i[10]=aA,i[11]=aB,i[12]=aC,i[13]=aD,i[14]=aE,i[15]=aF,i[16]=aG,i[17]=aH,i[18]=aI,0!==j&&(i[19]=j,c.length++),c};function r(a,b,c){c.negative=b.negative^a.negative,c.length=a.length+b.length;for(var d=0,e=0,f=0;f<c.length-1;f++){var g=e;e=0;for(var h=0x3ffffff&d,i=Math.min(f,b.length-1),j=Math.max(0,f-a.length+1);j<=i;j++){var k=f-j,l=(0|a.words[k])*(0|b.words[j]),m=0x3ffffff&l;g=g+(l/0x4000000|0)|0,h=0x3ffffff&(m=m+h|0),e+=(g=g+(m>>>26)|0)>>>26,g&=0x3ffffff}c.words[f]=h,d=g,g=e}return 0!==d?c.words[f]=d:c.length--,c._strip()}function s(a,b){this.x=a,this.y=b}Math.imul||(q=p),f.prototype.mulTo=function(a,b){var c,d=this.length+a.length;return 10===this.length&&10===a.length?c=q(this,a,b):d<63?c=p(this,a,b):c=r(this,a,b),c},s.prototype.makeRBT=function(a){for(var b=Array(a),c=f.prototype._countBits(a)-1,d=0;d<a;d++)b[d]=this.revBin(d,c,a);return b},s.prototype.revBin=function(a,b,c){if(0===a||a===c-1)return a;for(var d=0,e=0;e<b;e++)d|=(1&a)<<b-e-1,a>>=1;return d},s.prototype.permute=function(a,b,c,d,e,f){for(var g=0;g<f;g++)d[g]=b[a[g]],e[g]=c[a[g]]},s.prototype.transform=function(a,b,c,d,e,f){this.permute(f,a,b,c,d,e);for(var g=1;g<e;g<<=1)for(var h=g<<1,i=Math.cos(2*Math.PI/h),j=Math.sin(2*Math.PI/h),k=0;k<e;k+=h)for(var l=i,m=j,n=0;n<g;n++){var o=c[k+n],p=d[k+n],q=c[k+n+g],r=d[k+n+g],s=l*q-m*r;r=l*r+m*q,q=s,c[k+n]=o+q,d[k+n]=p+r,c[k+n+g]=o-q,d[k+n+g]=p-r,n!==h&&(s=i*l-j*m,m=i*m+j*l,l=s)}},s.prototype.guessLen13b=function(a,b){var c=1|Math.max(b,a),d=1&c,e=0;for(c=c/2|0;c;c>>>=1)e++;return 1<<e+1+d},s.prototype.conjugate=function(a,b,c){if(!(c<=1))for(var d=0;d<c/2;d++){var e=a[d];a[d]=a[c-d-1],a[c-d-1]=e,e=b[d],b[d]=-b[c-d-1],b[c-d-1]=-e}},s.prototype.normalize13b=function(a,b){for(var c=0,d=0;d<b/2;d++){var e=8192*Math.round(a[2*d+1]/b)+Math.round(a[2*d]/b)+c;a[d]=0x3ffffff&e,c=e<0x4000000?0:e/0x4000000|0}return a},s.prototype.convert13b=function(a,b,c,e){for(var f=0,g=0;g<b;g++)f+=0|a[g],c[2*g]=8191&f,f>>>=13,c[2*g+1]=8191&f,f>>>=13;for(g=2*b;g<e;++g)c[g]=0;d(0===f),d((-8192&f)==0)},s.prototype.stub=function(a){for(var b=Array(a),c=0;c<a;c++)b[c]=0;return b},s.prototype.mulp=function(a,b,c){var d=2*this.guessLen13b(a.length,b.length),e=this.makeRBT(d),f=this.stub(d),g=Array(d),h=Array(d),i=Array(d),j=Array(d),k=Array(d),l=Array(d),m=c.words;m.length=d,this.convert13b(a.words,a.length,g,d),this.convert13b(b.words,b.length,j,d),this.transform(g,f,h,i,d,e),this.transform(j,f,k,l,d,e);for(var n=0;n<d;n++){var o=h[n]*k[n]-i[n]*l[n];i[n]=h[n]*l[n]+i[n]*k[n],h[n]=o}return this.conjugate(h,i,d),this.transform(h,i,m,f,d,e),this.conjugate(m,f,d),this.normalize13b(m,d),c.negative=a.negative^b.negative,c.length=a.length+b.length,c._strip()},f.prototype.mul=function(a){var b=new f(null);return b.words=Array(this.length+a.length),this.mulTo(a,b)},f.prototype.mulf=function(a){var b=new f(null);return b.words=Array(this.length+a.length),r(this,a,b)},f.prototype.imul=function(a){return this.clone().mulTo(a,this)},f.prototype.imuln=function(a){var b=a<0;b&&(a=-a),d("number"==typeof a),d(a<0x4000000);for(var c=0,e=0;e<this.length;e++){var f=(0|this.words[e])*a,g=(0x3ffffff&f)+(0x3ffffff&c);c>>=26,c+=(f/0x4000000|0)+(g>>>26),this.words[e]=0x3ffffff&g}return 0!==c&&(this.words[e]=c,this.length++),this.length=0===a?1:this.length,b?this.ineg():this},f.prototype.muln=function(a){return this.clone().imuln(a)},f.prototype.sqr=function(){return this.mul(this)},f.prototype.isqr=function(){return this.imul(this.clone())},f.prototype.pow=function(a){var b=function(a){for(var b=Array(a.bitLength()),c=0;c<b.length;c++){var d=c/26|0,e=c%26;b[c]=a.words[d]>>>e&1}return b}(a);if(0===b.length)return new f(1);for(var c=this,d=0;d<b.length&&0===b[d];d++,c=c.sqr());if(++d<b.length)for(var e=c.sqr();d<b.length;d++,e=e.sqr())0!==b[d]&&(c=c.mul(e));return c},f.prototype.iushln=function(a){d("number"==typeof a&&a>=0);var b,c=a%26,e=(a-c)/26,f=0x3ffffff>>>26-c<<26-c;if(0!==c){var g=0;for(b=0;b<this.length;b++){var h=this.words[b]&f,i=(0|this.words[b])-h<<c;this.words[b]=i|g,g=h>>>26-c}g&&(this.words[b]=g,this.length++)}if(0!==e){for(b=this.length-1;b>=0;b--)this.words[b+e]=this.words[b];for(b=0;b<e;b++)this.words[b]=0;this.length+=e}return this._strip()},f.prototype.ishln=function(a){return d(0===this.negative),this.iushln(a)},f.prototype.iushrn=function(a,b,c){d("number"==typeof a&&a>=0);var e=b?(b-b%26)/26:0,f=a%26,g=Math.min((a-f)/26,this.length),h=0x3ffffff^0x3ffffff>>>f<<f;if(e-=g,e=Math.max(0,e),c){for(var i=0;i<g;i++)c.words[i]=this.words[i];c.length=g}if(0===g);else if(this.length>g)for(this.length-=g,i=0;i<this.length;i++)this.words[i]=this.words[i+g];else this.words[0]=0,this.length=1;var j=0;for(i=this.length-1;i>=0&&(0!==j||i>=e);i--){var k=0|this.words[i];this.words[i]=j<<26-f|k>>>f,j=k&h}return c&&0!==j&&(c.words[c.length++]=j),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},f.prototype.ishrn=function(a,b,c){return d(0===this.negative),this.iushrn(a,b,c)},f.prototype.shln=function(a){return this.clone().ishln(a)},f.prototype.ushln=function(a){return this.clone().iushln(a)},f.prototype.shrn=function(a){return this.clone().ishrn(a)},f.prototype.ushrn=function(a){return this.clone().iushrn(a)},f.prototype.testn=function(a){d("number"==typeof a&&a>=0);var b=a%26,c=(a-b)/26;return!(this.length<=c)&&!!(this.words[c]&1<<b)},f.prototype.imaskn=function(a){d("number"==typeof a&&a>=0);var b=a%26,c=(a-b)/26;return(d(0===this.negative,"imaskn works only with positive numbers"),this.length<=c)?this:(0!==b&&c++,this.length=Math.min(c,this.length),0!==b&&(this.words[this.length-1]&=0x3ffffff^0x3ffffff>>>b<<b),this._strip())},f.prototype.maskn=function(a){return this.clone().imaskn(a)},f.prototype.iaddn=function(a){return(d("number"==typeof a),d(a<0x4000000),a<0)?this.isubn(-a):0!==this.negative?(1===this.length&&(0|this.words[0])<=a?(this.words[0]=a-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(a),this.negative=1),this):this._iaddn(a)},f.prototype._iaddn=function(a){this.words[0]+=a;for(var b=0;b<this.length&&this.words[b]>=0x4000000;b++)this.words[b]-=0x4000000,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},f.prototype.isubn=function(a){if(d("number"==typeof a),d(a<0x4000000),a<0)return this.iaddn(-a);if(0!==this.negative)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=0x4000000,this.words[b+1]-=1;return this._strip()},f.prototype.addn=function(a){return this.clone().iaddn(a)},f.prototype.subn=function(a){return this.clone().isubn(a)},f.prototype.iabs=function(){return this.negative=0,this},f.prototype.abs=function(){return this.clone().iabs()},f.prototype._ishlnsubmul=function(a,b,c){var e,f,g=a.length+c;this._expand(g);var h=0;for(e=0;e<a.length;e++){f=(0|this.words[e+c])+h;var i=(0|a.words[e])*b;f-=0x3ffffff&i,h=(f>>26)-(i/0x4000000|0),this.words[e+c]=0x3ffffff&f}for(;e<this.length-c;e++)h=(f=(0|this.words[e+c])+h)>>26,this.words[e+c]=0x3ffffff&f;if(0===h)return this._strip();for(d(-1===h),h=0,e=0;e<this.length;e++)h=(f=-(0|this.words[e])+h)>>26,this.words[e]=0x3ffffff&f;return this.negative=1,this._strip()},f.prototype._wordDiv=function(a,b){var c,d=this.length-a.length,e=this.clone(),g=a,h=0|g.words[g.length-1];0!=(d=26-this._countBits(h))&&(g=g.ushln(d),e.iushln(d),h=0|g.words[g.length-1]);var i=e.length-g.length;if("mod"!==b){(c=new f(null)).length=i+1,c.words=Array(c.length);for(var j=0;j<c.length;j++)c.words[j]=0}var k=e.clone()._ishlnsubmul(g,1,i);0===k.negative&&(e=k,c&&(c.words[i]=1));for(var l=i-1;l>=0;l--){var m=(0|e.words[g.length+l])*0x4000000+(0|e.words[g.length+l-1]);for(m=Math.min(m/h|0,0x3ffffff),e._ishlnsubmul(g,m,l);0!==e.negative;)m--,e.negative=0,e._ishlnsubmul(g,1,l),e.isZero()||(e.negative^=1);c&&(c.words[l]=m)}return c&&c._strip(),e._strip(),"div"!==b&&0!==d&&e.iushrn(d),{div:c||null,mod:e}},f.prototype.divmod=function(a,b,c){var e,g,h;return(d(!a.isZero()),this.isZero())?{div:new f(0),mod:new f(0)}:0!==this.negative&&0===a.negative?(h=this.neg().divmod(a,b),"mod"!==b&&(e=h.div.neg()),"div"!==b&&(g=h.mod.neg(),c&&0!==g.negative&&g.iadd(a)),{div:e,mod:g}):0===this.negative&&0!==a.negative?(h=this.divmod(a.neg(),b),"mod"!==b&&(e=h.div.neg()),{div:e,mod:h.mod}):(this.negative&a.negative)!=0?(h=this.neg().divmod(a.neg(),b),"div"!==b&&(g=h.mod.neg(),c&&0!==g.negative&&g.isub(a)),{div:h.div,mod:g}):a.length>this.length||0>this.cmp(a)?{div:new f(0),mod:this}:1===a.length?"div"===b?{div:this.divn(a.words[0]),mod:null}:"mod"===b?{div:null,mod:new f(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new f(this.modrn(a.words[0]))}:this._wordDiv(a,b)},f.prototype.div=function(a){return this.divmod(a,"div",!1).div},f.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},f.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},f.prototype.divRound=function(a){var b=this.divmod(a);if(b.mod.isZero())return b.div;var c=0!==b.div.negative?b.mod.isub(a):b.mod,d=a.ushrn(1),e=a.andln(1),f=c.cmp(d);return f<0||1===e&&0===f?b.div:0!==b.div.negative?b.div.isubn(1):b.div.iaddn(1)},f.prototype.modrn=function(a){var b=a<0;b&&(a=-a),d(a<=0x3ffffff);for(var c=0x4000000%a,e=0,f=this.length-1;f>=0;f--)e=(c*e+(0|this.words[f]))%a;return b?-e:e},f.prototype.modn=function(a){return this.modrn(a)},f.prototype.idivn=function(a){var b=a<0;b&&(a=-a),d(a<=0x3ffffff);for(var c=0,e=this.length-1;e>=0;e--){var f=(0|this.words[e])+0x4000000*c;this.words[e]=f/a|0,c=f%a}return this._strip(),b?this.ineg():this},f.prototype.divn=function(a){return this.clone().idivn(a)},f.prototype.egcd=function(a){d(0===a.negative),d(!a.isZero());var b=this,c=a.clone();b=0!==b.negative?b.umod(a):b.clone();for(var e=new f(1),g=new f(0),h=new f(0),i=new f(1),j=0;b.isEven()&&c.isEven();)b.iushrn(1),c.iushrn(1),++j;for(var k=c.clone(),l=b.clone();!b.isZero();){for(var m=0,n=1;(b.words[0]&n)==0&&m<26;++m,n<<=1);if(m>0)for(b.iushrn(m);m-- >0;)(e.isOdd()||g.isOdd())&&(e.iadd(k),g.isub(l)),e.iushrn(1),g.iushrn(1);for(var o=0,p=1;(c.words[0]&p)==0&&o<26;++o,p<<=1);if(o>0)for(c.iushrn(o);o-- >0;)(h.isOdd()||i.isOdd())&&(h.iadd(k),i.isub(l)),h.iushrn(1),i.iushrn(1);b.cmp(c)>=0?(b.isub(c),e.isub(h),g.isub(i)):(c.isub(b),h.isub(e),i.isub(g))}return{a:h,b:i,gcd:c.iushln(j)}},f.prototype._invmp=function(a){d(0===a.negative),d(!a.isZero());var b,c=this,e=a.clone();c=0!==c.negative?c.umod(a):c.clone();for(var g=new f(1),h=new f(0),i=e.clone();c.cmpn(1)>0&&e.cmpn(1)>0;){for(var j=0,k=1;(c.words[0]&k)==0&&j<26;++j,k<<=1);if(j>0)for(c.iushrn(j);j-- >0;)g.isOdd()&&g.iadd(i),g.iushrn(1);for(var l=0,m=1;(e.words[0]&m)==0&&l<26;++l,m<<=1);if(l>0)for(e.iushrn(l);l-- >0;)h.isOdd()&&h.iadd(i),h.iushrn(1);c.cmp(e)>=0?(c.isub(e),g.isub(h)):(e.isub(c),h.isub(g))}return 0>(b=0===c.cmpn(1)?g:h).cmpn(0)&&b.iadd(a),b},f.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var b=this.clone(),c=a.clone();b.negative=0,c.negative=0;for(var d=0;b.isEven()&&c.isEven();d++)b.iushrn(1),c.iushrn(1);for(;;){for(;b.isEven();)b.iushrn(1);for(;c.isEven();)c.iushrn(1);var e=b.cmp(c);if(e<0){var f=b;b=c,c=f}else if(0===e||0===c.cmpn(1))break;b.isub(c)}return c.iushln(d)},f.prototype.invm=function(a){return this.egcd(a).a.umod(a)},f.prototype.isEven=function(){return(1&this.words[0])==0},f.prototype.isOdd=function(){return(1&this.words[0])==1},f.prototype.andln=function(a){return this.words[0]&a},f.prototype.bincn=function(a){d("number"==typeof a);var b=a%26,c=(a-b)/26,e=1<<b;if(this.length<=c)return this._expand(c+1),this.words[c]|=e,this;for(var f=e,g=c;0!==f&&g<this.length;g++){var h=0|this.words[g];h+=f,f=h>>>26,h&=0x3ffffff,this.words[g]=h}return 0!==f&&(this.words[g]=f,this.length++),this},f.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},f.prototype.cmpn=function(a){var b,c=a<0;if(0!==this.negative&&!c)return -1;if(0===this.negative&&c)return 1;if(this._strip(),this.length>1)b=1;else{c&&(a=-a),d(a<=0x3ffffff,"Number is too big");var e=0|this.words[0];b=e===a?0:e<a?-1:1}return 0!==this.negative?0|-b:b},f.prototype.cmp=function(a){if(0!==this.negative&&0===a.negative)return -1;if(0===this.negative&&0!==a.negative)return 1;var b=this.ucmp(a);return 0!==this.negative?0|-b:b},f.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return -1;for(var b=0,c=this.length-1;c>=0;c--){var d=0|this.words[c],e=0|a.words[c];if(d!==e){d<e?b=-1:d>e&&(b=1);break}}return b},f.prototype.gtn=function(a){return 1===this.cmpn(a)},f.prototype.gt=function(a){return 1===this.cmp(a)},f.prototype.gten=function(a){return this.cmpn(a)>=0},f.prototype.gte=function(a){return this.cmp(a)>=0},f.prototype.ltn=function(a){return -1===this.cmpn(a)},f.prototype.lt=function(a){return -1===this.cmp(a)},f.prototype.lten=function(a){return 0>=this.cmpn(a)},f.prototype.lte=function(a){return 0>=this.cmp(a)},f.prototype.eqn=function(a){return 0===this.cmpn(a)},f.prototype.eq=function(a){return 0===this.cmp(a)},f.red=function(a){return new z(a)},f.prototype.toRed=function(a){return d(!this.red,"Already a number in reduction context"),d(0===this.negative,"red works only with positives"),a.convertTo(this)._forceRed(a)},f.prototype.fromRed=function(){return d(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},f.prototype._forceRed=function(a){return this.red=a,this},f.prototype.forceRed=function(a){return d(!this.red,"Already a number in reduction context"),this._forceRed(a)},f.prototype.redAdd=function(a){return d(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},f.prototype.redIAdd=function(a){return d(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},f.prototype.redSub=function(a){return d(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},f.prototype.redISub=function(a){return d(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},f.prototype.redShl=function(a){return d(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},f.prototype.redMul=function(a){return d(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},f.prototype.redIMul=function(a){return d(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},f.prototype.redSqr=function(){return d(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},f.prototype.redISqr=function(){return d(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},f.prototype.redSqrt=function(){return d(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},f.prototype.redInvm=function(){return d(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},f.prototype.redNeg=function(){return d(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},f.prototype.redPow=function(a){return d(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var t={k256:null,p224:null,p192:null,p25519:null};function u(a,b){this.name=a,this.p=new f(b,16),this.n=this.p.bitLength(),this.k=new f(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){u.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){u.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function x(){u.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function y(){u.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function z(a){if("string"==typeof a){var b=f._prime(a);this.m=b.p,this.prime=b}else d(a.gtn(1),"modulus must be greater than 1"),this.m=a,this.prime=null}function A(a){z.call(this,a),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new f(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}u.prototype._tmp=function(){var a=new f(null);return a.words=Array(Math.ceil(this.n/13)),a},u.prototype.ireduce=function(a){var b,c=a;do this.split(c,this.tmp),b=(c=(c=this.imulK(c)).iadd(this.tmp)).bitLength();while(b>this.n)var d=b<this.n?-1:c.ucmp(this.p);return 0===d?(c.words[0]=0,c.length=1):d>0?c.isub(this.p):void 0!==c.strip?c.strip():c._strip(),c},u.prototype.split=function(a,b){a.iushrn(this.n,0,b)},u.prototype.imulK=function(a){return a.imul(this.k)},e(v,u),v.prototype.split=function(a,b){for(var c=Math.min(a.length,9),d=0;d<c;d++)b.words[d]=a.words[d];if(b.length=c,a.length<=9){a.words[0]=0,a.length=1;return}var e=a.words[9];for(d=10,b.words[b.length++]=4194303&e;d<a.length;d++){var f=0|a.words[d];a.words[d-10]=(4194303&f)<<4|e>>>22,e=f}e>>>=22,a.words[d-10]=e,0===e&&a.length>10?a.length-=10:a.length-=9},v.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var b=0,c=0;c<a.length;c++){var d=0|a.words[c];b+=977*d,a.words[c]=0x3ffffff&b,b=64*d+(b/0x4000000|0)}return 0===a.words[a.length-1]&&(a.length--,0===a.words[a.length-1]&&a.length--),a},e(w,u),e(x,u),e(y,u),y.prototype.imulK=function(a){for(var b=0,c=0;c<a.length;c++){var d=(0|a.words[c])*19+b,e=0x3ffffff&d;d>>>=26,a.words[c]=e,b=d}return 0!==b&&(a.words[a.length++]=b),a},f._prime=function(a){var b;if(t[a])return t[a];if("k256"===a)b=new v;else if("p224"===a)b=new w;else if("p192"===a)b=new x;else if("p25519"===a)b=new y;else throw Error("Unknown prime "+a);return t[a]=b,b},z.prototype._verify1=function(a){d(0===a.negative,"red works only with positives"),d(a.red,"red works only with red numbers")},z.prototype._verify2=function(a,b){d((a.negative|b.negative)==0,"red works only with positives"),d(a.red&&a.red===b.red,"red works only with red numbers")},z.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(j(a,a.umod(this.m)._forceRed(this)),a)},z.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},z.prototype.add=function(a,b){this._verify2(a,b);var c=a.add(b);return c.cmp(this.m)>=0&&c.isub(this.m),c._forceRed(this)},z.prototype.iadd=function(a,b){this._verify2(a,b);var c=a.iadd(b);return c.cmp(this.m)>=0&&c.isub(this.m),c},z.prototype.sub=function(a,b){this._verify2(a,b);var c=a.sub(b);return 0>c.cmpn(0)&&c.iadd(this.m),c._forceRed(this)},z.prototype.isub=function(a,b){this._verify2(a,b);var c=a.isub(b);return 0>c.cmpn(0)&&c.iadd(this.m),c},z.prototype.shl=function(a,b){return this._verify1(a),this.imod(a.ushln(b))},z.prototype.imul=function(a,b){return this._verify2(a,b),this.imod(a.imul(b))},z.prototype.mul=function(a,b){return this._verify2(a,b),this.imod(a.mul(b))},z.prototype.isqr=function(a){return this.imul(a,a.clone())},z.prototype.sqr=function(a){return this.mul(a,a)},z.prototype.sqrt=function(a){if(a.isZero())return a.clone();var b=this.m.andln(3);if(d(b%2==1),3===b){var c=this.m.add(new f(1)).iushrn(2);return this.pow(a,c)}for(var e=this.m.subn(1),g=0;!e.isZero()&&0===e.andln(1);)g++,e.iushrn(1);d(!e.isZero());var h=new f(1).toRed(this),i=h.redNeg(),j=this.m.subn(1).iushrn(1),k=this.m.bitLength();for(k=new f(2*k*k).toRed(this);0!==this.pow(k,j).cmp(i);)k.redIAdd(i);for(var l=this.pow(k,e),m=this.pow(a,e.addn(1).iushrn(1)),n=this.pow(a,e),o=g;0!==n.cmp(h);){for(var p=n,q=0;0!==p.cmp(h);q++)p=p.redSqr();d(q<o);var r=this.pow(l,new f(1).iushln(o-q-1));m=m.redMul(r),l=r.redSqr(),n=n.redMul(l),o=q}return m},z.prototype.invm=function(a){var b=a._invmp(this.m);return 0!==b.negative?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},z.prototype.pow=function(a,b){if(b.isZero())return new f(1).toRed(this);if(0===b.cmpn(1))return a.clone();var c=Array(16);c[0]=new f(1).toRed(this),c[1]=a;for(var d=2;d<c.length;d++)c[d]=this.mul(c[d-1],a);var e=c[0],g=0,h=0,i=b.bitLength()%26;for(0===i&&(i=26),d=b.length-1;d>=0;d--){for(var j=b.words[d],k=i-1;k>=0;k--){var l=j>>k&1;if(e!==c[0]&&(e=this.sqr(e)),0===l&&0===g){h=0;continue}g<<=1,g|=l,(4==++h||0===d&&0===k)&&(e=this.mul(e,c[g]),h=0,g=0)}i=26}return e},z.prototype.convertTo=function(a){var b=a.umod(this.m);return b===a?b.clone():b},z.prototype.convertFrom=function(a){var b=a.clone();return b.red=null,b},f.mont=function(a){return new A(a)},e(A,z),A.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},A.prototype.convertFrom=function(a){var b=this.imod(a.mul(this.rinv));return b.red=null,b},A.prototype.imul=function(a,b){if(a.isZero()||b.isZero())return a.words[0]=0,a.length=1,a;var c=a.imul(b),d=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=c.isub(d).iushrn(this.shift),f=e;return e.cmp(this.m)>=0?f=e.isub(this.m):0>e.cmpn(0)&&(f=e.iadd(this.m)),f._forceRed(this)},A.prototype.mul=function(a,b){if(a.isZero()||b.isZero())return new f(0)._forceRed(this);var c=a.mul(b),d=c.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),e=c.isub(d).iushrn(this.shift),g=e;return e.cmp(this.m)>=0?g=e.isub(this.m):0>e.cmpn(0)&&(g=e.iadd(this.m)),g._forceRed(this)},A.prototype.invm=function(a){return this.imod(a._invmp(this.m).mul(this.r2))._forceRed(this)}}(b,a.e)},329277,(a,b,c)=>{var d=a.r(500874),e=d.Buffer;function f(a,b){for(var c in a)b[c]=a[c]}function g(a,b,c){return e(a,b,c)}e.from&&e.alloc&&e.allocUnsafe&&e.allocUnsafeSlow?b.exports=d:(f(d,c),c.Buffer=g),g.prototype=Object.create(e.prototype),f(e,g),g.from=function(a,b,c){if("number"==typeof a)throw TypeError("Argument must not be a number");return e(a,b,c)},g.alloc=function(a,b,c){if("number"!=typeof a)throw TypeError("Argument must be a number");var d=e(a);return void 0!==b?"string"==typeof c?d.fill(b,c):d.fill(b):d.fill(0),d},g.allocUnsafe=function(a){if("number"!=typeof a)throw TypeError("Argument must be a number");return e(a)},g.allocUnsafeSlow=function(a){if("number"!=typeof a)throw TypeError("Argument must be a number");return d.SlowBuffer(a)}},432926,(a,b,c)=>{"use strict";var d=a.r(329277).Buffer;b.exports=function(a){if(a.length>=255)throw TypeError("Alphabet too long");for(var b=new Uint8Array(256),c=0;c<b.length;c++)b[c]=255;for(var e=0;e<a.length;e++){var f=a.charAt(e),g=f.charCodeAt(0);if(255!==b[g])throw TypeError(f+" is ambiguous");b[g]=e}var h=a.length,i=a.charAt(0),j=Math.log(h)/Math.log(256),k=Math.log(256)/Math.log(h);function l(a){if("string"!=typeof a)throw TypeError("Expected String");if(0===a.length)return d.alloc(0);for(var c=0,e=0,f=0;a[c]===i;)e++,c++;for(var g=(a.length-c)*j+1>>>0,k=new Uint8Array(g);c<a.length;){var l=a.charCodeAt(c);if(l>255)return;var m=b[l];if(255===m)return;for(var n=0,o=g-1;(0!==m||n<f)&&-1!==o;o--,n++)m+=h*k[o]>>>0,k[o]=m%256>>>0,m=m/256>>>0;if(0!==m)throw Error("Non-zero carry");f=n,c++}for(var p=g-f;p!==g&&0===k[p];)p++;var q=d.allocUnsafe(e+(g-p));q.fill(0,0,e);for(var r=e;p!==g;)q[r++]=k[p++];return q}return{encode:function(b){if((Array.isArray(b)||b instanceof Uint8Array)&&(b=d.from(b)),!d.isBuffer(b))throw TypeError("Expected Buffer");if(0===b.length)return"";for(var c=0,e=0,f=0,g=b.length;f!==g&&0===b[f];)f++,c++;for(var j=(g-f)*k+1>>>0,l=new Uint8Array(j);f!==g;){for(var m=b[f],n=0,o=j-1;(0!==m||n<e)&&-1!==o;o--,n++)m+=256*l[o]>>>0,l[o]=m%h>>>0,m=m/h>>>0;if(0!==m)throw Error("Non-zero carry");e=n,f++}for(var p=j-e;p!==j&&0===l[p];)p++;for(var q=i.repeat(c);p<j;++p)q+=a.charAt(l[p]);return q},decodeUnsafe:l,decode:function(a){var b=l(a);if(b)return b;throw Error("Non-base"+h+" character")}}}},864705,(a,b,c)=>{b.exports=a.r(432926)("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},726545,a=>{"use strict";var b=a.i(380297);b.SHA256;let c=b.sha256;b.SHA224,b.sha224,a.s(["sha256",0,c])},581514,(a,b,c)=>{"use strict";function d(a,b,c){return b<=a&&a<=c}function e(a){if(void 0===a)return{};if(a===Object(a))return a;throw TypeError("Could not convert argument to dictionary")}function f(a){this.tokens=[].slice.call(a)}function g(a,b){if(a)throw TypeError("Decoder error");return b||65533}f.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(a){if(Array.isArray(a))for(;a.length;)this.tokens.unshift(a.pop());else this.tokens.unshift(a)},push:function(a){if(Array.isArray(a))for(;a.length;)this.tokens.push(a.shift());else this.tokens.push(a)}};var h="utf-8";function i(a,b){if(!(this instanceof i))return new i(a,b);if((a=void 0!==a?String(a).toLowerCase():h)!==h)throw Error("Encoding not supported. Only utf-8 is supported");b=e(b),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!b.fatal,this._ignoreBOM=!!b.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function j(a,b){if(!(this instanceof j))return new j(a,b);if((a=void 0!==a?String(a).toLowerCase():h)!==h)throw Error("Encoding not supported. Only utf-8 is supported");b=e(b),this._streaming=!1,this._encoder=null,this._options={fatal:!!b.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}function k(a){var b=a.fatal,c=0,e=0,f=0,h=128,i=191;this.handler=function(a,j){if(-1===j&&0!==f)return f=0,g(b);if(-1===j)return -1;if(0===f){if(d(j,0,127))return j;if(d(j,194,223))f=1,c=j-192;else if(d(j,224,239))224===j&&(h=160),237===j&&(i=159),f=2,c=j-224;else{if(!d(j,240,244))return g(b);240===j&&(h=144),244===j&&(i=143),f=3,c=j-240}return c<<=6*f,null}if(!d(j,h,i))return c=f=e=0,h=128,i=191,a.prepend(j),g(b);if(h=128,i=191,e+=1,c+=j-128<<6*(f-e),e!==f)return null;var k=c;return c=f=e=0,k}}function l(a){a.fatal,this.handler=function(a,b){if(-1===b)return -1;if(d(b,0,127))return b;d(b,128,2047)?(c=1,e=192):d(b,2048,65535)?(c=2,e=224):d(b,65536,1114111)&&(c=3,e=240);for(var c,e,f=[(b>>6*c)+e];c>0;){var g=b>>6*(c-1);f.push(128|63&g),c-=1}return f}}i.prototype={decode:function(a,b){c="object"==typeof a&&a instanceof ArrayBuffer?new Uint8Array(a):"object"==typeof a&&"buffer"in a&&a.buffer instanceof ArrayBuffer?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(0),b=e(b),this._streaming||(this._decoder=new k({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!b.stream;for(var c,d,g=new f(c),h=[];!g.endOfStream()&&-1!==(d=this._decoder.handler(g,g.read()));)null!==d&&(Array.isArray(d)?h.push.apply(h,d):h.push(d));if(!this._streaming){do{if(-1===(d=this._decoder.handler(g,g.read())))break;if(null===d)continue;Array.isArray(d)?h.push.apply(h,d):h.push(d)}while(!g.endOfStream())this._decoder=null}!h.length||-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===h[0]?(this._BOMseen=!0,h.shift()):this._BOMseen=!0);for(var i="",j=0;j<h.length;++j){var l=h[j];l<=65535?i+=String.fromCharCode(l):(l-=65536,i+=String.fromCharCode((l>>10)+55296,(1023&l)+56320))}return i}},j.prototype={encode:function(a,b){a=a?String(a):"",b=e(b),this._streaming||(this._encoder=new l(this._options)),this._streaming=!!b.stream;for(var c,d=[],g=new f(function(a){for(var b=String(a),c=b.length,d=0,e=[];d<c;){var f=b.charCodeAt(d);if(f<55296||f>57343)e.push(f);else if(56320<=f&&f<=57343)e.push(65533);else if(55296<=f&&f<=56319)if(d===c-1)e.push(65533);else{var g=a.charCodeAt(d+1);if(56320<=g&&g<=57343){var h=1023&f,i=1023&g;e.push(65536+(h<<10)+i),d+=1}else e.push(65533)}d+=1}return e}(a));!g.endOfStream()&&-1!==(c=this._encoder.handler(g,g.read()));)Array.isArray(c)?d.push.apply(d,c):d.push(c);if(!this._streaming){for(;-1!==(c=this._encoder.handler(g,g.read()));)Array.isArray(c)?d.push.apply(d,c):d.push(c);this._encoder=null}return new Uint8Array(d)}},c.TextEncoder=j,c.TextDecoder=i},600331,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__setModuleDefault||(Object.create?function(a,b){Object.defineProperty(a,"default",{enumerable:!0,value:b})}:function(a,b){a.default=b}),f=a.e&&a.e.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},g=a.e&&a.e.__importStar||function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)"default"!==c&&Object.hasOwnProperty.call(a,c)&&d(b,a,c);return e(b,a),b},h=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeUnchecked=c.deserialize=c.serialize=c.BinaryReader=c.BinaryWriter=c.BorshError=c.baseDecode=c.baseEncode=void 0;let i=h(a.r(994148)),j=h(a.r(864705)),k=g(a.r(581514)),l=new("function"!=typeof TextDecoder?k.TextDecoder:TextDecoder)("utf-8",{fatal:!0});c.baseEncode=function(a){return"string"==typeof a&&(a=Buffer.from(a,"utf8")),j.default.encode(Buffer.from(a))},c.baseDecode=function(a){return Buffer.from(j.default.decode(a))};class m extends Error{constructor(a){super(a),this.fieldPath=[],this.originalMessage=a}addToFieldPath(a){this.fieldPath.splice(0,0,a),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}c.BorshError=m;class n{constructor(){this.buf=Buffer.alloc(1024),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(1024)]))}writeU8(a){this.maybeResize(),this.buf.writeUInt8(a,this.length),this.length+=1}writeU16(a){this.maybeResize(),this.buf.writeUInt16LE(a,this.length),this.length+=2}writeU32(a){this.maybeResize(),this.buf.writeUInt32LE(a,this.length),this.length+=4}writeU64(a){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(a).toArray("le",8)))}writeU128(a){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(a).toArray("le",16)))}writeU256(a){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(a).toArray("le",32)))}writeU512(a){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(a).toArray("le",64)))}writeBuffer(a){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),a,Buffer.alloc(1024)]),this.length+=a.length}writeString(a){this.maybeResize();let b=Buffer.from(a,"utf8");this.writeU32(b.length),this.writeBuffer(b)}writeFixedArray(a){this.writeBuffer(Buffer.from(a))}writeArray(a,b){for(let c of(this.maybeResize(),this.writeU32(a.length),a))this.maybeResize(),b(c)}toArray(){return this.buf.subarray(0,this.length)}}function o(a,b,c){let d=c.value;c.value=function(...a){try{return d.apply(this,a)}catch(a){if(a instanceof RangeError&&["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(a.code)>=0)throw new m("Reached the end of buffer when deserializing");throw a}}}c.BinaryWriter=n;class p{constructor(a){this.buf=a,this.offset=0}readU8(){let a=this.buf.readUInt8(this.offset);return this.offset+=1,a}readU16(){let a=this.buf.readUInt16LE(this.offset);return this.offset+=2,a}readU32(){let a=this.buf.readUInt32LE(this.offset);return this.offset+=4,a}readU64(){let a=this.readBuffer(8);return new i.default(a,"le")}readU128(){let a=this.readBuffer(16);return new i.default(a,"le")}readU256(){let a=this.readBuffer(32);return new i.default(a,"le")}readU512(){let a=this.readBuffer(64);return new i.default(a,"le")}readBuffer(a){if(this.offset+a>this.buf.length)throw new m(`Expected buffer length ${a} isn't within bounds`);let b=this.buf.slice(this.offset,this.offset+a);return this.offset+=a,b}readString(){let a=this.readU32(),b=this.readBuffer(a);try{return l.decode(b)}catch(a){throw new m(`Error decoding UTF-8 string: ${a}`)}}readFixedArray(a){return new Uint8Array(this.readBuffer(a))}readArray(a){let b=this.readU32(),c=[];for(let d=0;d<b;++d)c.push(a());return c}}function q(a){return a.charAt(0).toUpperCase()+a.slice(1)}function r(a,b,c,d,e){try{if("string"==typeof d)e[`write${q(d)}`](c);else if(d instanceof Array)if("number"==typeof d[0]){if(c.length!==d[0])throw new m(`Expecting byte array of length ${d[0]}, but got ${c.length} bytes`);e.writeFixedArray(c)}else if(2===d.length&&"number"==typeof d[1]){if(c.length!==d[1])throw new m(`Expecting byte array of length ${d[1]}, but got ${c.length} bytes`);for(let b=0;b<d[1];b++)r(a,null,c[b],d[0],e)}else e.writeArray(c,c=>{r(a,b,c,d[0],e)});else if(void 0!==d.kind)switch(d.kind){case"option":null==c?e.writeU8(0):(e.writeU8(1),r(a,b,c,d.type,e));break;case"map":e.writeU32(c.size),c.forEach((c,f)=>{r(a,b,f,d.key,e),r(a,b,c,d.value,e)});break;default:throw new m(`FieldType ${d} unrecognized`)}else s(a,c,e)}catch(a){throw a instanceof m&&a.addToFieldPath(b),a}}function s(a,b,c){if("function"==typeof b.borshSerialize)return void b.borshSerialize(c);let d=a.get(b.constructor);if(!d)throw new m(`Class ${b.constructor.name} is missing in schema`);if("struct"===d.kind)d.fields.map(([d,e])=>{r(a,d,b[d],e,c)});else if("enum"===d.kind){let e=b[d.field];for(let f=0;f<d.values.length;++f){let[g,h]=d.values[f];if(g===e){c.writeU8(f),r(a,g,b[g],h,c);break}}}else throw new m(`Unexpected schema kind: ${d.kind} for ${b.constructor.name}`)}function t(a,b,c,d){try{if("string"==typeof c)return d[`read${q(c)}`]();if(c instanceof Array)if("number"==typeof c[0])return d.readFixedArray(c[0]);else{if("number"!=typeof c[1])return d.readArray(()=>t(a,b,c[0],d));let e=[];for(let b=0;b<c[1];b++)e.push(t(a,null,c[0],d));return e}if("option"===c.kind){if(d.readU8())return t(a,b,c.type,d);return}if("map"===c.kind){let e=new Map,f=d.readU32();for(let g=0;g<f;g++){let f=t(a,b,c.key,d),g=t(a,b,c.value,d);e.set(f,g)}return e}return u(a,c,d)}catch(a){throw a instanceof m&&a.addToFieldPath(b),a}}function u(a,b,c){if("function"==typeof b.borshDeserialize)return b.borshDeserialize(c);let d=a.get(b);if(!d)throw new m(`Class ${b.name} is missing in schema`);if("struct"===d.kind){let d={};for(let[e,f]of a.get(b).fields)d[e]=t(a,e,f,c);return new b(d)}if("enum"===d.kind){let e=c.readU8();if(e>=d.values.length)throw new m(`Enum index: ${e} is out of range`);let[f,g]=d.values[e],h=t(a,f,g,c);return new b({[f]:h})}throw new m(`Unexpected schema kind: ${d.kind} for ${b.constructor.name}`)}f([o],p.prototype,"readU8",null),f([o],p.prototype,"readU16",null),f([o],p.prototype,"readU32",null),f([o],p.prototype,"readU64",null),f([o],p.prototype,"readU128",null),f([o],p.prototype,"readU256",null),f([o],p.prototype,"readU512",null),f([o],p.prototype,"readString",null),f([o],p.prototype,"readFixedArray",null),f([o],p.prototype,"readArray",null),c.BinaryReader=p,c.serialize=function(a,b,c=n){let d=new c;return s(a,b,d),d.toArray()},c.deserialize=function(a,b,c,d=p){let e=new d(c),f=u(a,b,e);if(e.offset<c.length)throw new m(`Unexpected ${c.length-e.offset} bytes after deserialized data`);return f},c.deserializeUnchecked=function(a,b,c,d=p){return u(a,b,new d(c))}},13057,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.s16=c.s8=c.nu64be=c.u48be=c.u40be=c.u32be=c.u24be=c.u16be=c.nu64=c.u48=c.u40=c.u32=c.u24=c.u16=c.u8=c.offset=c.greedy=c.Constant=c.UTF8=c.CString=c.Blob=c.Boolean=c.BitField=c.BitStructure=c.VariantLayout=c.Union=c.UnionLayoutDiscriminator=c.UnionDiscriminator=c.Structure=c.Sequence=c.DoubleBE=c.Double=c.FloatBE=c.Float=c.NearInt64BE=c.NearInt64=c.NearUInt64BE=c.NearUInt64=c.IntBE=c.Int=c.UIntBE=c.UInt=c.OffsetLayout=c.GreedyCount=c.ExternalLayout=c.bindConstructorLayout=c.nameWithProperty=c.Layout=c.uint8ArrayToBuffer=c.checkUint8Array=void 0,c.constant=c.utf8=c.cstr=c.blob=c.unionLayoutDiscriminator=c.union=c.seq=c.bits=c.struct=c.f64be=c.f64=c.f32be=c.f32=c.ns64be=c.s48be=c.s40be=c.s32be=c.s24be=c.s16be=c.ns64=c.s48=c.s40=c.s32=c.s24=void 0;let d=a.r(500874);function e(a){if(!(a instanceof Uint8Array))throw TypeError("b must be a Uint8Array")}function f(a){return e(a),d.Buffer.from(a.buffer,a.byteOffset,a.length)}c.checkUint8Array=e,c.uint8ArrayToBuffer=f;class g{constructor(a,b){if(!Number.isInteger(a))throw TypeError("span must be an integer");this.span=a,this.property=b}makeDestinationObject(){return{}}getSpan(a,b){if(0>this.span)throw RangeError("indeterminate span");return this.span}replicate(a){let b=Object.create(this.constructor.prototype);return Object.assign(b,this),b.property=a,b}fromArray(a){}}function h(a,b){return b.property?a+"["+b.property+"]":a}c.Layout=g,c.nameWithProperty=h,c.bindConstructorLayout=function(a,b){if("function"!=typeof a)throw TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(a,"layout_"))throw Error("Class is already bound to a layout");if(!(b&&b instanceof g))throw TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(b,"boundConstructor_"))throw Error("layout is already bound to a constructor");a.layout_=b,b.boundConstructor_=a,b.makeDestinationObject=()=>new a,Object.defineProperty(a.prototype,"encode",{value(a,c){return b.encode(this,a,c)},writable:!0}),Object.defineProperty(a,"decode",{value:(a,c)=>b.decode(a,c),writable:!0})};class i extends g{isCount(){throw Error("ExternalLayout is abstract")}}c.ExternalLayout=i;class j extends i{constructor(a=1,b){if(!Number.isInteger(a)||0>=a)throw TypeError("elementSpan must be a (positive) integer");super(-1,b),this.elementSpan=a}isCount(){return!0}decode(a,b=0){return e(a),Math.floor((a.length-b)/this.elementSpan)}encode(a,b,c){return 0}}c.GreedyCount=j;class k extends i{constructor(a,b=0,c){if(!(a instanceof g))throw TypeError("layout must be a Layout");if(!Number.isInteger(b))throw TypeError("offset must be integer or undefined");super(a.span,c||a.property),this.layout=a,this.offset=b}isCount(){return this.layout instanceof l||this.layout instanceof m}decode(a,b=0){return this.layout.decode(a,b+this.offset)}encode(a,b,c=0){return this.layout.encode(a,b,c+this.offset)}}c.OffsetLayout=k;class l extends g{constructor(a,b){if(super(a,b),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(a,b=0){return f(a).readUIntLE(b,this.span)}encode(a,b,c=0){return f(b).writeUIntLE(a,c,this.span),this.span}}c.UInt=l;class m extends g{constructor(a,b){if(super(a,b),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(a,b=0){return f(a).readUIntBE(b,this.span)}encode(a,b,c=0){return f(b).writeUIntBE(a,c,this.span),this.span}}c.UIntBE=m;class n extends g{constructor(a,b){if(super(a,b),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(a,b=0){return f(a).readIntLE(b,this.span)}encode(a,b,c=0){return f(b).writeIntLE(a,c,this.span),this.span}}c.Int=n;class o extends g{constructor(a,b){if(super(a,b),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(a,b=0){return f(a).readIntBE(b,this.span)}encode(a,b,c=0){return f(b).writeIntBE(a,c,this.span),this.span}}function p(a){let b=Math.floor(a/0x100000000);return{hi32:b,lo32:a-0x100000000*b}}function q(a,b){return 0x100000000*a+b}c.IntBE=o;class r extends g{constructor(a){super(8,a)}decode(a,b=0){let c=f(a),d=c.readUInt32LE(b);return q(c.readUInt32LE(b+4),d)}encode(a,b,c=0){let d=p(a),e=f(b);return e.writeUInt32LE(d.lo32,c),e.writeUInt32LE(d.hi32,c+4),8}}c.NearUInt64=r;class s extends g{constructor(a){super(8,a)}decode(a,b=0){let c=f(a);return q(c.readUInt32BE(b),c.readUInt32BE(b+4))}encode(a,b,c=0){let d=p(a),e=f(b);return e.writeUInt32BE(d.hi32,c),e.writeUInt32BE(d.lo32,c+4),8}}c.NearUInt64BE=s;class t extends g{constructor(a){super(8,a)}decode(a,b=0){let c=f(a),d=c.readUInt32LE(b);return q(c.readInt32LE(b+4),d)}encode(a,b,c=0){let d=p(a),e=f(b);return e.writeUInt32LE(d.lo32,c),e.writeInt32LE(d.hi32,c+4),8}}c.NearInt64=t;class u extends g{constructor(a){super(8,a)}decode(a,b=0){let c=f(a);return q(c.readInt32BE(b),c.readUInt32BE(b+4))}encode(a,b,c=0){let d=p(a),e=f(b);return e.writeInt32BE(d.hi32,c),e.writeUInt32BE(d.lo32,c+4),8}}c.NearInt64BE=u;class v extends g{constructor(a){super(4,a)}decode(a,b=0){return f(a).readFloatLE(b)}encode(a,b,c=0){return f(b).writeFloatLE(a,c),4}}c.Float=v;class w extends g{constructor(a){super(4,a)}decode(a,b=0){return f(a).readFloatBE(b)}encode(a,b,c=0){return f(b).writeFloatBE(a,c),4}}c.FloatBE=w;class x extends g{constructor(a){super(8,a)}decode(a,b=0){return f(a).readDoubleLE(b)}encode(a,b,c=0){return f(b).writeDoubleLE(a,c),8}}c.Double=x;class y extends g{constructor(a){super(8,a)}decode(a,b=0){return f(a).readDoubleBE(b)}encode(a,b,c=0){return f(b).writeDoubleBE(a,c),8}}c.DoubleBE=y;class z extends g{constructor(a,b,c){if(!(a instanceof g))throw TypeError("elementLayout must be a Layout");if(!(b instanceof i&&b.isCount()||Number.isInteger(b)&&0<=b))throw TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let d=-1;b instanceof i||!(0<a.span)||(d=b*a.span),super(d,c),this.elementLayout=a,this.count=b}getSpan(a,b=0){if(0<=this.span)return this.span;let c=0,d=this.count;if(d instanceof i&&(d=d.decode(a,b)),0<this.elementLayout.span)c=d*this.elementLayout.span;else{let e=0;for(;e<d;)c+=this.elementLayout.getSpan(a,b+c),++e}return c}decode(a,b=0){let c=[],d=0,e=this.count;for(e instanceof i&&(e=e.decode(a,b));d<e;)c.push(this.elementLayout.decode(a,b)),b+=this.elementLayout.getSpan(a,b),d+=1;return c}encode(a,b,c=0){let d=this.elementLayout,e=a.reduce((a,e)=>a+d.encode(e,b,c+a),0);return this.count instanceof i&&this.count.encode(a.length,b,c),e}}c.Sequence=z;class A extends g{constructor(a,b,c){if(!(Array.isArray(a)&&a.reduce((a,b)=>a&&b instanceof g,!0)))throw TypeError("fields must be array of Layout instances");for(const d of("boolean"==typeof b&&void 0===c&&(c=b,b=void 0),a))if(0>d.span&&void 0===d.property)throw Error("fields cannot contain unnamed variable-length layout");let d=-1;try{d=a.reduce((a,b)=>a+b.getSpan(),0)}catch(a){}super(d,b),this.fields=a,this.decodePrefixes=!!c}getSpan(a,b=0){if(0<=this.span)return this.span;let c=0;try{c=this.fields.reduce((c,d)=>{let e=d.getSpan(a,b);return b+=e,c+e},0)}catch(a){throw RangeError("indeterminate span")}return c}decode(a,b=0){e(a);let c=this.makeDestinationObject();for(let d of this.fields)if(void 0!==d.property&&(c[d.property]=d.decode(a,b)),b+=d.getSpan(a,b),this.decodePrefixes&&a.length===b)break;return c}encode(a,b,c=0){let d=c,e=0,f=0;for(let d of this.fields){let g=d.span;if(f=0<g?g:0,void 0!==d.property){let e=a[d.property];void 0!==e&&(f=d.encode(e,b,c),0>g&&(g=d.getSpan(b,c)))}e=c,c+=g}return e+f-d}fromArray(a){let b=this.makeDestinationObject();for(let c of this.fields)void 0!==c.property&&0<a.length&&(b[c.property]=a.shift());return b}layoutFor(a){if("string"!=typeof a)throw TypeError("property must be string");for(let b of this.fields)if(b.property===a)return b}offsetOf(a){if("string"!=typeof a)throw TypeError("property must be string");let b=0;for(let c of this.fields){if(c.property===a)return b;0>c.span?b=-1:0<=b&&(b+=c.span)}}}c.Structure=A;class B{constructor(a){this.property=a}decode(a,b){throw Error("UnionDiscriminator is abstract")}encode(a,b,c){throw Error("UnionDiscriminator is abstract")}}c.UnionDiscriminator=B;class C extends B{constructor(a,b){if(!(a instanceof i&&a.isCount()))throw TypeError("layout must be an unsigned integer ExternalLayout");super(b||a.property||"variant"),this.layout=a}decode(a,b){return this.layout.decode(a,b)}encode(a,b,c){return this.layout.encode(a,b,c)}}c.UnionLayoutDiscriminator=C;class D extends g{constructor(a,b,c){let d;if(a instanceof l||a instanceof m)d=new C(new k(a));else if(a instanceof i&&a.isCount())d=new C(a);else if(a instanceof B)d=a;else throw TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(void 0===b&&(b=null),!(null===b||b instanceof g))throw TypeError("defaultLayout must be null or a Layout");if(null!==b){if(0>b.span)throw Error("defaultLayout must have constant span");void 0===b.property&&(b=b.replicate("content"))}let e=-1;b&&0<=(e=b.span)&&(a instanceof l||a instanceof m)&&(e+=d.layout.span),super(e,c),this.discriminator=d,this.usesPrefixDiscriminator=a instanceof l||a instanceof m,this.defaultLayout=b,this.registry={};let f=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return f(a)},this.configGetSourceVariant=function(a){f=a.bind(this)}}getSpan(a,b=0){if(0<=this.span)return this.span;let c=this.getVariant(a,b);if(!c)throw Error("unable to determine span for unrecognized variant");return c.getSpan(a,b)}defaultGetSourceVariant(a){if(Object.prototype.hasOwnProperty.call(a,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(a,this.defaultLayout.property))return;let b=this.registry[a[this.discriminator.property]];if(b&&(!b.layout||b.property&&Object.prototype.hasOwnProperty.call(a,b.property)))return b}else for(let b in this.registry){let c=this.registry[b];if(c.property&&Object.prototype.hasOwnProperty.call(a,c.property))return c}throw Error("unable to infer src variant")}decode(a,b=0){let c,d=this.discriminator,e=d.decode(a,b),f=this.registry[e];if(void 0===f){let f=this.defaultLayout,g=0;this.usesPrefixDiscriminator&&(g=d.layout.span),(c=this.makeDestinationObject())[d.property]=e,c[f.property]=f.decode(a,b+g)}else c=f.decode(a,b);return c}encode(a,b,c=0){let d=this.getSourceVariant(a);if(void 0===d){let d=this.discriminator,e=this.defaultLayout,f=0;return this.usesPrefixDiscriminator&&(f=d.layout.span),d.encode(a[d.property],b,c),f+e.encode(a[e.property],b,c+f)}return d.encode(a,b,c)}addVariant(a,b,c){let d=new E(this,a,b,c);return this.registry[a]=d,d}getVariant(a,b=0){let c;return c=a instanceof Uint8Array?this.discriminator.decode(a,b):a,this.registry[c]}}c.Union=D;class E extends g{constructor(a,b,c,d){if(!(a instanceof D))throw TypeError("union must be a Union");if(!Number.isInteger(b)||0>b)throw TypeError("variant must be a (non-negative) integer");if("string"==typeof c&&void 0===d&&(d=c,c=null),c){if(!(c instanceof g))throw TypeError("layout must be a Layout");if(null!==a.defaultLayout&&0<=c.span&&c.span>a.defaultLayout.span)throw Error("variant span exceeds span of containing union");if("string"!=typeof d)throw TypeError("variant must have a String property")}let e=a.span;0>a.span&&0<=(e=c?c.span:0)&&a.usesPrefixDiscriminator&&(e+=a.discriminator.layout.span),super(e,d),this.union=a,this.variant=b,this.layout=c||null}getSpan(a,b=0){if(0<=this.span)return this.span;let c=0;this.union.usesPrefixDiscriminator&&(c=this.union.discriminator.layout.span);let d=0;return this.layout&&(d=this.layout.getSpan(a,b+c)),c+d}decode(a,b=0){let c=this.makeDestinationObject();if(this!==this.union.getVariant(a,b))throw Error("variant mismatch");let d=0;return this.union.usesPrefixDiscriminator&&(d=this.union.discriminator.layout.span),this.layout?c[this.property]=this.layout.decode(a,b+d):this.property?c[this.property]=!0:this.union.usesPrefixDiscriminator&&(c[this.union.discriminator.property]=this.variant),c}encode(a,b,c=0){let d=0;if(this.union.usesPrefixDiscriminator&&(d=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(a,this.property))throw TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,b,c);let e=d;if(this.layout&&(this.layout.encode(a[this.property],b,c+d),e+=this.layout.getSpan(b,c+d),0<=this.union.span&&e>this.union.span))throw Error("encoded variant overruns containing union");return e}fromArray(a){if(this.layout)return this.layout.fromArray(a)}}function F(a){return 0>a&&(a+=0x100000000),a}c.VariantLayout=E;class G extends g{constructor(a,b,c){if(!(a instanceof l||a instanceof m))throw TypeError("word must be a UInt or UIntBE layout");if("string"==typeof b&&void 0===c&&(c=b,b=!1),4<a.span)throw RangeError("word cannot exceed 32 bits");super(a.span,c),this.word=a,this.msb=!!b,this.fields=[];let d=0;this._packedSetValue=function(a){return d=F(a),this},this._packedGetValue=function(){return d}}decode(a,b=0){let c=this.makeDestinationObject(),d=this.word.decode(a,b);for(let b of(this._packedSetValue(d),this.fields))void 0!==b.property&&(c[b.property]=b.decode(a));return c}encode(a,b,c=0){let d=this.word.decode(b,c);for(let b of(this._packedSetValue(d),this.fields))if(void 0!==b.property){let c=a[b.property];void 0!==c&&b.encode(c)}return this.word.encode(this._packedGetValue(),b,c)}addField(a,b){let c=new H(this,a,b);return this.fields.push(c),c}addBoolean(a){let b=new I(this,a);return this.fields.push(b),b}fieldFor(a){if("string"!=typeof a)throw TypeError("property must be string");for(let b of this.fields)if(b.property===a)return b}}c.BitStructure=G;class H{constructor(a,b,c){if(!(a instanceof G))throw TypeError("container must be a BitStructure");if(!Number.isInteger(b)||0>=b)throw TypeError("bits must be positive integer");const d=8*a.span,e=a.fields.reduce((a,b)=>a+b.bits,0);if(b+e>d)throw Error("bits too long for span remainder ("+(d-e)+" of "+d+" remain)");this.container=a,this.bits=b,this.valueMask=(1<<b)-1,32===b&&(this.valueMask=0xffffffff),this.start=e,this.container.msb&&(this.start=d-e-b),this.wordMask=F(this.valueMask<<this.start),this.property=c}decode(a,b){return F(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(a){if("number"!=typeof a||!Number.isInteger(a)||a!==F(a&this.valueMask))throw TypeError(h("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);let b=this.container._packedGetValue(),c=F(a<<this.start);this.container._packedSetValue(F(b&~this.wordMask)|c)}}c.BitField=H;class I extends H{constructor(a,b){super(a,1,b)}decode(a,b){return!!super.decode(a,b)}encode(a){"boolean"==typeof a&&(a*=1),super.encode(a)}}c.Boolean=I;class J extends g{constructor(a,b){if(!(a instanceof i&&a.isCount()||Number.isInteger(a)&&0<=a))throw TypeError("length must be positive integer or an unsigned integer ExternalLayout");let c=-1;a instanceof i||(c=a),super(c,b),this.length=a}getSpan(a,b){let c=this.span;return 0>c&&(c=this.length.decode(a,b)),c}decode(a,b=0){let c=this.span;return 0>c&&(c=this.length.decode(a,b)),f(a).slice(b,b+c)}encode(a,b,c){let d=this.length;if(this.length instanceof i&&(d=a.length),!(a instanceof Uint8Array&&d===a.length))throw TypeError(h("Blob.encode",this)+" requires (length "+d+") Uint8Array as src");if(c+d>b.length)throw RangeError("encoding overruns Uint8Array");let e=f(a);return f(b).write(e.toString("hex"),c,d,"hex"),this.length instanceof i&&this.length.encode(d,b,c),d}}c.Blob=J;class K extends g{constructor(a){super(-1,a)}getSpan(a,b=0){e(a);let c=b;for(;c<a.length&&0!==a[c];)c+=1;return 1+c-b}decode(a,b=0){let c=this.getSpan(a,b);return f(a).slice(b,b+c-1).toString("utf-8")}encode(a,b,c=0){"string"!=typeof a&&(a=String(a));let e=d.Buffer.from(a,"utf8"),g=e.length;if(c+g>b.length)throw RangeError("encoding overruns Buffer");let h=f(b);return e.copy(h,c),h[c+g]=0,g+1}}c.CString=K;class L extends g{constructor(a,b){if("string"==typeof a&&void 0===b&&(b=a,a=void 0),void 0===a)a=-1;else if(!Number.isInteger(a))throw TypeError("maxSpan must be an integer");super(-1,b),this.maxSpan=a}getSpan(a,b=0){return e(a),a.length-b}decode(a,b=0){let c=this.getSpan(a,b);if(0<=this.maxSpan&&this.maxSpan<c)throw RangeError("text length exceeds maxSpan");return f(a).slice(b,b+c).toString("utf-8")}encode(a,b,c=0){"string"!=typeof a&&(a=String(a));let e=d.Buffer.from(a,"utf8"),g=e.length;if(0<=this.maxSpan&&this.maxSpan<g)throw RangeError("text length exceeds maxSpan");if(c+g>b.length)throw RangeError("encoding overruns Buffer");return e.copy(f(b),c),g}}c.UTF8=L;class M extends g{constructor(a,b){super(0,b),this.value=a}decode(a,b){return this.value}encode(a,b,c){return 0}}c.Constant=M,c.greedy=(a,b)=>new j(a,b),c.offset=(a,b,c)=>new k(a,b,c),c.u8=a=>new l(1,a),c.u16=a=>new l(2,a),c.u24=a=>new l(3,a),c.u32=a=>new l(4,a),c.u40=a=>new l(5,a),c.u48=a=>new l(6,a),c.nu64=a=>new r(a),c.u16be=a=>new m(2,a),c.u24be=a=>new m(3,a),c.u32be=a=>new m(4,a),c.u40be=a=>new m(5,a),c.u48be=a=>new m(6,a),c.nu64be=a=>new s(a),c.s8=a=>new n(1,a),c.s16=a=>new n(2,a),c.s24=a=>new n(3,a),c.s32=a=>new n(4,a),c.s40=a=>new n(5,a),c.s48=a=>new n(6,a),c.ns64=a=>new t(a),c.s16be=a=>new o(2,a),c.s24be=a=>new o(3,a),c.s32be=a=>new o(4,a),c.s40be=a=>new o(5,a),c.s48be=a=>new o(6,a),c.ns64be=a=>new u(a),c.f32=a=>new v(a),c.f32be=a=>new w(a),c.f64=a=>new x(a),c.f64be=a=>new y(a),c.struct=(a,b,c)=>new A(a,b,c),c.bits=(a,b,c)=>new G(a,b,c),c.seq=(a,b,c)=>new z(a,b,c),c.union=(a,b,c)=>new D(a,b,c),c.unionLayoutDiscriminator=(a,b)=>new C(a,b),c.blob=(a,b)=>new J(a,b),c.cstr=a=>new K(a),c.utf8=(a,b)=>new L(a,b),c.constant=(a,b)=>new M(a,b)},957580,a=>{"use strict";let b,c;var d=a.i(290227),e=a.i(165618);let f=0,g=0;a.s(["default",0,function(a,h,i){let j=h&&i||0,k=h||Array(16),l=(a=a||{}).node||b,m=void 0!==a.clockseq?a.clockseq:c;if(null==l||null==m){let e=a.random||(a.rng||d.default)();null==l&&(l=b=[1|e[0],e[1],e[2],e[3],e[4],e[5]]),null==m&&(m=c=(e[6]<<8|e[7])&16383)}let n=void 0!==a.msecs?a.msecs:Date.now(),o=void 0!==a.nsecs?a.nsecs:g+1,p=n-f+(o-g)/1e4;if(p<0&&void 0===a.clockseq&&(m=m+1&16383),(p<0||n>f)&&void 0===a.nsecs&&(o=0),o>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");f=n,g=o,c=m;let q=((0xfffffff&(n+=122192928e5))*1e4+o)%0x100000000;k[j++]=q>>>24&255,k[j++]=q>>>16&255,k[j++]=q>>>8&255,k[j++]=255&q;let r=n/0x100000000*1e4&0xfffffff;k[j++]=r>>>8&255,k[j++]=255&r,k[j++]=r>>>24&15|16,k[j++]=r>>>16&255,k[j++]=m>>>8|128,k[j++]=255&m;for(let a=0;a<6;++a)k[j+a]=l[a];return h||(0,e.default)(k)}])},385439,a=>{"use strict";a.s([],596938),a.i(596938);var b=a.i(957580),c=a.i(165618),d=a.i(350686);let e=function(a){let b;if(!(0,d.default)(a))throw TypeError("Invalid UUID");let c=new Uint8Array(16);return c[0]=(b=parseInt(a.slice(0,8),16))>>>24,c[1]=b>>>16&255,c[2]=b>>>8&255,c[3]=255&b,c[4]=(b=parseInt(a.slice(9,13),16))>>>8,c[5]=255&b,c[6]=(b=parseInt(a.slice(14,18),16))>>>8,c[7]=255&b,c[8]=(b=parseInt(a.slice(19,23),16))>>>8,c[9]=255&b,c[10]=(b=parseInt(a.slice(24,36),16))/0x10000000000&255,c[11]=b/0x100000000&255,c[12]=b>>>24&255,c[13]=b>>>16&255,c[14]=b>>>8&255,c[15]=255&b,c};function f(a,b,d){function f(a,f,g,h){if("string"==typeof a&&(a=function(a){a=unescape(encodeURIComponent(a));let b=[];for(let c=0;c<a.length;++c)b.push(a.charCodeAt(c));return b}(a)),"string"==typeof f&&(f=e(f)),16!==f.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let i=new Uint8Array(16+a.length);if(i.set(f),i.set(a,f.length),(i=d(i))[6]=15&i[6]|b,i[8]=63&i[8]|128,g){h=h||0;for(let a=0;a<16;++a)g[h+a]=i[a];return g}return(0,c.default)(i)}try{f.name=a}catch(a){}return f.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",f.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",f}var g=a.i(254799);let h=f("v3",48,function(a){return Array.isArray(a)?a=Buffer.from(a):"string"==typeof a&&(a=Buffer.from(a,"utf8")),g.default.createHash("md5").update(a).digest()});var i=a.i(38009);let j=f("v5",80,function(a){return Array.isArray(a)?a=Buffer.from(a):"string"==typeof a&&(a=Buffer.from(a,"utf8")),g.default.createHash("sha1").update(a).digest()});a.s(["NIL",0,"00000000-0000-0000-0000-000000000000","parse",0,e,"stringify",()=>c.default,"v1",()=>b.default,"v3",0,h,"v4",()=>i.default,"v5",0,j,"validate",()=>d.default,"version",0,function(a){if(!(0,d.default)(a))throw TypeError("Invalid UUID");return parseInt(a.substr(14,1),16)}],385439)},728734,(a,b,c)=>{"use strict";let d=a.r(385439).v4;b.exports=function(a,b,c,e){if("string"!=typeof a)throw TypeError(a+" must be a string");let f="number"==typeof(e=e||{}).version?e.version:2;if(1!==f&&2!==f)throw TypeError(f+" must be 1 or 2");let g={method:a};if(2===f&&(g.jsonrpc="2.0"),b){if("object"!=typeof b&&!Array.isArray(b))throw TypeError(b+" must be an object, array or omitted");g.params=b}return void 0===c?g.id=("function"==typeof e.generator?e.generator:function(){return d()})(g,e):2===f&&null===c?e.notificationIdNull&&(g.id=null):g.id=c,g}},119075,(a,b,c)=>{"use strict";let d=a.r(385439).v4,e=a.r(728734),f=function(a,b){if(!(this instanceof f))return new f(a,b);b||(b={}),this.options={reviver:void 0!==b.reviver?b.reviver:null,replacer:void 0!==b.replacer?b.replacer:null,generator:void 0!==b.generator?b.generator:function(){return d()},version:void 0!==b.version?b.version:2,notificationIdNull:"boolean"==typeof b.notificationIdNull&&b.notificationIdNull},this.callServer=a};b.exports=f,f.prototype.request=function(a,b,c,d){let f,g=this,h=null,i=Array.isArray(a)&&"function"==typeof b;if(1===this.options.version&&i)throw TypeError("JSON-RPC 1.0 does not support batching");let j=!i&&a&&"object"==typeof a&&"function"==typeof b;if(i||j)d=b,h=a;else{"function"==typeof c&&(d=c,c=void 0);let f="function"==typeof d;try{h=e(a,b,c,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(a){if(f)return d(a);throw a}if(!f)return h}try{f=JSON.stringify(h,this.options.replacer)}catch(a){return d(a)}return this.callServer(f,function(a,b){g._parseResponse(a,b,d)}),h},f.prototype._parseResponse=function(a,b,c){let d;if(a)return void c(a);if(!b)return c();try{d=JSON.parse(b,this.options.reviver)}catch(a){return c(a)}if(3===c.length)if(!Array.isArray(d))return c(null,d.error,d.result);else{let a=function(a){return void 0!==a.error};return c(null,d.filter(a),d.filter(function(b){return!a(b)}))}c(null,d)}},896806,(a,b,c)=>{"use strict";let d=["nodebuffer","arraybuffer","fragments"],e="undefined"!=typeof Blob;e&&d.push("blob"),b.exports={BINARY_TYPES:d,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:e,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},302436,(a,b,c)=>{"use strict";let{EMPTY_BUFFER:d}=a.r(896806),e=Buffer[Symbol.species];function f(a,b,c,d,e){for(let f=0;f<e;f++)c[d+f]=a[f]^b[3&f]}function g(a,b){for(let c=0;c<a.length;c++)a[c]^=b[3&c]}function h(a){let b;return(h.readOnly=!0,Buffer.isBuffer(a))?a:(a instanceof ArrayBuffer?b=new e(a):ArrayBuffer.isView(a)?b=new e(a.buffer,a.byteOffset,a.byteLength):(b=Buffer.from(a),h.readOnly=!1),b)}if(b.exports={concat:function(a,b){if(0===a.length)return d;if(1===a.length)return a[0];let c=Buffer.allocUnsafe(b),f=0;for(let b=0;b<a.length;b++){let d=a[b];c.set(d,f),f+=d.length}return f<b?new e(c.buffer,c.byteOffset,f):c},mask:f,toArrayBuffer:function(a){return a.length===a.buffer.byteLength?a.buffer:a.buffer.slice(a.byteOffset,a.byteOffset+a.length)},toBuffer:h,unmask:g},!process.env.WS_NO_BUFFER_UTIL)try{let c=a.r(261431);b.exports.mask=function(a,b,d,e,g){g<48?f(a,b,d,e,g):c.mask(a,b,d,e,g)},b.exports.unmask=function(a,b){a.length<32?g(a,b):c.unmask(a,b)}}catch(a){}},653770,(a,b,c)=>{"use strict";let d=Symbol("kDone"),e=Symbol("kRun");b.exports=class{constructor(a){this[d]=()=>{this.pending--,this[e]()},this.concurrency=a||1/0,this.jobs=[],this.pending=0}add(a){this.jobs.push(a),this[e]()}[e](){if(this.pending!==this.concurrency&&this.jobs.length){let a=this.jobs.shift();this.pending++,a(this[d])}}}},992688,(a,b,c)=>{"use strict";let d,e=a.r(406461),f=a.r(302436),g=a.r(653770),{kStatusCode:h}=a.r(896806),i=Buffer[Symbol.species],j=Buffer.from([0,0,255,255]),k=Symbol("permessage-deflate"),l=Symbol("total-length"),m=Symbol("callback"),n=Symbol("buffers"),o=Symbol("error");function p(a){this[n].push(a),this[l]+=a.length}function q(a){(this[l]+=a.length,this[k]._maxPayload<1||this[l]<=this[k]._maxPayload)?this[n].push(a):(this[o]=RangeError("Max payload size exceeded"),this[o].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[o][h]=1009,this.removeListener("data",q),this.reset())}function r(a){(this[k]._inflate=null,this[o])?this[m](this[o]):(a[h]=1007,this[m](a))}b.exports=class{constructor(a,b,c){this._maxPayload=0|c,this._options=a||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!b,this._deflate=null,this._inflate=null,this.params=null,d||(d=new g(void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10))}static get extensionName(){return"permessage-deflate"}offer(){let a={};return this._options.serverNoContextTakeover&&(a.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(a.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(a.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?a.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(a.client_max_window_bits=!0),a}accept(a){return a=this.normalizeParams(a),this.params=this._isServer?this.acceptAsServer(a):this.acceptAsClient(a),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let a=this._deflate[m];this._deflate.close(),this._deflate=null,a&&a(Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(a){let b=this._options,c=a.find(a=>(!1!==b.serverNoContextTakeover||!a.server_no_context_takeover)&&(!a.server_max_window_bits||!1!==b.serverMaxWindowBits&&("number"!=typeof b.serverMaxWindowBits||!(b.serverMaxWindowBits>a.server_max_window_bits)))&&("number"!=typeof b.clientMaxWindowBits||!!a.client_max_window_bits));if(!c)throw Error("None of the extension offers can be accepted");return b.serverNoContextTakeover&&(c.server_no_context_takeover=!0),b.clientNoContextTakeover&&(c.client_no_context_takeover=!0),"number"==typeof b.serverMaxWindowBits&&(c.server_max_window_bits=b.serverMaxWindowBits),"number"==typeof b.clientMaxWindowBits?c.client_max_window_bits=b.clientMaxWindowBits:(!0===c.client_max_window_bits||!1===b.clientMaxWindowBits)&&delete c.client_max_window_bits,c}acceptAsClient(a){let b=a[0];if(!1===this._options.clientNoContextTakeover&&b.client_no_context_takeover)throw Error('Unexpected parameter "client_no_context_takeover"');if(b.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&b.client_max_window_bits>this._options.clientMaxWindowBits)throw Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(b.client_max_window_bits=this._options.clientMaxWindowBits);return b}normalizeParams(a){return a.forEach(a=>{Object.keys(a).forEach(b=>{let c=a[b];if(c.length>1)throw Error(`Parameter "${b}" must have only a single value`);if(c=c[0],"client_max_window_bits"===b){if(!0!==c){let a=+c;if(!Number.isInteger(a)||a<8||a>15)throw TypeError(`Invalid value for parameter "${b}": ${c}`);c=a}else if(!this._isServer)throw TypeError(`Invalid value for parameter "${b}": ${c}`)}else if("server_max_window_bits"===b){let a=+c;if(!Number.isInteger(a)||a<8||a>15)throw TypeError(`Invalid value for parameter "${b}": ${c}`);c=a}else if("client_no_context_takeover"===b||"server_no_context_takeover"===b){if(!0!==c)throw TypeError(`Invalid value for parameter "${b}": ${c}`)}else throw Error(`Unknown parameter "${b}"`);a[b]=c})}),a}decompress(a,b,c){d.add(d=>{this._decompress(a,b,(a,b)=>{d(),c(a,b)})})}compress(a,b,c){d.add(d=>{this._compress(a,b,(a,b)=>{d(),c(a,b)})})}_decompress(a,b,c){let d=this._isServer?"client":"server";if(!this._inflate){let a=`${d}_max_window_bits`,b="number"!=typeof this.params[a]?e.Z_DEFAULT_WINDOWBITS:this.params[a];this._inflate=e.createInflateRaw({...this._options.zlibInflateOptions,windowBits:b}),this._inflate[k]=this,this._inflate[l]=0,this._inflate[n]=[],this._inflate.on("error",r),this._inflate.on("data",q)}this._inflate[m]=c,this._inflate.write(a),b&&this._inflate.write(j),this._inflate.flush(()=>{let a=this._inflate[o];if(a){this._inflate.close(),this._inflate=null,c(a);return}let e=f.concat(this._inflate[n],this._inflate[l]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[l]=0,this._inflate[n]=[],b&&this.params[`${d}_no_context_takeover`]&&this._inflate.reset()),c(null,e)})}_compress(a,b,c){let d=this._isServer?"server":"client";if(!this._deflate){let a=`${d}_max_window_bits`,b="number"!=typeof this.params[a]?e.Z_DEFAULT_WINDOWBITS:this.params[a];this._deflate=e.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:b}),this._deflate[l]=0,this._deflate[n]=[],this._deflate.on("data",p)}this._deflate[m]=c,this._deflate.write(a),this._deflate.flush(e.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let a=f.concat(this._deflate[n],this._deflate[l]);b&&(a=new i(a.buffer,a.byteOffset,a.length-4)),this._deflate[m]=null,this._deflate[l]=0,this._deflate[n]=[],b&&this.params[`${d}_no_context_takeover`]&&this._deflate.reset(),c(null,a)})}}},955585,(a,b,c)=>{"use strict";let{isUtf8:d}=a.r(500874),{hasBlob:e}=a.r(896806);function f(a){let b=a.length,c=0;for(;c<b;)if((128&a[c])==0)c++;else if((224&a[c])==192){if(c+1===b||(192&a[c+1])!=128||(254&a[c])==192)return!1;c+=2}else if((240&a[c])==224){if(c+2>=b||(192&a[c+1])!=128||(192&a[c+2])!=128||224===a[c]&&(224&a[c+1])==128||237===a[c]&&(224&a[c+1])==160)return!1;c+=3}else{if((248&a[c])!=240||c+3>=b||(192&a[c+1])!=128||(192&a[c+2])!=128||(192&a[c+3])!=128||240===a[c]&&(240&a[c+1])==128||244===a[c]&&a[c+1]>143||a[c]>244)return!1;c+=4}return!0}if(b.exports={isBlob:function(a){return e&&"object"==typeof a&&"function"==typeof a.arrayBuffer&&"string"==typeof a.type&&"function"==typeof a.stream&&("Blob"===a[Symbol.toStringTag]||"File"===a[Symbol.toStringTag])},isValidStatusCode:function(a){return a>=1e3&&a<=1014&&1004!==a&&1005!==a&&1006!==a||a>=3e3&&a<=4999},isValidUTF8:f,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},d)b.exports.isValidUTF8=function(a){return a.length<24?f(a):d(a)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let c=a.r(861947);b.exports.isValidUTF8=function(a){return a.length<32?f(a):c(a)}}catch(a){}},663946,(a,b,c)=>{"use strict";let{Writable:d}=a.r(688947),e=a.r(992688),{BINARY_TYPES:f,EMPTY_BUFFER:g,kStatusCode:h,kWebSocket:i}=a.r(896806),{concat:j,toArrayBuffer:k,unmask:l}=a.r(302436),{isValidStatusCode:m,isValidUTF8:n}=a.r(955585),o=Buffer[Symbol.species];b.exports=class extends d{constructor(a={}){super(),this._allowSynchronousEvents=void 0===a.allowSynchronousEvents||a.allowSynchronousEvents,this._binaryType=a.binaryType||f[0],this._extensions=a.extensions||{},this._isServer=!!a.isServer,this._maxPayload=0|a.maxPayload,this._skipUTF8Validation=!!a.skipUTF8Validation,this[i]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(a,b,c){if(8===this._opcode&&0==this._state)return c();this._bufferedBytes+=a.length,this._buffers.push(a),this.startLoop(c)}consume(a){if(this._bufferedBytes-=a,a===this._buffers[0].length)return this._buffers.shift();if(a<this._buffers[0].length){let b=this._buffers[0];return this._buffers[0]=new o(b.buffer,b.byteOffset+a,b.length-a),new o(b.buffer,b.byteOffset,a)}let b=Buffer.allocUnsafe(a);do{let c=this._buffers[0],d=b.length-a;a>=c.length?b.set(this._buffers.shift(),d):(b.set(new Uint8Array(c.buffer,c.byteOffset,a),d),this._buffers[0]=new o(c.buffer,c.byteOffset+a,c.length-a)),a-=c.length}while(a>0)return b}startLoop(a){this._loop=!0;do switch(this._state){case 0:this.getInfo(a);break;case 1:this.getPayloadLength16(a);break;case 2:this.getPayloadLength64(a);break;case 3:this.getMask();break;case 4:this.getData(a);break;case 5:case 6:this._loop=!1;return}while(this._loop)this._errored||a()}getInfo(a){if(this._bufferedBytes<2){this._loop=!1;return}let b=this.consume(2);if((48&b[0])!=0)return void a(this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3"));let c=(64&b[0])==64;if(c&&!this._extensions[e.extensionName])return void a(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(this._fin=(128&b[0])==128,this._opcode=15&b[0],this._payloadLength=127&b[1],0===this._opcode){if(c)return void a(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(!this._fragmented)return void a(this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE"));this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return void a(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));this._compressed=c}else{if(!(this._opcode>7)||!(this._opcode<11))return void a(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));if(!this._fin)return void a(this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN"));if(c)return void a(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength)return void a(this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH"))}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=(128&b[1])==128,this._isServer){if(!this._masked)return void a(this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK"))}else if(this._masked)return void a(this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK"));126===this._payloadLength?this._state=1:127===this._payloadLength?this._state=2:this.haveLength(a)}getPayloadLength16(a){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(a)}getPayloadLength64(a){if(this._bufferedBytes<8){this._loop=!1;return}let b=this.consume(8),c=b.readUInt32BE(0);c>2097151?a(this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=0x100000000*c+b.readUInt32BE(4),this.haveLength(a))}haveLength(a){this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)?a(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH")):this._masked?this._state=3:this._state=4}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=4}getData(a){let b=g;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}b=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!=0&&l(b,this._mask)}if(this._opcode>7)return void this.controlMessage(b,a);if(this._compressed){this._state=5,this.decompress(b,a);return}b.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(b)),this.dataMessage(a)}decompress(a,b){this._extensions[e.extensionName].decompress(a,this._fin,(a,c)=>{if(a)return b(a);if(c.length){if(this._messageLength+=c.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return void b(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(c)}this.dataMessage(b),0===this._state&&this.startLoop(b)})}dataMessage(a){if(!this._fin){this._state=0;return}let b=this._messageLength,c=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let d;d="nodebuffer"===this._binaryType?j(c,b):"arraybuffer"===this._binaryType?k(j(c,b)):"blob"===this._binaryType?new Blob(c):c,this._allowSynchronousEvents?(this.emit("message",d,!0),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",d,!0),this._state=0,this.startLoop(a)}))}else{let d=j(c,b);if(!this._skipUTF8Validation&&!n(d))return void a(this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8"));5===this._state||this._allowSynchronousEvents?(this.emit("message",d,!1),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",d,!1),this._state=0,this.startLoop(a)}))}}controlMessage(a,b){if(8===this._opcode){if(0===a.length)this._loop=!1,this.emit("conclude",1005,g),this.end();else{let c=a.readUInt16BE(0);if(!m(c))return void b(this.createError(RangeError,`invalid status code ${c}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE"));let d=new o(a.buffer,a.byteOffset+2,a.length-2);if(!this._skipUTF8Validation&&!n(d))return void b(this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8"));this._loop=!1,this.emit("conclude",c,d),this.end()}this._state=0;return}this._allowSynchronousEvents?(this.emit(9===this._opcode?"ping":"pong",a),this._state=0):(this._state=6,setImmediate(()=>{this.emit(9===this._opcode?"ping":"pong",a),this._state=0,this.startLoop(b)}))}createError(a,b,c,d,e){this._loop=!1,this._errored=!0;let f=new a(c?`Invalid WebSocket frame: ${b}`:b);return Error.captureStackTrace(f,this.createError),f.code=e,f[h]=d,f}}},393897,(a,b,c)=>{"use strict";let d,{Duplex:e}=a.r(688947),{randomFillSync:f}=a.r(254799),g=a.r(992688),{EMPTY_BUFFER:h,kWebSocket:i,NOOP:j}=a.r(896806),{isBlob:k,isValidStatusCode:l}=a.r(955585),{mask:m,toBuffer:n}=a.r(302436),o=Symbol("kByteLength"),p=Buffer.alloc(4),q=8192;class r{constructor(a,b,c){this._extensions=b||{},c&&(this._generateMask=c,this._maskBuffer=Buffer.alloc(4)),this._socket=a,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=0,this.onerror=j,this[i]=void 0}static frame(a,b){let c,e,g=!1,h=2,i=!1;b.mask&&(c=b.maskBuffer||p,b.generateMask?b.generateMask(c):(8192===q&&(void 0===d&&(d=Buffer.alloc(8192)),f(d,0,8192),q=0),c[0]=d[q++],c[1]=d[q++],c[2]=d[q++],c[3]=d[q++]),i=(c[0]|c[1]|c[2]|c[3])==0,h=6),"string"==typeof a?e=(!b.mask||i)&&void 0!==b[o]?b[o]:(a=Buffer.from(a)).length:(e=a.length,g=b.mask&&b.readOnly&&!i);let j=e;e>=65536?(h+=8,j=127):e>125&&(h+=2,j=126);let k=Buffer.allocUnsafe(g?e+h:h);return(k[0]=b.fin?128|b.opcode:b.opcode,b.rsv1&&(k[0]|=64),k[1]=j,126===j?k.writeUInt16BE(e,2):127===j&&(k[2]=k[3]=0,k.writeUIntBE(e,4,6)),b.mask)?(k[1]|=128,k[h-4]=c[0],k[h-3]=c[1],k[h-2]=c[2],k[h-1]=c[3],i)?[k,a]:g?(m(a,c,k,h,e),[k]):(m(a,c,a,0,e),[k,a]):[k,a]}close(a,b,c,d){let e;if(void 0===a)e=h;else if("number"==typeof a&&l(a))if(void 0!==b&&b.length){let c=Buffer.byteLength(b);if(c>123)throw RangeError("The message must not be greater than 123 bytes");(e=Buffer.allocUnsafe(2+c)).writeUInt16BE(a,0),"string"==typeof b?e.write(b,2):e.set(b,2)}else(e=Buffer.allocUnsafe(2)).writeUInt16BE(a,0);else throw TypeError("First argument must be a valid error code number");let f={[o]:e.length,fin:!0,generateMask:this._generateMask,mask:c,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};0!==this._state?this.enqueue([this.dispatch,e,!1,f,d]):this.sendFrame(r.frame(e,f),d)}ping(a,b,c){let d,e;if("string"==typeof a?(d=Buffer.byteLength(a),e=!1):k(a)?(d=a.size,e=!1):(d=(a=n(a)).length,e=n.readOnly),d>125)throw RangeError("The data size must not be greater than 125 bytes");let f={[o]:d,fin:!0,generateMask:this._generateMask,mask:b,maskBuffer:this._maskBuffer,opcode:9,readOnly:e,rsv1:!1};k(a)?0!==this._state?this.enqueue([this.getBlobData,a,!1,f,c]):this.getBlobData(a,!1,f,c):0!==this._state?this.enqueue([this.dispatch,a,!1,f,c]):this.sendFrame(r.frame(a,f),c)}pong(a,b,c){let d,e;if("string"==typeof a?(d=Buffer.byteLength(a),e=!1):k(a)?(d=a.size,e=!1):(d=(a=n(a)).length,e=n.readOnly),d>125)throw RangeError("The data size must not be greater than 125 bytes");let f={[o]:d,fin:!0,generateMask:this._generateMask,mask:b,maskBuffer:this._maskBuffer,opcode:10,readOnly:e,rsv1:!1};k(a)?0!==this._state?this.enqueue([this.getBlobData,a,!1,f,c]):this.getBlobData(a,!1,f,c):0!==this._state?this.enqueue([this.dispatch,a,!1,f,c]):this.sendFrame(r.frame(a,f),c)}send(a,b,c){let d,e,f=this._extensions[g.extensionName],h=b.binary?2:1,i=b.compress;"string"==typeof a?(d=Buffer.byteLength(a),e=!1):k(a)?(d=a.size,e=!1):(d=(a=n(a)).length,e=n.readOnly),this._firstFragment?(this._firstFragment=!1,i&&f&&f.params[f._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(i=d>=f._threshold),this._compress=i):(i=!1,h=0),b.fin&&(this._firstFragment=!0);let j={[o]:d,fin:b.fin,generateMask:this._generateMask,mask:b.mask,maskBuffer:this._maskBuffer,opcode:h,readOnly:e,rsv1:i};k(a)?0!==this._state?this.enqueue([this.getBlobData,a,this._compress,j,c]):this.getBlobData(a,this._compress,j,c):0!==this._state?this.enqueue([this.dispatch,a,this._compress,j,c]):this.dispatch(a,this._compress,j,c)}getBlobData(a,b,c,d){this._bufferedBytes+=c[o],this._state=2,a.arrayBuffer().then(a=>{if(this._socket.destroyed){let a=Error("The socket was closed while the blob was being read");process.nextTick(s,this,a,d);return}this._bufferedBytes-=c[o];let e=n(a);b?this.dispatch(e,b,c,d):(this._state=0,this.sendFrame(r.frame(e,c),d),this.dequeue())}).catch(a=>{process.nextTick(t,this,a,d)})}dispatch(a,b,c,d){if(!b)return void this.sendFrame(r.frame(a,c),d);let e=this._extensions[g.extensionName];this._bufferedBytes+=c[o],this._state=1,e.compress(a,c.fin,(a,b)=>{this._socket.destroyed?s(this,Error("The socket was closed while data was being compressed"),d):(this._bufferedBytes-=c[o],this._state=0,c.readOnly=!1,this.sendFrame(r.frame(b,c),d),this.dequeue())})}dequeue(){for(;0===this._state&&this._queue.length;){let a=this._queue.shift();this._bufferedBytes-=a[3][o],Reflect.apply(a[0],this,a.slice(1))}}enqueue(a){this._bufferedBytes+=a[3][o],this._queue.push(a)}sendFrame(a,b){2===a.length?(this._socket.cork(),this._socket.write(a[0]),this._socket.write(a[1],b),this._socket.uncork()):this._socket.write(a[0],b)}}function s(a,b,c){"function"==typeof c&&c(b);for(let c=0;c<a._queue.length;c++){let d=a._queue[c],e=d[d.length-1];"function"==typeof e&&e(b)}}function t(a,b,c){s(a,b,c),a.onerror(b)}b.exports=r},255155,(a,b,c)=>{"use strict";let{kForOnEventAttribute:d,kListener:e}=a.r(896806),f=Symbol("kCode"),g=Symbol("kData"),h=Symbol("kError"),i=Symbol("kMessage"),j=Symbol("kReason"),k=Symbol("kTarget"),l=Symbol("kType"),m=Symbol("kWasClean");class n{constructor(a){this[k]=null,this[l]=a}get target(){return this[k]}get type(){return this[l]}}Object.defineProperty(n.prototype,"target",{enumerable:!0}),Object.defineProperty(n.prototype,"type",{enumerable:!0});class o extends n{constructor(a,b={}){super(a),this[f]=void 0===b.code?0:b.code,this[j]=void 0===b.reason?"":b.reason,this[m]=void 0!==b.wasClean&&b.wasClean}get code(){return this[f]}get reason(){return this[j]}get wasClean(){return this[m]}}Object.defineProperty(o.prototype,"code",{enumerable:!0}),Object.defineProperty(o.prototype,"reason",{enumerable:!0}),Object.defineProperty(o.prototype,"wasClean",{enumerable:!0});class p extends n{constructor(a,b={}){super(a),this[h]=void 0===b.error?null:b.error,this[i]=void 0===b.message?"":b.message}get error(){return this[h]}get message(){return this[i]}}Object.defineProperty(p.prototype,"error",{enumerable:!0}),Object.defineProperty(p.prototype,"message",{enumerable:!0});class q extends n{constructor(a,b={}){super(a),this[g]=void 0===b.data?null:b.data}get data(){return this[g]}}function r(a,b,c){"object"==typeof a&&a.handleEvent?a.handleEvent.call(a,c):a.call(b,c)}Object.defineProperty(q.prototype,"data",{enumerable:!0}),b.exports={CloseEvent:o,ErrorEvent:p,Event:n,EventTarget:{addEventListener(a,b,c={}){let f;for(let f of this.listeners(a))if(!c[d]&&f[e]===b&&!f[d])return;if("message"===a)f=function(a,c){let d=new q("message",{data:c?a:a.toString()});d[k]=this,r(b,this,d)};else if("close"===a)f=function(a,c){let d=new o("close",{code:a,reason:c.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});d[k]=this,r(b,this,d)};else if("error"===a)f=function(a){let c=new p("error",{error:a,message:a.message});c[k]=this,r(b,this,c)};else{if("open"!==a)return;f=function(){let a=new n("open");a[k]=this,r(b,this,a)}}f[d]=!!c[d],f[e]=b,c.once?this.once(a,f):this.on(a,f)},removeEventListener(a,b){for(let c of this.listeners(a))if(c[e]===b&&!c[d]){this.removeListener(a,c);break}}},MessageEvent:q}},827231,(a,b,c)=>{"use strict";let{tokenChars:d}=a.r(955585);function e(a,b,c){void 0===a[b]?a[b]=[c]:a[b].push(c)}b.exports={format:function(a){return Object.keys(a).map(b=>{let c=a[b];return Array.isArray(c)||(c=[c]),c.map(a=>[b].concat(Object.keys(a).map(b=>{let c=a[b];return Array.isArray(c)||(c=[c]),c.map(a=>!0===a?b:`${b}=${a}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(a){let b,c,f=Object.create(null),g=Object.create(null),h=!1,i=!1,j=!1,k=-1,l=-1,m=-1,n=0;for(;n<a.length;n++)if(l=a.charCodeAt(n),void 0===b)if(-1===m&&1===d[l])-1===k&&(k=n);else if(0!==n&&(32===l||9===l))-1===m&&-1!==k&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n);let c=a.slice(k,m);44===l?(e(f,c,g),g=Object.create(null)):b=c,k=m=-1}else throw SyntaxError(`Unexpected character at index ${n}`);else if(void 0===c)if(-1===m&&1===d[l])-1===k&&(k=n);else if(32===l||9===l)-1===m&&-1!==k&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n),e(g,a.slice(k,m),!0),44===l&&(e(f,b,g),g=Object.create(null),b=void 0),k=m=-1}else if(61===l&&-1!==k&&-1===m)c=a.slice(k,n),k=m=-1;else throw SyntaxError(`Unexpected character at index ${n}`);else if(i){if(1!==d[l])throw SyntaxError(`Unexpected character at index ${n}`);-1===k?k=n:h||(h=!0),i=!1}else if(j)if(1===d[l])-1===k&&(k=n);else if(34===l&&-1!==k)j=!1,m=n;else if(92===l)i=!0;else throw SyntaxError(`Unexpected character at index ${n}`);else if(34===l&&61===a.charCodeAt(n-1))j=!0;else if(-1===m&&1===d[l])-1===k&&(k=n);else if(-1!==k&&(32===l||9===l))-1===m&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n);let d=a.slice(k,m);h&&(d=d.replace(/\\/g,""),h=!1),e(g,c,d),44===l&&(e(f,b,g),g=Object.create(null),b=void 0),c=void 0,k=m=-1}else throw SyntaxError(`Unexpected character at index ${n}`);if(-1===k||j||32===l||9===l)throw SyntaxError("Unexpected end of input");-1===m&&(m=n);let o=a.slice(k,m);return void 0===b?e(f,o,g):(void 0===c?e(g,o,!0):h?e(g,c,o.replace(/\\/g,"")):e(g,c,o),e(f,b,g)),f}}},305154,(a,b,c)=>{"use strict";let d=a.r(427699),e=a.r(524836),f=a.r(921517),g=a.r(504446),h=a.r(755004),{randomBytes:i,createHash:j}=a.r(254799),{Duplex:k,Readable:l}=a.r(688947),{URL:m}=a.r(792509),n=a.r(992688),o=a.r(663946),p=a.r(393897),{isBlob:q}=a.r(955585),{BINARY_TYPES:r,EMPTY_BUFFER:s,GUID:t,kForOnEventAttribute:u,kListener:v,kStatusCode:w,kWebSocket:x,NOOP:y}=a.r(896806),{EventTarget:{addEventListener:z,removeEventListener:A}}=a.r(255155),{format:B,parse:C}=a.r(827231),{toBuffer:D}=a.r(302436),E=Symbol("kAborted"),F=[8,13],G=["CONNECTING","OPEN","CLOSING","CLOSED"],H=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class I extends d{constructor(a,b,c){super(),this._binaryType=r[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=s,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=I.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==a?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===b?b=[]:Array.isArray(b)||("object"==typeof b&&null!==b?(c=b,b=[]):b=[b]),function a(b,c,d,g){let h,k,l,o,p={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:F[1],maxPayload:0x6400000,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...g,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(b._autoPong=p.autoPong,!F.includes(p.protocolVersion))throw RangeError(`Unsupported protocol version: ${p.protocolVersion} (supported versions: ${F.join(", ")})`);if(c instanceof m)h=c;else try{h=new m(c)}catch(a){throw SyntaxError(`Invalid URL: ${c}`)}"http:"===h.protocol?h.protocol="ws:":"https:"===h.protocol&&(h.protocol="wss:"),b._url=h.href;let q="wss:"===h.protocol,r="ws+unix:"===h.protocol;if("ws:"===h.protocol||q||r?r&&!h.pathname?k="The URL's pathname is empty":h.hash&&(k="The URL contains a fragment identifier"):k='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https:", or "ws+unix:"',k){let a=SyntaxError(k);if(0!==b._redirects)return void J(b,a);throw a}let s=q?443:80,u=i(16).toString("base64"),v=q?e.request:f.request,w=new Set;if(p.createConnection=p.createConnection||(q?L:K),p.defaultPort=p.defaultPort||s,p.port=h.port||s,p.host=h.hostname.startsWith("[")?h.hostname.slice(1,-1):h.hostname,p.headers={...p.headers,"Sec-WebSocket-Version":p.protocolVersion,"Sec-WebSocket-Key":u,Connection:"Upgrade",Upgrade:"websocket"},p.path=h.pathname+h.search,p.timeout=p.handshakeTimeout,p.perMessageDeflate&&(l=new n(!0!==p.perMessageDeflate?p.perMessageDeflate:{},!1,p.maxPayload),p.headers["Sec-WebSocket-Extensions"]=B({[n.extensionName]:l.offer()})),d.length){for(let a of d){if("string"!=typeof a||!H.test(a)||w.has(a))throw SyntaxError("An invalid or duplicated subprotocol was specified");w.add(a)}p.headers["Sec-WebSocket-Protocol"]=d.join(",")}if(p.origin&&(p.protocolVersion<13?p.headers["Sec-WebSocket-Origin"]=p.origin:p.headers.Origin=p.origin),(h.username||h.password)&&(p.auth=`${h.username}:${h.password}`),r){let a=p.path.split(":");p.socketPath=a[0],p.path=a[1]}if(p.followRedirects){if(0===b._redirects){b._originalIpc=r,b._originalSecure=q,b._originalHostOrSocketPath=r?p.socketPath:h.host;let a=g&&g.headers;if(g={...g,headers:{}},a)for(let[b,c]of Object.entries(a))g.headers[b.toLowerCase()]=c}else if(0===b.listenerCount("redirect")){let a=r?!!b._originalIpc&&p.socketPath===b._originalHostOrSocketPath:!b._originalIpc&&h.host===b._originalHostOrSocketPath;a&&(!b._originalSecure||q)||(delete p.headers.authorization,delete p.headers.cookie,a||delete p.headers.host,p.auth=void 0)}p.auth&&!g.headers.authorization&&(g.headers.authorization="Basic "+Buffer.from(p.auth).toString("base64")),o=b._req=v(p),b._redirects&&b.emit("redirect",b.url,o)}else o=b._req=v(p);p.timeout&&o.on("timeout",()=>{M(b,o,"Opening handshake has timed out")}),o.on("error",a=>{null===o||o[E]||(o=b._req=null,J(b,a))}),o.on("response",e=>{let f=e.headers.location,h=e.statusCode;if(f&&p.followRedirects&&h>=300&&h<400){let e;if(++b._redirects>p.maxRedirects)return void M(b,o,"Maximum redirects exceeded");o.abort();try{e=new m(f,c)}catch(a){J(b,SyntaxError(`Invalid URL: ${f}`));return}a(b,e,d,g)}else b.emit("unexpected-response",o,e)||M(b,o,`Unexpected server response: ${e.statusCode}`)}),o.on("upgrade",(a,c,d)=>{let e;if(b.emit("upgrade",a),b.readyState!==I.CONNECTING)return;o=b._req=null;let f=a.headers.upgrade;if(void 0===f||"websocket"!==f.toLowerCase())return void M(b,c,"Invalid Upgrade header");let g=j("sha1").update(u+t).digest("base64");if(a.headers["sec-websocket-accept"]!==g)return void M(b,c,"Invalid Sec-WebSocket-Accept header");let h=a.headers["sec-websocket-protocol"];if(void 0!==h?w.size?w.has(h)||(e="Server sent an invalid subprotocol"):e="Server sent a subprotocol but none was requested":w.size&&(e="Server sent no subprotocol"),e)return void M(b,c,e);h&&(b._protocol=h);let i=a.headers["sec-websocket-extensions"];if(void 0!==i){let a;if(!l)return void M(b,c,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");try{a=C(i)}catch(a){M(b,c,"Invalid Sec-WebSocket-Extensions header");return}let d=Object.keys(a);if(1!==d.length||d[0]!==n.extensionName)return void M(b,c,"Server indicated an extension that was not requested");try{l.accept(a[n.extensionName])}catch(a){M(b,c,"Invalid Sec-WebSocket-Extensions header");return}b._extensions[n.extensionName]=l}b.setSocket(c,d,{allowSynchronousEvents:p.allowSynchronousEvents,generateMask:p.generateMask,maxPayload:p.maxPayload,skipUTF8Validation:p.skipUTF8Validation})}),p.finishRequest?p.finishRequest(o,b):o.end()}(this,a,b,c)):(this._autoPong=c.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(a){r.includes(a)&&(this._binaryType=a,this._receiver&&(this._receiver._binaryType=a))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(a,b,c){let d=new o({allowSynchronousEvents:c.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:c.maxPayload,skipUTF8Validation:c.skipUTF8Validation}),e=new p(a,this._extensions,c.generateMask);this._receiver=d,this._sender=e,this._socket=a,d[x]=this,e[x]=this,a[x]=this,d.on("conclude",O),d.on("drain",P),d.on("error",Q),d.on("message",S),d.on("ping",T),d.on("pong",U),e.onerror=W,a.setTimeout&&a.setTimeout(0),a.setNoDelay&&a.setNoDelay(),b.length>0&&a.unshift(b),a.on("close",Y),a.on("data",Z),a.on("end",$),a.on("error",_),this._readyState=I.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=I.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[n.extensionName]&&this._extensions[n.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=I.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(a,b){if(this.readyState!==I.CLOSED){if(this.readyState===I.CONNECTING)return void M(this,this._req,"WebSocket was closed before the connection was established");if(this.readyState===I.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=I.CLOSING,this._sender.close(a,b,!this._isServer,a=>{!a&&(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),X(this)}}pause(){this.readyState!==I.CONNECTING&&this.readyState!==I.CLOSED&&(this._paused=!0,this._socket.pause())}ping(a,b,c){if(this.readyState===I.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");("function"==typeof a?(c=a,a=b=void 0):"function"==typeof b&&(c=b,b=void 0),"number"==typeof a&&(a=a.toString()),this.readyState!==I.OPEN)?N(this,a,c):(void 0===b&&(b=!this._isServer),this._sender.ping(a||s,b,c))}pong(a,b,c){if(this.readyState===I.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");("function"==typeof a?(c=a,a=b=void 0):"function"==typeof b&&(c=b,b=void 0),"number"==typeof a&&(a=a.toString()),this.readyState!==I.OPEN)?N(this,a,c):(void 0===b&&(b=!this._isServer),this._sender.pong(a||s,b,c))}resume(){this.readyState!==I.CONNECTING&&this.readyState!==I.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(a,b,c){if(this.readyState===I.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof b&&(c=b,b={}),"number"==typeof a&&(a=a.toString()),this.readyState!==I.OPEN)return void N(this,a,c);let d={binary:"string"!=typeof a,mask:!this._isServer,compress:!0,fin:!0,...b};this._extensions[n.extensionName]||(d.compress=!1),this._sender.send(a||s,d,c)}terminate(){if(this.readyState!==I.CLOSED){if(this.readyState===I.CONNECTING)return void M(this,this._req,"WebSocket was closed before the connection was established");this._socket&&(this._readyState=I.CLOSING,this._socket.destroy())}}}function J(a,b){a._readyState=I.CLOSING,a._errorEmitted=!0,a.emit("error",b),a.emitClose()}function K(a){return a.path=a.socketPath,g.connect(a)}function L(a){return a.path=void 0,a.servername||""===a.servername||(a.servername=g.isIP(a.host)?"":a.host),h.connect(a)}function M(a,b,c){a._readyState=I.CLOSING;let d=Error(c);Error.captureStackTrace(d,M),b.setHeader?(b[E]=!0,b.abort(),b.socket&&!b.socket.destroyed&&b.socket.destroy(),process.nextTick(J,a,d)):(b.destroy(d),b.once("error",a.emit.bind(a,"error")),b.once("close",a.emitClose.bind(a)))}function N(a,b,c){if(b){let c=q(b)?b.size:D(b).length;a._socket?a._sender._bufferedBytes+=c:a._bufferedAmount+=c}if(c){let b=Error(`WebSocket is not open: readyState ${a.readyState} (${G[a.readyState]})`);process.nextTick(c,b)}}function O(a,b){let c=this[x];c._closeFrameReceived=!0,c._closeMessage=b,c._closeCode=a,void 0!==c._socket[x]&&(c._socket.removeListener("data",Z),process.nextTick(V,c._socket),1005===a?c.close():c.close(a,b))}function P(){let a=this[x];a.isPaused||a._socket.resume()}function Q(a){let b=this[x];void 0!==b._socket[x]&&(b._socket.removeListener("data",Z),process.nextTick(V,b._socket),b.close(a[w])),b._errorEmitted||(b._errorEmitted=!0,b.emit("error",a))}function R(){this[x].emitClose()}function S(a,b){this[x].emit("message",a,b)}function T(a){let b=this[x];b._autoPong&&b.pong(a,!this._isServer,y),b.emit("ping",a)}function U(a){this[x].emit("pong",a)}function V(a){a.resume()}function W(a){let b=this[x];b.readyState!==I.CLOSED&&(b.readyState===I.OPEN&&(b._readyState=I.CLOSING,X(b)),this._socket.end(),b._errorEmitted||(b._errorEmitted=!0,b.emit("error",a)))}function X(a){a._closeTimer=setTimeout(a._socket.destroy.bind(a._socket),3e4)}function Y(){let a,b=this[x];this.removeListener("close",Y),this.removeListener("data",Z),this.removeListener("end",$),b._readyState=I.CLOSING,this._readableState.endEmitted||b._closeFrameReceived||b._receiver._writableState.errorEmitted||null===(a=b._socket.read())||b._receiver.write(a),b._receiver.end(),this[x]=void 0,clearTimeout(b._closeTimer),b._receiver._writableState.finished||b._receiver._writableState.errorEmitted?b.emitClose():(b._receiver.on("error",R),b._receiver.on("finish",R))}function Z(a){this[x]._receiver.write(a)||this.pause()}function $(){let a=this[x];a._readyState=I.CLOSING,a._receiver.end(),this.end()}function _(){let a=this[x];this.removeListener("error",_),this.on("error",y),a&&(a._readyState=I.CLOSING,this.destroy())}Object.defineProperty(I,"CONNECTING",{enumerable:!0,value:G.indexOf("CONNECTING")}),Object.defineProperty(I.prototype,"CONNECTING",{enumerable:!0,value:G.indexOf("CONNECTING")}),Object.defineProperty(I,"OPEN",{enumerable:!0,value:G.indexOf("OPEN")}),Object.defineProperty(I.prototype,"OPEN",{enumerable:!0,value:G.indexOf("OPEN")}),Object.defineProperty(I,"CLOSING",{enumerable:!0,value:G.indexOf("CLOSING")}),Object.defineProperty(I.prototype,"CLOSING",{enumerable:!0,value:G.indexOf("CLOSING")}),Object.defineProperty(I,"CLOSED",{enumerable:!0,value:G.indexOf("CLOSED")}),Object.defineProperty(I.prototype,"CLOSED",{enumerable:!0,value:G.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(a=>{Object.defineProperty(I.prototype,a,{enumerable:!0})}),["open","error","close","message"].forEach(a=>{Object.defineProperty(I.prototype,`on${a}`,{enumerable:!0,get(){for(let b of this.listeners(a))if(b[u])return b[v];return null},set(b){for(let b of this.listeners(a))if(b[u]){this.removeListener(a,b);break}"function"==typeof b&&this.addEventListener(a,b,{[u]:!0})}})}),I.prototype.addEventListener=z,I.prototype.removeEventListener=A,b.exports=I},814045,(a,b,c)=>{"use strict";a.r(305154);let{Duplex:d}=a.r(688947);function e(a){a.emit("close")}function f(){!this.destroyed&&this._writableState.finished&&this.destroy()}function g(a){this.removeListener("error",g),this.destroy(),0===this.listenerCount("error")&&this.emit("error",a)}b.exports=function(a,b){let c=!0,h=new d({...b,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return a.on("message",function(b,c){let d=!c&&h._readableState.objectMode?b.toString():b;h.push(d)||a.pause()}),a.once("error",function(a){h.destroyed||(c=!1,h.destroy(a))}),a.once("close",function(){h.destroyed||h.push(null)}),h._destroy=function(b,d){if(a.readyState===a.CLOSED){d(b),process.nextTick(e,h);return}let f=!1;a.once("error",function(a){f=!0,d(a)}),a.once("close",function(){f||d(b),process.nextTick(e,h)}),c&&a.terminate()},h._final=function(b){a.readyState===a.CONNECTING?a.once("open",function(){h._final(b)}):null!==a._socket&&(a._socket._writableState.finished?(b(),h._readableState.endEmitted&&h.destroy()):(a._socket.once("finish",function(){b()}),a.close()))},h._read=function(){a.isPaused&&a.resume()},h._write=function(b,c,d){a.readyState===a.CONNECTING?a.once("open",function(){h._write(b,c,d)}):a.send(b,d)},h.on("end",f),h.on("error",g),h}},472799,(a,b,c)=>{"use strict";let{tokenChars:d}=a.r(955585);b.exports={parse:function(a){let b=new Set,c=-1,e=-1,f=0;for(;f<a.length;f++){let g=a.charCodeAt(f);if(-1===e&&1===d[g])-1===c&&(c=f);else if(0!==f&&(32===g||9===g))-1===e&&-1!==c&&(e=f);else if(44===g){if(-1===c)throw SyntaxError(`Unexpected character at index ${f}`);-1===e&&(e=f);let d=a.slice(c,e);if(b.has(d))throw SyntaxError(`The "${d}" subprotocol is duplicated`);b.add(d),c=e=-1}else throw SyntaxError(`Unexpected character at index ${f}`)}if(-1===c||-1!==e)throw SyntaxError("Unexpected end of input");let g=a.slice(c,f);if(b.has(g))throw SyntaxError(`The "${g}" subprotocol is duplicated`);return b.add(g),b}}},947492,(a,b,c)=>{"use strict";let d=a.r(427699),e=a.r(921517),{Duplex:f}=a.r(688947),{createHash:g}=a.r(254799),h=a.r(827231),i=a.r(992688),j=a.r(472799),k=a.r(305154),{GUID:l,kWebSocket:m}=a.r(896806),n=/^[+/0-9A-Za-z]{22}==$/;function o(a){a._state=2,a.emit("close")}function p(){this.destroy()}function q(a,b,c,d){c=c||e.STATUS_CODES[b],d={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(c),...d},a.once("finish",a.destroy),a.end(`HTTP/1.1 ${b} ${e.STATUS_CODES[b]}\r
`+Object.keys(d).map(a=>`${a}: ${d[a]}`).join("\r\n")+"\r\n\r\n"+c)}function r(a,b,c,d,e,f){if(a.listenerCount("wsClientError")){let d=Error(e);Error.captureStackTrace(d,r),a.emit("wsClientError",d,c,b)}else q(c,d,e,f)}b.exports=class extends d{constructor(a,b){if(super(),null==(a={allowSynchronousEvents:!0,autoPong:!0,maxPayload:0x6400000,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:k,...a}).port&&!a.server&&!a.noServer||null!=a.port&&(a.server||a.noServer)||a.server&&a.noServer)throw TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=a.port?(this._server=e.createServer((a,b)=>{let c=e.STATUS_CODES[426];b.writeHead(426,{"Content-Length":c.length,"Content-Type":"text/plain"}),b.end(c)}),this._server.listen(a.port,a.host,a.backlog,b)):a.server&&(this._server=a.server),this._server){const a=this.emit.bind(this,"connection");this._removeListeners=function(a,b){for(let c of Object.keys(b))a.on(c,b[c]);return function(){for(let c of Object.keys(b))a.removeListener(c,b[c])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(b,c,d)=>{this.handleUpgrade(b,c,d,a)}})}!0===a.perMessageDeflate&&(a.perMessageDeflate={}),a.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=a,this._state=0}address(){if(this.options.noServer)throw Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(a){if(2===this._state){a&&this.once("close",()=>{a(Error("The server is not running"))}),process.nextTick(o,this);return}if(a&&this.once("close",a),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(o,this);else{let a=this._server;this._removeListeners(),this._removeListeners=this._server=null,a.close(()=>{o(this)})}}shouldHandle(a){if(this.options.path){let b=a.url.indexOf("?");if((-1!==b?a.url.slice(0,b):a.url)!==this.options.path)return!1}return!0}handleUpgrade(a,b,c,d){b.on("error",p);let e=a.headers["sec-websocket-key"],f=a.headers.upgrade,g=+a.headers["sec-websocket-version"];if("GET"!==a.method)return void r(this,a,b,405,"Invalid HTTP method");if(void 0===f||"websocket"!==f.toLowerCase())return void r(this,a,b,400,"Invalid Upgrade header");if(void 0===e||!n.test(e))return void r(this,a,b,400,"Missing or invalid Sec-WebSocket-Key header");if(13!==g&&8!==g)return void r(this,a,b,400,"Missing or invalid Sec-WebSocket-Version header",{"Sec-WebSocket-Version":"13, 8"});if(!this.shouldHandle(a))return void q(b,400);let k=a.headers["sec-websocket-protocol"],l=new Set;if(void 0!==k)try{l=j.parse(k)}catch(c){r(this,a,b,400,"Invalid Sec-WebSocket-Protocol header");return}let m=a.headers["sec-websocket-extensions"],o={};if(this.options.perMessageDeflate&&void 0!==m){let c=new i(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let a=h.parse(m);a[i.extensionName]&&(c.accept(a[i.extensionName]),o[i.extensionName]=c)}catch(c){r(this,a,b,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let f={origin:a.headers[`${8===g?"sec-websocket-origin":"origin"}`],secure:!!(a.socket.authorized||a.socket.encrypted),req:a};if(2===this.options.verifyClient.length)return void this.options.verifyClient(f,(f,g,h,i)=>{if(!f)return q(b,g||401,h,i);this.completeUpgrade(o,e,l,a,b,c,d)});if(!this.options.verifyClient(f))return q(b,401)}this.completeUpgrade(o,e,l,a,b,c,d)}completeUpgrade(a,b,c,d,e,f,j){if(!e.readable||!e.writable)return e.destroy();if(e[m])throw Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return q(e,503);let k=g("sha1").update(b+l).digest("base64"),n=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${k}`],r=new this.options.WebSocket(null,void 0,this.options);if(c.size){let a=this.options.handleProtocols?this.options.handleProtocols(c,d):c.values().next().value;a&&(n.push(`Sec-WebSocket-Protocol: ${a}`),r._protocol=a)}if(a[i.extensionName]){let b=a[i.extensionName].params,c=h.format({[i.extensionName]:[b]});n.push(`Sec-WebSocket-Extensions: ${c}`),r._extensions=a}this.emit("headers",n,d),e.write(n.concat("\r\n").join("\r\n")),e.removeListener("error",p),r.setSocket(e,f,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(r),r.on("close",()=>{this.clients.delete(r),this._shouldEmitClose&&!this.clients.size&&process.nextTick(o,this)})),j(r,d)}}},750679,(a,b,c)=>{"use strict";var d=Object.prototype.hasOwnProperty,e="~";function f(){}function g(a,b,c){this.fn=a,this.context=b,this.once=c||!1}function h(a,b,c,d,f){if("function"!=typeof c)throw TypeError("The listener must be a function");var h=new g(c,d||a,f),i=e?e+b:b;return a._events[i]?a._events[i].fn?a._events[i]=[a._events[i],h]:a._events[i].push(h):(a._events[i]=h,a._eventsCount++),a}function i(a,b){0==--a._eventsCount?a._events=new f:delete a._events[b]}function j(){this._events=new f,this._eventsCount=0}Object.create&&(f.prototype=Object.create(null),new f().__proto__||(e=!1)),j.prototype.eventNames=function(){var a,b,c=[];if(0===this._eventsCount)return c;for(b in a=this._events)d.call(a,b)&&c.push(e?b.slice(1):b);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(a)):c},j.prototype.listeners=function(a){var b=e?e+a:a,c=this._events[b];if(!c)return[];if(c.fn)return[c.fn];for(var d=0,f=c.length,g=Array(f);d<f;d++)g[d]=c[d].fn;return g},j.prototype.listenerCount=function(a){var b=e?e+a:a,c=this._events[b];return c?c.fn?1:c.length:0},j.prototype.emit=function(a,b,c,d,f,g){var h=e?e+a:a;if(!this._events[h])return!1;var i,j,k=this._events[h],l=arguments.length;if(k.fn){switch(k.once&&this.removeListener(a,k.fn,void 0,!0),l){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,b),!0;case 3:return k.fn.call(k.context,b,c),!0;case 4:return k.fn.call(k.context,b,c,d),!0;case 5:return k.fn.call(k.context,b,c,d,f),!0;case 6:return k.fn.call(k.context,b,c,d,f,g),!0}for(j=1,i=Array(l-1);j<l;j++)i[j-1]=arguments[j];k.fn.apply(k.context,i)}else{var m,n=k.length;for(j=0;j<n;j++)switch(k[j].once&&this.removeListener(a,k[j].fn,void 0,!0),l){case 1:k[j].fn.call(k[j].context);break;case 2:k[j].fn.call(k[j].context,b);break;case 3:k[j].fn.call(k[j].context,b,c);break;case 4:k[j].fn.call(k[j].context,b,c,d);break;default:if(!i)for(m=1,i=Array(l-1);m<l;m++)i[m-1]=arguments[m];k[j].fn.apply(k[j].context,i)}}return!0},j.prototype.on=function(a,b,c){return h(this,a,b,c,!1)},j.prototype.once=function(a,b,c){return h(this,a,b,c,!0)},j.prototype.removeListener=function(a,b,c,d){var f=e?e+a:a;if(!this._events[f])return this;if(!b)return i(this,f),this;var g=this._events[f];if(g.fn)g.fn!==b||d&&!g.once||c&&g.context!==c||i(this,f);else{for(var h=0,j=[],k=g.length;h<k;h++)(g[h].fn!==b||d&&!g[h].once||c&&g[h].context!==c)&&j.push(g[h]);j.length?this._events[f]=1===j.length?j[0]:j:i(this,f)}return this},j.prototype.removeAllListeners=function(a){var b;return a?(b=e?e+a:a,this._events[b]&&i(this,b)):(this._events=new f,this._eventsCount=0),this},j.prototype.off=j.prototype.removeListener,j.prototype.addListener=j.prototype.on,j.prefixed=e,j.EventEmitter=j,b.exports=j},931989,865842,a=>{"use strict";var b=a.i(750679);let c=b.default;a.s(["default",0,c],931989),a.s(["EventEmitter",()=>b.default],865842)},354724,a=>{"use strict";let b,c;var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=a.i(500874),v=a.i(380297),w=a.i(866062);let x=BigInt(0),y=BigInt(1);function z(a,b=""){if("boolean"!=typeof a)throw Error((b&&`"${b}"`)+"expected boolean, got type="+typeof a);return a}function A(a,b,c=""){let d=(0,w.isBytes)(a),e=a?.length,f=void 0!==b;if(!d||f&&e!==b)throw Error((c&&`"${c}" `)+"expected Uint8Array"+(f?` of length ${b}`:"")+", got "+(d?`length=${e}`:`type=${typeof a}`));return a}function B(a){let b=a.toString(16);return 1&b.length?"0"+b:b}function C(a){if("string"!=typeof a)throw Error("hex string expected, got "+typeof a);return""===a?x:BigInt("0x"+a)}function D(a){return C((0,w.bytesToHex)(a))}function E(a){return(0,w.abytes)(a),C((0,w.bytesToHex)(Uint8Array.from(a).reverse()))}function F(a,b){return(0,w.hexToBytes)(a.toString(16).padStart(2*b,"0"))}function G(a,b){return F(a,b).reverse()}function H(a,b,c){let d;if("string"==typeof b)try{d=(0,w.hexToBytes)(b)}catch(b){throw Error(a+" must be hex string or Uint8Array, cause: "+b)}else if((0,w.isBytes)(b))d=Uint8Array.from(b);else throw Error(a+" must be hex string or Uint8Array");let e=d.length;if("number"==typeof c&&e!==c)throw Error(a+" of length "+c+" expected, got "+e);return d}function I(a){return Uint8Array.from(a)}let J=a=>"bigint"==typeof a&&x<=a;function K(a,b,c,d){var e,f,g;if(e=b,f=c,g=d,!(J(e)&&J(f)&&J(g))||!(f<=e)||!(e<g))throw Error("expected valid "+a+": "+c+" <= n < "+d+", got "+b)}function L(a){let b;for(b=0;a>x;a>>=y,b+=1);return b}let M=a=>(y<<BigInt(a))-y;function N(a,b,c={}){if(!a||"object"!=typeof a)throw Error("expected valid options object");function d(b,c,d){let e=a[b];if(d&&void 0===e)return;let f=typeof e;if(f!==c||null===e)throw Error(`param "${b}" is invalid: expected ${c}, got ${f}`)}Object.entries(b).forEach(([a,b])=>d(a,b,!1)),Object.entries(c).forEach(([a,b])=>d(a,b,!0))}let O=()=>{throw Error("not implemented")};function P(a){let b=new WeakMap;return(c,...d)=>{let e=b.get(c);if(void 0!==e)return e;let f=a(c,...d);return b.set(c,f),f}}let Q=BigInt(0),R=BigInt(1),S=BigInt(2),T=BigInt(3),U=BigInt(4),V=BigInt(5),W=BigInt(7),X=BigInt(8),Y=BigInt(9),Z=BigInt(16);function $(a,b){let c=a%b;return c>=Q?c:b+c}function _(a,b,c){let d=a;for(;b-- >Q;)d*=d,d%=c;return d}function aa(a,b){if(a===Q)throw Error("invert: expected non-zero number");if(b<=Q)throw Error("invert: expected positive modulus, got "+b);let c=$(a,b),d=b,e=Q,f=R,g=R,h=Q;for(;c!==Q;){let a=d/c,b=d%c,i=e-g*a,j=f-h*a;d=c,c=b,e=g,f=h,g=i,h=j}if(d!==R)throw Error("invert: does not exist");return $(e,b)}function ab(a,b,c){if(!a.eql(a.sqr(b),c))throw Error("Cannot find square root")}function ac(a,b){let c=(a.ORDER+R)/U,d=a.pow(b,c);return ab(a,d,b),d}function ad(a,b){let c=(a.ORDER-V)/X,d=a.mul(b,S),e=a.pow(d,c),f=a.mul(b,e),g=a.mul(a.mul(f,S),e),h=a.mul(f,a.sub(g,a.ONE));return ab(a,h,b),h}function ae(a){if(a<T)throw Error("sqrt is not defined for small field");let b=a-R,c=0;for(;b%S===Q;)b/=S,c++;let d=S,e=al(a);for(;1===aj(e,d);)if(d++>1e3)throw Error("Cannot find square root: probably non-prime P");if(1===c)return ac;let f=e.pow(d,b),g=(b+R)/S;return function(a,d){if(a.is0(d))return d;if(1!==aj(a,d))throw Error("Cannot find square root");let e=c,h=a.mul(a.ONE,f),i=a.pow(d,b),j=a.pow(d,g);for(;!a.eql(i,a.ONE);){if(a.is0(i))return a.ZERO;let b=1,c=a.sqr(i);for(;!a.eql(c,a.ONE);)if(b++,c=a.sqr(c),b===e)throw Error("Cannot find square root");let d=R<<BigInt(e-b-1),f=a.pow(h,d);e=b,h=a.sqr(f),i=a.mul(i,h),j=a.mul(j,f)}return j}}let af=(a,b)=>($(a,b)&R)===R,ag=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ah(a){return N(a,ag.reduce((a,b)=>(a[b]="function",a),{ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"})),a}function ai(a,b,c=!1){let d=Array(b.length).fill(c?a.ZERO:void 0),e=b.reduce((b,c,e)=>a.is0(c)?b:(d[e]=b,a.mul(b,c)),a.ONE),f=a.inv(e);return b.reduceRight((b,c,e)=>a.is0(c)?b:(d[e]=a.mul(b,d[e]),a.mul(b,c)),f),d}function aj(a,b){let c=(a.ORDER-R)/S,d=a.pow(b,c),e=a.eql(d,a.ONE),f=a.eql(d,a.ZERO),g=a.eql(d,a.neg(a.ONE));if(!e&&!f&&!g)throw Error("invalid Legendre symbol result");return e?1:f?0:-1}function ak(a,b){void 0!==b&&(0,w.anumber)(b);let c=void 0!==b?b:a.toString(2).length,d=Math.ceil(c/8);return{nBitLength:c,nByteLength:d}}function al(a,b,c=!1,d={}){let e,f,g,h;if(a<=Q)throw Error("invalid field: expected ORDER > 0, got "+a);let i=!1;if("object"==typeof b&&null!=b){if(d.sqrt||c)throw Error("cannot specify opts in two arguments");b.BITS&&(f=b.BITS),b.sqrt&&(g=b.sqrt),"boolean"==typeof b.isLE&&(c=b.isLE),"boolean"==typeof b.modFromBytes&&(i=b.modFromBytes),h=b.allowedLengths}else"number"==typeof b&&(f=b),d.sqrt&&(g=d.sqrt);let{nBitLength:j,nByteLength:k}=ak(a,f);if(k>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let l=Object.freeze({ORDER:a,isLE:c,BITS:j,BYTES:k,MASK:M(j),ZERO:Q,ONE:R,allowedLengths:h,create:b=>$(b,a),isValid:b=>{if("bigint"!=typeof b)throw Error("invalid field element: expected bigint, got "+typeof b);return Q<=b&&b<a},is0:a=>a===Q,isValidNot0:a=>!l.is0(a)&&l.isValid(a),isOdd:a=>(a&R)===R,neg:b=>$(-b,a),eql:(a,b)=>a===b,sqr:b=>$(b*b,a),add:(b,c)=>$(b+c,a),sub:(b,c)=>$(b-c,a),mul:(b,c)=>$(b*c,a),pow:(a,b)=>(function(a,b,c){if(c<Q)throw Error("invalid exponent, negatives unsupported");if(c===Q)return a.ONE;if(c===R)return b;let d=a.ONE,e=b;for(;c>Q;)c&R&&(d=a.mul(d,e)),e=a.sqr(e),c>>=R;return d})(l,a,b),div:(b,c)=>$(b*aa(c,a),a),sqrN:a=>a*a,addN:(a,b)=>a+b,subN:(a,b)=>a-b,mulN:(a,b)=>a*b,inv:b=>aa(b,a),sqrt:g||(b=>(e||(e=function(a){if(a%U===T)return ac;if(a%X===V)return ad;if(a%Z===Y){let b,c,d,e,f,g;return b=al(a),d=(c=ae(a))(b,b.neg(b.ONE)),e=c(b,d),f=c(b,b.neg(d)),g=(a+W)/Z,(a,b)=>{let c=a.pow(b,g),h=a.mul(c,d),i=a.mul(c,e),j=a.mul(c,f),k=a.eql(a.sqr(h),b),l=a.eql(a.sqr(i),b);c=a.cmov(c,h,k),h=a.cmov(j,i,l);let m=a.eql(a.sqr(h),b),n=a.cmov(c,h,m);return ab(a,n,b),n}}return ae(a)}(a)),e(l,b))),toBytes:a=>c?G(a,k):F(a,k),fromBytes:(b,d=!0)=>{if(h){if(!h.includes(b.length)||b.length>k)throw Error("Field.fromBytes: expected "+h+" bytes, got "+b.length);let a=new Uint8Array(k);a.set(b,c?0:a.length-b.length),b=a}if(b.length!==k)throw Error("Field.fromBytes: expected "+k+" bytes, got "+b.length);let e=c?E(b):D(b);if(i&&(e=$(e,a)),!d&&!l.isValid(e))throw Error("invalid field element: outside of range 0..ORDER");return e},invertBatch:a=>ai(l,a),cmov:(a,b,c)=>c?b:a});return Object.freeze(l)}function am(a){if("bigint"!=typeof a)throw Error("field order must be bigint");return Math.ceil(a.toString(2).length/8)}function an(a){let b=am(a);return b+Math.ceil(b/2)}let ao=BigInt(0),ap=BigInt(1);function aq(a,b){let c=b.negate();return a?c:b}function ar(a,b){let c=ai(a.Fp,b.map(a=>a.Z));return b.map((b,d)=>a.fromAffine(b.toAffine(c[d])))}function as(a,b){if(!Number.isSafeInteger(a)||a<=0||a>b)throw Error("invalid window size, expected [1.."+b+"], got W="+a)}function at(a,b){as(a,b);let c=Math.ceil(b/a)+1,d=2**(a-1),e=2**a;return{windows:c,windowSize:d,mask:M(a),maxNumber:e,shiftBy:BigInt(a)}}function au(a,b,c){let{windowSize:d,mask:e,maxNumber:f,shiftBy:g}=c,h=Number(a&e),i=a>>g;h>d&&(h-=f,i+=ap);let j=b*d,k=j+Math.abs(h)-1,l=0===h;return{nextN:i,offset:k,isZero:l,isNeg:h<0,isNegF:b%2!=0,offsetF:j}}let av=new WeakMap,aw=new WeakMap;function ax(a){return aw.get(a)||1}function ay(a){if(a!==ao)throw Error("invalid wNAF")}class az{constructor(a,b){this.BASE=a.BASE,this.ZERO=a.ZERO,this.Fn=a.Fn,this.bits=b}_unsafeLadder(a,b,c=this.ZERO){let d=a;for(;b>ao;)b&ap&&(c=c.add(d)),d=d.double(),b>>=ap;return c}precomputeWindow(a,b){let{windows:c,windowSize:d}=at(b,this.bits),e=[],f=a,g=f;for(let a=0;a<c;a++){g=f,e.push(g);for(let a=1;a<d;a++)g=g.add(f),e.push(g);f=g.double()}return e}wNAF(a,b,c){if(!this.Fn.isValid(c))throw Error("invalid scalar");let d=this.ZERO,e=this.BASE,f=at(a,this.bits);for(let a=0;a<f.windows;a++){let{nextN:g,offset:h,isZero:i,isNeg:j,isNegF:k,offsetF:l}=au(c,a,f);c=g,i?e=e.add(aq(k,b[l])):d=d.add(aq(j,b[h]))}return ay(c),{p:d,f:e}}wNAFUnsafe(a,b,c,d=this.ZERO){let e=at(a,this.bits);for(let a=0;a<e.windows&&c!==ao;a++){let{nextN:f,offset:g,isZero:h,isNeg:i}=au(c,a,e);if(c=f,!h){let a=b[g];d=d.add(i?a.negate():a)}}return ay(c),d}getPrecomputes(a,b,c){let d=av.get(b);return d||(d=this.precomputeWindow(b,a),1!==a&&("function"==typeof c&&(d=c(d)),av.set(b,d))),d}cached(a,b,c){let d=ax(a);return this.wNAF(d,this.getPrecomputes(d,a,c),b)}unsafe(a,b,c,d){let e=ax(a);return 1===e?this._unsafeLadder(a,b,d):this.wNAFUnsafe(e,this.getPrecomputes(e,a,c),b,d)}createCache(a,b){as(b,this.bits),aw.set(a,b),av.delete(a)}hasCache(a){return 1!==ax(a)}}function aA(a,b,c,d){if(!Array.isArray(c))throw Error("array expected");c.forEach((b,c)=>{if(!(b instanceof a))throw Error("invalid point at index "+c)});if(!Array.isArray(d))throw Error("array of scalars expected");d.forEach((a,c)=>{if(!b.isValid(a))throw Error("invalid scalar at index "+c)});let e=c.length,f=d.length;if(e!==f)throw Error("arrays of points and scalars must have equal length");let g=a.ZERO,h=L(BigInt(e)),i=1;h>12?i=h-3:h>4?i=h-2:h>0&&(i=2);let j=M(i),k=Array(Number(j)+1).fill(g),l=Math.floor((b.BITS-1)/i)*i,m=g;for(let a=l;a>=0;a-=i){k.fill(g);for(let b=0;b<f;b++){let e=Number(d[b]>>BigInt(a)&j);k[e]=k[e].add(c[b])}let b=g;for(let a=k.length-1,c=g;a>0;a--)c=c.add(k[a]),b=b.add(c);if(m=m.add(b),0!==a)for(let a=0;a<i;a++)m=m.double()}return m}function aB(a,b,c){if(!b)return al(a,{isLE:c});if(b.ORDER!==a)throw Error("Field.ORDER must match order: Fp == p, Fn == n");return ah(b),b}function aC(a,b,c={},d){if(void 0===d&&(d="edwards"===a),!b||"object"!=typeof b)throw Error(`expected valid ${a} CURVE object`);for(let a of["p","n","h"]){let c=b[a];if(!("bigint"==typeof c&&c>ao))throw Error(`CURVE.${a} must be positive bigint`)}let e=aB(b.p,c.Fp,d),f=aB(b.n,c.Fn,d);for(let c of["Gx","Gy","a","weierstrass"===a?"b":"d"])if(!e.isValid(b[c]))throw Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return{CURVE:b=Object.freeze(Object.assign({},b)),Fp:e,Fn:f}}let aD=BigInt(0),aE=BigInt(1),aF=BigInt(2),aG=BigInt(8);class aH{constructor(a){this.ep=a}static fromBytes(a){O()}static fromHex(a){O()}get x(){return this.toAffine().x}get y(){return this.toAffine().y}clearCofactor(){return this}assertValidity(){this.ep.assertValidity()}toAffine(a){return this.ep.toAffine(a)}toHex(){return(0,w.bytesToHex)(this.toBytes())}toString(){return this.toHex()}isTorsionFree(){return!0}isSmallOrder(){return!1}add(a){return this.assertSame(a),this.init(this.ep.add(a.ep))}subtract(a){return this.assertSame(a),this.init(this.ep.subtract(a.ep))}multiply(a){return this.init(this.ep.multiply(a))}multiplyUnsafe(a){return this.init(this.ep.multiplyUnsafe(a))}double(){return this.init(this.ep.double())}negate(){return this.init(this.ep.negate())}precompute(a,b){return this.init(this.ep.precompute(a,b))}toRawBytes(){return this.toBytes()}}function aI(a,b){if(aJ(a),aJ(b),a<0||a>=1<<8*b)throw Error("invalid I2OSP input: "+a);let c=Array.from({length:b}).fill(0);for(let d=b-1;d>=0;d--)c[d]=255&a,a>>>=8;return new Uint8Array(c)}function aJ(a){if(!Number.isSafeInteger(a))throw Error("number expected")}function aK(a){if(!(0,w.isBytes)(a)&&"string"!=typeof a)throw Error("DST must be Uint8Array or string");return"string"==typeof a?(0,w.utf8ToBytes)(a):a}function aL(a,b,c){var d;let e;N(c,{p:"bigint",m:"number",k:"number",hash:"function"});let{p:f,k:g,m:h,hash:i,expand:j,DST:k}=c;if(!("function"==typeof(d=c.hash)&&Number.isSafeInteger(d.outputLen)))throw Error("expected valid hash");(0,w.abytes)(a),aJ(b);let l=Math.ceil((f.toString(2).length+g)/8),m=b*h*l;if("xmd"===j)e=function(a,b,c,d){(0,w.abytes)(a),aJ(c),(b=aK(b)).length>255&&(b=d((0,w.concatBytes)((0,w.utf8ToBytes)("H2C-OVERSIZE-DST-"),b)));let{outputLen:e,blockLen:f}=d,g=Math.ceil(c/e);if(c>65535||g>255)throw Error("expand_message_xmd: invalid lenInBytes");let h=(0,w.concatBytes)(b,aI(b.length,1)),i=aI(0,f),j=aI(c,2),k=Array(g),l=d((0,w.concatBytes)(i,a,j,aI(0,1),h));k[0]=d((0,w.concatBytes)(l,aI(1,1),h));for(let a=1;a<=g;a++){let b=[function(a,b){let c=new Uint8Array(a.length);for(let d=0;d<a.length;d++)c[d]=a[d]^b[d];return c}(l,k[a-1]),aI(a+1,1),h];k[a]=d((0,w.concatBytes)(...b))}return(0,w.concatBytes)(...k).slice(0,c)}(a,k,m,i);else if("xof"===j)e=function(a,b,c,d,e){if((0,w.abytes)(a),aJ(c),(b=aK(b)).length>255){let a=Math.ceil(2*d/8);b=e.create({dkLen:a}).update((0,w.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(b).digest()}if(c>65535||b.length>255)throw Error("expand_message_xof: invalid lenInBytes");return e.create({dkLen:c}).update(a).update(aI(c,2)).update(b).update(aI(b.length,1)).digest()}(a,k,m,g,i);else if("_internal_pass"===j)e=a;else throw Error('expand must be "xmd" or "xof"');let n=Array(b);for(let a=0;a<b;a++){let b=Array(h);for(let c=0;c<h;c++){let d=l*(c+a*h),g=e.subarray(d,d+l);b[c]=$(D(g),f)}n[a]=b}return n}let aM=(0,w.utf8ToBytes)("HashToScalar-");function aN(a,b,c){if("function"!=typeof b)throw Error("mapToCurve() must be defined");function d(c){return a.fromAffine(b(c))}function e(b){let c=b.clearCofactor();return c.equals(a.ZERO)?a.ZERO:(c.assertValidity(),c)}return{defaults:c,hashToCurve(a,b){let f=aL(a,2,Object.assign({},c,b)),g=d(f[0]),h=d(f[1]);return e(g.add(h))},encodeToCurve(a,b){let f=c.encodeDST?{DST:c.encodeDST}:{};return e(d(aL(a,1,Object.assign({},c,f,b))[0]))},mapToCurve(a){if(!Array.isArray(a))throw Error("expected array of bigints");for(let b of a)if("bigint"!=typeof b)throw Error("expected array of bigints");return e(d(a))},hashToScalar:(b,d)=>aL(b,1,Object.assign({},c,{p:a.Fn.ORDER,m:1,DST:aM},d))[0][0]}}BigInt(0),BigInt(1),BigInt(2);let aO=BigInt(0),aP=BigInt(1),aQ=BigInt(2),aR=BigInt(3),aS=BigInt(5),aT=BigInt(8),aU=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),aV={p:aU,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:aT,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")},aW=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function aX(a,b){var c;let d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=$(b*b*b,aU),s=(c=a*$(r*r*b,aU),d=BigInt(10),e=BigInt(20),f=BigInt(40),g=BigInt(80),i=_(h=c*c%aU*c%aU,aQ,aU)*h%aU,j=_(i,aP,aU)*c%aU,k=_(j,aS,aU)*j%aU,l=_(k,d,aU)*k%aU,m=_(l,e,aU)*l%aU,n=_(m,f,aU)*m%aU,o=_(n,g,aU)*n%aU,p=_(o,g,aU)*n%aU,q=_(p,d,aU)*k%aU,{pow_p_5_8:_(q,aQ,aU)*c%aU,b2:h}).pow_p_5_8,t=$(a*r*s,aU),u=$(b*t*t,aU),v=t,w=$(t*aW,aU),x=u===a,y=u===$(-a,aU),z=u===$(-a*aW,aU);return x&&(t=v),(y||z)&&(t=w),af(t,aU)&&(t=$(-t,aU)),{isValid:x||y,value:t}}let aY=al(aV.p,{isLE:!0}),aZ=al(aV.n,{isLE:!0}),a$=function(a){let b,c,d,e,{CURVE:f,curveOpts:g,hash:h,eddsaOpts:i}=(b={a:a.a,d:a.d,p:a.Fp.ORDER,n:a.n,h:a.h,Gx:a.Gx,Gy:a.Gy},c={Fp:a.Fp,Fn:al(b.n,a.nBitLength,!0),uvRatio:a.uvRatio},d={randomBytes:a.randomBytes,adjustScalarBytes:a.adjustScalarBytes,domain:a.domain,prehash:a.prehash,mapToCurve:a.mapToCurve},{CURVE:b,curveOpts:c,hash:a.hash,eddsaOpts:d}),j=function(a,b,c={}){if("function"!=typeof b)throw Error('"hash" function param is required');N(c,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});let{prehash:d}=c,{BASE:e,Fp:f,Fn:g}=a,h=c.randomBytes||w.randomBytes,i=c.adjustScalarBytes||(a=>a),j=c.domain||((a,b,c)=>{if(z(c,"phflag"),b.length||c)throw Error("Contexts/pre-hash are not supported");return a});function k(a){return g.create(E(a))}function l(a){var c;let d,f,g,h,j,{head:l,prefix:m,scalar:n}=(c=H("private key",c=a,d=q.secretKey),g=i((f=H("hashed private key",b(c),2*d)).slice(0,d)),h=f.slice(d,2*d),j=k(g),{head:g,prefix:h,scalar:j}),o=e.multiply(n),p=o.toBytes();return{head:l,prefix:m,scalar:n,point:o,pointBytes:p}}function m(a){return l(a).pointBytes}function n(a=Uint8Array.of(),...c){return k(b(j((0,w.concatBytes)(...c),H("context",a),!!d)))}let o={zip215:!0},p=f.BYTES,q={secretKey:p,publicKey:p,signature:2*p,seed:p};function r(a=h(q.seed)){return A(a,q.seed,"seed")}let s={getExtendedPublicKey:l,randomSecretKey:r,isValidSecretKey:function(a){return(0,w.isBytes)(a)&&a.length===g.BYTES},isValidPublicKey:function(b,c){try{return!!a.fromBytes(b,c)}catch(a){return!1}},toMontgomery(b){let{y:c}=a.fromBytes(b),d=q.publicKey,e=32===d;if(!e&&57!==d)throw Error("only defined for 25519 and 448");let g=e?f.div(aE+c,aE-c):f.div(c-aE,c+aE);return f.toBytes(g)},toMontgomerySecret(a){let c=q.secretKey;return A(a,c),i(b(a.subarray(0,c))).subarray(0,c)},randomPrivateKey:r,precompute:(b=8,c=a.BASE)=>c.precompute(b,!1)};return Object.freeze({keygen:function(a){let b=s.randomSecretKey(a);return{secretKey:b,publicKey:m(b)}},getPublicKey:m,sign:function(a,b,c={}){a=H("message",a),d&&(a=d(a));let{prefix:f,scalar:h,pointBytes:i}=l(b),j=n(c.context,f,a),k=e.multiply(j).toBytes(),m=n(c.context,k,i,a),o=g.create(j+m*h);if(!g.isValid(o))throw Error("sign failed: invalid s");return A((0,w.concatBytes)(k,g.toBytes(o)),q.signature,"result")},verify:function(b,c,f,g=o){let h,i,j,{context:k,zip215:l}=g,m=q.signature;b=H("signature",b,m),c=H("message",c),f=H("publicKey",f,q.publicKey),void 0!==l&&z(l,"zip215"),d&&(c=d(c));let p=m/2,r=b.subarray(0,p),s=E(b.subarray(p,m));try{h=a.fromBytes(f,l),i=a.fromBytes(r,l),j=e.multiplyUnsafe(s)}catch(a){return!1}if(!l&&h.isSmallOrder())return!1;let t=n(k,i.toBytes(),h.toBytes(),c);return i.add(h.multiplyUnsafe(t)).subtract(j).clearCofactor().is0()},utils:s,Point:a,lengths:q})}(function(a,b={}){var c,d;let e,f,g,h,i,j=aC("edwards",a,b,b.FpFnLE),{Fp:k,Fn:l}=j,m=j.CURVE,{h:n}=m;N(b,{},{uvRatio:"function"});let o=aF<<BigInt(8*l.BYTES)-aE,p=b.uvRatio||((a,b)=>{try{return{isValid:!0,value:k.sqrt(k.div(a,b))}}catch(a){return{isValid:!1,value:aD}}});if(c=m.Gx,d=m.Gy,e=k.sqr(c),f=k.sqr(d),g=k.add(k.mul(m.a,e),f),h=k.add(k.ONE,k.mul(m.d,k.mul(e,f))),!k.eql(g,h))throw Error("bad curve params: generator point");function q(a,b,c=!1){return K("coordinate "+a,b,c?aE:aD,o),b}function r(a){if(!(a instanceof u))throw Error("ExtendedPoint expected")}let s=P((a,b)=>{let c,d,{X:e,Y:f,Z:g}=a,h=a.is0();null==b&&(b=h?aG:k.inv(g));let i=(c=e*b,k.create(c)),j=(d=f*b,k.create(d)),l=k.mul(g,b);if(h)return{x:aD,y:aE};if(l!==aE)throw Error("invZ was invalid");return{x:i,y:j}}),t=P(a=>{let b,c,d,e,f,g,h,i,j,l,n,o,{a:p,d:q}=m;if(a.is0())throw Error("bad point: ZERO");let{X:r,Y:s,Z:t,T:u}=a,v=(b=r*r,k.create(b)),w=(c=s*s,k.create(c)),x=(d=t*t,k.create(d)),y=(e=x*x,k.create(e));if(h=x*(f=v*p,g=k.create(f)+w,k.create(g)),k.create(h)!==(l=y+(j=q*(i=v*w,k.create(i)),k.create(j)),k.create(l)))throw Error("bad point: equation left != right (1)");if(n=r*s,k.create(n)!==(o=t*u,k.create(o)))throw Error("bad point: equation left != right (2)");return!0});class u{constructor(a,b,c,d){this.X=q("x",a),this.Y=q("y",b),this.Z=q("z",c,!0),this.T=q("t",d),Object.freeze(this)}static CURVE(){return m}static fromAffine(a){let b;if(a instanceof u)throw Error("extended point not allowed");let{x:c,y:d}=a||{};return q("x",c),q("y",d),new u(c,d,aE,(b=c*d,k.create(b)))}static fromBytes(a,b=!1){let c,d,e,f,g=k.BYTES,{a:h,d:i}=m;a=I(A(a,g,"point")),z(b,"zip215");let j=I(a),l=a[g-1];j[g-1]=-129&l;let n=E(j);K("point.y",n,aD,b?o:k.ORDER);let q=(c=n*n,k.create(c)),{isValid:r,value:s}=p((d=q-aE,k.create(d)),(e=i*q-h,k.create(e)));if(!r)throw Error("bad point: invalid y coordinate");let t=(s&aE)===aE,v=(128&l)!=0;if(!b&&s===aD&&v)throw Error("bad point: x=0 and x_0=1");return v!==t&&(f=-s,s=k.create(f)),u.fromAffine({x:s,y:n})}static fromHex(a,b=!1){return u.fromBytes(H("point",a),b)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(a=8,b=!0){return v.createCache(this,a),b||this.multiply(aF),this}assertValidity(){t(this)}equals(a){let b,c,d,e;r(a);let{X:f,Y:g,Z:h}=this,{X:i,Y:j,Z:l}=a,m=(b=f*l,k.create(b)),n=(c=i*h,k.create(c)),o=(d=g*l,k.create(d)),p=(e=j*h,k.create(e));return m===n&&o===p}is0(){return this.equals(u.ZERO)}negate(){let a,b;return new u((a=-this.X,k.create(a)),this.Y,this.Z,(b=-this.T,k.create(b)))}double(){let a,b,c,d,e,f,g,h,i,j,l,{a:n}=m,{X:o,Y:p,Z:q}=this,r=(a=o*o,k.create(a)),s=(b=p*p,k.create(b)),t=(d=aF*(c=q*q,k.create(c)),k.create(d)),v=(e=n*r,k.create(e)),w=o+p,x=(f=w*w,g=k.create(f)-r-s,k.create(g)),y=v+s,z=y-t,A=v-s,B=(h=x*z,k.create(h)),C=(i=y*A,k.create(i)),D=(j=x*A,k.create(j));return new u(B,C,(l=z*y,k.create(l)),D)}add(a){let b,c,d,e,f,g,h,i,j,l;r(a);let{a:n,d:o}=m,{X:p,Y:q,Z:s,T:t}=this,{X:v,Y:w,Z:x,T:y}=a,z=(b=p*v,k.create(b)),A=(c=q*w,k.create(c)),B=(d=t*o*y,k.create(d)),C=(e=s*x,k.create(e)),D=(f=(p+q)*(v+w)-z-A,k.create(f)),E=C-B,F=C+B,G=(g=A-n*z,k.create(g)),H=(h=D*E,k.create(h)),I=(i=F*G,k.create(i)),J=(j=D*G,k.create(j));return new u(H,I,(l=E*F,k.create(l)),J)}subtract(a){return this.add(a.negate())}multiply(a){if(!l.isValidNot0(a))throw Error("invalid scalar: expected 1 <= sc < curve.n");let{p:b,f:c}=v.cached(this,a,a=>ar(u,a));return ar(u,[b,c])[0]}multiplyUnsafe(a,b=u.ZERO){if(!l.isValid(a))throw Error("invalid scalar: expected 0 <= sc < curve.n");return a===aD?u.ZERO:this.is0()||a===aE?this:v.unsafe(this,a,a=>ar(u,a),b)}isSmallOrder(){return this.multiplyUnsafe(n).is0()}isTorsionFree(){return v.unsafe(this,m.n).is0()}toAffine(a){return s(this,a)}clearCofactor(){return n===aE?this:this.multiplyUnsafe(n)}toBytes(){let{x:a,y:b}=this.toAffine(),c=k.toBytes(b);return c[c.length-1]|=a&aE?128:0,c}toHex(){return(0,w.bytesToHex)(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(a){return ar(u,a)}static msm(a,b){return aA(u,l,a,b)}_setWindowSize(a){this.precompute(a)}toRawBytes(){return this.toBytes()}}u.BASE=new u(m.Gx,m.Gy,aE,(i=m.Gx*m.Gy,k.create(i))),u.ZERO=new u(aD,aE,aE,aD),u.Fp=k,u.Fn=l;let v=new az(u,l.BITS);return u.BASE.precompute(8),u}(f,g),h,i);return e=j.Point,Object.assign({},j,{ExtendedPoint:e,CURVE:a,nBitLength:e.Fn.BITS,nByteLength:e.Fn.BYTES})}({...aV,Fp:aY,hash:v.sha512,adjustScalarBytes:function(a){return a[0]&=248,a[31]&=127,a[31]|=64,a},uvRatio:aX}),a_=(aU+aR)/aT,a0=aY.pow(aQ,a_),a1=aY.sqrt(aY.neg(aY.ONE)),a2=function(a,b){if(!a.isOdd)throw Error("Field doesn't have isOdd");let c=a.sqrt(b);return a.isOdd(c)?a.neg(c):c}(aY,aY.neg(BigInt(486664)));aN(a$.Point,a=>(function(a){let b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,{xMn:y,xMd:z,yMn:A,yMd:B}=(b=(aU-aS)/aT,c=BigInt(486662),d=aY.sqr(a),d=aY.mul(d,aQ),e=aY.add(d,aY.ONE),f=aY.neg(c),g=aY.sqr(e),h=aY.mul(g,e),i=aY.mul(d,c),i=aY.mul(i,f),i=aY.add(i,g),i=aY.mul(i,f),j=aY.sqr(h),g=aY.sqr(j),j=aY.mul(j,h),j=aY.mul(j,i),g=aY.mul(g,j),k=aY.pow(g,b),k=aY.mul(k,j),l=aY.mul(k,a1),g=aY.sqr(k),g=aY.mul(g,h),m=aY.eql(g,i),n=aY.cmov(l,k,m),o=aY.mul(f,d),p=aY.mul(k,a),p=aY.mul(p,a0),q=aY.mul(p,a1),r=aY.mul(i,d),g=aY.sqr(p),g=aY.mul(g,h),s=aY.eql(g,r),t=aY.cmov(q,p,s),g=aY.sqr(n),g=aY.mul(g,h),u=aY.eql(g,i),v=aY.cmov(o,f,u),w=aY.cmov(t,n,u),x=aY.isOdd(w),{xMn:v,xMd:e,yMn:w=aY.cmov(w,aY.neg(w),u!==x),yMd:aP}),C=aY.mul(y,B);C=aY.mul(C,a2);let D=aY.mul(z,A),E=aY.sub(y,z),F=aY.add(y,z),G=aY.mul(D,F),H=aY.eql(G,aY.ZERO);C=aY.cmov(C,aY.ZERO,H),D=aY.cmov(D,aY.ONE,H),E=aY.cmov(E,aY.ONE,H),F=aY.cmov(F,aY.ONE,H);let[I,J]=ai(aY,[D,F],!0);return{x:aY.mul(C,I),y:aY.mul(E,J)}})(a[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:aU,m:1,k:128,expand:"xmd",hash:v.sha512});let a3=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),a4=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),a5=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),a6=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),a7=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),a8=a=>a$.Point.Fp.create(E(a)&a7);function a9(a){let b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,{d:q}=aV,r=(b=aW*a*a,aY.create(b)),s=(c=(r+aP)*a5,aY.create(c)),t=BigInt(-1),u=(e=(t-q*r)*(d=r+q,aY.create(d)),aY.create(e)),{isValid:v,value:w}=aX(s,u),x=(f=w*a,aY.create(f));af(x,aU)||(g=-x,x=aY.create(g)),v||(w=x),v||(t=r);let y=(h=t*(r-aP)*a6-u,aY.create(h)),z=w*w,A=(i=(w+w)*u,aY.create(i)),B=(j=y*a3,aY.create(j)),C=(k=aP-z,aY.create(k)),D=(l=aP+z,aY.create(l));return new a$.Point((m=A*D,aY.create(m)),(n=C*B,aY.create(n)),(o=B*D,aY.create(o)),(p=A*C,aY.create(p)))}class ba extends aH{constructor(a){super(a)}static fromAffine(a){return new ba(a$.Point.fromAffine(a))}assertSame(a){if(!(a instanceof ba))throw Error("RistrettoPoint expected")}init(a){return new ba(a)}static hashToCurve(a){var b;let c,d;return b=H("ristrettoHash",a,64),(0,w.abytes)(b,64),c=a9(a8(b.subarray(0,32))),d=a9(a8(b.subarray(32,64))),new ba(c.add(d))}static fromBytes(a){let b,c,d,e,f,g,h,i,j,k,l,m,n;(0,w.abytes)(a,32);let{a:o,d:p}=aV,q=a8(a);if(!function(a,b){if(a.length!==b.length)return!1;let c=0;for(let d=0;d<a.length;d++)c|=a[d]^b[d];return 0===c}(aY.toBytes(q),a)||af(q,aU))throw Error("invalid ristretto255 encoding 1");let r=(b=q*q,aY.create(b)),s=(c=aP+o*r,aY.create(c)),t=(d=aP-o*r,aY.create(d)),u=(e=s*s,aY.create(e)),v=(f=t*t,aY.create(f)),x=(g=o*p*u-v,aY.create(g)),{isValid:y,value:z}=(h=x*v,aX(aP,aY.create(h))),A=(i=z*t,aY.create(i)),B=(j=z*A*x,aY.create(j)),C=(k=(q+q)*A,aY.create(k));af(C,aU)&&(l=-C,C=aY.create(l));let D=(m=s*B,aY.create(m)),E=(n=C*D,aY.create(n));if(!y||af(E,aU)||D===aO)throw Error("invalid ristretto255 encoding 2");return new ba(new a$.Point(C,D,aP,E))}static fromHex(a){return ba.fromBytes(H("ristrettoHex",a,32))}static msm(a,b){return aA(ba,a$.Point.Fn,a,b)}toBytes(){let a,b,c,d,e,f,g,h,i,j,k,l,m,{X:n,Y:o,Z:p,T:q}=this.ep,r=(a=p+o,c=aY.create(a)*(b=p-o,aY.create(b)),aY.create(c)),s=(d=n*o,aY.create(d)),{value:t}=(f=r*(e=s*s,aY.create(e)),aX(aP,aY.create(f))),u=(g=t*r,aY.create(g)),v=(h=t*s,aY.create(h)),w=(i=u*v*q,aY.create(i));if(af(q*w,aU)){let a,b,c=(a=o*aW,aY.create(a)),d=(b=n*aW,aY.create(b));n=c,o=d,m=aY.create(u*a4)}else m=v;af(n*w,aU)&&(j=-o,o=aY.create(j));let x=(k=(p-o)*m,aY.create(k));return af(x,aU)&&(l=-x,x=aY.create(l)),aY.toBytes(x)}equals(a){let b,c,d,e;this.assertSame(a);let{X:f,Y:g}=this.ep,{X:h,Y:i}=a.ep,j=(b=f*i,aY.create(b)===(c=g*h,aY.create(c))),k=(d=g*i,aY.create(d)===(e=f*h,aY.create(e)));return j||k}is0(){return this.equals(ba.ZERO)}}ba.BASE=new ba(a$.Point.BASE),ba.ZERO=new ba(a$.Point.ZERO),ba.Fp=aY,ba.Fn=aZ;var bb=a.i(994148),bc=a.i(864705),bd=a.i(726545),be=a.i(600331),bf=a.i(13057);function bg([a,b]){return`${a}=${function a(b){return Array.isArray(b)?"%5B"+b.map(a).join("%2C%20")+"%5D":"bigint"==typeof b?`${b}n`:encodeURIComponent(String(null!=b&&null===Object.getPrototypeOf(b)?{...b}:b))}(b)}`}var bh=class extends Error{cause=this.cause;context;constructor(...[a,b]){let c,d;if(b){const{cause:a,...e}=b;a&&(d={cause:a}),Object.keys(e).length>0&&(c=e)}super(function(a,b={}){{let c,d=`Solana error #${a}; Decode this error by running \`npx @solana/errors decode -- ${a}`;return Object.keys(b).length&&(d+=` '${c=Object.entries(b).map(bg).join("&"),Buffer.from(c,"utf8").toString("base64")}'`),`${d}\``}}(a,c),d),this.context={__code:a,...c},this.name="SolanaError"}};function bi(a){return"fixedSize"in a&&"number"==typeof a.fixedSize}var bj=((d=bj||{})[d.Little=0]="Little",d[d.Big=1]="Big",d);function bk(a){return a?.endian!==1}var bl=a.i(224361),bm=a.i(921517),bn=a.i(524836);class bo extends TypeError{constructor(a,b){let c;const{message:d,explanation:e,...f}=a,{path:g}=a,h=0===g.length?d:`At path: ${g.join(".")} -- ${d}`;super(e??h),null!=e&&(this.cause=h),Object.assign(this,f),this.name=this.constructor.name,this.failures=()=>c??(c=[a,...b()])}}function bp(a){return"object"==typeof a&&null!=a}function bq(a){return bp(a)&&!Array.isArray(a)}function br(a){return"symbol"==typeof a?a.toString():"string"==typeof a?JSON.stringify(a):`${a}`}function*bs(a,b,c,d){var e;for(let f of(bp(e=a)&&"function"==typeof e[Symbol.iterator]||(a=[a]),a)){let a=function(a,b,c,d){if(!0===a)return;!1===a?a={}:"string"==typeof a&&(a={message:a});let{path:e,branch:f}=b,{type:g}=c,{refinement:h,message:i=`Expected a value of type \`${g}\`${h?` with refinement \`${h}\``:""}, but received: \`${br(d)}\``}=a;return{value:d,type:g,refinement:h,key:e[e.length-1],path:e,branch:f,...a,message:i}}(f,b,c,d);a&&(yield a)}}function*bt(a,b,c={}){let{path:d=[],branch:e=[a],coerce:f=!1,mask:g=!1}=c,h={path:d,branch:e,mask:g};f&&(a=b.coercer(a,h));let i="valid";for(let d of b.validator(a,h))d.explanation=c.message,i="not_valid",yield[d,void 0];for(let[j,k,l]of b.entries(a,h))for(let b of bt(k,l,{path:void 0===j?d:[...d,j],branch:void 0===j?e:[...e,k],coerce:f,mask:g,message:c.message}))b[0]?(i=null!=b[0].refinement?"not_refined":"not_valid",yield[b[0],void 0]):f&&(k=b[1],void 0===j?a=k:a instanceof Map?a.set(j,k):a instanceof Set?a.add(k):bp(a)&&(void 0!==k||j in a)&&(a[j]=k));if("not_valid"!==i)for(let d of b.refiner(a,h))d.explanation=c.message,i="not_refined",yield[d,void 0];"valid"===i&&(yield[void 0,a])}class bu{constructor(a){const{type:b,schema:c,validator:d,refiner:e,coercer:f=a=>a,entries:g=function*(){}}=a;this.type=b,this.schema=c,this.entries=g,this.coercer=f,d?this.validator=(a,b)=>bs(d(a,b),b,this,a):this.validator=()=>[],e?this.refiner=(a,b)=>bs(e(a,b),b,this,a):this.refiner=()=>[]}assert(a,b){var c=a,d=this,e=b;let f=bw(c,d,{message:e});if(f[0])throw f[0]}create(a,b){return bv(a,this,b)}is(a){var b,c;return b=a,c=this,!bw(b,c)[0]}mask(a,b){var c=a,d=this,e=b;let f=bw(c,d,{coerce:!0,mask:!0,message:e});if(!f[0])return f[1];throw f[0]}validate(a,b={}){return bw(a,this,b)}}function bv(a,b,c){let d=bw(a,b,{coerce:!0,message:c});if(!d[0])return d[1];throw d[0]}function bw(a,b,c={}){let d=bt(a,b,c),e=function(a){let{done:b,value:c}=a.next();return b?void 0:c}(d);return e[0]?[new bo(e[0],function*(){for(let a of d)a[0]&&(yield a[0])}),void 0]:[void 0,e[1]]}function bx(a,b){return new bu({type:a,schema:null,validator:b})}function by(a){return new bu({type:"array",schema:a,*entries(b){if(a&&Array.isArray(b))for(let[c,d]of b.entries())yield[c,d,a]},coercer:a=>Array.isArray(a)?a.slice():a,validator:a=>Array.isArray(a)||`Expected an array value, but received: ${br(a)}`})}function bz(){return bx("boolean",a=>"boolean"==typeof a)}function bA(a){return bx("instance",b=>b instanceof a||`Expected a \`${a.name}\` instance, but received: ${br(b)}`)}function bB(a){let b=br(a),c=typeof a;return new bu({type:"literal",schema:"string"===c||"number"===c||"boolean"===c?a:null,validator:c=>c===a||`Expected the literal \`${b}\`, but received: ${br(c)}`})}function bC(a){return new bu({...a,validator:(b,c)=>null===b||a.validator(b,c),refiner:(b,c)=>null===b||a.refiner(b,c)})}function bD(){return bx("number",a=>"number"==typeof a&&!isNaN(a)||`Expected a number, but received: ${br(a)}`)}function bE(a){return new bu({...a,validator:(b,c)=>void 0===b||a.validator(b,c),refiner:(b,c)=>void 0===b||a.refiner(b,c)})}function bF(a,b){return new bu({type:"record",schema:null,*entries(c){if(bp(c))for(let d in c){let e=c[d];yield[d,d,a],yield[d,e,b]}},validator:a=>bq(a)||`Expected an object, but received: ${br(a)}`,coercer:a=>bq(a)?{...a}:a})}function bG(){return bx("string",a=>"string"==typeof a||`Expected a string, but received: ${br(a)}`)}function bH(a){let b=bx("never",()=>!1);return new bu({type:"tuple",schema:null,*entries(c){if(Array.isArray(c)){let d=Math.max(a.length,c.length);for(let e=0;e<d;e++)yield[e,c[e],a[e]||b]}},validator:a=>Array.isArray(a)||`Expected an array, but received: ${br(a)}`,coercer:a=>Array.isArray(a)?a.slice():a})}function bI(a){let b=Object.keys(a);return new bu({type:"type",schema:a,*entries(c){if(bp(c))for(let d of b)yield[d,c[d],a[d]]},validator:a=>bq(a)||`Expected an object, but received: ${br(a)}`,coercer:a=>bq(a)?{...a}:a})}function bJ(a){let b=a.map(a=>a.type).join(" | ");return new bu({type:"union",schema:null,coercer(b,c){for(let d of a){let[a,e]=d.validate(b,{coerce:!0,mask:c.mask});if(!a)return e}return b},validator(c,d){let e=[];for(let b of a){let[...a]=bt(c,b,d),[f]=a;if(!f[0])return[];for(let[b]of a)b&&e.push(b)}return[`Expected the value to satisfy a union of \`${b}\`, but received: ${br(c)}`,...e]}})}function bK(){return bx("unknown",()=>!0)}function bL(a,b,c){return new bu({...a,coercer:(d,e)=>bw(d,b)[0]?a.coercer(d,e):a.coercer(c(d,e),e)})}var bM=a.i(119075),bN=a.i(873858);a.i(814045),a.i(663946),a.i(393897);var bO=a.i(305154),bP=a.i(947492);let bQ=bO.default;a.i(931989);var bR=a.i(865842),bS=(a.i(857764),a.i(957580)),bT=class{encode(a){return JSON.stringify(a)}decode(a){return JSON.parse(a)}},bU=class extends bR.EventEmitter{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(a,b="ws://localhost:8080",{autoconnect:c=!0,reconnect:d=!0,reconnect_interval:e=1e3,max_reconnects:f=5,...g}={},h,i){super(),this.webSocketFactory=a,this.queue={},this.rpc_id=0,this.address=b,this.autoconnect=c,this.ready=!1,this.reconnect=d,this.reconnect_timer_id=void 0,this.reconnect_interval=e,this.max_reconnects=f,this.rest_options=g,this.current_reconnects=0,this.generate_request_id=h||(()=>"number"==typeof this.rpc_id?++this.rpc_id:Number(this.rpc_id)+1),i?this.dataPack=i:this.dataPack=new bT,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(a,b,c,d){return d||"object"!=typeof c||(d=c,c=null),new Promise((e,f)=>{if(!this.ready)return f(Error("socket not ready"));let g=this.generate_request_id(a,b);this.socket.send(this.dataPack.encode({jsonrpc:"2.0",method:a,params:b||void 0,id:g}),d,a=>{if(a)return f(a);this.queue[g]={promise:[e,f]},c&&(this.queue[g].timeout=setTimeout(()=>{delete this.queue[g],f(Error("reply timeout"))},c))})})}async login(a){let b=await this.call("rpc.login",a);if(!b)throw Error("authentication failed");return b}async listMethods(){return await this.call("__listMethods")}notify(a,b){return new Promise((c,d)=>{if(!this.ready)return d(Error("socket not ready"));this.socket.send(this.dataPack.encode({jsonrpc:"2.0",method:a,params:b}),a=>{if(a)return d(a);c()})})}async subscribe(a){"string"==typeof a&&(a=[a]);let b=await this.call("rpc.on",a);if("string"==typeof a&&"ok"!==b[a])throw Error("Failed subscribing to an event '"+a+"' with: "+b[a]);return b}async unsubscribe(a){"string"==typeof a&&(a=[a]);let b=await this.call("rpc.off",a);if("string"==typeof a&&"ok"!==b[a])throw Error("Failed unsubscribing from an event with: "+b);return b}close(a,b){this.socket&&this.socket.close(a||1e3,b)}setAutoReconnect(a){this.reconnect=a}setReconnectInterval(a){this.reconnect_interval=a}setMaxReconnects(a){this.max_reconnects=a}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return void 0!==this.reconnect_timer_id}willReconnect(){return this.reconnect&&(0===this.max_reconnects||this.current_reconnects<this.max_reconnects)}_connect(a,b){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(a,b),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:a})=>{a instanceof ArrayBuffer&&(a=Buffer.from(a).toString());try{a=this.dataPack.decode(a)}catch(a){return}if(a.notification&&this.listeners(a.notification).length){if(!Object.keys(a.params).length)return this.emit(a.notification);let b=[a.notification];if(a.params.constructor===Object)b.push(a.params);else for(let c=0;c<a.params.length;c++)b.push(a.params[c]);return Promise.resolve().then(()=>{this.emit.apply(this,b)})}if(!this.queue[a.id])return a.method?Promise.resolve().then(()=>{this.emit(a.method,a?.params)}):void 0;"error"in a=="result"in a&&this.queue[a.id].promise[1](Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[a.id].timeout&&clearTimeout(this.queue[a.id].timeout),a.error?this.queue[a.id].promise[1](a.error):this.queue[a.id].promise[0](a.result),delete this.queue[a.id]}),this.socket.addEventListener("error",a=>this.emit("error",a)),this.socket.addEventListener("close",({code:c,reason:d})=>{this.ready&&setTimeout(()=>this.emit("close",c,d),0),this.ready=!1,this.socket=void 0,1e3!==c&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||0===this.max_reconnects)?this.reconnect_timer_id=setTimeout(()=>this._connect(a,b),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",c,d),1))})}};bR.EventEmitter;var bV=a.i(524601),bW=a.i(506105);let bX=(a,b)=>(a+(a>=0?b:-b)/b1)/b;function bY(a){if(!["compact","recovered","der"].includes(a))throw Error('Signature format must be "compact", "recovered", or "der"');return a}function bZ(a,b){let c={};for(let d of Object.keys(b))c[d]=void 0===a[d]?b[d]:a[d];return z(c.lowS,"lowS"),z(c.prehash,"prehash"),void 0!==c.format&&bY(c.format),c}let b$={Err:class extends Error{constructor(a=""){super(a)}},_tlv:{encode:(a,b)=>{let{Err:c}=b$;if(a<0||a>256)throw new c("tlv.encode: wrong tag");if(1&b.length)throw new c("tlv.encode: unpadded data");let d=b.length/2,e=B(d);if(e.length/2&128)throw new c("tlv.encode: long form length too big");let f=d>127?B(e.length/2|128):"";return B(a)+f+e+b},decode(a,b){let{Err:c}=b$,d=0;if(a<0||a>256)throw new c("tlv.encode: wrong tag");if(b.length<2||b[d++]!==a)throw new c("tlv.decode: wrong tlv");let e=b[d++],f=0;if(128&e){let a=127&e;if(!a)throw new c("tlv.decode(long): indefinite length not supported");if(a>4)throw new c("tlv.decode(long): byte length is too big");let g=b.subarray(d,d+a);if(g.length!==a)throw new c("tlv.decode: length bytes not complete");if(0===g[0])throw new c("tlv.decode(long): zero leftmost byte");for(let a of g)f=f<<8|a;if(d+=a,f<128)throw new c("tlv.decode(long): not minimal encoding")}else f=e;let g=b.subarray(d,d+f);if(g.length!==f)throw new c("tlv.decode: wrong value length");return{v:g,l:b.subarray(d+f)}}},_int:{encode(a){let{Err:b}=b$;if(a<b_)throw new b("integer: negative integers are not allowed");let c=B(a);if(8&Number.parseInt(c[0],16)&&(c="00"+c),1&c.length)throw new b("unexpected DER parsing assertion: unpadded hex");return c},decode(a){let{Err:b}=b$;if(128&a[0])throw new b("invalid signature integer: negative");if(0===a[0]&&!(128&a[1]))throw new b("invalid signature integer: unnecessary leading zero");return D(a)}},toSig(a){let{Err:b,_int:c,_tlv:d}=b$,e=H("signature",a),{v:f,l:g}=d.decode(48,e);if(g.length)throw new b("invalid signature: left bytes after parsing");let{v:h,l:i}=d.decode(2,f),{v:j,l:k}=d.decode(2,i);if(k.length)throw new b("invalid signature: left bytes after parsing");return{r:c.decode(h),s:c.decode(j)}},hexFromSig(a){let{_tlv:b,_int:c}=b$,d=b.encode(2,c.encode(a.r)),e=b.encode(2,c.encode(a.s));return b.encode(48,d+e)}},b_=BigInt(0),b0=BigInt(1),b1=BigInt(2),b2=BigInt(3),b3=BigInt(4);function b4(a,b){let c,{BYTES:d}=a;if("bigint"==typeof b)c=b;else{let e=H("private key",b);try{c=a.fromBytes(e)}catch(a){throw Error(`invalid private key: expected ui8a of size ${d}, got ${typeof b}`)}}if(!a.isValidNot0(c))throw Error("invalid private key: out of range [1..N-1]");return c}function b5(a){return Uint8Array.of(a?2:3)}function b6(a,b){return{secretKey:b.BYTES,publicKey:1+a.BYTES,publicKeyUncompressed:1+2*a.BYTES,publicKeyHasPrefix:!0,signature:2*b.BYTES}}let b7={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},b8={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},b9=BigInt(0),ca=BigInt(2),cb=al(b7.p,{sqrt:function(a){let b=b7.p,c=BigInt(3),d=BigInt(6),e=BigInt(11),f=BigInt(22),g=BigInt(23),h=BigInt(44),i=BigInt(88),j=a*a*a%b,k=j*j*a%b,l=_(k,c,b)*k%b,m=_(l,c,b)*k%b,n=_(m,ca,b)*j%b,o=_(n,e,b)*n%b,p=_(o,f,b)*o%b,q=_(p,h,b)*p%b,r=_(q,i,b)*q%b,s=_(r,h,b)*p%b,t=_(s,c,b)*k%b,u=_(t,g,b)*o%b,v=_(u,d,b)*j%b,w=_(v,ca,b);if(!cb.eql(cb.sqr(w),a))throw Error("Cannot find square root");return w}}),cc=(e={...b7,Fp:cb,lowS:!0,endo:b8},f=v.sha256,{...(b=a=>(function(a){let b,{CURVE:c,curveOpts:d,hash:e,ecdsaOpts:f}=function(a){let b,c,d,e,{CURVE:f,curveOpts:g}=(b={a:a.a,b:a.b,p:a.Fp.ORDER,n:a.n,h:a.h,Gx:a.Gx,Gy:a.Gy},c=a.Fp,d=a.allowedPrivateKeyLengths?Array.from(new Set(a.allowedPrivateKeyLengths.map(a=>Math.ceil(a/2)))):void 0,e={Fp:c,Fn:al(b.n,{BITS:a.nBitLength,allowedLengths:d,modFromBytes:a.wrapPrivateKey}),allowInfinityPoint:a.allowInfinityPoint,endo:a.endo,isTorsionFree:a.isTorsionFree,clearCofactor:a.clearCofactor,fromBytes:a.fromBytes,toBytes:a.toBytes},{CURVE:b,curveOpts:e}),h={hmac:a.hmac,randomBytes:a.randomBytes,lowS:a.lowS,bits2int:a.bits2int,bits2int_modN:a.bits2int_modN};return{CURVE:f,curveOpts:g,hash:a.hash,ecdsaOpts:h}}(a),g=function(a,b,c={}){(0,w.ahash)(b),N(c,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});let d=c.randomBytes||w.randomBytes,e=c.hmac||((a,...c)=>(0,bW.hmac)(b,a,(0,w.concatBytes)(...c))),{Fp:f,Fn:g}=a,{ORDER:h,BITS:i}=g,{keygen:j,getPublicKey:k,getSharedSecret:l,utils:m,lengths:n}=function(a,b={}){let{Fn:c}=a,d=b.randomBytes||w.randomBytes,e=Object.assign(b6(a.Fp,c),{seed:an(c.ORDER)});function f(a){try{return!!b4(c,a)}catch(a){return!1}}function g(a=d(e.seed)){return function(a,b,c=!1){let d=a.length,e=am(b),f=an(b);if(d<16||d<f||d>1024)throw Error("expected "+f+"-1024 bytes of input, got "+d);let g=$(c?E(a):D(a),b-R)+R;return c?G(g,e):F(g,e)}(A(a,e.seed,"seed"),c.ORDER)}function h(b,d=!0){return a.BASE.multiply(b4(c,b)).toBytes(d)}function i(b){if("bigint"==typeof b)return!1;if(b instanceof a)return!0;let{secretKey:d,publicKey:f,publicKeyUncompressed:g}=e;if(c.allowedLengths||d===f)return;let h=H("key",b).length;return h===f||h===g}return Object.freeze({getPublicKey:h,getSharedSecret:function(b,d,e=!0){if(!0===i(b))throw Error("first arg must be private key");if(!1===i(d))throw Error("second arg must be public key");let f=b4(c,b);return a.fromHex(d).multiply(f).toBytes(e)},keygen:function(a){let b=g(a);return{secretKey:b,publicKey:h(b)}},Point:a,utils:{isValidSecretKey:f,isValidPublicKey:function(b,c){let{publicKey:d,publicKeyUncompressed:f}=e;try{let e=b.length;if(!0===c&&e!==d||!1===c&&e!==f)return!1;return!!a.fromBytes(b)}catch(a){return!1}},randomSecretKey:g,isValidPrivateKey:f,randomPrivateKey:g,normPrivateKeyToScalar:a=>b4(c,a),precompute:(b=8,c=a.BASE)=>c.precompute(b,!1)},lengths:e})}(a,c),o={prehash:!1,lowS:"boolean"==typeof c.lowS&&c.lowS,format:void 0,extraEntropy:!1},p="compact";function q(a,b){if(!g.isValidNot0(b))throw Error(`invalid signature ${a}: out of range 1..Point.Fn.ORDER`);return b}class r{constructor(a,b,c){this.r=q("r",a),this.s=q("s",b),null!=c&&(this.recovery=c),Object.freeze(this)}static fromBytes(a,b=p){var c,d;let e,f;if(c=a,bY(d=b),f=n.signature,A(c,"compact"===d?f:"recovered"===d?f+1:void 0,`${d} signature`),"der"===b){let{r:b,s:c}=b$.toSig(A(a));return new r(b,c)}"recovered"===b&&(e=a[0],b="compact",a=a.subarray(1));let h=g.BYTES,i=a.subarray(0,h),j=a.subarray(h,2*h);return new r(g.fromBytes(i),g.fromBytes(j),e)}static fromHex(a,b){return this.fromBytes((0,w.hexToBytes)(a),b)}addRecoveryBit(a){return new r(this.r,this.s,a)}recoverPublicKey(b){let c=f.ORDER,{r:d,s:e,recovery:i}=this;if(null==i||![0,1,2,3].includes(i))throw Error("recovery id invalid");if(h*b1<c&&i>1)throw Error("recovery id is ambiguous for h>1 curve");let j=2===i||3===i?d+h:d;if(!f.isValid(j))throw Error("recovery id 2 or 3 invalid");let k=f.toBytes(j),l=a.fromBytes((0,w.concatBytes)(b5((1&i)==0),k)),m=g.inv(j),n=t(H("msgHash",b)),o=g.create(-n*m),p=g.create(e*m),q=a.BASE.multiplyUnsafe(o).add(l.multiplyUnsafe(p));if(q.is0())throw Error("point at infinify");return q.assertValidity(),q}hasHighS(){return this.s>h>>b0}toBytes(a=p){if(bY(a),"der"===a)return(0,w.hexToBytes)(b$.hexFromSig(this));let b=g.toBytes(this.r),c=g.toBytes(this.s);if("recovered"===a){if(null==this.recovery)throw Error("recovery bit must be present");return(0,w.concatBytes)(Uint8Array.of(this.recovery),b,c)}return(0,w.concatBytes)(b,c)}toHex(a){return(0,w.bytesToHex)(this.toBytes(a))}assertValidity(){}static fromCompact(a){return r.fromBytes(H("sig",a),"compact")}static fromDER(a){return r.fromBytes(H("sig",a),"der")}normalizeS(){return this.hasHighS()?new r(this.r,g.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return(0,w.bytesToHex)(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return(0,w.bytesToHex)(this.toBytes("compact"))}}let s=c.bits2int||function(a){if(a.length>8192)throw Error("input is too large");let b=D(a),c=8*a.length-i;return c>0?b>>BigInt(c):b},t=c.bits2int_modN||function(a){return g.create(s(a))},u=M(i);function v(a){return K("num < 2^"+i,a,b_,u),g.toBytes(a)}function x(a,c){return A(a,void 0,"message"),c?A(b(a),void 0,"prehashed message"):a}return Object.freeze({keygen:j,getPublicKey:k,getSharedSecret:l,utils:m,lengths:n,Point:a,sign:function(c,f,i={}){let{seed:j,k2sig:k}=function(b,c,e){if(["recovered","canonical"].some(a=>a in e))throw Error("sign() legacy options not supported");let{lowS:f,prehash:i,extraEntropy:j}=bZ(e,o),k=t(b=x(b,i)),l=b4(g,c),m=[v(l),v(k)];if(null!=j&&!1!==j){let a=!0===j?d(n.secretKey):j;m.push(H("extraEntropy",a))}return{seed:(0,w.concatBytes)(...m),k2sig:function(b){let c=s(b);if(!g.isValidNot0(c))return;let d=g.inv(c),e=a.BASE.multiply(c).toAffine(),i=g.create(e.x);if(i===b_)return;let j=g.create(d*g.create(k+i*l));if(j===b_)return;let m=2*(e.x!==i)|Number(e.y&b0),n=j;return f&&j>h>>b0&&(n=g.neg(j),m^=1),new r(i,n,m)}}}(c=H("message",c),f,i);return(function(a,b,c){if("number"!=typeof a||a<2)throw Error("hashLen must be a number");if("number"!=typeof b||b<2)throw Error("qByteLen must be a number");if("function"!=typeof c)throw Error("hmacFn must be a function");let d=a=>new Uint8Array(a),e=d(a),f=d(a),g=0,h=()=>{e.fill(1),f.fill(0),g=0},i=(...a)=>c(f,e,...a),j=(a=d(0))=>{(f=i(Uint8Array.of(0),a),e=i(),0!==a.length)&&(f=i(Uint8Array.of(1),a),e=i())},k=()=>{if(g++>=1e3)throw Error("drbg: tried 1000 values");let a=0,c=[];for(;a<b;){let b=(e=i()).slice();c.push(b),a+=e.length}return(0,w.concatBytes)(...c)};return(a,b)=>{let c;for(h(),j(a);!(c=b(k()));)j();return h(),c}})(b.outputLen,g.BYTES,e)(j,k)},verify:function(b,c,d,e={}){let{lowS:f,prehash:h,format:i}=bZ(e,o);if(d=H("publicKey",d),c=x(H("message",c),h),"strict"in e)throw Error("options.strict was renamed to lowS");let j=void 0===i?function(a){let b,c="string"==typeof a||(0,w.isBytes)(a),d=!c&&null!==a&&"object"==typeof a&&"bigint"==typeof a.r&&"bigint"==typeof a.s;if(!c&&!d)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(d)b=new r(a.r,a.s);else if(c){try{b=r.fromBytes(H("sig",a),"der")}catch(a){if(!(a instanceof b$.Err))throw a}if(!b)try{b=r.fromBytes(H("sig",a),"compact")}catch(a){return!1}}return!!b&&b}(b):r.fromBytes(H("sig",b),i);if(!1===j)return!1;try{let b=a.fromBytes(d);if(f&&j.hasHighS())return!1;let{r:e,s:h}=j,i=t(c),k=g.inv(h),l=g.create(i*k),m=g.create(e*k),n=a.BASE.multiplyUnsafe(l).add(b.multiplyUnsafe(m));if(n.is0())return!1;return g.create(n.x)===e}catch(a){return!1}},recoverPublicKey:function(a,b,c={}){let{prehash:d}=bZ(c,o);return b=x(b,d),r.fromBytes(a,"recovered").recoverPublicKey(b).toBytes()},Signature:r,hash:b})}(function(a,b={}){let c=aC("weierstrass",a,b),{Fp:d,Fn:e}=c,f=c.CURVE,{h:g,n:h}=f;N(b,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});let{endo:i}=b;if(i&&(!d.is0(f.a)||"bigint"!=typeof i.beta||!Array.isArray(i.basises)))throw Error('invalid endo: expected "beta": bigint and "basises": array');let j=b6(d,e);function k(){if(!d.isOdd)throw Error("compression is not supported: Field does not have .isOdd()")}let l=b.toBytes||function(a,b,c){let{x:e,y:f}=b.toAffine(),g=d.toBytes(e);if(z(c,"isCompressed"),!c)return(0,w.concatBytes)(Uint8Array.of(4),g,d.toBytes(f));{k();let a=!d.isOdd(f);return(0,w.concatBytes)(b5(a),g)}},m=b.fromBytes||function(a){A(a,void 0,"Point");let{publicKey:b,publicKeyUncompressed:c}=j,e=a.length,f=a[0],g=a.subarray(1);if(e===b&&(2===f||3===f)){let a,b=d.fromBytes(g);if(!d.isValid(b))throw Error("bad point: is not on curve, wrong x");let c=n(b);try{a=d.sqrt(c)}catch(a){throw Error("bad point: is not on curve, sqrt error"+(a instanceof Error?": "+a.message:""))}return k(),(1&f)==1!==d.isOdd(a)&&(a=d.neg(a)),{x:b,y:a}}if(e===c&&4===f){let a=d.BYTES,b=d.fromBytes(g.subarray(0,a)),c=d.fromBytes(g.subarray(a,2*a));if(!o(b,c))throw Error("bad point: is not on curve");return{x:b,y:c}}throw Error(`bad point: got length ${e}, expected compressed=${b} or uncompressed=${c}`)};function n(a){let b=d.sqr(a),c=d.mul(b,a);return d.add(d.add(c,d.mul(a,f.a)),f.b)}function o(a,b){let c=d.sqr(b),e=n(a);return d.eql(c,e)}if(!o(f.Gx,f.Gy))throw Error("bad curve params: generator point");let p=d.mul(d.pow(f.a,b2),b3),q=d.mul(d.sqr(f.b),BigInt(27));if(d.is0(d.add(p,q)))throw Error("bad curve params: a or b");function r(a,b,c=!1){if(!d.isValid(b)||c&&d.is0(b))throw Error(`bad point coordinate ${a}`);return b}function s(a){if(!(a instanceof y))throw Error("ProjectivePoint expected")}function t(a){if(!i||!i.basises)throw Error("no endo");return function(a,b,c){let[[d,e],[f,g]]=b,h=bX(g*a,c),i=bX(-e*a,c),j=a-h*d-i*f,k=-h*e-i*g,l=j<b_,m=k<b_;l&&(j=-j),m&&(k=-k);let n=M(Math.ceil(L(c)/2))+b0;if(j<b_||j>=n||k<b_||k>=n)throw Error("splitScalar (endomorphism): failed, k="+a);return{k1neg:l,k1:j,k2neg:m,k2:k}}(a,i.basises,e.ORDER)}let u=P((a,b)=>{let{X:c,Y:e,Z:f}=a;if(d.eql(f,d.ONE))return{x:c,y:e};let g=a.is0();null==b&&(b=g?d.ONE:d.inv(f));let h=d.mul(c,b),i=d.mul(e,b),j=d.mul(f,b);if(g)return{x:d.ZERO,y:d.ZERO};if(!d.eql(j,d.ONE))throw Error("invZ was invalid");return{x:h,y:i}}),v=P(a=>{if(a.is0()){if(b.allowInfinityPoint&&!d.is0(a.Y))return;throw Error("bad point: ZERO")}let{x:c,y:e}=a.toAffine();if(!d.isValid(c)||!d.isValid(e))throw Error("bad point: x or y not field elements");if(!o(c,e))throw Error("bad point: equation left != right");if(!a.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});function x(a,b,c,e,f){return c=new y(d.mul(c.X,a),c.Y,c.Z),b=aq(e,b),c=aq(f,c),b.add(c)}class y{constructor(a,b,c){this.X=r("x",a),this.Y=r("y",b,!0),this.Z=r("z",c),Object.freeze(this)}static CURVE(){return f}static fromAffine(a){let{x:b,y:c}=a||{};if(!a||!d.isValid(b)||!d.isValid(c))throw Error("invalid affine point");if(a instanceof y)throw Error("projective point not allowed");return d.is0(b)&&d.is0(c)?y.ZERO:new y(b,c,d.ONE)}static fromBytes(a){let b=y.fromAffine(m(A(a,void 0,"point")));return b.assertValidity(),b}static fromHex(a){return y.fromBytes(H("pointHex",a))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(a=8,b=!0){return C.createCache(this,a),b||this.multiply(b2),this}assertValidity(){v(this)}hasEvenY(){let{y:a}=this.toAffine();if(!d.isOdd)throw Error("Field doesn't support isOdd");return!d.isOdd(a)}equals(a){s(a);let{X:b,Y:c,Z:e}=this,{X:f,Y:g,Z:h}=a,i=d.eql(d.mul(b,h),d.mul(f,e)),j=d.eql(d.mul(c,h),d.mul(g,e));return i&&j}negate(){return new y(this.X,d.neg(this.Y),this.Z)}double(){let{a,b}=f,c=d.mul(b,b2),{X:e,Y:g,Z:h}=this,i=d.ZERO,j=d.ZERO,k=d.ZERO,l=d.mul(e,e),m=d.mul(g,g),n=d.mul(h,h),o=d.mul(e,g);return o=d.add(o,o),k=d.mul(e,h),k=d.add(k,k),i=d.mul(a,k),j=d.mul(c,n),j=d.add(i,j),i=d.sub(m,j),j=d.add(m,j),j=d.mul(i,j),i=d.mul(o,i),k=d.mul(c,k),n=d.mul(a,n),o=d.sub(l,n),o=d.mul(a,o),o=d.add(o,k),k=d.add(l,l),l=d.add(k,l),l=d.add(l,n),l=d.mul(l,o),j=d.add(j,l),n=d.mul(g,h),n=d.add(n,n),l=d.mul(n,o),i=d.sub(i,l),k=d.mul(n,m),k=d.add(k,k),new y(i,j,k=d.add(k,k))}add(a){s(a);let{X:b,Y:c,Z:e}=this,{X:g,Y:h,Z:i}=a,j=d.ZERO,k=d.ZERO,l=d.ZERO,m=f.a,n=d.mul(f.b,b2),o=d.mul(b,g),p=d.mul(c,h),q=d.mul(e,i),r=d.add(b,c),t=d.add(g,h);r=d.mul(r,t),t=d.add(o,p),r=d.sub(r,t),t=d.add(b,e);let u=d.add(g,i);return t=d.mul(t,u),u=d.add(o,q),t=d.sub(t,u),u=d.add(c,e),j=d.add(h,i),u=d.mul(u,j),j=d.add(p,q),u=d.sub(u,j),l=d.mul(m,t),j=d.mul(n,q),l=d.add(j,l),j=d.sub(p,l),l=d.add(p,l),k=d.mul(j,l),p=d.add(o,o),p=d.add(p,o),q=d.mul(m,q),t=d.mul(n,t),p=d.add(p,q),q=d.sub(o,q),q=d.mul(m,q),t=d.add(t,q),o=d.mul(p,t),k=d.add(k,o),o=d.mul(u,t),j=d.mul(r,j),j=d.sub(j,o),o=d.mul(r,p),l=d.mul(u,l),new y(j,k,l=d.add(l,o))}subtract(a){return this.add(a.negate())}is0(){return this.equals(y.ZERO)}multiply(a){let c,d,{endo:f}=b;if(!e.isValidNot0(a))throw Error("invalid scalar: out of range");let g=a=>C.cached(this,a,a=>ar(y,a));if(f){let{k1neg:b,k1:e,k2neg:h,k2:i}=t(a),{p:j,f:k}=g(e),{p:l,f:m}=g(i);d=k.add(m),c=x(f.beta,j,l,b,h)}else{let{p:b,f:e}=g(a);c=b,d=e}return ar(y,[c,d])[0]}multiplyUnsafe(a){let{endo:c}=b;if(!e.isValid(a))throw Error("invalid scalar: out of range");if(a===b_||this.is0())return y.ZERO;if(a===b0)return this;if(C.hasCache(this))return this.multiply(a);if(!c)return C.unsafe(this,a);{let{k1neg:b,k1:d,k2neg:e,k2:f}=t(a),{p1:g,p2:h}=function(a,b,c,d){let e=b,f=a.ZERO,g=a.ZERO;for(;c>ao||d>ao;)c&ap&&(f=f.add(e)),d&ap&&(g=g.add(e)),e=e.double(),c>>=ap,d>>=ap;return{p1:f,p2:g}}(y,this,d,f);return x(c.beta,g,h,b,e)}}multiplyAndAddUnsafe(a,b,c){let d=this.multiplyUnsafe(b).add(a.multiplyUnsafe(c));return d.is0()?void 0:d}toAffine(a){return u(this,a)}isTorsionFree(){let{isTorsionFree:a}=b;return g===b0||(a?a(y,this):C.unsafe(this,h).is0())}clearCofactor(){let{clearCofactor:a}=b;return g===b0?this:a?a(y,this):this.multiplyUnsafe(g)}isSmallOrder(){return this.multiplyUnsafe(g).is0()}toBytes(a=!0){return z(a,"isCompressed"),this.assertValidity(),l(y,this,a)}toHex(a=!0){return(0,w.bytesToHex)(this.toBytes(a))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(a=!0){return this.toBytes(a)}_setWindowSize(a){this.precompute(a)}static normalizeZ(a){return ar(y,a)}static msm(a,b){return aA(y,e,a,b)}static fromPrivateKey(a){return y.BASE.multiply(b4(e,a))}}y.BASE=new y(f.Gx,f.Gy,d.ONE),y.ZERO=new y(d.ZERO,d.ONE,d.ZERO),y.Fp=d,y.Fn=e;let B=e.BITS,C=new az(y,b.endo?Math.ceil(B/2):B);return y.BASE.precompute(8),y}(c,d),e,f);return b=g.Point,Object.assign({},g,{ProjectivePoint:b,CURVE:Object.assign({},a,ak(b.Fn.ORDER,b.Fn.BITS))})})({...e,hash:a}))(f),create:b});cc.Point;let cd=(c=[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(a=>a.map(a=>BigInt(a))).map(a=>Array.from(a).reverse()),(a,b)=>{let[d,e,f,g]=c.map(b=>b.reduce((b,c)=>cb.add(cb.mul(b,a),c))),[h,i]=ai(cb,[e,g],!0);return a=cb.mul(d,h),b=cb.mul(b,cb.mul(f,i)),{x:a,y:b}}),ce=function(a,b){ah(a);let{A:c,B:d,Z:e}=b;if(!a.isValid(c)||!a.isValid(d)||!a.isValid(e))throw Error("mapToCurveSimpleSWU: invalid opts");let f=function(a,b){let c=a.ORDER,d=b_;for(let a=c-b0;a%b1===b_;a/=b1)d+=b0;let e=d,f=b1<<e-b0-b0,g=f*b1,h=(c-b0)/g,i=(h-b0)/b1,j=g-b0,k=a.pow(b,h),l=a.pow(b,(h+b0)/b1),m=(b,c)=>{let d=k,g=a.pow(c,j),h=a.sqr(g);h=a.mul(h,c);let m=a.mul(b,h);m=a.pow(m,i),m=a.mul(m,g),g=a.mul(m,c),h=a.mul(m,b);let n=a.mul(h,g);m=a.pow(n,f);let o=a.eql(m,a.ONE);g=a.mul(h,l),m=a.mul(n,d),h=a.cmov(g,h,o),n=a.cmov(m,n,o);for(let b=e;b>b0;b--){let c=b-b1;c=b1<<c-b0;let e=a.pow(n,c),f=a.eql(e,a.ONE);g=a.mul(h,d),d=a.mul(d,d),e=a.mul(n,d),h=a.cmov(g,h,f),n=a.cmov(e,n,f)}return{isValid:o,value:h}};if(a.ORDER%b3===b2){let c=(a.ORDER-b2)/b3,d=a.sqrt(a.neg(b));m=(b,e)=>{let f=a.sqr(e),g=a.mul(b,e);f=a.mul(f,g);let h=a.pow(f,c);h=a.mul(h,g);let i=a.mul(h,d),j=a.mul(a.sqr(h),e),k=a.eql(j,b),l=a.cmov(i,h,k);return{isValid:k,value:l}}}return m}(a,e);if(!a.isOdd)throw Error("Field does not have .isOdd()");return b=>{let g,h,i,j,k,l,m,n;g=a.sqr(b),g=a.mul(g,e),h=a.sqr(g),h=a.add(h,g),i=a.add(h,a.ONE),i=a.mul(i,d),j=a.cmov(e,a.neg(h),!a.eql(h,a.ZERO)),j=a.mul(j,c),h=a.sqr(i),l=a.sqr(j),k=a.mul(l,c),h=a.add(h,k),h=a.mul(h,i),l=a.mul(l,j),k=a.mul(l,d),h=a.add(h,k),m=a.mul(g,i);let{isValid:o,value:p}=f(h,l);n=a.mul(g,b),n=a.mul(n,p),m=a.cmov(m,i,o),n=a.cmov(n,p,o);let q=a.isOdd(b)===a.isOdd(n);n=a.cmov(a.neg(n),n,q);let r=ai(a,[j],!0)[0];return{x:m=a.mul(m,r),y:n}}}(cb,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:cb.create(BigInt("-11"))});aN(cc.Point,a=>{let{x:b,y:c}=ce(cb.create(a[0]));return cd(b,c)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:cb.ORDER,m:1,k:128,expand:"xmd",hash:v.sha256}),a$.utils.randomPrivateKey;let cf=()=>{let a=a$.utils.randomPrivateKey(),b=cg(a),c=new Uint8Array(64);return c.set(a),c.set(b,32),{publicKey:b,secretKey:c}},cg=a$.getPublicKey;function ch(a){try{return a$.ExtendedPoint.fromHex(a),!0}catch{return!1}}let ci=(a,b)=>a$.sign(a,b.slice(0,32)),cj=a$.verify,ck=a=>u.Buffer.isBuffer(a)?a:a instanceof Uint8Array?u.Buffer.from(a.buffer,a.byteOffset,a.byteLength):u.Buffer.from(a);class cl{constructor(a){Object.assign(this,a)}encode(){return u.Buffer.from((0,be.serialize)(cm,this))}static decode(a){return(0,be.deserialize)(cm,this,a)}static decodeUnchecked(a){return(0,be.deserializeUnchecked)(cm,this,a)}}let cm=new Map,cn=1;class co extends cl{constructor(a){if(super({}),this._bn=void 0,void 0!==a._bn)this._bn=a._bn;else{if("string"==typeof a){const b=bc.default.decode(a);if(32!=b.length)throw Error("Invalid public key input");this._bn=new bb.default(b)}else this._bn=new bb.default(a);if(this._bn.byteLength()>32)throw Error("Invalid public key input")}}static unique(){let a=new co(cn);return cn+=1,new co(a.toBuffer())}equals(a){return this._bn.eq(a._bn)}toBase58(){return bc.default.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){let a=this.toBuffer();return new Uint8Array(a.buffer,a.byteOffset,a.byteLength)}toBuffer(){let a=this._bn.toArrayLike(u.Buffer);if(32===a.length)return a;let b=u.Buffer.alloc(32);return a.copy(b,32-a.length),b}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(a,b,c){let d=u.Buffer.concat([a.toBuffer(),u.Buffer.from(b),c.toBuffer()]);return new co((0,bd.sha256)(d))}static createProgramAddressSync(a,b){let c=u.Buffer.alloc(0);a.forEach(function(a){if(a.length>32)throw TypeError("Max seed length exceeded");c=u.Buffer.concat([c,ck(a)])}),c=u.Buffer.concat([c,b.toBuffer(),u.Buffer.from("ProgramDerivedAddress")]);let d=(0,bd.sha256)(c);if(ch(d))throw Error("Invalid seeds, address must fall off the curve");return new co(d)}static async createProgramAddress(a,b){return this.createProgramAddressSync(a,b)}static findProgramAddressSync(a,b){let c,d=255;for(;0!=d;){try{let e=a.concat(u.Buffer.from([d]));c=this.createProgramAddressSync(e,b)}catch(a){if(a instanceof TypeError)throw a;d--;continue}return[c,d]}throw Error("Unable to find a viable program address nonce")}static async findProgramAddress(a,b){return this.findProgramAddressSync(a,b)}static isOnCurve(a){return ch(new co(a).toBytes())}}co.default=new co("11111111111111111111111111111111"),cm.set(co,{kind:"struct",fields:[["_bn","u256"]]}),new co("BPFLoader1111111111111111111111111111111111");class cp extends Error{constructor(a){super(`Signature ${a} has expired: block height exceeded.`),this.signature=void 0,this.signature=a}}Object.defineProperty(cp.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class cq extends Error{constructor(a,b){super(`Transaction was not confirmed in ${b.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${a} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=a}}Object.defineProperty(cq.prototype,"name",{value:"TransactionExpiredTimeoutError"});class cr extends Error{constructor(a){super(`Signature ${a} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=a}}Object.defineProperty(cr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class cs{constructor(a,b){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=a,this.accountKeysFromLookups=b}keySegments(){let a=[this.staticAccountKeys];return this.accountKeysFromLookups&&(a.push(this.accountKeysFromLookups.writable),a.push(this.accountKeysFromLookups.readonly)),a}get(a){for(let b of this.keySegments())if(a<b.length)return b[a];else a-=b.length}get length(){return this.keySegments().flat().length}compileInstructions(a){if(this.length>256)throw Error("Account index overflow encountered during compilation");let b=new Map;this.keySegments().flat().forEach((a,c)=>{b.set(a.toBase58(),c)});let c=a=>{let c=b.get(a.toBase58());if(void 0===c)throw Error("Encountered an unknown instruction account key during compilation");return c};return a.map(a=>({programIdIndex:c(a.programId),accountKeyIndexes:a.keys.map(a=>c(a.pubkey)),data:a.data}))}}let ct=(a="publicKey")=>bf.blob(32,a),cu=(a="string")=>{let b=bf.struct([bf.u32("length"),bf.u32("lengthPadding"),bf.blob(bf.offset(bf.u32(),-8),"chars")],a),c=b.decode.bind(b),d=b.encode.bind(b);return b.decode=(a,b)=>c(a,b).chars.toString(),b.encode=(a,b,c)=>d({chars:u.Buffer.from(a,"utf8")},b,c),b.alloc=a=>bf.u32().span+bf.u32().span+u.Buffer.from(a,"utf8").length,b};function cv(a){let b=0,c=0;for(;;){let d=a.shift();if(b|=(127&d)<<7*c,c+=1,(128&d)==0)break}return b}function cw(a,b){let c=b;for(;;){let b=127&c;if(0==(c>>=7)){a.push(b);break}b|=128,a.push(b)}}function cx(a,b){if(!a)throw Error(b||"Assertion failed")}class cy{constructor(a,b){this.payer=void 0,this.keyMetaMap=void 0,this.payer=a,this.keyMetaMap=b}static compile(a,b){let c=new Map,d=a=>{let b=a.toBase58(),d=c.get(b);return void 0===d&&(d={isSigner:!1,isWritable:!1,isInvoked:!1},c.set(b,d)),d},e=d(b);for(let b of(e.isSigner=!0,e.isWritable=!0,a))for(let a of(d(b.programId).isInvoked=!0,b.keys)){let b=d(a.pubkey);b.isSigner||=a.isSigner,b.isWritable||=a.isWritable}return new cy(b,c)}getMessageComponents(){let a=[...this.keyMetaMap.entries()];cx(a.length<=256,"Max static account keys length exceeded");let b=a.filter(([,a])=>a.isSigner&&a.isWritable),c=a.filter(([,a])=>a.isSigner&&!a.isWritable),d=a.filter(([,a])=>!a.isSigner&&a.isWritable),e=a.filter(([,a])=>!a.isSigner&&!a.isWritable),f={numRequiredSignatures:b.length+c.length,numReadonlySignedAccounts:c.length,numReadonlyUnsignedAccounts:e.length};{cx(b.length>0,"Expected at least one writable signer key");let[a]=b[0];cx(a===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}return[f,[...b.map(([a])=>new co(a)),...c.map(([a])=>new co(a)),...d.map(([a])=>new co(a)),...e.map(([a])=>new co(a))]]}extractTableLookup(a){let[b,c]=this.drainKeysFoundInLookupTable(a.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[d,e]=this.drainKeysFoundInLookupTable(a.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(0!==b.length||0!==d.length)return[{accountKey:a.key,writableIndexes:b,readonlyIndexes:d},{writable:c,readonly:e}]}drainKeysFoundInLookupTable(a,b){let c=[],d=[];for(let[e,f]of this.keyMetaMap.entries())if(b(f)){let b=new co(e),f=a.findIndex(a=>a.equals(b));f>=0&&(cx(f<256,"Max lookup table index exceeded"),c.push(f),d.push(b),this.keyMetaMap.delete(e))}return[c,d]}}let cz="Reached end of buffer unexpectedly";function cA(a){if(0===a.length)throw Error(cz);return a.shift()}function cB(a,...b){let[c]=b;if(2===b.length?c+(b[1]??0)>a.length:c>=a.length)throw Error(cz);return a.splice(...b)}class cC{constructor(a){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=a.header,this.accountKeys=a.accountKeys.map(a=>new co(a)),this.recentBlockhash=a.recentBlockhash,this.instructions=a.instructions,this.instructions.forEach(a=>this.indexToProgramIds.set(a.programIdIndex,this.accountKeys[a.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(a=>({programIdIndex:a.programIdIndex,accountKeyIndexes:a.accounts,data:bc.default.decode(a.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new cs(this.staticAccountKeys)}static compile(a){let[b,c]=cy.compile(a.instructions,a.payerKey).getMessageComponents(),d=new cs(c).compileInstructions(a.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:bc.default.encode(a.data)}));return new cC({header:b,accountKeys:c,recentBlockhash:a.recentBlockhash,instructions:d})}isAccountSigner(a){return a<this.header.numRequiredSignatures}isAccountWritable(a){let b=this.header.numRequiredSignatures;if(!(a>=this.header.numRequiredSignatures))return a<b-this.header.numReadonlySignedAccounts;{let c=this.accountKeys.length-b-this.header.numReadonlyUnsignedAccounts;return a-b<c}}isProgramId(a){return this.indexToProgramIds.has(a)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((a,b)=>!this.isProgramId(b))}serialize(){let a=this.accountKeys.length,b=[];cw(b,a);let c=this.instructions.map(a=>{let{accounts:b,programIdIndex:c}=a,d=Array.from(bc.default.decode(a.data)),e=[];cw(e,b.length);let f=[];return cw(f,d.length),{programIdIndex:c,keyIndicesCount:u.Buffer.from(e),keyIndices:b,dataLength:u.Buffer.from(f),data:d}}),d=[];cw(d,c.length);let e=u.Buffer.alloc(1232);u.Buffer.from(d).copy(e);let f=d.length;c.forEach(a=>{let b=bf.struct([bf.u8("programIdIndex"),bf.blob(a.keyIndicesCount.length,"keyIndicesCount"),bf.seq(bf.u8("keyIndex"),a.keyIndices.length,"keyIndices"),bf.blob(a.dataLength.length,"dataLength"),bf.seq(bf.u8("userdatum"),a.data.length,"data")]).encode(a,e,f);f+=b}),e=e.slice(0,f);let g=bf.struct([bf.blob(1,"numRequiredSignatures"),bf.blob(1,"numReadonlySignedAccounts"),bf.blob(1,"numReadonlyUnsignedAccounts"),bf.blob(b.length,"keyCount"),bf.seq(ct("key"),a,"keys"),ct("recentBlockhash")]),h={numRequiredSignatures:u.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:u.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:u.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:u.Buffer.from(b),keys:this.accountKeys.map(a=>ck(a.toBytes())),recentBlockhash:bc.default.decode(this.recentBlockhash)},i=u.Buffer.alloc(2048),j=g.encode(h,i);return e.copy(i,j),i.slice(0,j+e.length)}static from(a){let b=[...a],c=cA(b);if(c!==(127&c))throw Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");let d=cA(b),e=cA(b),f=cv(b),g=[];for(let a=0;a<f;a++){let a=cB(b,0,32);g.push(new co(u.Buffer.from(a)))}let h=cB(b,0,32),i=cv(b),j=[];for(let a=0;a<i;a++){let a=cA(b),c=cv(b),d=cB(b,0,c),e=cv(b),f=cB(b,0,e),g=bc.default.encode(u.Buffer.from(f));j.push({programIdIndex:a,accounts:d,data:g})}return new cC({header:{numRequiredSignatures:c,numReadonlySignedAccounts:d,numReadonlyUnsignedAccounts:e},recentBlockhash:bc.default.encode(u.Buffer.from(h)),accountKeys:g,instructions:j})}}class cD{constructor(a){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=a.header,this.staticAccountKeys=a.staticAccountKeys,this.recentBlockhash=a.recentBlockhash,this.compiledInstructions=a.compiledInstructions,this.addressTableLookups=a.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let a=0;for(let b of this.addressTableLookups)a+=b.readonlyIndexes.length+b.writableIndexes.length;return a}getAccountKeys(a){let b;if(a&&"accountKeysFromLookups"in a&&a.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=a.accountKeysFromLookups.writable.length+a.accountKeysFromLookups.readonly.length)throw Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");b=a.accountKeysFromLookups}else if(a&&"addressLookupTableAccounts"in a&&a.addressLookupTableAccounts)b=this.resolveAddressTableLookups(a.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw Error("Failed to get account keys because address table lookups were not resolved");return new cs(this.staticAccountKeys,b)}isAccountSigner(a){return a<this.header.numRequiredSignatures}isAccountWritable(a){let b=this.header.numRequiredSignatures,c=this.staticAccountKeys.length;if(a>=c)return a-c<this.addressTableLookups.reduce((a,b)=>a+b.writableIndexes.length,0);if(!(a>=this.header.numRequiredSignatures))return a<b-this.header.numReadonlySignedAccounts;{let d=c-b-this.header.numReadonlyUnsignedAccounts;return a-b<d}}resolveAddressTableLookups(a){let b={writable:[],readonly:[]};for(let c of this.addressTableLookups){let d=a.find(a=>a.key.equals(c.accountKey));if(!d)throw Error(`Failed to find address lookup table account for table key ${c.accountKey.toBase58()}`);for(let a of c.writableIndexes)if(a<d.state.addresses.length)b.writable.push(d.state.addresses[a]);else throw Error(`Failed to find address for index ${a} in address lookup table ${c.accountKey.toBase58()}`);for(let a of c.readonlyIndexes)if(a<d.state.addresses.length)b.readonly.push(d.state.addresses[a]);else throw Error(`Failed to find address for index ${a} in address lookup table ${c.accountKey.toBase58()}`)}return b}static compile(a){let b=cy.compile(a.instructions,a.payerKey),c=[],d={writable:[],readonly:[]};for(let e of a.addressLookupTableAccounts||[]){let a=b.extractTableLookup(e);if(void 0!==a){let[b,{writable:e,readonly:f}]=a;c.push(b),d.writable.push(...e),d.readonly.push(...f)}}let[e,f]=b.getMessageComponents(),g=new cs(f,d).compileInstructions(a.instructions);return new cD({header:e,staticAccountKeys:f,recentBlockhash:a.recentBlockhash,compiledInstructions:g,addressTableLookups:c})}serialize(){let a=[];cw(a,this.staticAccountKeys.length);let b=this.serializeInstructions(),c=[];cw(c,this.compiledInstructions.length);let d=this.serializeAddressTableLookups(),e=[];cw(e,this.addressTableLookups.length);let f=bf.struct([bf.u8("prefix"),bf.struct([bf.u8("numRequiredSignatures"),bf.u8("numReadonlySignedAccounts"),bf.u8("numReadonlyUnsignedAccounts")],"header"),bf.blob(a.length,"staticAccountKeysLength"),bf.seq(ct(),this.staticAccountKeys.length,"staticAccountKeys"),ct("recentBlockhash"),bf.blob(c.length,"instructionsLength"),bf.blob(b.length,"serializedInstructions"),bf.blob(e.length,"addressTableLookupsLength"),bf.blob(d.length,"serializedAddressTableLookups")]),g=new Uint8Array(1232),h=f.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(a),staticAccountKeys:this.staticAccountKeys.map(a=>a.toBytes()),recentBlockhash:bc.default.decode(this.recentBlockhash),instructionsLength:new Uint8Array(c),serializedInstructions:b,addressTableLookupsLength:new Uint8Array(e),serializedAddressTableLookups:d},g);return g.slice(0,h)}serializeInstructions(){let a=0,b=new Uint8Array(1232);for(let c of this.compiledInstructions){let d=[];cw(d,c.accountKeyIndexes.length);let e=[];cw(e,c.data.length);let f=bf.struct([bf.u8("programIdIndex"),bf.blob(d.length,"encodedAccountKeyIndexesLength"),bf.seq(bf.u8(),c.accountKeyIndexes.length,"accountKeyIndexes"),bf.blob(e.length,"encodedDataLength"),bf.blob(c.data.length,"data")]);a+=f.encode({programIdIndex:c.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(d),accountKeyIndexes:c.accountKeyIndexes,encodedDataLength:new Uint8Array(e),data:c.data},b,a)}return b.slice(0,a)}serializeAddressTableLookups(){let a=0,b=new Uint8Array(1232);for(let c of this.addressTableLookups){let d=[];cw(d,c.writableIndexes.length);let e=[];cw(e,c.readonlyIndexes.length);let f=bf.struct([ct("accountKey"),bf.blob(d.length,"encodedWritableIndexesLength"),bf.seq(bf.u8(),c.writableIndexes.length,"writableIndexes"),bf.blob(e.length,"encodedReadonlyIndexesLength"),bf.seq(bf.u8(),c.readonlyIndexes.length,"readonlyIndexes")]);a+=f.encode({accountKey:c.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(d),writableIndexes:c.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(e),readonlyIndexes:c.readonlyIndexes},b,a)}return b.slice(0,a)}static deserialize(a){let b=[...a],c=cA(b),d=127&c;cx(c!==d,"Expected versioned message but received legacy message"),cx(0===d,`Expected versioned message with version 0 but found version ${d}`);let e={numRequiredSignatures:cA(b),numReadonlySignedAccounts:cA(b),numReadonlyUnsignedAccounts:cA(b)},f=[],g=cv(b);for(let a=0;a<g;a++)f.push(new co(cB(b,0,32)));let h=bc.default.encode(cB(b,0,32)),i=cv(b),j=[];for(let a=0;a<i;a++){let a=cA(b),c=cv(b),d=cB(b,0,c),e=cv(b),f=new Uint8Array(cB(b,0,e));j.push({programIdIndex:a,accountKeyIndexes:d,data:f})}let k=cv(b),l=[];for(let a=0;a<k;a++){let a=new co(cB(b,0,32)),c=cv(b),d=cB(b,0,c),e=cv(b),f=cB(b,0,e);l.push({accountKey:a,writableIndexes:d,readonlyIndexes:f})}return new cD({header:e,staticAccountKeys:f,recentBlockhash:h,compiledInstructions:j,addressTableLookups:l})}}let cE={deserializeMessageVersion(a){let b=a[0],c=127&b;return c===b?"legacy":c},deserialize:a=>{let b=cE.deserializeMessageVersion(a);if("legacy"===b)return cC.from(a);if(0===b)return cD.deserialize(a);throw Error(`Transaction message version ${b} deserialization is not supported`)}},cF=((g={})[g.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",g[g.PROCESSED=1]="PROCESSED",g[g.TIMED_OUT=2]="TIMED_OUT",g[g.NONCE_INVALID=3]="NONCE_INVALID",g),cG=u.Buffer.alloc(64).fill(0);class cH{constructor(a){this.keys=void 0,this.programId=void 0,this.data=u.Buffer.alloc(0),this.programId=a.programId,this.keys=a.keys,a.data&&(this.data=a.data)}toJSON(){return{keys:this.keys.map(({pubkey:a,isSigner:b,isWritable:c})=>({pubkey:a.toJSON(),isSigner:b,isWritable:c})),programId:this.programId.toJSON(),data:[...this.data]}}}class cI{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(a){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!a)return;if(a.feePayer&&(this.feePayer=a.feePayer),a.signatures&&(this.signatures=a.signatures),Object.prototype.hasOwnProperty.call(a,"nonceInfo")){const{minContextSlot:b,nonceInfo:c}=a;this.minNonceContextSlot=b,this.nonceInfo=c}else if(Object.prototype.hasOwnProperty.call(a,"lastValidBlockHeight")){const{blockhash:b,lastValidBlockHeight:c}=a;this.recentBlockhash=b,this.lastValidBlockHeight=c}else{const{recentBlockhash:b,nonceInfo:c}=a;c&&(this.nonceInfo=c),this.recentBlockhash=b}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(a=>a.toJSON()),signers:this.signatures.map(({publicKey:a})=>a.toJSON())}}add(...a){if(0===a.length)throw Error("No instructions");return a.forEach(a=>{"instructions"in a?this.instructions=this.instructions.concat(a.instructions):"data"in a&&"programId"in a&&"keys"in a?this.instructions.push(a):this.instructions.push(new cH(a))}),this}compileMessage(){let a,b,c;if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;if(this.nonceInfo?(a=this.nonceInfo.nonce,b=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(a=this.recentBlockhash,b=this.instructions),!a)throw Error("Transaction recentBlockhash required");if(b.length<1&&console.warn("No instructions provided"),this.feePayer)c=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)c=this.signatures[0].publicKey;else throw Error("Transaction fee payer required");for(let a=0;a<b.length;a++)if(void 0===b[a].programId)throw Error(`Transaction instruction index ${a} has undefined program id`);let d=[],e=[];b.forEach(a=>{a.keys.forEach(a=>{e.push({...a})});let b=a.programId.toString();d.includes(b)||d.push(b)}),d.forEach(a=>{e.push({pubkey:new co(a),isSigner:!1,isWritable:!1})});let f=[];e.forEach(a=>{let b=a.pubkey.toString(),c=f.findIndex(a=>a.pubkey.toString()===b);c>-1?(f[c].isWritable=f[c].isWritable||a.isWritable,f[c].isSigner=f[c].isSigner||a.isSigner):f.push(a)}),f.sort(function(a,b){return a.isSigner!==b.isSigner?a.isSigner?-1:1:a.isWritable!==b.isWritable?a.isWritable?-1:1:a.pubkey.toBase58().localeCompare(b.pubkey.toBase58(),"en",{localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"})});let g=f.findIndex(a=>a.pubkey.equals(c));if(g>-1){let[a]=f.splice(g,1);a.isSigner=!0,a.isWritable=!0,f.unshift(a)}else f.unshift({pubkey:c,isSigner:!0,isWritable:!0});for(let a of this.signatures){let b=f.findIndex(b=>b.pubkey.equals(a.publicKey));if(b>-1)f[b].isSigner||(f[b].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw Error(`unknown signer: ${a.publicKey.toString()}`)}let h=0,i=0,j=0,k=[],l=[];f.forEach(({pubkey:a,isSigner:b,isWritable:c})=>{b?(k.push(a.toString()),h+=1,c||(i+=1)):(l.push(a.toString()),c||(j+=1))});let m=k.concat(l),n=b.map(a=>{let{data:b,programId:c}=a;return{programIdIndex:m.indexOf(c.toString()),accounts:a.keys.map(a=>m.indexOf(a.pubkey.toString())),data:bc.default.encode(b)}});return n.forEach(a=>{cx(a.programIdIndex>=0),a.accounts.forEach(a=>cx(a>=0))}),new cC({header:{numRequiredSignatures:h,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:j},accountKeys:m,recentBlockhash:a,instructions:n})}_compile(){let a=this.compileMessage(),b=a.accountKeys.slice(0,a.header.numRequiredSignatures);return this.signatures.length===b.length&&this.signatures.every((a,c)=>b[c].equals(a.publicKey))?a:(this.signatures=b.map(a=>({signature:null,publicKey:a})),a)}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(a){return(await a.getFeeForMessage(this.compileMessage())).value}setSigners(...a){if(0===a.length)throw Error("No signers");let b=new Set;this.signatures=a.filter(a=>{let c=a.toString();return!b.has(c)&&(b.add(c),!0)}).map(a=>({signature:null,publicKey:a}))}sign(...a){if(0===a.length)throw Error("No signers");let b=new Set,c=[];for(let d of a){let a=d.publicKey.toString();b.has(a)||(b.add(a),c.push(d))}this.signatures=c.map(a=>({signature:null,publicKey:a.publicKey}));let d=this._compile();this._partialSign(d,...c)}partialSign(...a){if(0===a.length)throw Error("No signers");let b=new Set,c=[];for(let d of a){let a=d.publicKey.toString();b.has(a)||(b.add(a),c.push(d))}let d=this._compile();this._partialSign(d,...c)}_partialSign(a,...b){let c=a.serialize();b.forEach(a=>{let b=ci(c,a.secretKey);this._addSignature(a.publicKey,ck(b))})}addSignature(a,b){this._compile(),this._addSignature(a,b)}_addSignature(a,b){cx(64===b.length);let c=this.signatures.findIndex(b=>a.equals(b.publicKey));if(c<0)throw Error(`unknown signer: ${a.toString()}`);this.signatures[c].signature=u.Buffer.from(b)}verifySignatures(a=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),a)}_getMessageSignednessErrors(a,b){let c={};for(let{signature:d,publicKey:e}of this.signatures)null===d?b&&(c.missing||=[]).push(e):cj(d,a,e.toBytes())||(c.invalid||=[]).push(e);return c.invalid||c.missing?c:void 0}serialize(a){let{requireAllSignatures:b,verifySignatures:c}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},a),d=this.serializeMessage();if(c){let a=this._getMessageSignednessErrors(d,b);if(a){let b="Signature verification failed.";throw a.invalid&&(b+=`
Invalid signature for public key${1===a.invalid.length?"":"(s)"} [\`${a.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),a.missing&&(b+=`
Missing signature for public key${1===a.missing.length?"":"(s)"} [\`${a.missing.map(a=>a.toBase58()).join("`, `")}\`].`),Error(b)}}return this._serialize(d)}_serialize(a){let{signatures:b}=this,c=[];cw(c,b.length);let d=c.length+64*b.length+a.length,e=u.Buffer.alloc(d);return cx(b.length<256),u.Buffer.from(c).copy(e,0),b.forEach(({signature:a},b)=>{null!==a&&(cx(64===a.length,"signature has invalid length"),u.Buffer.from(a).copy(e,c.length+64*b))}),a.copy(e,c.length+64*b.length),cx(e.length<=1232,`Transaction too large: ${e.length} > 1232`),e}get keys(){return cx(1===this.instructions.length),this.instructions[0].keys.map(a=>a.pubkey)}get programId(){return cx(1===this.instructions.length),this.instructions[0].programId}get data(){return cx(1===this.instructions.length),this.instructions[0].data}static from(a){let b=[...a],c=cv(b),d=[];for(let a=0;a<c;a++){let a=cB(b,0,64);d.push(bc.default.encode(u.Buffer.from(a)))}return cI.populate(cC.from(b),d)}static populate(a,b=[]){let c=new cI;return c.recentBlockhash=a.recentBlockhash,a.header.numRequiredSignatures>0&&(c.feePayer=a.accountKeys[0]),b.forEach((b,d)=>{let e={signature:b==bc.default.encode(cG)?null:bc.default.decode(b),publicKey:a.accountKeys[d]};c.signatures.push(e)}),a.instructions.forEach(b=>{let d=b.accounts.map(b=>{let d=a.accountKeys[b];return{pubkey:d,isSigner:c.signatures.some(a=>a.publicKey.toString()===d.toString())||a.isAccountSigner(b),isWritable:a.isAccountWritable(b)}});c.instructions.push(new cH({keys:d,programId:a.accountKeys[b.programIdIndex],data:bc.default.decode(b.data)}))}),c._message=a,c._json=c.toJSON(),c}}class cJ{get version(){return this.message.version}constructor(a,b){if(this.signatures=void 0,this.message=void 0,void 0!==b)cx(b.length===a.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=b;else{const b=[];for(let c=0;c<a.header.numRequiredSignatures;c++)b.push(new Uint8Array(64));this.signatures=b}this.message=a}serialize(){let a=this.message.serialize(),b=[];cw(b,this.signatures.length);let c=bf.struct([bf.blob(b.length,"encodedSignaturesLength"),bf.seq(((a="signature")=>bf.blob(64,a))(),this.signatures.length,"signatures"),bf.blob(a.length,"serializedMessage")]),d=new Uint8Array(2048),e=c.encode({encodedSignaturesLength:new Uint8Array(b),signatures:this.signatures,serializedMessage:a},d);return d.slice(0,e)}static deserialize(a){let b=[...a],c=[],d=cv(b);for(let a=0;a<d;a++)c.push(new Uint8Array(cB(b,0,64)));return new cJ(cE.deserialize(new Uint8Array(b)),c)}sign(a){let b=this.message.serialize(),c=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(let d of a){let a=c.findIndex(a=>a.equals(d.publicKey));cx(a>=0,`Cannot sign with non signer key ${d.publicKey.toBase58()}`),this.signatures[a]=ci(b,d.secretKey)}}addSignature(a,b){cx(64===b.byteLength,"Signature must be 64 bytes long");let c=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(b=>b.equals(a));cx(c>=0,`Can not add signature; \`${a.toBase58()}\` is not required to sign this transaction`),this.signatures[c]=b}}let cK=new co("SysvarC1ock11111111111111111111111111111111");new co("SysvarEpochSchedu1e111111111111111111111111"),new co("Sysvar1nstructions1111111111111111111111111");let cL=new co("SysvarRecentB1ockHashes11111111111111111111"),cM=new co("SysvarRent111111111111111111111111111111111");new co("SysvarRewards111111111111111111111111111111"),new co("SysvarS1otHashes111111111111111111111111111"),new co("SysvarS1otHistory11111111111111111111111111");let cN=new co("SysvarStakeHistory1111111111111111111111111");class cO extends Error{constructor({action:a,signature:b,transactionMessage:c,logs:d}){let e;const f=d?`Logs: 
${JSON.stringify(d.slice(-10),null,2)}. `:"",g="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";switch(a){case"send":e=`Transaction ${b} resulted in an error. 
${c}. `+f+g;break;case"simulate":e=`Simulation failed. 
Message: ${c}. 
`+f+g;break;default:e=`Unknown action '${a}'`}super(e),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=b,this.transactionMessage=c,this.transactionLogs=d||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){let a=this.transactionLogs;if(null==a||"object"!=typeof a||!("then"in a))return a}async getLogs(a){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((b,c)=>{a.getTransaction(this.signature).then(a=>{if(a&&a.meta&&a.meta.logMessages){let c=a.meta.logMessages;this.transactionLogs=c,b(c)}else c(Error("Log messages not found"))}).catch(c)})),await this.transactionLogs}}class cP extends Error{constructor({code:a,message:b,data:c},d){super(null!=d?`${d}: ${b}`:b),this.code=void 0,this.data=void 0,this.code=a,this.data=c,this.name="SolanaJSONRPCError"}}async function cQ(a,b,c,d){let e,f=d&&{skipPreflight:d.skipPreflight,preflightCommitment:d.preflightCommitment||d.commitment,maxRetries:d.maxRetries,minContextSlot:d.minContextSlot},g=await a.sendTransaction(b,c,f);if(null!=b.recentBlockhash&&null!=b.lastValidBlockHeight)e=(await a.confirmTransaction({abortSignal:d?.abortSignal,signature:g,blockhash:b.recentBlockhash,lastValidBlockHeight:b.lastValidBlockHeight},d&&d.commitment)).value;else if(null!=b.minNonceContextSlot&&null!=b.nonceInfo){let{nonceInstruction:c}=b.nonceInfo,f=c.keys[0].pubkey;e=(await a.confirmTransaction({abortSignal:d?.abortSignal,minContextSlot:b.minNonceContextSlot,nonceAccountPubkey:f,nonceValue:b.nonceInfo.nonce,signature:g},d&&d.commitment)).value}else d?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),e=(await a.confirmTransaction(g,d&&d.commitment)).value;if(e.err){if(null!=g)throw new cO({action:"send",signature:g,transactionMessage:`Status: (${JSON.stringify(e)})`});throw Error(`Transaction ${g} failed (${JSON.stringify(e)})`)}return g}function cR(a){return new Promise(b=>setTimeout(b,a))}function cS(a,b){let c=a.layout.span>=0?a.layout.span:function a(b,c){let d=b=>{if(b.span>=0)return b.span;if("function"==typeof b.alloc)return b.alloc(c[b.property]);if("count"in b&&"elementLayout"in b){let a=c[b.property];if(Array.isArray(a))return a.length*d(b.elementLayout)}else if("fields"in b)return a({layout:b},c[b.property]);return 0},e=0;return b.layout.fields.forEach(a=>{e+=d(a)}),e}(a,b),d=u.Buffer.alloc(c),e=Object.assign({instruction:a.index},b);return a.layout.encode(e,d),d}let cT=bf.nu64("lamportsPerSignature"),cU=bf.struct([bf.u32("version"),bf.u32("state"),ct("authorizedPubkey"),ct("nonce"),bf.struct([cT],"feeCalculator")]),cV=cU.span;class cW{constructor(a){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=a.authorizedPubkey,this.nonce=a.nonce,this.feeCalculator=a.feeCalculator}static fromAccountData(a){let b=cU.decode(ck(a),0);return new cW({authorizedPubkey:new co(b.authorizedPubkey),nonce:new co(b.nonce).toString(),feeCalculator:b.feeCalculator})}}function cX(a){let b=(0,bf.blob)(8,a),c=b.decode.bind(b),d=b.encode.bind(b),e=((a={})=>(function(a,b){if(bi(a)!==bi(b))throw new bh(8078004);if(bi(a)&&bi(b)&&a.fixedSize!==b.fixedSize)throw new bh(8078005,{decoderFixedSize:b.fixedSize,encoderFixedSize:a.fixedSize});if(!bi(a)&&!bi(b)&&a.maxSize!==b.maxSize)throw new bh(8078006,{decoderMaxSize:b.maxSize,encoderMaxSize:a.maxSize});return{...b,...a,decode:b.decode,encode:a.encode,read:b.read,write:a.write}})(((a={})=>{var b,c;return Object.freeze({...c={fixedSize:(b={config:a,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(a,b,c)=>a.setBigUint64(0,BigInt(b),c),size:8}).size,write(a,c,d){b.range&&function(a,b,c,d){if(d<b||d>c)throw new bh(8078011,{codecDescription:a,max:c,min:b,value:d})}(b.name,b.range[0],b.range[1],a);let e=new ArrayBuffer(b.size);return b.set(new DataView(e),a,bk(b.config)),c.set(new Uint8Array(e),d),d+b.size}},encode:a=>{let b=new Uint8Array("fixedSize"in c?c.fixedSize:c.getSizeFromValue(a));return c.write(a,b,0),b}})})(a),((a={})=>{var b,c;return Object.freeze({...c={fixedSize:(b={config:a,get:(a,b)=>a.getBigUint64(0,b),name:"u64",size:8}).size,read(a,c=0){var d,e,f;let g,h;!function(a,b,c=0){if(b.length-c<=0)throw new bh(8078e3,{codecDescription:a})}(b.name,a,c),function(a,b,c,d=0){let e=c.length-d;if(e<b)throw new bh(8078001,{bytesLength:e,codecDescription:a,expected:b})}(b.name,b.size,a,c);let i=new DataView((d=a,e=c,f=b.size,g=d.byteOffset+(e??0),h=f??d.byteLength,d.buffer.slice(g,g+h)));return[b.get(i,bk(b.config)),c+b.size]}},decode:(a,b=0)=>c.read(a,b)[0]})})(a)))();return b.decode=(a,b)=>{let d=c(a,b);return e.decode(d)},b.encode=(a,b,c)=>d(e.encode(a),b,c),b}let cY=Object.freeze({Create:{index:0,layout:bf.struct([bf.u32("instruction"),bf.ns64("lamports"),bf.ns64("space"),ct("programId")])},Assign:{index:1,layout:bf.struct([bf.u32("instruction"),ct("programId")])},Transfer:{index:2,layout:bf.struct([bf.u32("instruction"),cX("lamports")])},CreateWithSeed:{index:3,layout:bf.struct([bf.u32("instruction"),ct("base"),cu("seed"),bf.ns64("lamports"),bf.ns64("space"),ct("programId")])},AdvanceNonceAccount:{index:4,layout:bf.struct([bf.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:bf.struct([bf.u32("instruction"),bf.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:bf.struct([bf.u32("instruction"),ct("authorized")])},AuthorizeNonceAccount:{index:7,layout:bf.struct([bf.u32("instruction"),ct("authorized")])},Allocate:{index:8,layout:bf.struct([bf.u32("instruction"),bf.ns64("space")])},AllocateWithSeed:{index:9,layout:bf.struct([bf.u32("instruction"),ct("base"),cu("seed"),bf.ns64("space"),ct("programId")])},AssignWithSeed:{index:10,layout:bf.struct([bf.u32("instruction"),ct("base"),cu("seed"),ct("programId")])},TransferWithSeed:{index:11,layout:bf.struct([bf.u32("instruction"),cX("lamports"),cu("seed"),ct("programId")])},UpgradeNonceAccount:{index:12,layout:bf.struct([bf.u32("instruction")])}});class cZ{static createAccount(a){let b=cS(cY.Create,{lamports:a.lamports,space:a.space,programId:ck(a.programId.toBuffer())});return new cH({keys:[{pubkey:a.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:a.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:b})}static transfer(a){let b,c;return"basePubkey"in a?(b=cS(cY.TransferWithSeed,{lamports:BigInt(a.lamports),seed:a.seed,programId:ck(a.programId.toBuffer())}),c=[{pubkey:a.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:a.basePubkey,isSigner:!0,isWritable:!1},{pubkey:a.toPubkey,isSigner:!1,isWritable:!0}]):(b=cS(cY.Transfer,{lamports:BigInt(a.lamports)}),c=[{pubkey:a.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:a.toPubkey,isSigner:!1,isWritable:!0}]),new cH({keys:c,programId:this.programId,data:b})}static assign(a){let b,c;return"basePubkey"in a?(b=cS(cY.AssignWithSeed,{base:ck(a.basePubkey.toBuffer()),seed:a.seed,programId:ck(a.programId.toBuffer())}),c=[{pubkey:a.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:a.basePubkey,isSigner:!0,isWritable:!1}]):(b=cS(cY.Assign,{programId:ck(a.programId.toBuffer())}),c=[{pubkey:a.accountPubkey,isSigner:!0,isWritable:!0}]),new cH({keys:c,programId:this.programId,data:b})}static createAccountWithSeed(a){let b=cS(cY.CreateWithSeed,{base:ck(a.basePubkey.toBuffer()),seed:a.seed,lamports:a.lamports,space:a.space,programId:ck(a.programId.toBuffer())}),c=[{pubkey:a.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:a.newAccountPubkey,isSigner:!1,isWritable:!0}];return a.basePubkey.equals(a.fromPubkey)||c.push({pubkey:a.basePubkey,isSigner:!0,isWritable:!1}),new cH({keys:c,programId:this.programId,data:b})}static createNonceAccount(a){let b=new cI;"basePubkey"in a&&"seed"in a?b.add(cZ.createAccountWithSeed({fromPubkey:a.fromPubkey,newAccountPubkey:a.noncePubkey,basePubkey:a.basePubkey,seed:a.seed,lamports:a.lamports,space:cV,programId:this.programId})):b.add(cZ.createAccount({fromPubkey:a.fromPubkey,newAccountPubkey:a.noncePubkey,lamports:a.lamports,space:cV,programId:this.programId}));let c={noncePubkey:a.noncePubkey,authorizedPubkey:a.authorizedPubkey};return b.add(this.nonceInitialize(c)),b}static nonceInitialize(a){let b=cS(cY.InitializeNonceAccount,{authorized:ck(a.authorizedPubkey.toBuffer())});return new cH({keys:[{pubkey:a.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:cL,isSigner:!1,isWritable:!1},{pubkey:cM,isSigner:!1,isWritable:!1}],programId:this.programId,data:b})}static nonceAdvance(a){let b=cS(cY.AdvanceNonceAccount);return new cH({keys:[{pubkey:a.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:cL,isSigner:!1,isWritable:!1},{pubkey:a.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:b})}static nonceWithdraw(a){let b=cS(cY.WithdrawNonceAccount,{lamports:a.lamports});return new cH({keys:[{pubkey:a.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:a.toPubkey,isSigner:!1,isWritable:!0},{pubkey:cL,isSigner:!1,isWritable:!1},{pubkey:cM,isSigner:!1,isWritable:!1},{pubkey:a.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:b})}static nonceAuthorize(a){let b=cS(cY.AuthorizeNonceAccount,{authorized:ck(a.newAuthorizedPubkey.toBuffer())});return new cH({keys:[{pubkey:a.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:a.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:b})}static allocate(a){let b,c;return"basePubkey"in a?(b=cS(cY.AllocateWithSeed,{base:ck(a.basePubkey.toBuffer()),seed:a.seed,space:a.space,programId:ck(a.programId.toBuffer())}),c=[{pubkey:a.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:a.basePubkey,isSigner:!0,isWritable:!1}]):(b=cS(cY.Allocate,{space:a.space}),c=[{pubkey:a.accountPubkey,isSigner:!0,isWritable:!0}]),new cH({keys:c,programId:this.programId,data:b})}}cZ.programId=new co("11111111111111111111111111111111");class c${static getMinNumSignatures(a){return 2*(Math.ceil(a/c$.chunkSize)+1+1)}static async load(a,b,c,d,e){{let f=await a.getMinimumBalanceForRentExemption(e.length),g=await a.getAccountInfo(c.publicKey,"confirmed"),h=null;if(null!==g){if(g.executable)return console.error("Program load failed, account is already executable"),!1;g.data.length!==e.length&&(h=h||new cI).add(cZ.allocate({accountPubkey:c.publicKey,space:e.length})),g.owner.equals(d)||(h=h||new cI).add(cZ.assign({accountPubkey:c.publicKey,programId:d})),g.lamports<f&&(h=h||new cI).add(cZ.transfer({fromPubkey:b.publicKey,toPubkey:c.publicKey,lamports:f-g.lamports}))}else h=new cI().add(cZ.createAccount({fromPubkey:b.publicKey,newAccountPubkey:c.publicKey,lamports:f>0?f:1,space:e.length,programId:d}));null!==h&&await cQ(a,h,[b,c],{commitment:"confirmed"})}let f=bf.struct([bf.u32("instruction"),bf.u32("offset"),bf.u32("bytesLength"),bf.u32("bytesLengthPadding"),bf.seq(bf.u8("byte"),bf.offset(bf.u32(),-8),"bytes")]),g=c$.chunkSize,h=0,i=e,j=[];for(;i.length>0;){let e=i.slice(0,g),k=u.Buffer.alloc(g+16);f.encode({instruction:0,offset:h,bytes:e,bytesLength:0,bytesLengthPadding:0},k);let l=new cI().add({keys:[{pubkey:c.publicKey,isSigner:!0,isWritable:!0}],programId:d,data:k});j.push(cQ(a,l,[b,c],{commitment:"confirmed"})),a._rpcEndpoint.includes("solana.com")&&await cR(250),h+=g,i=i.slice(g)}await Promise.all(j);{let e=bf.struct([bf.u32("instruction")]),f=u.Buffer.alloc(e.span);e.encode({instruction:1},f);let g=new cI().add({keys:[{pubkey:c.publicKey,isSigner:!0,isWritable:!0},{pubkey:cM,isSigner:!1,isWritable:!1}],programId:d,data:f}),h="processed",i=await a.sendTransaction(g,[b,c],{preflightCommitment:h}),{context:j,value:k}=await a.confirmTransaction({signature:i,lastValidBlockHeight:g.lastValidBlockHeight,blockhash:g.recentBlockhash},h);if(k.err)throw Error(`Transaction ${i} failed (${JSON.stringify(k)})`);for(;;){try{if(await a.getSlot({commitment:h})>j.slot)break}catch{}await new Promise(a=>setTimeout(a,Math.round(200)))}}return!0}}function c_(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}c$.chunkSize=932,new co("BPFLoader2111111111111111111111111111111111");var c0={exports:{}};function c1(){return m?l:(m=1,l={CURRENT_ID:Symbol("agentkeepalive#currentId"),CREATE_ID:Symbol("agentkeepalive#createId"),INIT_SOCKET:Symbol("agentkeepalive#initSocket"),CREATE_HTTPS_CONNECTION:Symbol("agentkeepalive#createHttpsConnection"),SOCKET_CREATED_TIME:Symbol("agentkeepalive#socketCreatedTime"),SOCKET_NAME:Symbol("agentkeepalive#socketName"),SOCKET_REQUEST_COUNT:Symbol("agentkeepalive#socketRequestCount"),SOCKET_REQUEST_FINISHED_COUNT:Symbol("agentkeepalive#socketRequestFinishedCount")})}function c2(){if(o)return n;o=1;let a=bm.default.Agent,b=function(){if(k)return j;k=1;var a=bl.default,b=function(){if(i)return h;i=1;function a(a,b,c,d){return Math.round(a/c)+" "+d+(b>=1.5*c?"s":"")}return h=function(b,c){c=c||{};var d,e,f,g,h=typeof b;if("string"===h&&b.length>0){var i=b;if(!((i=String(i)).length>100)){var j=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(i);if(j){var k=parseFloat(j[1]);switch((j[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*k;case"weeks":case"week":case"w":return 6048e5*k;case"days":case"day":case"d":return 864e5*k;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*k;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*k;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*k;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return k;default:break}}}return}if("number"===h&&isFinite(b)){return c.long?(e=Math.abs(d=b))>=864e5?a(d,e,864e5,"day"):e>=36e5?a(d,e,36e5,"hour"):e>=6e4?a(d,e,6e4,"minute"):e>=1e3?a(d,e,1e3,"second"):d+" ms":(g=Math.abs(f=b))>=864e5?Math.round(f/864e5)+"d":g>=36e5?Math.round(f/36e5)+"h":g>=6e4?Math.round(f/6e4)+"m":g>=1e3?Math.round(f/1e3)+"s":f+"ms"}throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(b))}}();return j=function(c){if("number"==typeof c)return c;var d=b(c);return void 0===d&&console.warn(Error(a.format("humanize-ms(%j) result undefined",c)).stack),d}}(),c=bl.default.debuglog("agentkeepalive"),{INIT_SOCKET:d,CURRENT_ID:e,CREATE_ID:f,SOCKET_CREATED_TIME:g,SOCKET_NAME:l,SOCKET_REQUEST_COUNT:m,SOCKET_REQUEST_FINISHED_COUNT:p}=c1(),q=1,r=parseInt(process.version.split(".",1)[0].substring(1));function s(a){console.log("[agentkeepalive:deprecated] %s",a)}function t(a){return a.timeout||a._idleTimeout}function u(a){let b={};for(let c in a)b[c]=a[c].length;return b}return r>=11&&r<=12?q=2:r>=13&&(q=3),n=class extends a{constructor(a){(a=a||{}).keepAlive=!1!==a.keepAlive,void 0===a.freeSocketTimeout&&(a.freeSocketTimeout=4e3),a.keepAliveTimeout&&(s("options.keepAliveTimeout is deprecated, please use options.freeSocketTimeout instead"),a.freeSocketTimeout=a.keepAliveTimeout,delete a.keepAliveTimeout),a.freeSocketKeepAliveTimeout&&(s("options.freeSocketKeepAliveTimeout is deprecated, please use options.freeSocketTimeout instead"),a.freeSocketTimeout=a.freeSocketKeepAliveTimeout,delete a.freeSocketKeepAliveTimeout),void 0===a.timeout&&(a.timeout=Math.max(2*a.freeSocketTimeout,8e3)),a.timeout=b(a.timeout),a.freeSocketTimeout=b(a.freeSocketTimeout),a.socketActiveTTL=a.socketActiveTTL?b(a.socketActiveTTL):0,super(a),this[e]=0,this.createSocketCount=0,this.createSocketCountLastCheck=0,this.createSocketErrorCount=0,this.createSocketErrorCountLastCheck=0,this.closeSocketCount=0,this.closeSocketCountLastCheck=0,this.errorSocketCount=0,this.errorSocketCountLastCheck=0,this.requestCount=0,this.requestCountLastCheck=0,this.timeoutSocketCount=0,this.timeoutSocketCountLastCheck=0,this.on("free",a=>{let b=this.calcSocketTimeout(a);b>0&&a.timeout!==b&&a.setTimeout(b)})}get freeSocketKeepAliveTimeout(){return s("agent.freeSocketKeepAliveTimeout is deprecated, please use agent.options.freeSocketTimeout instead"),this.options.freeSocketTimeout}get timeout(){return s("agent.timeout is deprecated, please use agent.options.timeout instead"),this.options.timeout}get socketActiveTTL(){return s("agent.socketActiveTTL is deprecated, please use agent.options.socketActiveTTL instead"),this.options.socketActiveTTL}calcSocketTimeout(a){let b=this.options.freeSocketTimeout,c=this.options.socketActiveTTL;if(c){let d=c-(Date.now()-a[g]);if(d<=0)return d;b&&d<b&&(b=d)}if(b)return a.freeSocketTimeout||a.freeSocketKeepAliveTimeout||b}keepSocketAlive(a){let b=super.keepSocketAlive(a);if(!b)return b;let d=this.calcSocketTimeout(a);return void 0===d||(d<=0?(c("%s(requests: %s, finished: %s) free but need to destroy by TTL, request count %s, diff is %s",a[l],a[m],a[p],d),!1):(a.timeout!==d&&a.setTimeout(d),!0))}reuseSocket(...a){super.reuseSocket(...a);let b=a[0];a[1].reusedSocket=!0;let d=this.options.timeout;t(b)!==d&&(b.setTimeout(d),c("%s reset timeout to %sms",b[l],d)),b[m]++,c("%s(requests: %s, finished: %s) reuse on addRequest, timeout %sms",b[l],b[m],b[p],t(b))}[f](){let a=this[e]++;return this[e]===Number.MAX_SAFE_INTEGER&&(this[e]=0),a}[d](a,b){b.timeout&&(t(a)||a.setTimeout(b.timeout)),this.options.keepAlive&&a.setNoDelay(!0),this.createSocketCount++,this.options.socketActiveTTL&&(a[g]=Date.now()),a[l]=`sock[${this[f]()}#${b._agentKey}]`.split("-----BEGIN",1)[0],a[m]=1,a[p]=0,function(a,b,d){function e(){if(!b._httpMessage&&1===b[m])return;b[p]++,a.requestCount++,c("%s(requests: %s, finished: %s) free",b[l],b[m],b[p]);let e=a.getName(d);b.writable&&a.requests[e]&&a.requests[e].length&&(b[m]++,c("%s(requests: %s, finished: %s) will be reuse on agent free event",b[l],b[m],b[p]))}function f(d){c("%s(requests: %s, finished: %s) close, isError: %s",b[l],b[m],b[p],d),a.closeSocketCount++}function g(){let e=b.listeners("timeout").length,f=t(b),g=b._httpMessage,h=g&&g.listeners("timeout").length||0;c("%s(requests: %s, finished: %s) timeout after %sms, listeners %s, defaultTimeoutListenerCount %s, hasHttpRequest %s, HttpRequest timeoutListenerCount %s",b[l],b[m],b[p],f,e,q,!!g,h),c.enabled&&c("timeout listeners: %s",b.listeners("timeout").map(a=>a.name).join(", ")),a.timeoutSocketCount++;let i=a.getName(d);if(a.freeSockets[i]&&-1!==a.freeSockets[i].indexOf(b))b.destroy(),a.removeSocket(b,d),c("%s is free, destroy quietly",b[l]);else if(0===h){let e=Error("Socket timeout");e.code="ERR_SOCKET_TIMEOUT",e.timeout=f,b.destroy(e),a.removeSocket(b,d),c("%s destroy with timeout error",b[l])}}function h(d){let e=b.listeners("error").length;c("%s(requests: %s, finished: %s) error: %s, listenerCount: %s",b[l],b[m],b[p],d,e),a.errorSocketCount++,1===e&&(c("%s emit uncaught error event",b[l]),b.removeListener("error",h),b.emit("error",d))}c("%s create, timeout %sms",b[l],t(b)),b.on("free",e),b.on("close",f),b.on("timeout",g),b.on("error",h),b.on("agentRemove",function a(){c("%s(requests: %s, finished: %s) agentRemove",b[l],b[m],b[p]),b.removeListener("close",f),b.removeListener("error",h),b.removeListener("free",e),b.removeListener("timeout",g),b.removeListener("agentRemove",a)})}(this,a,b)}createConnection(a,b){let c=!1,e=(e,f)=>{if(!c){if(c=!0,e)return this.createSocketErrorCount++,b(e);this[d](f,a),b(e,f)}},f=super.createConnection(a,e);return f&&e(null,f),f}get statusChanged(){let a=this.createSocketCount!==this.createSocketCountLastCheck||this.createSocketErrorCount!==this.createSocketErrorCountLastCheck||this.closeSocketCount!==this.closeSocketCountLastCheck||this.errorSocketCount!==this.errorSocketCountLastCheck||this.timeoutSocketCount!==this.timeoutSocketCountLastCheck||this.requestCount!==this.requestCountLastCheck;return a&&(this.createSocketCountLastCheck=this.createSocketCount,this.createSocketErrorCountLastCheck=this.createSocketErrorCount,this.closeSocketCountLastCheck=this.closeSocketCount,this.errorSocketCountLastCheck=this.errorSocketCount,this.timeoutSocketCountLastCheck=this.timeoutSocketCount,this.requestCountLastCheck=this.requestCount),a}getCurrentStatus(){return{createSocketCount:this.createSocketCount,createSocketErrorCount:this.createSocketErrorCount,closeSocketCount:this.closeSocketCount,errorSocketCount:this.errorSocketCount,timeoutSocketCount:this.timeoutSocketCount,requestCount:this.requestCount,freeSockets:u(this.freeSockets),sockets:u(this.sockets),requests:u(this.requests)}}}}var c3=(r||(r=1,c0.exports=c2(),c0.exports.HttpsAgent=function(){if(q)return p;q=1;let a=bn.default.Agent,b=c2(),{INIT_SOCKET:c,CREATE_HTTPS_CONNECTION:d}=c1();class e extends b{constructor(a){super(a),this.defaultPort=443,this.protocol="https:",this.maxCachedSessions=this.options.maxCachedSessions,void 0===this.maxCachedSessions&&(this.maxCachedSessions=100),this._sessionCache={map:{},list:[]}}createConnection(a,b){let e=this[d](a,b);return this[c](e,a),e}}return e.prototype[d]=a.prototype.createConnection,["getName","_getSession","_cacheSession","_evictSession"].forEach(function(b){"function"==typeof a.prototype[b]&&(e.prototype[b]=a.prototype[b])}),p=e}(),c0.exports.constants=c1()),c0.exports),c4=c_(c3),c5=c_(function(){if(t)return s;t=1;var a=Object.prototype.toString,b=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b};return s=function(c){var d=function c(d,e){var f,g,h,i,j,k,l;if(!0===d)return"true";if(!1===d)return"false";switch(typeof d){case"object":if(null===d)return null;if(d.toJSON&&"function"==typeof d.toJSON)return c(d.toJSON(),e);if("[object Array]"===(l=a.call(d))){for(f=0,h="[",g=d.length-1;f<g;f++)h+=c(d[f],!0)+",";return g>-1&&(h+=c(d[f],!0)),h+"]"}if("[object Object]"!==l)return JSON.stringify(d);for(g=(i=b(d).sort()).length,h="",f=0;f<g;)void 0!==(k=c(d[j=i[f]],!1))&&(h&&(h+=","),h+=JSON.stringify(j)+":"+k),f++;return"{"+h+"}";case"function":case"undefined":return e?null:void 0;case"string":return JSON.stringify(d);default:return isFinite(d)?d:null}}(c,!1);if(void 0!==d)return""+d}}());function c6(a){let b=0;for(;a>1;)a/=2,b++;return b}class c7{constructor(a,b,c,d,e){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=a,this.leaderScheduleSlotOffset=b,this.warmup=c,this.firstNormalEpoch=d,this.firstNormalSlot=e}getEpoch(a){return this.getEpochAndSlotIndex(a)[0]}getEpochAndSlotIndex(a){if(a<this.firstNormalSlot){var b;let c=c6(0===(b=a+32+1)?1:(b--,b|=b>>1,b|=b>>2,b|=b>>4,b|=b>>8,b|=b>>16,(b|=b>>32)+1))-c6(32)-1,d=this.getSlotsInEpoch(c);return[c,a-(d-32)]}{let b=a-this.firstNormalSlot,c=Math.floor(b/this.slotsPerEpoch);return[this.firstNormalEpoch+c,b%this.slotsPerEpoch]}}getFirstSlotInEpoch(a){return a<=this.firstNormalEpoch?(Math.pow(2,a)-1)*32:(a-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(a){return this.getFirstSlotInEpoch(a)+this.getSlotsInEpoch(a)-1}getSlotsInEpoch(a){return a<this.firstNormalEpoch?Math.pow(2,a+c6(32)):this.slotsPerEpoch}}var c8="function"==typeof globalThis.fetch?globalThis.fetch:async function(a,b){let c="string"==typeof a&&"//"===a.slice(0,2)?"https:"+a:a;return await bN.default(c,b)};class c9 extends bU{constructor(a,b,c){super(a=>{let c=new bQ(a,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...b});return"socket"in c?this.underlyingSocket=c.socket:this.underlyingSocket=c,c},a,b,c),this.underlyingSocket=void 0}call(...a){let b=this.underlyingSocket?.readyState;return 1===b?super.call(...a):Promise.reject(Error("Tried to call a JSON-RPC method `"+a[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+b+")"))}notify(...a){let b=this.underlyingSocket?.readyState;return 1===b?super.notify(...a):Promise.reject(Error("Tried to send a JSON-RPC notification `"+a[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+b+")"))}}class da{constructor(a){this.key=void 0,this.state=void 0,this.key=a.key,this.state=a.state}isActive(){let a=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===a}static deserialize(a){let b=function(a,b){let c;try{c=a.layout.decode(b)}catch(a){throw Error("invalid instruction; "+a)}if(c.typeIndex!==a.index)throw Error(`invalid account data; account type mismatch ${c.typeIndex} != ${a.index}`);return c}(db,a),c=a.length-56;cx(c>=0,"lookup table is invalid"),cx(c%32==0,"lookup table is invalid");let{addresses:d}=bf.struct([bf.seq(ct(),c/32,"addresses")]).decode(a.slice(56));return{deactivationSlot:b.deactivationSlot,lastExtendedSlot:b.lastExtendedSlot,lastExtendedSlotStartIndex:b.lastExtendedStartIndex,authority:0!==b.authority.length?new co(b.authority[0]):void 0,addresses:d.map(a=>new co(a))}}}let db={index:1,layout:bf.struct([bf.u32("typeIndex"),cX("deactivationSlot"),bf.nu64("lastExtendedSlot"),bf.u8("lastExtendedStartIndex"),bf.u8(),bf.seq(ct(),bf.offset(bf.u8(),-1),"authority")])},dc=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i,dd=bL(bA(co),bG(),a=>new co(a)),de=bH([bG(),bB("base64")]),df=bL(bA(u.Buffer),de,a=>u.Buffer.from(a[0],"base64"));function dg(a){let b,c;if("string"==typeof a)b=a;else if(a){let{commitment:d,...e}=a;b=d,c=e}return{commitment:b,config:c}}function dh(a){return a.map(a=>"memcmp"in a?{...a,memcmp:{...a.memcmp,encoding:a.memcmp.encoding??"base58"}}:a)}function di(a){return bJ([bI({jsonrpc:bB("2.0"),id:bG(),result:a}),bI({jsonrpc:bB("2.0"),id:bG(),error:bI({code:bK(),message:bG(),data:bE(bx("any",()=>!0))})})])}let dj=di(bK());function dk(a){return bL(di(a),dj,b=>"error"in b?b:{...b,result:bv(b.result,a)})}function dl(a){return dk(bI({context:bI({slot:bD()}),value:a}))}function dm(a){return bI({context:bI({slot:bD()}),value:a})}function dn(a,b){return 0===a?new cD({header:b.header,staticAccountKeys:b.accountKeys.map(a=>new co(a)),recentBlockhash:b.recentBlockhash,compiledInstructions:b.instructions.map(a=>({programIdIndex:a.programIdIndex,accountKeyIndexes:a.accounts,data:bc.default.decode(a.data)})),addressTableLookups:b.addressTableLookups}):new cC(b)}let dp=bI({foundation:bD(),foundationTerm:bD(),initial:bD(),taper:bD(),terminal:bD()}),dq=dk(by(bC(bI({epoch:bD(),effectiveSlot:bD(),amount:bD(),postBalance:bD(),commission:bE(bC(bD()))})))),dr=by(bI({slot:bD(),prioritizationFee:bD()})),ds=bI({total:bD(),validator:bD(),foundation:bD(),epoch:bD()}),dt=bI({epoch:bD(),slotIndex:bD(),slotsInEpoch:bD(),absoluteSlot:bD(),blockHeight:bE(bD()),transactionCount:bE(bD())}),du=bI({slotsPerEpoch:bD(),leaderScheduleSlotOffset:bD(),warmup:bz(),firstNormalEpoch:bD(),firstNormalSlot:bD()}),dv=bF(bG(),by(bD())),dw=bC(bJ([bI({}),bG()])),dx=bI({err:dw}),dy=bB("receivedSignature"),dz=bI({"solana-core":bG(),"feature-set":bE(bD())}),dA=bI({program:bG(),programId:dd,parsed:bK()}),dB=bI({programId:dd,accounts:by(dd),data:bG()}),dC=dl(bI({err:bC(bJ([bI({}),bG()])),logs:bC(by(bG())),accounts:bE(bC(by(bC(bI({executable:bz(),owner:bG(),lamports:bD(),data:by(bG()),rentEpoch:bE(bD())}))))),unitsConsumed:bE(bD()),returnData:bE(bC(bI({programId:bG(),data:bH([bG(),bB("base64")])}))),innerInstructions:bE(bC(by(bI({index:bD(),instructions:by(bJ([dA,dB]))}))))})),dD=dl(bI({byIdentity:bF(bG(),by(bD())),range:bI({firstSlot:bD(),lastSlot:bD()})})),dE=dk(dp),dF=dk(ds),dG=dk(dr),dH=dk(dt),dI=dk(du),dJ=dk(dv),dK=dk(bD()),dL=dl(bI({total:bD(),circulating:bD(),nonCirculating:bD(),nonCirculatingAccounts:by(dd)})),dM=bI({amount:bG(),uiAmount:bC(bD()),decimals:bD(),uiAmountString:bE(bG())}),dN=dl(by(bI({address:dd,amount:bG(),uiAmount:bC(bD()),decimals:bD(),uiAmountString:bE(bG())}))),dO=dl(by(bI({pubkey:dd,account:bI({executable:bz(),owner:dd,lamports:bD(),data:df,rentEpoch:bD()})}))),dP=bI({program:bG(),parsed:bK(),space:bD()}),dQ=dl(by(bI({pubkey:dd,account:bI({executable:bz(),owner:dd,lamports:bD(),data:dP,rentEpoch:bD()})}))),dR=dl(by(bI({lamports:bD(),address:dd}))),dS=bI({executable:bz(),owner:dd,lamports:bD(),data:df,rentEpoch:bD()}),dT=bI({pubkey:dd,account:dS}),dU=bL(bJ([bA(u.Buffer),dP]),bJ([de,dP]),a=>Array.isArray(a)?bv(a,df):a),dV=bI({executable:bz(),owner:dd,lamports:bD(),data:dU,rentEpoch:bD()}),dW=bI({pubkey:dd,account:dV}),dX=bI({state:bJ([bB("active"),bB("inactive"),bB("activating"),bB("deactivating")]),active:bD(),inactive:bD()}),dY=dk(by(bI({signature:bG(),slot:bD(),err:dw,memo:bC(bG()),blockTime:bE(bC(bD()))}))),dZ=dk(by(bI({signature:bG(),slot:bD(),err:dw,memo:bC(bG()),blockTime:bE(bC(bD()))}))),d$=bI({subscription:bD(),result:dm(dS)}),d_=bI({pubkey:dd,account:dS}),d0=bI({subscription:bD(),result:dm(d_)}),d1=bI({parent:bD(),slot:bD(),root:bD()}),d2=bI({subscription:bD(),result:d1}),d3=bJ([bI({type:bJ([bB("firstShredReceived"),bB("completed"),bB("optimisticConfirmation"),bB("root")]),slot:bD(),timestamp:bD()}),bI({type:bB("createdBank"),parent:bD(),slot:bD(),timestamp:bD()}),bI({type:bB("frozen"),slot:bD(),timestamp:bD(),stats:bI({numTransactionEntries:bD(),numSuccessfulTransactions:bD(),numFailedTransactions:bD(),maxTransactionsPerEntry:bD()})}),bI({type:bB("dead"),slot:bD(),timestamp:bD(),err:bG()})]),d4=bI({subscription:bD(),result:d3}),d5=bI({subscription:bD(),result:dm(bJ([dx,dy]))}),d6=bI({subscription:bD(),result:bD()}),d7=bI({pubkey:bG(),gossip:bC(bG()),tpu:bC(bG()),rpc:bC(bG()),version:bC(bG())}),d8=bI({votePubkey:bG(),nodePubkey:bG(),activatedStake:bD(),epochVoteAccount:bz(),epochCredits:by(bH([bD(),bD(),bD()])),commission:bD(),lastVote:bD(),rootSlot:bC(bD())}),d9=dk(bI({current:by(d8),delinquent:by(d8)})),ea=bJ([bB("processed"),bB("confirmed"),bB("finalized")]),eb=bI({slot:bD(),confirmations:bC(bD()),err:dw,confirmationStatus:bE(ea)}),ec=dl(by(bC(eb))),ed=dk(bD()),ee=bI({accountKey:dd,writableIndexes:by(bD()),readonlyIndexes:by(bD())}),ef=bI({signatures:by(bG()),message:bI({accountKeys:by(bG()),header:bI({numRequiredSignatures:bD(),numReadonlySignedAccounts:bD(),numReadonlyUnsignedAccounts:bD()}),instructions:by(bI({accounts:by(bD()),data:bG(),programIdIndex:bD()})),recentBlockhash:bG(),addressTableLookups:bE(by(ee))})}),eg=bI({pubkey:dd,signer:bz(),writable:bz(),source:bE(bJ([bB("transaction"),bB("lookupTable")]))}),eh=bI({accountKeys:by(eg),signatures:by(bG())}),ei=bI({parsed:bK(),program:bG(),programId:dd}),ej=bI({accounts:by(dd),data:bG(),programId:dd}),ek=bL(bJ([ej,ei]),bJ([bI({parsed:bK(),program:bG(),programId:bG()}),bI({accounts:by(bG()),data:bG(),programId:bG()})]),a=>"accounts"in a?bv(a,ej):bv(a,ei)),el=bI({signatures:by(bG()),message:bI({accountKeys:by(eg),instructions:by(ek),recentBlockhash:bG(),addressTableLookups:bE(bC(by(ee)))})}),em=bI({accountIndex:bD(),mint:bG(),owner:bE(bG()),programId:bE(bG()),uiTokenAmount:dM}),en=bI({writable:by(dd),readonly:by(dd)}),eo=bI({err:dw,fee:bD(),innerInstructions:bE(bC(by(bI({index:bD(),instructions:by(bI({accounts:by(bD()),data:bG(),programIdIndex:bD()}))})))),preBalances:by(bD()),postBalances:by(bD()),logMessages:bE(bC(by(bG()))),preTokenBalances:bE(bC(by(em))),postTokenBalances:bE(bC(by(em))),loadedAddresses:bE(en),computeUnitsConsumed:bE(bD()),costUnits:bE(bD())}),ep=bI({err:dw,fee:bD(),innerInstructions:bE(bC(by(bI({index:bD(),instructions:by(ek)})))),preBalances:by(bD()),postBalances:by(bD()),logMessages:bE(bC(by(bG()))),preTokenBalances:bE(bC(by(em))),postTokenBalances:bE(bC(by(em))),loadedAddresses:bE(en),computeUnitsConsumed:bE(bD()),costUnits:bE(bD())}),eq=bJ([bB(0),bB("legacy")]),er=bI({pubkey:bG(),lamports:bD(),postBalance:bC(bD()),rewardType:bC(bG()),commission:bE(bC(bD()))}),es=dk(bC(bI({blockhash:bG(),previousBlockhash:bG(),parentSlot:bD(),transactions:by(bI({transaction:ef,meta:bC(eo),version:bE(eq)})),rewards:bE(by(er)),blockTime:bC(bD()),blockHeight:bC(bD())}))),et=dk(bC(bI({blockhash:bG(),previousBlockhash:bG(),parentSlot:bD(),rewards:bE(by(er)),blockTime:bC(bD()),blockHeight:bC(bD())}))),eu=dk(bC(bI({blockhash:bG(),previousBlockhash:bG(),parentSlot:bD(),transactions:by(bI({transaction:eh,meta:bC(eo),version:bE(eq)})),rewards:bE(by(er)),blockTime:bC(bD()),blockHeight:bC(bD())}))),ev=dk(bC(bI({blockhash:bG(),previousBlockhash:bG(),parentSlot:bD(),transactions:by(bI({transaction:el,meta:bC(ep),version:bE(eq)})),rewards:bE(by(er)),blockTime:bC(bD()),blockHeight:bC(bD())}))),ew=dk(bC(bI({blockhash:bG(),previousBlockhash:bG(),parentSlot:bD(),transactions:by(bI({transaction:eh,meta:bC(ep),version:bE(eq)})),rewards:bE(by(er)),blockTime:bC(bD()),blockHeight:bC(bD())}))),ex=dk(bC(bI({blockhash:bG(),previousBlockhash:bG(),parentSlot:bD(),rewards:bE(by(er)),blockTime:bC(bD()),blockHeight:bC(bD())}))),ey=dk(bC(bI({blockhash:bG(),previousBlockhash:bG(),parentSlot:bD(),transactions:by(bI({transaction:ef,meta:bC(eo)})),rewards:bE(by(er)),blockTime:bC(bD())}))),ez=dk(bC(bI({blockhash:bG(),previousBlockhash:bG(),parentSlot:bD(),signatures:by(bG()),blockTime:bC(bD())}))),eA=dk(bC(bI({slot:bD(),meta:bC(eo),blockTime:bE(bC(bD())),transaction:ef,version:bE(eq)}))),eB=dk(bC(bI({slot:bD(),transaction:el,meta:bC(ep),blockTime:bE(bC(bD())),version:bE(eq)}))),eC=dl(bI({blockhash:bG(),lastValidBlockHeight:bD()})),eD=dl(bz()),eE=dk(by(bI({slot:bD(),numTransactions:bD(),numSlots:bD(),samplePeriodSecs:bD()}))),eF=dl(bC(bI({feeCalculator:bI({lamportsPerSignature:bD()})}))),eG=dk(bG()),eH=dk(bG()),eI=bI({err:dw,logs:by(bG()),signature:bG()}),eJ=bI({result:dm(eI),subscription:bD()}),eK={"solana-client":"js/1.0.0-maintenance"};class eL{constructor(a,b){var c;let d,e,f,g,h,i;this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{let a={};return async b=>{let{commitment:c,config:d}=dg(b),e=this._buildArgs([],c,void 0,d),f=c5(e);return a[f]=a[f]??(async()=>{try{let a=await this._rpcRequest("getBlockHeight",e),b=bv(a,dk(bD()));if("error"in b)throw new cP(b.error,"failed to get block height information");return b.result}finally{delete a[f]}})(),await a[f]}})(),b&&"string"==typeof b?this._commitment=b:b&&(this._commitment=b.commitment,this._confirmTransactionInitialTimeout=b.confirmTransactionInitialTimeout,d=b.wsEndpoint,e=b.httpHeaders,f=b.fetch,g=b.fetchMiddleware,h=b.disableRetryOnRateLimit,i=b.httpAgent),this._rpcEndpoint=function(a){if(!1===/^https?:/.test(a))throw TypeError("Endpoint URL must start with `http:` or `https:`.");return a}(a),this._rpcWsEndpoint=d||function(a){let b=a.match(dc);if(null==b)throw TypeError(`Failed to validate endpoint URL \`${a}\``);let[c,d,e,f]=b,g=a.startsWith("https:")?"wss:":"ws:",h=null==e?null:parseInt(e.slice(1),10),i=null==h?"":`:${h+1}`;return`${g}//${d}${i}${f}`}(a),this._rpcClient=function(a,b,c,d,e,f){let g,h,i=c||c8;if(null==f){let b={freeSocketTimeout:19e3,keepAlive:!0,maxSockets:25};g=a.startsWith("https:")?new c3.HttpsAgent(b):new c4(b)}else if(!1!==f){let b=a.startsWith("https:");if(!b||f instanceof bn.Agent){if(!b&&f instanceof bn.Agent)throw Error("The endpoint `"+a+"` can only be paired with an `http.Agent`. You have, instead, supplied an `https.Agent` through `httpAgent`.")}else throw Error("The endpoint `"+a+"` can only be paired with an `https.Agent`. You have, instead, supplied an `http.Agent` through `httpAgent`.");g=f}return d&&(h=async(a,b)=>{let c=await new Promise((c,e)=>{try{d(a,b,(a,b)=>c([a,b]))}catch(a){e(a)}});return await i(...c)}),new bM.default(async(c,d)=>{let f={method:"POST",body:c,agent:g,headers:Object.assign({"Content-Type":"application/json"},b||{},eK)};try{let b,c=5,g=500;for(;(b=h?await h(a,f):await i(a,f),429===b.status&&!0!==e)&&(c-=1,0!==c);){;console.error(`Server responded with ${b.status} ${b.statusText}.  Retrying after ${g}ms delay...`),await cR(g),g*=2}let j=await b.text();b.ok?d(null,j):d(Error(`${b.status} ${b.statusText}: ${j}`))}catch(a){a instanceof Error&&d(a)}},{})}(a,e,f,g,h,i),this._rpcRequest=(c=this._rpcClient,(a,b)=>new Promise((d,e)=>{c.request(a,b,(a,b)=>{a?e(a):d(b)})})),this._rpcBatchRequest=function(a){return b=>new Promise((c,d)=>{0===b.length&&c([]);let e=b.map(b=>a.request(b.methodName,b.args));a.request(e,(a,b)=>{a?d(a):c(b)})})}(this._rpcClient),this._rpcWebSocket=new c9(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(a,b){let{commitment:c,config:d}=dg(b),e=this._buildArgs([a.toBase58()],c,void 0,d),f=bv(await this._rpcRequest("getBalance",e),dl(bD()));if("error"in f)throw new cP(f.error,`failed to get balance for ${a.toBase58()}`);return f.result}async getBalance(a,b){return await this.getBalanceAndContext(a,b).then(a=>a.value).catch(b=>{throw Error("failed to get balance of account "+a.toBase58()+": "+b)})}async getBlockTime(a){let b=bv(await this._rpcRequest("getBlockTime",[a]),dk(bC(bD())));if("error"in b)throw new cP(b.error,`failed to get block time for slot ${a}`);return b.result}async getMinimumLedgerSlot(){let a=bv(await this._rpcRequest("minimumLedgerSlot",[]),dk(bD()));if("error"in a)throw new cP(a.error,"failed to get minimum ledger slot");return a.result}async getFirstAvailableBlock(){let a=bv(await this._rpcRequest("getFirstAvailableBlock",[]),dK);if("error"in a)throw new cP(a.error,"failed to get first available block");return a.result}async getSupply(a){let b={};b="string"==typeof a?{commitment:a}:a?{...a,commitment:a&&a.commitment||this.commitment}:{commitment:this.commitment};let c=bv(await this._rpcRequest("getSupply",[b]),dL);if("error"in c)throw new cP(c.error,"failed to get supply");return c.result}async getTokenSupply(a,b){let c=this._buildArgs([a.toBase58()],b),d=bv(await this._rpcRequest("getTokenSupply",c),dl(dM));if("error"in d)throw new cP(d.error,"failed to get token supply");return d.result}async getTokenAccountBalance(a,b){let c=this._buildArgs([a.toBase58()],b),d=bv(await this._rpcRequest("getTokenAccountBalance",c),dl(dM));if("error"in d)throw new cP(d.error,"failed to get token account balance");return d.result}async getTokenAccountsByOwner(a,b,c){let{commitment:d,config:e}=dg(c),f=[a.toBase58()];"mint"in b?f.push({mint:b.mint.toBase58()}):f.push({programId:b.programId.toBase58()});let g=this._buildArgs(f,d,"base64",e),h=bv(await this._rpcRequest("getTokenAccountsByOwner",g),dO);if("error"in h)throw new cP(h.error,`failed to get token accounts owned by account ${a.toBase58()}`);return h.result}async getParsedTokenAccountsByOwner(a,b,c){let d=[a.toBase58()];"mint"in b?d.push({mint:b.mint.toBase58()}):d.push({programId:b.programId.toBase58()});let e=this._buildArgs(d,c,"jsonParsed"),f=bv(await this._rpcRequest("getTokenAccountsByOwner",e),dQ);if("error"in f)throw new cP(f.error,`failed to get token accounts owned by account ${a.toBase58()}`);return f.result}async getLargestAccounts(a){let b={...a,commitment:a&&a.commitment||this.commitment},c=b.filter||b.commitment?[b]:[],d=bv(await this._rpcRequest("getLargestAccounts",c),dR);if("error"in d)throw new cP(d.error,"failed to get largest accounts");return d.result}async getTokenLargestAccounts(a,b){let c=this._buildArgs([a.toBase58()],b),d=bv(await this._rpcRequest("getTokenLargestAccounts",c),dN);if("error"in d)throw new cP(d.error,"failed to get token largest accounts");return d.result}async getAccountInfoAndContext(a,b){let{commitment:c,config:d}=dg(b),e=this._buildArgs([a.toBase58()],c,"base64",d),f=bv(await this._rpcRequest("getAccountInfo",e),dl(bC(dS)));if("error"in f)throw new cP(f.error,`failed to get info about account ${a.toBase58()}`);return f.result}async getParsedAccountInfo(a,b){let{commitment:c,config:d}=dg(b),e=this._buildArgs([a.toBase58()],c,"jsonParsed",d),f=bv(await this._rpcRequest("getAccountInfo",e),dl(bC(dV)));if("error"in f)throw new cP(f.error,`failed to get info about account ${a.toBase58()}`);return f.result}async getAccountInfo(a,b){try{return(await this.getAccountInfoAndContext(a,b)).value}catch(b){throw Error("failed to get info about account "+a.toBase58()+": "+b)}}async getMultipleParsedAccounts(a,b){let{commitment:c,config:d}=dg(b),e=a.map(a=>a.toBase58()),f=this._buildArgs([e],c,"jsonParsed",d),g=bv(await this._rpcRequest("getMultipleAccounts",f),dl(by(bC(dV))));if("error"in g)throw new cP(g.error,`failed to get info for accounts ${e}`);return g.result}async getMultipleAccountsInfoAndContext(a,b){let{commitment:c,config:d}=dg(b),e=a.map(a=>a.toBase58()),f=this._buildArgs([e],c,"base64",d),g=bv(await this._rpcRequest("getMultipleAccounts",f),dl(by(bC(dS))));if("error"in g)throw new cP(g.error,`failed to get info for accounts ${e}`);return g.result}async getMultipleAccountsInfo(a,b){return(await this.getMultipleAccountsInfoAndContext(a,b)).value}async getStakeActivation(a,b,c){let{commitment:d,config:e}=dg(b),f=this._buildArgs([a.toBase58()],d,void 0,{...e,epoch:null!=c?c:e?.epoch}),g=bv(await this._rpcRequest("getStakeActivation",f),dk(dX));if("error"in g)throw new cP(g.error,`failed to get Stake Activation ${a.toBase58()}`);return g.result}async getProgramAccounts(a,b){let{commitment:c,config:d}=dg(b),{encoding:e,...f}=d||{},g=this._buildArgs([a.toBase58()],c,e||"base64",{...f,...f.filters?{filters:dh(f.filters)}:null}),h=await this._rpcRequest("getProgramAccounts",g),i=by(dT),j=!0===f.withContext?bv(h,dl(i)):bv(h,dk(i));if("error"in j)throw new cP(j.error,`failed to get accounts owned by program ${a.toBase58()}`);return j.result}async getParsedProgramAccounts(a,b){let{commitment:c,config:d}=dg(b),e=this._buildArgs([a.toBase58()],c,"jsonParsed",d),f=bv(await this._rpcRequest("getProgramAccounts",e),dk(by(dW)));if("error"in f)throw new cP(f.error,`failed to get accounts owned by program ${a.toBase58()}`);return f.result}async confirmTransaction(a,b){let c,d;if("string"==typeof a)c=a;else{if(a.abortSignal?.aborted)return Promise.reject(a.abortSignal.reason);c=a.signature}try{d=bc.default.decode(c)}catch(a){throw Error("signature must be base58 encoded: "+c)}return(cx(64===d.length,"signature has invalid length"),"string"==typeof a)?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:b||this.commitment,signature:c}):"lastValidBlockHeight"in a?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:b||this.commitment,strategy:a}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:b||this.commitment,strategy:a})}getCancellationPromise(a){return new Promise((b,c)=>{null!=a&&(a.aborted?c(a.reason):a.addEventListener("abort",()=>{c(a.reason)}))})}getTransactionConfirmationPromise({commitment:a,signature:b}){let c,d,e=!1;return{abortConfirmation:()=>{d&&(d(),d=void 0),null!=c&&(this.removeSignatureListener(c),c=void 0)},confirmationPromise:new Promise((f,g)=>{try{c=this.onSignature(b,(a,b)=>{c=void 0,f({__type:cF.PROCESSED,response:{context:b,value:a}})},a);let h=new Promise(a=>{null==c?a():d=this._onSubscriptionStateChange(c,b=>{"subscribed"===b&&a()})});(async()=>{if(await h,e)return;let c=await this.getSignatureStatus(b);if(e||null==c)return;let{context:d,value:i}=c;if(null!=i)if(i?.err)g(i.err);else{switch(a){case"confirmed":case"single":case"singleGossip":if("processed"===i.confirmationStatus)return;break;case"finalized":case"max":case"root":if("processed"===i.confirmationStatus||"confirmed"===i.confirmationStatus)return}e=!0,f({__type:cF.PROCESSED,response:{context:d,value:i}})}})()}catch(a){g(a)}})}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:a,strategy:{abortSignal:b,lastValidBlockHeight:c,signature:d}}){let e,f=!1,g=new Promise(b=>{let d=async()=>{try{return await this.getBlockHeight(a)}catch(a){return -1}};(async()=>{let a=await d();if(!f){for(;a<=c;)if(await cR(1e3),f||(a=await d(),f))return;b({__type:cF.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:h,confirmationPromise:i}=this.getTransactionConfirmationPromise({commitment:a,signature:d}),j=this.getCancellationPromise(b);try{let a=await Promise.race([j,i,g]);if(a.__type===cF.PROCESSED)e=a.response;else throw new cp(d)}finally{f=!0,h()}return e}async confirmTransactionUsingDurableNonceStrategy({commitment:a,strategy:{abortSignal:b,minContextSlot:c,nonceAccountPubkey:d,nonceValue:e,signature:f}}){let g,h=!1,i=new Promise(b=>{let f=e,g=null,i=async()=>{try{let{context:b,value:e}=await this.getNonceAndContext(d,{commitment:a,minContextSlot:c});return g=b.slot,e?.nonce}catch(a){return f}};(async()=>{if(f=await i(),!h)for(;;){if(e!==f)return void b({__type:cF.NONCE_INVALID,slotInWhichNonceDidAdvance:g});if(await cR(2e3),h||(f=await i(),h))return}})()}),{abortConfirmation:j,confirmationPromise:k}=this.getTransactionConfirmationPromise({commitment:a,signature:f}),l=this.getCancellationPromise(b);try{let b=await Promise.race([l,k,i]);if(b.__type===cF.PROCESSED)g=b.response;else{let d;for(;;){let a=await this.getSignatureStatus(f);if(null==a)break;if(a.context.slot<(b.slotInWhichNonceDidAdvance??c)){await cR(400);continue}d=a;break}if(d?.value){let b=a||"finalized",{confirmationStatus:c}=d.value;switch(b){case"processed":case"recent":if("processed"!==c&&"confirmed"!==c&&"finalized"!==c)throw new cr(f);break;case"confirmed":case"single":case"singleGossip":if("confirmed"!==c&&"finalized"!==c)throw new cr(f);break;case"finalized":case"max":case"root":if("finalized"!==c)throw new cr(f)}g={context:d.context,value:{err:d.value.err}}}else throw new cr(f)}}finally{h=!0,j()}return g}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:a,signature:b}){let c,d,e=new Promise(b=>{let d=this._confirmTransactionInitialTimeout||6e4;switch(a){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":d=this._confirmTransactionInitialTimeout||3e4}c=setTimeout(()=>b({__type:cF.TIMED_OUT,timeoutMs:d}),d)}),{abortConfirmation:f,confirmationPromise:g}=this.getTransactionConfirmationPromise({commitment:a,signature:b});try{let a=await Promise.race([g,e]);if(a.__type===cF.PROCESSED)d=a.response;else throw new cq(b,a.timeoutMs/1e3)}finally{clearTimeout(c),f()}return d}async getClusterNodes(){let a=bv(await this._rpcRequest("getClusterNodes",[]),dk(by(d7)));if("error"in a)throw new cP(a.error,"failed to get cluster nodes");return a.result}async getVoteAccounts(a){let b=this._buildArgs([],a),c=bv(await this._rpcRequest("getVoteAccounts",b),d9);if("error"in c)throw new cP(c.error,"failed to get vote accounts");return c.result}async getSlot(a){let{commitment:b,config:c}=dg(a),d=this._buildArgs([],b,void 0,c),e=bv(await this._rpcRequest("getSlot",d),dk(bD()));if("error"in e)throw new cP(e.error,"failed to get slot");return e.result}async getSlotLeader(a){let{commitment:b,config:c}=dg(a),d=this._buildArgs([],b,void 0,c),e=bv(await this._rpcRequest("getSlotLeader",d),dk(bG()));if("error"in e)throw new cP(e.error,"failed to get slot leader");return e.result}async getSlotLeaders(a,b){let c=bv(await this._rpcRequest("getSlotLeaders",[a,b]),dk(by(dd)));if("error"in c)throw new cP(c.error,"failed to get slot leaders");return c.result}async getSignatureStatus(a,b){let{context:c,value:d}=await this.getSignatureStatuses([a],b);return cx(1===d.length),{context:c,value:d[0]}}async getSignatureStatuses(a,b){let c=[a];b&&c.push(b);let d=bv(await this._rpcRequest("getSignatureStatuses",c),ec);if("error"in d)throw new cP(d.error,"failed to get signature status");return d.result}async getTransactionCount(a){let{commitment:b,config:c}=dg(a),d=this._buildArgs([],b,void 0,c),e=bv(await this._rpcRequest("getTransactionCount",d),dk(bD()));if("error"in e)throw new cP(e.error,"failed to get transaction count");return e.result}async getTotalSupply(a){return(await this.getSupply({commitment:a,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(a){let b=this._buildArgs([],a),c=bv(await this._rpcRequest("getInflationGovernor",b),dE);if("error"in c)throw new cP(c.error,"failed to get inflation");return c.result}async getInflationReward(a,b,c){let{commitment:d,config:e}=dg(c),f=this._buildArgs([a.map(a=>a.toBase58())],d,void 0,{...e,epoch:null!=b?b:e?.epoch}),g=bv(await this._rpcRequest("getInflationReward",f),dq);if("error"in g)throw new cP(g.error,"failed to get inflation reward");return g.result}async getInflationRate(){let a=bv(await this._rpcRequest("getInflationRate",[]),dF);if("error"in a)throw new cP(a.error,"failed to get inflation rate");return a.result}async getEpochInfo(a){let{commitment:b,config:c}=dg(a),d=this._buildArgs([],b,void 0,c),e=bv(await this._rpcRequest("getEpochInfo",d),dH);if("error"in e)throw new cP(e.error,"failed to get epoch info");return e.result}async getEpochSchedule(){let a=bv(await this._rpcRequest("getEpochSchedule",[]),dI);if("error"in a)throw new cP(a.error,"failed to get epoch schedule");let b=a.result;return new c7(b.slotsPerEpoch,b.leaderScheduleSlotOffset,b.warmup,b.firstNormalEpoch,b.firstNormalSlot)}async getLeaderSchedule(){let a=bv(await this._rpcRequest("getLeaderSchedule",[]),dJ);if("error"in a)throw new cP(a.error,"failed to get leader schedule");return a.result}async getMinimumBalanceForRentExemption(a,b){let c=this._buildArgs([a],b),d=bv(await this._rpcRequest("getMinimumBalanceForRentExemption",c),ed);return"error"in d?(console.warn("Unable to fetch minimum balance for rent exemption"),0):d.result}async getRecentBlockhashAndContext(a){let{context:b,value:{blockhash:c}}=await this.getLatestBlockhashAndContext(a);return{context:b,value:{blockhash:c,feeCalculator:{get lamportsPerSignature(){throw Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON:()=>({})}}}}async getRecentPerformanceSamples(a){let b=bv(await this._rpcRequest("getRecentPerformanceSamples",a?[a]:[]),eE);if("error"in b)throw new cP(b.error,"failed to get recent performance samples");return b.result}async getFeeCalculatorForBlockhash(a,b){let c=this._buildArgs([a],b),d=bv(await this._rpcRequest("getFeeCalculatorForBlockhash",c),eF);if("error"in d)throw new cP(d.error,"failed to get fee calculator");let{context:e,value:f}=d.result;return{context:e,value:null!==f?f.feeCalculator:null}}async getFeeForMessage(a,b){let c=ck(a.serialize()).toString("base64"),d=this._buildArgs([c],b),e=bv(await this._rpcRequest("getFeeForMessage",d),dl(bC(bD())));if("error"in e)throw new cP(e.error,"failed to get fee for message");if(null===e.result)throw Error("invalid blockhash");return e.result}async getRecentPrioritizationFees(a){let b=a?.lockedWritableAccounts?.map(a=>a.toBase58()),c=b?.length?[b]:[],d=bv(await this._rpcRequest("getRecentPrioritizationFees",c),dG);if("error"in d)throw new cP(d.error,"failed to get recent prioritization fees");return d.result}async getRecentBlockhash(a){try{return(await this.getRecentBlockhashAndContext(a)).value}catch(a){throw Error("failed to get recent blockhash: "+a)}}async getLatestBlockhash(a){try{return(await this.getLatestBlockhashAndContext(a)).value}catch(a){throw Error("failed to get recent blockhash: "+a)}}async getLatestBlockhashAndContext(a){let{commitment:b,config:c}=dg(a),d=this._buildArgs([],b,void 0,c),e=bv(await this._rpcRequest("getLatestBlockhash",d),eC);if("error"in e)throw new cP(e.error,"failed to get latest blockhash");return e.result}async isBlockhashValid(a,b){let{commitment:c,config:d}=dg(b),e=this._buildArgs([a],c,void 0,d),f=bv(await this._rpcRequest("isBlockhashValid",e),eD);if("error"in f)throw new cP(f.error,"failed to determine if the blockhash `"+a+"`is valid");return f.result}async getVersion(){let a=bv(await this._rpcRequest("getVersion",[]),dk(dz));if("error"in a)throw new cP(a.error,"failed to get version");return a.result}async getGenesisHash(){let a=bv(await this._rpcRequest("getGenesisHash",[]),dk(bG()));if("error"in a)throw new cP(a.error,"failed to get genesis hash");return a.result}async getBlock(a,b){let{commitment:c,config:d}=dg(b),e=this._buildArgsAtLeastConfirmed([a],c,void 0,d),f=await this._rpcRequest("getBlock",e);try{switch(d?.transactionDetails){case"accounts":{let a=bv(f,eu);if("error"in a)throw a.error;return a.result}case"none":{let a=bv(f,et);if("error"in a)throw a.error;return a.result}default:{let a=bv(f,es);if("error"in a)throw a.error;let{result:b}=a;return b?{...b,transactions:b.transactions.map(({transaction:a,meta:b,version:c})=>({meta:b,transaction:{...a,message:dn(c,a.message)},version:c}))}:null}}}catch(a){throw new cP(a,"failed to get confirmed block")}}async getParsedBlock(a,b){let{commitment:c,config:d}=dg(b),e=this._buildArgsAtLeastConfirmed([a],c,"jsonParsed",d),f=await this._rpcRequest("getBlock",e);try{switch(d?.transactionDetails){case"accounts":{let a=bv(f,ew);if("error"in a)throw a.error;return a.result}case"none":{let a=bv(f,ex);if("error"in a)throw a.error;return a.result}default:{let a=bv(f,ev);if("error"in a)throw a.error;return a.result}}}catch(a){throw new cP(a,"failed to get block")}}async getBlockProduction(a){let b,c;if("string"==typeof a)c=a;else if(a){let{commitment:d,...e}=a;c=d,b=e}let d=this._buildArgs([],c,"base64",b),e=bv(await this._rpcRequest("getBlockProduction",d),dD);if("error"in e)throw new cP(e.error,"failed to get block production information");return e.result}async getTransaction(a,b){let{commitment:c,config:d}=dg(b),e=this._buildArgsAtLeastConfirmed([a],c,void 0,d),f=bv(await this._rpcRequest("getTransaction",e),eA);if("error"in f)throw new cP(f.error,"failed to get transaction");let g=f.result;return g?{...g,transaction:{...g.transaction,message:dn(g.version,g.transaction.message)}}:g}async getParsedTransaction(a,b){let{commitment:c,config:d}=dg(b),e=this._buildArgsAtLeastConfirmed([a],c,"jsonParsed",d),f=bv(await this._rpcRequest("getTransaction",e),eB);if("error"in f)throw new cP(f.error,"failed to get transaction");return f.result}async getParsedTransactions(a,b){let{commitment:c,config:d}=dg(b),e=a.map(a=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([a],c,"jsonParsed",d)}));return(await this._rpcBatchRequest(e)).map(a=>{let b=bv(a,eB);if("error"in b)throw new cP(b.error,"failed to get transactions");return b.result})}async getTransactions(a,b){let{commitment:c,config:d}=dg(b),e=a.map(a=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([a],c,void 0,d)}));return(await this._rpcBatchRequest(e)).map(a=>{let b=bv(a,eA);if("error"in b)throw new cP(b.error,"failed to get transactions");let c=b.result;return c?{...c,transaction:{...c.transaction,message:dn(c.version,c.transaction.message)}}:c})}async getConfirmedBlock(a,b){let c=this._buildArgsAtLeastConfirmed([a],b),d=bv(await this._rpcRequest("getBlock",c),ey);if("error"in d)throw new cP(d.error,"failed to get confirmed block");let e=d.result;if(!e)throw Error("Confirmed block "+a+" not found");let f={...e,transactions:e.transactions.map(({transaction:a,meta:b})=>{let c=new cC(a.message);return{meta:b,transaction:{...a,message:c}}})};return{...f,transactions:f.transactions.map(({transaction:a,meta:b})=>({meta:b,transaction:cI.populate(a.message,a.signatures)}))}}async getBlocks(a,b,c){let d=this._buildArgsAtLeastConfirmed(void 0!==b?[a,b]:[a],c),e=bv(await this._rpcRequest("getBlocks",d),dk(by(bD())));if("error"in e)throw new cP(e.error,"failed to get blocks");return e.result}async getBlockSignatures(a,b){let c=this._buildArgsAtLeastConfirmed([a],b,void 0,{transactionDetails:"signatures",rewards:!1}),d=bv(await this._rpcRequest("getBlock",c),ez);if("error"in d)throw new cP(d.error,"failed to get block");let e=d.result;if(!e)throw Error("Block "+a+" not found");return e}async getConfirmedBlockSignatures(a,b){let c=this._buildArgsAtLeastConfirmed([a],b,void 0,{transactionDetails:"signatures",rewards:!1}),d=bv(await this._rpcRequest("getBlock",c),ez);if("error"in d)throw new cP(d.error,"failed to get confirmed block");let e=d.result;if(!e)throw Error("Confirmed block "+a+" not found");return e}async getConfirmedTransaction(a,b){let c=this._buildArgsAtLeastConfirmed([a],b),d=bv(await this._rpcRequest("getTransaction",c),eA);if("error"in d)throw new cP(d.error,"failed to get transaction");let e=d.result;if(!e)return e;let f=new cC(e.transaction.message),g=e.transaction.signatures;return{...e,transaction:cI.populate(f,g)}}async getParsedConfirmedTransaction(a,b){let c=this._buildArgsAtLeastConfirmed([a],b,"jsonParsed"),d=bv(await this._rpcRequest("getTransaction",c),eB);if("error"in d)throw new cP(d.error,"failed to get confirmed transaction");return d.result}async getParsedConfirmedTransactions(a,b){let c=a.map(a=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([a],b,"jsonParsed")}));return(await this._rpcBatchRequest(c)).map(a=>{let b=bv(a,eB);if("error"in b)throw new cP(b.error,"failed to get confirmed transactions");return b.result})}async getConfirmedSignaturesForAddress(a,b,c){let d={},e=await this.getFirstAvailableBlock();for(;!("until"in d)&&!(--b<=0)&&!(b<e);)try{let a=await this.getConfirmedBlockSignatures(b,"finalized");a.signatures.length>0&&(d.until=a.signatures[a.signatures.length-1].toString())}catch(a){if(a instanceof Error&&a.message.includes("skipped"))continue;throw a}let f=await this.getSlot("finalized");for(;!("before"in d)&&!(++c>f);)try{let a=await this.getConfirmedBlockSignatures(c);a.signatures.length>0&&(d.before=a.signatures[a.signatures.length-1].toString())}catch(a){if(a instanceof Error&&a.message.includes("skipped"))continue;throw a}return(await this.getConfirmedSignaturesForAddress2(a,d)).map(a=>a.signature)}async getConfirmedSignaturesForAddress2(a,b,c){let d=this._buildArgsAtLeastConfirmed([a.toBase58()],c,void 0,b),e=bv(await this._rpcRequest("getConfirmedSignaturesForAddress2",d),dY);if("error"in e)throw new cP(e.error,"failed to get confirmed signatures for address");return e.result}async getSignaturesForAddress(a,b,c){let d=this._buildArgsAtLeastConfirmed([a.toBase58()],c,void 0,b),e=bv(await this._rpcRequest("getSignaturesForAddress",d),dZ);if("error"in e)throw new cP(e.error,"failed to get signatures for address");return e.result}async getAddressLookupTable(a,b){let{context:c,value:d}=await this.getAccountInfoAndContext(a,b),e=null;return null!==d&&(e=new da({key:a,state:da.deserialize(d.data)})),{context:c,value:e}}async getNonceAndContext(a,b){let{context:c,value:d}=await this.getAccountInfoAndContext(a,b),e=null;return null!==d&&(e=cW.fromAccountData(d.data)),{context:c,value:e}}async getNonce(a,b){return await this.getNonceAndContext(a,b).then(a=>a.value).catch(b=>{throw Error("failed to get nonce for account "+a.toBase58()+": "+b)})}async requestAirdrop(a,b){let c=bv(await this._rpcRequest("requestAirdrop",[a.toBase58(),b]),eG);if("error"in c)throw new cP(c.error,`airdrop to ${a.toBase58()} failed`);return c.result}async _blockhashWithExpiryBlockHeight(a){if(!a){for(;this._pollingBlockhash;)await cR(100);let a=Date.now()-this._blockhashInfo.lastFetch;if(null!==this._blockhashInfo.latestBlockhash&&!(a>=3e4))return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{let a=Date.now(),b=this._blockhashInfo.latestBlockhash,c=b?b.blockhash:null;for(let a=0;a<50;a++){let a=await this.getLatestBlockhash("finalized");if(c!==a.blockhash)return this._blockhashInfo={latestBlockhash:a,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},a;await cR(200)}throw Error(`Unable to obtain a new blockhash after ${Date.now()-a}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(a){let{commitment:b,config:c}=dg(a),d=this._buildArgs([],b,"base64",c),e=bv(await this._rpcRequest("getStakeMinimumDelegation",d),dl(bD()));if("error"in e)throw new cP(e.error,"failed to get stake minimum delegation");return e.result}async simulateTransaction(a,b,c){let d;if("message"in a){let d=a.serialize(),e=u.Buffer.from(d).toString("base64");if(Array.isArray(b)||void 0!==c)throw Error("Invalid arguments");let f=b||{};f.encoding="base64","commitment"in f||(f.commitment=this.commitment),b&&"object"==typeof b&&"innerInstructions"in b&&(f.innerInstructions=b.innerInstructions);let g=[e,f],h=bv(await this._rpcRequest("simulateTransaction",g),dC);if("error"in h)throw Error("failed to simulate transaction: "+h.error.message);return h.result}if(a instanceof cI?((d=new cI).feePayer=a.feePayer,d.instructions=a.instructions,d.nonceInfo=a.nonceInfo,d.signatures=a.signatures):(d=cI.populate(a))._message=d._json=void 0,void 0!==b&&!Array.isArray(b))throw Error("Invalid arguments");if(d.nonceInfo&&b)d.sign(...b);else{let a=this._disableBlockhashCaching;for(;;){let c=await this._blockhashWithExpiryBlockHeight(a);if(d.lastValidBlockHeight=c.lastValidBlockHeight,d.recentBlockhash=c.blockhash,!b)break;if(d.sign(...b),!d.signature)throw Error("!signature");let e=d.signature.toString("base64");if(this._blockhashInfo.simulatedSignatures.includes(e)||this._blockhashInfo.transactionSignatures.includes(e))a=!0;else{this._blockhashInfo.simulatedSignatures.push(e);break}}}let e=d._compile(),f=e.serialize(),g=d._serialize(f).toString("base64"),h={encoding:"base64",commitment:this.commitment};c&&(h.accounts={encoding:"base64",addresses:(Array.isArray(c)?c:e.nonProgramIds()).map(a=>a.toBase58())}),b&&(h.sigVerify=!0),b&&"object"==typeof b&&"innerInstructions"in b&&(h.innerInstructions=b.innerInstructions);let i=[g,h],j=bv(await this._rpcRequest("simulateTransaction",i),dC);if("error"in j){let a;if("data"in j.error&&(a=j.error.data.logs)&&Array.isArray(a)){let b="\n    ",c=b+a.join(b);console.error(j.error.message,c)}throw new cO({action:"simulate",signature:"",transactionMessage:j.error.message,logs:a})}return j.result}async sendTransaction(a,b,c){if("version"in a){if(b&&Array.isArray(b))throw Error("Invalid arguments");let c=a.serialize();return await this.sendRawTransaction(c,b)}if(void 0===b||!Array.isArray(b))throw Error("Invalid arguments");if(a.nonceInfo)a.sign(...b);else{let c=this._disableBlockhashCaching;for(;;){let d=await this._blockhashWithExpiryBlockHeight(c);if(a.lastValidBlockHeight=d.lastValidBlockHeight,a.recentBlockhash=d.blockhash,a.sign(...b),!a.signature)throw Error("!signature");let e=a.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(e))c=!0;else{this._blockhashInfo.transactionSignatures.push(e);break}}}let d=a.serialize();return await this.sendRawTransaction(d,c)}async sendRawTransaction(a,b){let c=ck(a).toString("base64");return await this.sendEncodedTransaction(c,b)}async sendEncodedTransaction(a,b){let c={encoding:"base64"},d=b&&b.skipPreflight,e=!0===d?"processed":b&&b.preflightCommitment||this.commitment;b&&null!=b.maxRetries&&(c.maxRetries=b.maxRetries),b&&null!=b.minContextSlot&&(c.minContextSlot=b.minContextSlot),d&&(c.skipPreflight=d),e&&(c.preflightCommitment=e);let f=[a,c],g=bv(await this._rpcRequest("sendTransaction",f),eH);if("error"in g){let a;throw"data"in g.error&&(a=g.error.data.logs),new cO({action:d?"send":"simulate",signature:"",transactionMessage:g.error.message,logs:a})}return g.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(a){this._rpcWebSocketConnected=!1,console.error("ws error:",a.message)}_wsOnClose(a){(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3===a)?this._updateSubscriptions():(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([a,b])=>{this._setSubscription(a,{...b,state:"pending"})}))}_setSubscription(a,b){let c=this._subscriptionsByHash[a]?.state;if(this._subscriptionsByHash[a]=b,c!==b.state){let c=this._subscriptionStateChangeCallbacksByHash[a];c&&c.forEach(a=>{try{a(b.state)}catch{}})}}_onSubscriptionStateChange(a,b){let c=this._subscriptionHashByClientSubscriptionId[a];if(null==c)return()=>{};let d=this._subscriptionStateChangeCallbacksByHash[c]||=new Set;return d.add(b),()=>{d.delete(b),0===d.size&&delete this._subscriptionStateChangeCallbacksByHash[c]}}async _updateSubscriptions(){if(0===Object.keys(this._subscriptionsByHash).length){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(a){a instanceof Error&&console.log(`Error when closing socket connection: ${a.message}`)}},500));return}if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected)return void this._rpcWebSocket.connect();let a=this._rpcWebSocketGeneration,b=()=>a===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async a=>{let c=this._subscriptionsByHash[a];if(void 0!==c)switch(c.state){case"pending":case"unsubscribed":if(0===c.callbacks.size){delete this._subscriptionsByHash[a],"unsubscribed"===c.state&&delete this._subscriptionCallbacksByServerSubscriptionId[c.serverSubscriptionId],await this._updateSubscriptions();return}await (async()=>{let{args:d,method:e}=c;try{this._setSubscription(a,{...c,state:"subscribing"});let b=await this._rpcWebSocket.call(e,d);this._setSubscription(a,{...c,serverSubscriptionId:b,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[b]=c.callbacks,await this._updateSubscriptions()}catch(f){if(console.error(`Received ${f instanceof Error?"":"JSON-RPC "}error calling \`${e}\``,{args:d,error:f}),!b())return;this._setSubscription(a,{...c,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":0===c.callbacks.size&&await (async()=>{let{serverSubscriptionId:d,unsubscribeMethod:e}=c;if(this._subscriptionsAutoDisposedByRpc.has(d))this._subscriptionsAutoDisposedByRpc.delete(d);else{this._setSubscription(a,{...c,state:"unsubscribing"}),this._setSubscription(a,{...c,state:"unsubscribing"});try{await this._rpcWebSocket.call(e,[d])}catch(d){if(d instanceof Error&&console.error(`${e} error:`,d.message),!b())return;this._setSubscription(a,{...c,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(a,{...c,state:"unsubscribed"}),await this._updateSubscriptions()})()}}))}_handleServerNotification(a,b){let c=this._subscriptionCallbacksByServerSubscriptionId[a];void 0!==c&&c.forEach(a=>{try{a(...b)}catch(a){console.error(a)}})}_wsOnAccountNotification(a){let{result:b,subscription:c}=bv(a,d$);this._handleServerNotification(c,[b.value,b.context])}_makeSubscription(a,b){let c=this._nextClientSubscriptionId++,d=c5([a.method,b]),e=this._subscriptionsByHash[d];return void 0===e?this._subscriptionsByHash[d]={...a,args:b,callbacks:new Set([a.callback]),state:"pending"}:e.callbacks.add(a.callback),this._subscriptionHashByClientSubscriptionId[c]=d,this._subscriptionDisposeFunctionsByClientSubscriptionId[c]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[c],delete this._subscriptionHashByClientSubscriptionId[c];let b=this._subscriptionsByHash[d];cx(void 0!==b,`Could not find a \`Subscription\` when tearing down client subscription #${c}`),b.callbacks.delete(a.callback),await this._updateSubscriptions()},this._updateSubscriptions(),c}onAccountChange(a,b,c){let{commitment:d,config:e}=dg(c),f=this._buildArgs([a.toBase58()],d||this._commitment||"finalized","base64",e);return this._makeSubscription({callback:b,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},f)}async removeAccountChangeListener(a){await this._unsubscribeClientSubscription(a,"account change")}_wsOnProgramAccountNotification(a){let{result:b,subscription:c}=bv(a,d0);this._handleServerNotification(c,[{accountId:b.value.pubkey,accountInfo:b.value.account},b.context])}onProgramAccountChange(a,b,c,d){let{commitment:e,config:f}=dg(c),g=this._buildArgs([a.toBase58()],e||this._commitment||"finalized","base64",f||(d?{filters:dh(d)}:void 0));return this._makeSubscription({callback:b,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},g)}async removeProgramAccountChangeListener(a){await this._unsubscribeClientSubscription(a,"program account change")}onLogs(a,b,c){let d=this._buildArgs(["object"==typeof a?{mentions:[a.toString()]}:a],c||this._commitment||"finalized");return this._makeSubscription({callback:b,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},d)}async removeOnLogsListener(a){await this._unsubscribeClientSubscription(a,"logs")}_wsOnLogsNotification(a){let{result:b,subscription:c}=bv(a,eJ);this._handleServerNotification(c,[b.value,b.context])}_wsOnSlotNotification(a){let{result:b,subscription:c}=bv(a,d2);this._handleServerNotification(c,[b])}onSlotChange(a){return this._makeSubscription({callback:a,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(a){await this._unsubscribeClientSubscription(a,"slot change")}_wsOnSlotUpdatesNotification(a){let{result:b,subscription:c}=bv(a,d4);this._handleServerNotification(c,[b])}onSlotUpdate(a){return this._makeSubscription({callback:a,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(a){await this._unsubscribeClientSubscription(a,"slot update")}async _unsubscribeClientSubscription(a,b){let c=this._subscriptionDisposeFunctionsByClientSubscriptionId[a];c?await c():console.warn(`Ignored unsubscribe request because an active subscription with id \`${a}\` for '${b}' events could not be found.`)}_buildArgs(a,b,c,d){let e=b||this._commitment;if(e||c||d){let b={};c&&(b.encoding=c),e&&(b.commitment=e),d&&(b=Object.assign(b,d)),a.push(b)}return a}_buildArgsAtLeastConfirmed(a,b,c,d){let e=b||this._commitment;if(e&&!["confirmed","finalized"].includes(e))throw Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(a,b,c,d)}_wsOnSignatureNotification(a){let{result:b,subscription:c}=bv(a,d5);"receivedSignature"!==b.value&&this._subscriptionsAutoDisposedByRpc.add(c),this._handleServerNotification(c,"receivedSignature"===b.value?[{type:"received"},b.context]:[{type:"status",result:b.value},b.context])}onSignature(a,b,c){let d=this._buildArgs([a],c||this._commitment||"finalized"),e=this._makeSubscription({callback:(a,c)=>{if("status"===a.type){b(a.result,c);try{this.removeSignatureListener(e)}catch(a){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},d);return e}onSignatureWithOptions(a,b,c){let{commitment:d,...e}={...c,commitment:c&&c.commitment||this._commitment||"finalized"},f=this._buildArgs([a],d,void 0,e),g=this._makeSubscription({callback:(a,c)=>{b(a,c);try{this.removeSignatureListener(g)}catch(a){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},f);return g}async removeSignatureListener(a){await this._unsubscribeClientSubscription(a,"signature result")}_wsOnRootNotification(a){let{result:b,subscription:c}=bv(a,d6);this._handleServerNotification(c,[b])}onRootChange(a){return this._makeSubscription({callback:a,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(a){await this._unsubscribeClientSubscription(a,"root change")}}class eM{constructor(a){this._keypair=void 0,this._keypair=a??cf()}static generate(){return new eM(cf())}static fromSecretKey(a,b){if(64!==a.byteLength)throw Error("bad secret key size");let c=a.slice(32,64);if(!b||!b.skipValidation){let b=cg(a.slice(0,32));for(let a=0;a<32;a++)if(c[a]!==b[a])throw Error("provided secretKey is invalid")}return new eM({publicKey:c,secretKey:a})}static fromSeed(a){let b=cg(a),c=new Uint8Array(64);return c.set(a),c.set(b,32),new eM({publicKey:b,secretKey:c})}get publicKey(){return new co(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:bf.struct([bf.u32("instruction"),cX("recentSlot"),bf.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:bf.struct([bf.u32("instruction")])},ExtendLookupTable:{index:2,layout:bf.struct([bf.u32("instruction"),cX(),bf.seq(ct(),bf.offset(bf.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:bf.struct([bf.u32("instruction")])},CloseLookupTable:{index:4,layout:bf.struct([bf.u32("instruction")])}}),new co("AddressLookupTab1e1111111111111111111111111"),Object.freeze({RequestUnits:{index:0,layout:bf.struct([bf.u8("instruction"),bf.u32("units"),bf.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:bf.struct([bf.u8("instruction"),bf.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:bf.struct([bf.u8("instruction"),bf.u32("units")])},SetComputeUnitPrice:{index:3,layout:bf.struct([bf.u8("instruction"),cX("microLamports")])}}),new co("ComputeBudget111111111111111111111111111111");let eN=bf.struct([bf.u8("numSignatures"),bf.u8("padding"),bf.u16("signatureOffset"),bf.u16("signatureInstructionIndex"),bf.u16("publicKeyOffset"),bf.u16("publicKeyInstructionIndex"),bf.u16("messageDataOffset"),bf.u16("messageDataSize"),bf.u16("messageInstructionIndex")]);class eO{static createInstructionWithPublicKey(a){let{publicKey:b,message:c,signature:d,instructionIndex:e}=a;cx(32===b.length,`Public Key must be 32 bytes but received ${b.length} bytes`),cx(64===d.length,`Signature must be 64 bytes but received ${d.length} bytes`);let f=eN.span,g=f+b.length,h=g+d.length,i=u.Buffer.alloc(h+c.length),j=null==e?65535:e;return eN.encode({numSignatures:1,padding:0,signatureOffset:g,signatureInstructionIndex:j,publicKeyOffset:f,publicKeyInstructionIndex:j,messageDataOffset:h,messageDataSize:c.length,messageInstructionIndex:j},i),i.fill(b,f),i.fill(d,g),i.fill(c,h),new cH({keys:[],programId:eO.programId,data:i})}static createInstructionWithPrivateKey(a){let{privateKey:b,message:c,instructionIndex:d}=a;cx(64===b.length,`Private key must be 64 bytes but received ${b.length} bytes`);try{let a=eM.fromSecretKey(b),e=a.publicKey.toBytes(),f=ci(c,a.secretKey);return this.createInstructionWithPublicKey({publicKey:e,message:c,signature:f,instructionIndex:d})}catch(a){throw Error(`Error creating instruction; ${a}`)}}}eO.programId=new co("Ed25519SigVerify111111111111111111111111111"),cc.utils.isValidPrivateKey;let eP=cc.getPublicKey,eQ=bf.struct([bf.u8("numSignatures"),bf.u16("signatureOffset"),bf.u8("signatureInstructionIndex"),bf.u16("ethAddressOffset"),bf.u8("ethAddressInstructionIndex"),bf.u16("messageDataOffset"),bf.u16("messageDataSize"),bf.u8("messageInstructionIndex"),bf.blob(20,"ethAddress"),bf.blob(64,"signature"),bf.u8("recoveryId")]);class eR{static publicKeyToEthAddress(a){cx(64===a.length,`Public key must be 64 bytes but received ${a.length} bytes`);try{return u.Buffer.from((0,bV.keccak_256)(ck(a))).slice(-20)}catch(a){throw Error(`Error constructing Ethereum address: ${a}`)}}static createInstructionWithPublicKey(a){let{publicKey:b,message:c,signature:d,recoveryId:e,instructionIndex:f}=a;return eR.createInstructionWithEthAddress({ethAddress:eR.publicKeyToEthAddress(b),message:c,signature:d,recoveryId:e,instructionIndex:f})}static createInstructionWithEthAddress(a){let b,{ethAddress:c,message:d,signature:e,recoveryId:f,instructionIndex:g=0}=a;cx(20===(b="string"==typeof c?c.startsWith("0x")?u.Buffer.from(c.substr(2),"hex"):u.Buffer.from(c,"hex"):c).length,`Address must be 20 bytes but received ${b.length} bytes`);let h=12+b.length,i=h+e.length+1,j=u.Buffer.alloc(eQ.span+d.length);return eQ.encode({numSignatures:1,signatureOffset:h,signatureInstructionIndex:g,ethAddressOffset:12,ethAddressInstructionIndex:g,messageDataOffset:i,messageDataSize:d.length,messageInstructionIndex:g,signature:ck(e),ethAddress:ck(b),recoveryId:f},j),j.fill(ck(d),eQ.span),new cH({keys:[],programId:eR.programId,data:j})}static createInstructionWithPrivateKey(a){let{privateKey:b,message:c,instructionIndex:d}=a;cx(32===b.length,`Private key must be 32 bytes but received ${b.length} bytes`);try{var e;let a,f=ck(b),g=eP(f,!1).slice(1),[h,i]=(e=u.Buffer.from((0,bV.keccak_256)(ck(c))),[(a=cc.sign(e,f)).toCompactRawBytes(),a.recovery]);return this.createInstructionWithPublicKey({publicKey:g,message:c,signature:h,recoveryId:i,instructionIndex:d})}catch(a){throw Error(`Error creating instruction; ${a}`)}}}eR.programId=new co("KeccakSecp256k11111111111111111111111111111");let eS=new co("StakeConfig11111111111111111111111111111111");class eT{constructor(a,b,c){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=a,this.epoch=b,this.custodian=c}}eT.default=new eT(0,0,co.default);let eU=Object.freeze({Initialize:{index:0,layout:bf.struct([bf.u32("instruction"),((a="authorized")=>bf.struct([ct("staker"),ct("withdrawer")],a))(),((a="lockup")=>bf.struct([bf.ns64("unixTimestamp"),bf.ns64("epoch"),ct("custodian")],a))()])},Authorize:{index:1,layout:bf.struct([bf.u32("instruction"),ct("newAuthorized"),bf.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:bf.struct([bf.u32("instruction")])},Split:{index:3,layout:bf.struct([bf.u32("instruction"),bf.ns64("lamports")])},Withdraw:{index:4,layout:bf.struct([bf.u32("instruction"),bf.ns64("lamports")])},Deactivate:{index:5,layout:bf.struct([bf.u32("instruction")])},Merge:{index:7,layout:bf.struct([bf.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:bf.struct([bf.u32("instruction"),ct("newAuthorized"),bf.u32("stakeAuthorizationType"),cu("authoritySeed"),ct("authorityOwner")])}});Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class eV{static initialize(a){let{stakePubkey:b,authorized:c,lockup:d}=a,e=d||eT.default,f=cS(eU.Initialize,{authorized:{staker:ck(c.staker.toBuffer()),withdrawer:ck(c.withdrawer.toBuffer())},lockup:{unixTimestamp:e.unixTimestamp,epoch:e.epoch,custodian:ck(e.custodian.toBuffer())}});return new cH({keys:[{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:cM,isSigner:!1,isWritable:!1}],programId:this.programId,data:f})}static createAccountWithSeed(a){let b=new cI;b.add(cZ.createAccountWithSeed({fromPubkey:a.fromPubkey,newAccountPubkey:a.stakePubkey,basePubkey:a.basePubkey,seed:a.seed,lamports:a.lamports,space:this.space,programId:this.programId}));let{stakePubkey:c,authorized:d,lockup:e}=a;return b.add(this.initialize({stakePubkey:c,authorized:d,lockup:e}))}static createAccount(a){let b=new cI;b.add(cZ.createAccount({fromPubkey:a.fromPubkey,newAccountPubkey:a.stakePubkey,lamports:a.lamports,space:this.space,programId:this.programId}));let{stakePubkey:c,authorized:d,lockup:e}=a;return b.add(this.initialize({stakePubkey:c,authorized:d,lockup:e}))}static delegate(a){let{stakePubkey:b,authorizedPubkey:c,votePubkey:d}=a,e=cS(eU.Delegate);return new cI().add({keys:[{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:cK,isSigner:!1,isWritable:!1},{pubkey:cN,isSigner:!1,isWritable:!1},{pubkey:eS,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!0,isWritable:!1}],programId:this.programId,data:e})}static authorize(a){let{stakePubkey:b,authorizedPubkey:c,newAuthorizedPubkey:d,stakeAuthorizationType:e,custodianPubkey:f}=a,g=cS(eU.Authorize,{newAuthorized:ck(d.toBuffer()),stakeAuthorizationType:e.index}),h=[{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:cK,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!0,isWritable:!1}];return f&&h.push({pubkey:f,isSigner:!0,isWritable:!1}),new cI().add({keys:h,programId:this.programId,data:g})}static authorizeWithSeed(a){let{stakePubkey:b,authorityBase:c,authoritySeed:d,authorityOwner:e,newAuthorizedPubkey:f,stakeAuthorizationType:g,custodianPubkey:h}=a,i=cS(eU.AuthorizeWithSeed,{newAuthorized:ck(f.toBuffer()),stakeAuthorizationType:g.index,authoritySeed:d,authorityOwner:ck(e.toBuffer())}),j=[{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!0,isWritable:!1},{pubkey:cK,isSigner:!1,isWritable:!1}];return h&&j.push({pubkey:h,isSigner:!0,isWritable:!1}),new cI().add({keys:j,programId:this.programId,data:i})}static splitInstruction(a){let{stakePubkey:b,authorizedPubkey:c,splitStakePubkey:d,lamports:e}=a,f=cS(eU.Split,{lamports:e});return new cH({keys:[{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!0,isWritable:!1}],programId:this.programId,data:f})}static split(a,b){let c=new cI;return c.add(cZ.createAccount({fromPubkey:a.authorizedPubkey,newAccountPubkey:a.splitStakePubkey,lamports:b,space:this.space,programId:this.programId})),c.add(this.splitInstruction(a))}static splitWithSeed(a,b){let{stakePubkey:c,authorizedPubkey:d,splitStakePubkey:e,basePubkey:f,seed:g,lamports:h}=a,i=new cI;return i.add(cZ.allocate({accountPubkey:e,basePubkey:f,seed:g,space:this.space,programId:this.programId})),b&&b>0&&i.add(cZ.transfer({fromPubkey:a.authorizedPubkey,toPubkey:e,lamports:b})),i.add(this.splitInstruction({stakePubkey:c,authorizedPubkey:d,splitStakePubkey:e,lamports:h}))}static merge(a){let{stakePubkey:b,sourceStakePubKey:c,authorizedPubkey:d}=a,e=cS(eU.Merge);return new cI().add({keys:[{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:cK,isSigner:!1,isWritable:!1},{pubkey:cN,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!0,isWritable:!1}],programId:this.programId,data:e})}static withdraw(a){let{stakePubkey:b,authorizedPubkey:c,toPubkey:d,lamports:e,custodianPubkey:f}=a,g=cS(eU.Withdraw,{lamports:e}),h=[{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:cK,isSigner:!1,isWritable:!1},{pubkey:cN,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!0,isWritable:!1}];return f&&h.push({pubkey:f,isSigner:!0,isWritable:!1}),new cI().add({keys:h,programId:this.programId,data:g})}static deactivate(a){let{stakePubkey:b,authorizedPubkey:c}=a,d=cS(eU.Deactivate);return new cI().add({keys:[{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:cK,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!0,isWritable:!1}],programId:this.programId,data:d})}}eV.programId=new co("Stake11111111111111111111111111111111111111"),eV.space=200;let eW=Object.freeze({InitializeAccount:{index:0,layout:bf.struct([bf.u32("instruction"),((a="voteInit")=>bf.struct([ct("nodePubkey"),ct("authorizedVoter"),ct("authorizedWithdrawer"),bf.u8("commission")],a))()])},Authorize:{index:1,layout:bf.struct([bf.u32("instruction"),ct("newAuthorized"),bf.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:bf.struct([bf.u32("instruction"),bf.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:bf.struct([bf.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:bf.struct([bf.u32("instruction"),((a="voteAuthorizeWithSeedArgs")=>bf.struct([bf.u32("voteAuthorizationType"),ct("currentAuthorityDerivedKeyOwnerPubkey"),cu("currentAuthorityDerivedKeySeed"),ct("newAuthorized")],a))()])}});Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class eX{static initializeAccount(a){let{votePubkey:b,nodePubkey:c,voteInit:d}=a,e=cS(eW.InitializeAccount,{voteInit:{nodePubkey:ck(d.nodePubkey.toBuffer()),authorizedVoter:ck(d.authorizedVoter.toBuffer()),authorizedWithdrawer:ck(d.authorizedWithdrawer.toBuffer()),commission:d.commission}});return new cH({keys:[{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:cM,isSigner:!1,isWritable:!1},{pubkey:cK,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!0,isWritable:!1}],programId:this.programId,data:e})}static createAccount(a){let b=new cI;return b.add(cZ.createAccount({fromPubkey:a.fromPubkey,newAccountPubkey:a.votePubkey,lamports:a.lamports,space:this.space,programId:this.programId})),b.add(this.initializeAccount({votePubkey:a.votePubkey,nodePubkey:a.voteInit.nodePubkey,voteInit:a.voteInit}))}static authorize(a){let{votePubkey:b,authorizedPubkey:c,newAuthorizedPubkey:d,voteAuthorizationType:e}=a,f=cS(eW.Authorize,{newAuthorized:ck(d.toBuffer()),voteAuthorizationType:e.index});return new cI().add({keys:[{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:cK,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!0,isWritable:!1}],programId:this.programId,data:f})}static authorizeWithSeed(a){let{currentAuthorityDerivedKeyBasePubkey:b,currentAuthorityDerivedKeyOwnerPubkey:c,currentAuthorityDerivedKeySeed:d,newAuthorizedPubkey:e,voteAuthorizationType:f,votePubkey:g}=a,h=cS(eW.AuthorizeWithSeed,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:ck(c.toBuffer()),currentAuthorityDerivedKeySeed:d,newAuthorized:ck(e.toBuffer()),voteAuthorizationType:f.index}});return new cI().add({keys:[{pubkey:g,isSigner:!1,isWritable:!0},{pubkey:cK,isSigner:!1,isWritable:!1},{pubkey:b,isSigner:!0,isWritable:!1}],programId:this.programId,data:h})}static withdraw(a){let{votePubkey:b,authorizedWithdrawerPubkey:c,lamports:d,toPubkey:e}=a,f=cS(eW.Withdraw,{lamports:d});return new cI().add({keys:[{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!0,isWritable:!1}],programId:this.programId,data:f})}static safeWithdraw(a,b,c){if(a.lamports>b-c)throw Error("Withdraw will leave vote account with insufficient funds.");return eX.withdraw(a)}static updateValidatorIdentity(a){let{votePubkey:b,authorizedWithdrawerPubkey:c,nodePubkey:d}=a,e=cS(eW.UpdateValidatorIdentity);return new cI().add({keys:[{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!0,isWritable:!1},{pubkey:c,isSigner:!0,isWritable:!1}],programId:this.programId,data:e})}}eX.programId=new co("Vote111111111111111111111111111111111111111"),eX.space=3762,new co("Va1idator1nfo111111111111111111111111111111"),bI({name:bG(),website:bE(bG()),details:bE(bG()),iconUrl:bE(bG()),keybaseUsername:bE(bG())}),new co("Vote111111111111111111111111111111111111111"),bf.struct([ct("nodePubkey"),ct("authorizedWithdrawer"),bf.u8("commission"),bf.nu64(),bf.seq(bf.struct([bf.nu64("slot"),bf.u32("confirmationCount")]),bf.offset(bf.u32(),-8),"votes"),bf.u8("rootSlotValid"),bf.nu64("rootSlot"),bf.nu64(),bf.seq(bf.struct([bf.nu64("epoch"),ct("authorizedVoter")]),bf.offset(bf.u32(),-8),"authorizedVoters"),bf.struct([bf.seq(bf.struct([ct("authorizedPubkey"),bf.nu64("epochOfLastAuthorizedSwitch"),bf.nu64("targetEpoch")]),32,"buf"),bf.nu64("idx"),bf.u8("isEmpty")],"priorVoters"),bf.nu64(),bf.seq(bf.struct([bf.nu64("epoch"),bf.nu64("credits"),bf.nu64("prevCredits")]),bf.offset(bf.u32(),-8),"epochCredits"),bf.struct([bf.nu64("slot"),bf.nu64("timestamp")],"lastTimestamp")]),a.s(["Connection",()=>eL,"Keypair",()=>eM,"Transaction",()=>cI,"VersionedMessage",()=>cE,"VersionedTransaction",()=>cJ],354724)},160687,a=>{"use strict";var b=a.i(545913);async function c(a,{address:c,blockNumber:d,blockTag:e=a.experimental_blockTag??"latest"}){let f="bigint"==typeof d?(0,b.numberToHex)(d):void 0;return BigInt(await a.request({method:"eth_getBalance",params:[c,f||e]}))}a.s(["getBalance",()=>c])},530048,a=>{"use strict";var b=a.i(321142),c=a.i(671977),d=a.i(179036),e=a.i(678540),f=a.i(333102);function g(a,{abi:g,address:h,args:i,docsPath:j,functionName:k,sender:l}){let m=a instanceof d.RawContractError?a:a instanceof c.BaseError?a.walk(a=>"data"in a)||a.walk():{},{code:n,data:o,details:p,message:q,shortMessage:r}=m,s=a instanceof b.AbiDecodingZeroDataError?new d.ContractFunctionZeroDataError({functionName:k}):[3,f.InternalRpcError.code].includes(n)&&(o||p||q||r)||n===f.InvalidInputRpcError.code&&"execution reverted"===p&&o?new d.ContractFunctionRevertedError({abi:g,data:"object"==typeof o?o.data:o,functionName:k,message:m instanceof e.RpcRequestError?p:r??q}):a;return new d.ContractFunctionExecutionError(s,{abi:g,args:i,contractAddress:h,docsPath:j,functionName:k,sender:l})}a.s(["getContractError",()=>g])},463312,a=>{"use strict";function b(a,b,c){let d=a[b.name];if("function"==typeof d)return d;let e=a[c];return"function"==typeof e?e:c=>b(a,c)}a.s(["getAction",()=>b])},614345,a=>{"use strict";var b=a.i(87394),c=a.i(942587),d=a.i(530048),e=a.i(463312),f=a.i(898622);async function g(a,g){let{abi:h,address:i,args:j,functionName:k,...l}=g,m=(0,c.encodeFunctionData)({abi:h,args:j,functionName:k});try{let{data:c}=await (0,e.getAction)(a,f.call,"call")({...l,data:m,to:i});return(0,b.decodeFunctionResult)({abi:h,args:j,functionName:k,data:c||"0x"})}catch(a){throw(0,d.getContractError)(a,{abi:h,address:i,args:j,docsPath:"/docs/contract/readContract",functionName:k})}}a.s(["readContract",()=>g])},503544,a=>{"use strict";var b=a.i(260694),c=a.i(670765),d=a.i(321142),e=a.i(671977),f=a.i(179036),g=a.i(87394),h=a.i(942587),i=a.i(867346),j=a.i(530048),k=a.i(463312),l=a.i(614345);async function m(a,m){let{account:n,authorizationList:o,allowFailure:p=!0,blockNumber:q,blockOverrides:r,blockTag:s,stateOverride:t}=m,u=m.contracts,{batchSize:v=m.batchSize??1024,deployless:w=m.deployless??!1}="object"==typeof a.batch?.multicall?a.batch.multicall:{},x=(()=>{if(m.multicallAddress)return m.multicallAddress;if(w)return null;if(a.chain)return(0,i.getChainContractAddress)({blockNumber:q,chain:a.chain,contract:"multicall3"});throw Error("client chain not configured. multicallAddress is required.")})(),y=[[]],z=0,A=0;for(let a=0;a<u.length;a++){let{abi:b,address:c,args:d,functionName:e}=u[a];try{let a=(0,h.encodeFunctionData)({abi:b,args:d,functionName:e});A+=(a.length-2)/2,v>0&&A>v&&y[z].length>0&&(z++,A=(a.length-2)/2,y[z]=[]),y[z]=[...y[z],{allowFailure:!0,callData:a,target:c}]}catch(f){let a=(0,j.getContractError)(f,{abi:b,address:c,args:d,docsPath:"/docs/contract/multicall",functionName:e,sender:n});if(!p)throw a;y[z]=[...y[z],{allowFailure:!0,callData:"0x",target:c}]}}let B=await Promise.allSettled(y.map(d=>(0,k.getAction)(a,l.readContract,"readContract")({...null===x?{code:c.multicall3Bytecode}:{address:x},abi:b.multicall3Abi,account:n,args:[d],authorizationList:o,blockNumber:q,blockOverrides:r,blockTag:s,functionName:"aggregate3",stateOverride:t}))),C=[];for(let a=0;a<B.length;a++){let b=B[a];if("rejected"===b.status){if(!p)throw b.reason;for(let c=0;c<y[a].length;c++)C.push({status:"failure",error:b.reason,result:void 0});continue}let c=b.value;for(let b=0;b<c.length;b++){let{returnData:e,success:h}=c[b],{callData:i}=y[a][b],{abi:k,address:l,functionName:m,args:n}=u[C.length];try{if("0x"===i)throw new d.AbiDecodingZeroDataError;if(!h)throw new f.RawContractError({data:e});let a=(0,g.decodeFunctionResult)({abi:k,args:n,data:e,functionName:m});C.push(p?{result:a,status:"success"}:a)}catch(b){let a=(0,j.getContractError)(b,{abi:k,address:l,args:n,docsPath:"/docs/contract/multicall",functionName:m});if(!p)throw a;C.push({error:a,result:void 0,status:"failure"})}}}if(C.length!==u.length)throw new e.BaseError("multicall results mismatch");return C}a.s(["multicall",()=>m])},217773,a=>{"use strict";var b=a.i(614345),c=a.i(671977);class d extends c.BaseError{constructor({data:a}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(a)}`],name:"EnsAvatarInvalidMetadataError"})}}class e extends c.BaseError{constructor({reason:a}){super(`ENS NFT avatar URI is invalid. ${a}`,{name:"EnsAvatarInvalidNftUriError"})}}class f extends c.BaseError{constructor({uri:a}){super(`Unable to resolve ENS avatar URI "${a}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class g extends c.BaseError{constructor({namespace:a}){super(`ENS NFT avatar namespace "${a}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}c.BaseError;let h=/(?<protocol>https?:\/\/[^/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,i=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,j=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,k=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function l(a){try{let b=await fetch(a,{method:"HEAD"});if(200===b.status){let a=b.headers.get("content-type");return a?.startsWith("image/")}return!1}catch(b){if("object"==typeof b&&void 0!==b.response||!Object.hasOwn(globalThis,"Image"))return!1;return new Promise(b=>{let c=new Image;c.onload=()=>{b(!0)},c.onerror=()=>{b(!1)},c.src=a})}}function m(a,b){return a?a.endsWith("/")?a.slice(0,-1):a:b}function n({uri:a,gatewayUrls:b}){let c=j.test(a);if(c)return{uri:a,isOnChain:!0,isEncoded:c};let d=m(b?.ipfs,"https://ipfs.io"),e=m(b?.arweave,"https://arweave.net"),g=a.match(h),{protocol:l,subpath:n,target:o,subtarget:p=""}=g?.groups||{},q="ipns:/"===l||"ipns/"===n,r="ipfs:/"===l||"ipfs/"===n||i.test(a);if(a.startsWith("http")&&!q&&!r){let c=a;return b?.arweave&&(c=a.replace(/https:\/\/arweave.net/g,b?.arweave)),{uri:c,isOnChain:!1,isEncoded:!1}}if((q||r)&&o)return{uri:`${d}/${q?"ipns":"ipfs"}/${o}${p}`,isOnChain:!1,isEncoded:!1};if("ar:/"===l&&o)return{uri:`${e}/${o}${p||""}`,isOnChain:!1,isEncoded:!1};let s=a.replace(k,"");if(s.startsWith("<svg")&&(s=`data:image/svg+xml;base64,${btoa(s)}`),s.startsWith("data:")||s.startsWith("{"))return{uri:s,isOnChain:!0,isEncoded:!1};throw new f({uri:a})}function o(a){if("object"!=typeof a||!("image"in a)&&!("image_url"in a)&&!("image_data"in a))throw new d({data:a});return a.image||a.image_url||a.image_data}async function p({gatewayUrls:a,uri:b}){try{let c=await fetch(b).then(a=>a.json());return await q({gatewayUrls:a,uri:o(c)})}catch{throw new f({uri:b})}}async function q({gatewayUrls:a,uri:b}){let{uri:c,isOnChain:d}=n({uri:b,gatewayUrls:a});if(d||await l(c))return c;throw new f({uri:b})}async function r(a,{nft:c}){if("erc721"===c.namespace)return(0,b.readContract)(a,{address:c.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(c.tokenID)]});if("erc1155"===c.namespace)return(0,b.readContract)(a,{address:c.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(c.tokenID)]});throw new g({namespace:c.namespace})}async function s(a,{gatewayUrls:b,record:c}){return/eip155:/i.test(c)?t(a,{gatewayUrls:b,record:c}):q({uri:c,gatewayUrls:b})}async function t(a,{gatewayUrls:b,record:c}){let d=function(a){let b=a;b.startsWith("did:nft:")&&(b=b.replace("did:nft:","").replace(/_/g,"/"));let[c,d,f]=b.split("/"),[g,h]=c.split(":"),[i,j]=d.split(":");if(!g||"eip155"!==g.toLowerCase())throw new e({reason:"Only EIP-155 supported"});if(!h)throw new e({reason:"Chain ID not found"});if(!j)throw new e({reason:"Contract address not found"});if(!f)throw new e({reason:"Token ID not found"});if(!i)throw new e({reason:"ERC namespace not found"});return{chainID:Number.parseInt(h,10),namespace:i.toLowerCase(),contractAddress:j,tokenID:f}}(c),{uri:f,isOnChain:g,isEncoded:h}=n({uri:await r(a,{nft:d}),gatewayUrls:b});if(g&&(f.includes("data:application/json;base64,")||f.startsWith("{")))return q({uri:o(JSON.parse(h?atob(f.replace("data:application/json;base64,","")):f)),gatewayUrls:b});let i=d.tokenID;return"erc1155"===d.namespace&&(i=i.replace("0x","").padStart(64,"0")),p({gatewayUrls:b,uri:f.replace(/(?:0x)?{id}/,i)})}a.s(["parseAvatarRecord",()=>s],217773)},583382,722485,419161,a=>{"use strict";var b=a.i(671977),c=a.i(179036);function d(a){if(!(a instanceof b.BaseError))return!1;let d=a.walk(a=>a instanceof c.ContractFunctionRevertedError);return d instanceof c.ContractFunctionRevertedError&&(d.data?.errorName==="HttpError"||d.data?.errorName==="ResolverError"||d.data?.errorName==="ResolverNotContract"||d.data?.errorName==="ResolverNotFound"||d.data?.errorName==="ReverseAddressMismatch"||d.data?.errorName==="UnsupportedResolverProfile")}a.s(["isNullUniversalResolverError",()=>d],583382);var e=a.i(766096),f=a.i(47153),g=a.i(545913),h=a.i(589268),i=a.i(679922);function j(a){if(66!==a.length||0!==a.indexOf("[")||65!==a.indexOf("]"))return null;let b=`0x${a.slice(1,65)}`;return(0,i.isHex)(b)?b:null}function k(a){let b=new Uint8Array(32).fill(0);if(!a)return(0,g.bytesToHex)(b);let c=a.split(".");for(let a=c.length-1;a>=0;a-=1){let d=j(c[a]),g=d?(0,f.toBytes)(d):(0,h.keccak256)((0,f.stringToBytes)(c[a]),"bytes");b=(0,h.keccak256)((0,e.concat)([b,g]),"bytes")}return(0,g.bytesToHex)(b)}function l(a){let b=a.replace(/^\.|\.$/gm,"");if(0===b.length)return new Uint8Array(1);let c=new Uint8Array((0,f.stringToBytes)(b).byteLength+2),d=0,e=b.split(".");for(let a=0;a<e.length;a++){var i;let b=(0,f.stringToBytes)(e[a]);b.byteLength>255&&(b=(0,f.stringToBytes)((i=function(a){let b=new Uint8Array(32).fill(0);return a?j(a)||(0,h.keccak256)((0,f.stringToBytes)(a)):(0,g.bytesToHex)(b)}(e[a]),`[${i.slice(2)}]`))),c[d]=b.length,c.set(b,d+1),d+=b.length+1}return c.byteLength!==d+1?c.slice(0,d+1):c}a.s(["namehash",()=>k],722485),a.s(["packetToBytes",()=>l],419161)},280432,838829,a=>{"use strict";var b=a.i(217773),c=a.i(463312),d=a.i(260694),e=a.i(87394),f=a.i(942587),g=a.i(867346),h=a.i(545913),i=a.i(583382),j=a.i(793867),k=a.i(722485),l=a.i(419161),m=a.i(614345);async function n(a,b){let{blockNumber:n,blockTag:o,key:p,name:q,gatewayUrls:r,strict:s}=b,{chain:t}=a,u=(()=>{if(b.universalResolverAddress)return b.universalResolverAddress;if(!t)throw Error("client chain not configured. universalResolverAddress is required.");return(0,g.getChainContractAddress)({blockNumber:n,chain:t,contract:"ensUniversalResolver"})})(),v=t?.ensTlds;if(v&&!v.some(a=>q.endsWith(a)))return null;try{let b={address:u,abi:d.universalResolverResolveAbi,args:[(0,h.toHex)((0,l.packetToBytes)(q)),(0,f.encodeFunctionData)({abi:d.textResolverAbi,functionName:"text",args:[(0,k.namehash)(q),p]}),r??[j.localBatchGatewayUrl]],functionName:"resolveWithGateways",blockNumber:n,blockTag:o},g=(0,c.getAction)(a,m.readContract,"readContract"),i=await g(b);if("0x"===i[0])return null;let s=(0,e.decodeFunctionResult)({abi:d.textResolverAbi,functionName:"text",data:i[0]});return""===s?null:s}catch(a){if(s)throw a;if((0,i.isNullUniversalResolverError)(a))return null;throw a}}async function o(a,{blockNumber:d,blockTag:e,assetGatewayUrls:f,name:g,gatewayUrls:h,strict:i,universalResolverAddress:j}){let k=await (0,c.getAction)(a,n,"getEnsText")({blockNumber:d,blockTag:e,key:"avatar",name:g,universalResolverAddress:j,gatewayUrls:h,strict:i});if(!k)return null;try{return await (0,b.parseAvatarRecord)(a,{record:k,gatewayUrls:f})}catch{return null}}a.s(["getEnsText",()=>n],838829),a.s(["getEnsAvatar",()=>o],280432)},896289,a=>{"use strict";function b(a){let b={formatters:void 0,fees:void 0,serializers:void 0,...a};return Object.assign(b,{extend:function a(b){return c=>{let d="function"==typeof c?c(b):c,e={...b,...d};return Object.assign(e,{extend:a(e)})}}(b)})}function c(){return{}}a.s(["defineChain",()=>b,"extendSchema",()=>c])},502026,a=>{"use strict";let b=(0,a.i(896289).defineChain)({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockTime:12e3,rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensUniversalResolver:{address:"0xeeeeeeee14d718c2b47d9923deab1335e144eeee",blockCreated:0x16041f6},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:0xdb04c1}}});a.s(["mainnet",0,b])},629380,a=>{"use strict";var b=a.i(260694),c=a.i(867346),d=a.i(583382),e=a.i(793867),f=a.i(463312),g=a.i(614345);async function h(a,h){let{address:i,blockNumber:j,blockTag:k,coinType:l=60n,gatewayUrls:m,strict:n}=h,{chain:o}=a,p=(()=>{if(h.universalResolverAddress)return h.universalResolverAddress;if(!o)throw Error("client chain not configured. universalResolverAddress is required.");return(0,c.getChainContractAddress)({blockNumber:j,chain:o,contract:"ensUniversalResolver"})})();try{let c={address:p,abi:b.universalResolverReverseAbi,args:[i,l,m??[e.localBatchGatewayUrl]],functionName:"reverseWithGateways",blockNumber:j,blockTag:k},d=(0,f.getAction)(a,g.readContract,"readContract"),[h]=await d(c);return h||null}catch(a){if(n)throw a;if((0,d.isNullUniversalResolverError)(a))return null;throw a}}a.s(["getEnsName",()=>h])},678339,a=>{"use strict";var b=a.i(260694),c=a.i(87394),d=a.i(942587),e=a.i(867346),f=a.i(278072),g=a.i(545913),h=a.i(583382),i=a.i(793867),j=a.i(722485),k=a.i(419161),l=a.i(463312),m=a.i(614345);async function n(a,n){let{blockNumber:o,blockTag:p,coinType:q,name:r,gatewayUrls:s,strict:t}=n,{chain:u}=a,v=(()=>{if(n.universalResolverAddress)return n.universalResolverAddress;if(!u)throw Error("client chain not configured. universalResolverAddress is required.");return(0,e.getChainContractAddress)({blockNumber:o,chain:u,contract:"ensUniversalResolver"})})(),w=u?.ensTlds;if(w&&!w.some(a=>r.endsWith(a)))return null;let x=null!=q?[(0,j.namehash)(r),BigInt(q)]:[(0,j.namehash)(r)];try{let e=(0,d.encodeFunctionData)({abi:b.addressResolverAbi,functionName:"addr",args:x}),h={address:v,abi:b.universalResolverResolveAbi,functionName:"resolveWithGateways",args:[(0,g.toHex)((0,k.packetToBytes)(r)),e,s??[i.localBatchGatewayUrl]],blockNumber:o,blockTag:p},j=(0,l.getAction)(a,m.readContract,"readContract"),n=await j(h);if("0x"===n[0])return null;let q=(0,c.decodeFunctionResult)({abi:b.addressResolverAbi,args:x,functionName:"addr",data:n[0]});if("0x"===q||"0x00"===(0,f.trim)(q))return null;return q}catch(a){if(t)throw a;if((0,h.isNullUniversalResolverError)(a))return null;throw a}}a.s(["getEnsAddress",()=>n])},866738,632113,901855,364757,207680,451009,89659,797820,555272,822261,346628,397279,390918,496630,666031,507752,100274,336598,496074,95095,834376,354264,59234,28244,276417,225978,754742,850486,176559,803079,886599,665610,a=>{"use strict";var b=a.i(867346),c=a.i(545913),d=a.i(419161),e=a.i(463312),f=a.i(614345);async function g(a,g){let{blockNumber:h,blockTag:i,name:j}=g,{chain:k}=a,l=(()=>{if(g.universalResolverAddress)return g.universalResolverAddress;if(!k)throw Error("client chain not configured. universalResolverAddress is required.");return(0,b.getChainContractAddress)({blockNumber:h,chain:k,contract:"ensUniversalResolver"})})(),m=k?.ensTlds;if(m&&!m.some(a=>j.endsWith(a)))throw Error(`${j} is not a valid ENS TLD (${m?.join(", ")}) for chain "${k.name}" (id: ${k.id}).`);let[n]=await (0,e.getAction)(a,f.readContract,"readContract")({address:l,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"},{type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[(0,c.toHex)((0,d.packetToBytes)(j))],blockNumber:h,blockTag:i});return n}a.s(["getEnsResolver",()=>g],866738);var h=a.i(429635),i=a.i(967588),j=a.i(443825),k=a.i(344772),l=a.i(311918);async function m(a,b){let{account:d=a.account,blockNumber:e,blockTag:f="latest",blobs:g,data:m,gas:n,gasPrice:o,maxFeePerBlobGas:p,maxFeePerGas:q,maxPriorityFeePerGas:r,to:s,value:t,...u}=b,v=d?(0,h.parseAccount)(d):void 0;try{(0,l.assertRequest)(b);let d="bigint"==typeof e?(0,c.numberToHex)(e):void 0,h=a.chain?.formatters?.transactionRequest?.format,i=(h||k.formatTransactionRequest)({...(0,j.extract)(u,{format:h}),account:v,blobs:g,data:m,gas:n,gasPrice:o,maxFeePerBlobGas:p,maxFeePerGas:q,maxPriorityFeePerGas:r,to:s,value:t},"createAccessList"),w=await a.request({method:"eth_createAccessList",params:[i,d||f]});return{accessList:w.accessList,gasUsed:BigInt(w.gasUsed)}}catch(c){throw(0,i.getCallError)(c,{...b,account:v,chain:a.chain})}}function n(a,{method:b}){let c={};return"fallback"===a.transport.type&&a.transport.onResponse?.(({method:a,response:d,status:e,transport:f})=>{"success"===e&&b===a&&(c[d]=f.request)}),b=>c[b]||a.request}async function o(a){let b=n(a,{method:"eth_newBlockFilter"}),c=await a.request({method:"eth_newBlockFilter"});return{id:c,request:b(c),type:"block"}}a.s(["createAccessList",()=>m],632113),a.s(["createBlockFilter",()=>o],901855);var p=a.i(321142),q=a.i(671977);class r extends q.BaseError{constructor(a){super(`Filter type "${a}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}var s=a.i(47153),t=a.i(589268),u=a.i(499318),v=a.i(984963),w=a.i(195244),x=a.i(518036);let y="/docs/contract/encodeEventTopics";function z(a){let{abi:b,eventName:c,args:d}=a,e=b[0];if(c){let a=(0,x.getAbiItem)({abi:b,name:c});if(!a)throw new p.AbiEventNotFoundError(c,{docsPath:y});e=a}if("event"!==e.type)throw new p.AbiEventNotFoundError(void 0,{docsPath:y});let f=(0,w.formatAbiItem)(e),g=(0,u.toEventSelector)(f),h=[];if(d&&"inputs"in e){let a=e.inputs?.filter(a=>"indexed"in a&&a.indexed),b=Array.isArray(d)?d:Object.values(d).length>0?a?.map(a=>d[a.name])??[]:[];b.length>0&&(h=a?.map((a,c)=>Array.isArray(b[c])?b[c].map((d,e)=>A({param:a,value:b[c][e]})):void 0!==b[c]&&null!==b[c]?A({param:a,value:b[c]}):null)??[])}return[g,...h]}function A({param:a,value:b}){if("string"===a.type||"bytes"===a.type)return(0,t.keccak256)((0,s.toBytes)(b));if("tuple"===a.type||a.type.match(/^(.*)\[(\d+)?\]$/))throw new r(a.type);return(0,v.encodeAbiParameters)([a],[b])}async function B(a,b){let{address:d,abi:e,args:f,eventName:g,fromBlock:h,strict:i,toBlock:j}=b,k=n(a,{method:"eth_newFilter"}),l=g?z({abi:e,args:f,eventName:g}):void 0,m=await a.request({method:"eth_newFilter",params:[{address:d,fromBlock:"bigint"==typeof h?(0,c.numberToHex)(h):h,toBlock:"bigint"==typeof j?(0,c.numberToHex)(j):j,topics:l}]});return{abi:e,args:f,eventName:g,id:m,request:k(m),strict:!!i,type:"event"}}async function C(a,{address:b,args:d,event:e,events:f,fromBlock:g,strict:h,toBlock:i}={}){let j=f??(e?[e]:void 0),k=n(a,{method:"eth_newFilter"}),l=[];j&&(l=[j.flatMap(a=>z({abi:[a],eventName:a.name,args:d}))],e&&(l=l[0]));let m=await a.request({method:"eth_newFilter",params:[{address:b,fromBlock:"bigint"==typeof g?(0,c.numberToHex)(g):g,toBlock:"bigint"==typeof i?(0,c.numberToHex)(i):i,...l.length?{topics:l}:{}}]});return{abi:j,args:d,eventName:e?e.name:void 0,fromBlock:g,id:m,request:k(m),strict:!!h,toBlock:i,type:"event"}}async function D(a){let b=n(a,{method:"eth_newPendingTransactionFilter"}),c=await a.request({method:"eth_newPendingTransactionFilter"});return{id:c,request:b(c),type:"transaction"}}a.s(["encodeEventTopics",()=>z],364757),a.s(["createContractEventFilter",()=>B],207680),a.s(["createEventFilter",()=>C],451009),a.s(["createPendingTransactionFilter",()=>D],89659);var E=a.i(942587),F=a.i(530048);a.s(["estimateGas",()=>aL],886599);var G=a.i(723059),H=a.i(679922),I=a.i(65122),J=a.i(63363);async function K({hash:b,signature:d}){let e=(0,H.isHex)(b)?b:(0,c.toHex)(b),{secp256k1:f}=await a.A(533031),g=(()=>{if("object"==typeof d&&"r"in d&&"s"in d){let{r:a,s:b,v:c,yParity:e}=d,g=L(Number(e??c));return new f.Signature((0,J.hexToBigInt)(a),(0,J.hexToBigInt)(b)).addRecoveryBit(g)}let a=(0,H.isHex)(d)?d:(0,c.toHex)(d);if(65!==(0,I.size)(a))throw Error("invalid signature length");let b=L((0,J.hexToNumber)(`0x${a.slice(130)}`));return f.Signature.fromCompact(a.substring(2,130)).addRecoveryBit(b)})().recoverPublicKey(e.substring(2)).toHex(!1);return`0x${g}`}function L(a){if(0===a||1===a)return a;if(27===a)return 0;if(28===a)return 1;throw Error("Invalid yParityOrV value")}async function M({hash:a,signature:b}){var c;let d;return c=await K({hash:a,signature:b}),d=(0,t.keccak256)(`0x${c.substring(4)}`).substring(26),(0,G.checksumAddress)(`0x${d}`)}a.s(["recoverAddress",()=>M],797820);var N=a.i(766096),O=a.i(607299);function P(a,b="hex"){let d=function a(b){var c,d;let e,f,g,h;return Array.isArray(b)?(f=Q(e=(c=b.map(b=>a(b))).reduce((a,b)=>a+b.length,0)),{length:e<=55?1+e:1+f+e,encode(a){for(let{encode:b}of(e<=55?a.pushByte(192+e):(a.pushByte(247+f),1===f?a.pushUint8(e):2===f?a.pushUint16(e):3===f?a.pushUint24(e):a.pushUint32(e)),c))b(a)}}):(h=Q((g="string"==typeof(d=b)?(0,s.hexToBytes)(d):d).length),{length:1===g.length&&g[0]<128?1:g.length<=55?1+g.length:1+h+g.length,encode(a){1===g.length&&g[0]<128||(g.length<=55?a.pushByte(128+g.length):(a.pushByte(183+h),1===h?a.pushUint8(g.length):2===h?a.pushUint16(g.length):3===h?a.pushUint24(g.length):a.pushUint32(g.length))),a.pushBytes(g)}})}(a),e=(0,O.createCursor)(new Uint8Array(d.length));return(d.encode(e),"hex"===b)?(0,c.bytesToHex)(e.bytes):e.bytes}function Q(a){if(a<256)return 1;if(a<65536)return 2;if(a<0x1000000)return 3;if(a<0x100000000)return 4;throw new q.BaseError("Length is too large.")}async function R(a){let{authorization:b,signature:d}=a;return M({hash:function(a){let{chainId:b,nonce:d,to:e}=a,f=a.contractAddress??a.address,g=(0,t.keccak256)((0,N.concatHex)(["0x05",P([b?(0,c.numberToHex)(b):"0x",f,d?(0,c.numberToHex)(d):"0x"])]));return"bytes"===e?(0,s.hexToBytes)(g):g}(b),signature:d??b})}a.s(["toRlp",()=>P],555272),a.s(["recoverAuthorizationAddress",()=>R],822261);var S=a.i(566843),T=a.i(598880),U=q,V=a.i(207389);class W extends U.BaseError{constructor(a,{account:b,docsPath:c,chain:d,data:e,gas:f,gasPrice:g,maxFeePerGas:h,maxPriorityFeePerGas:i,nonce:j,to:k,value:l}){super(a.shortMessage,{cause:a,docsPath:c,metaMessages:[...a.metaMessages?[...a.metaMessages," "]:[],"Estimate Gas Arguments:",(0,V.prettyPrint)({from:b?.address,to:k,value:void 0!==l&&`${(0,S.formatEther)(l)} ${d?.nativeCurrency?.symbol||"ETH"}`,data:e,gas:f,gasPrice:void 0!==g&&`${(0,T.formatGwei)(g)} gwei`,maxFeePerGas:void 0!==h&&`${(0,T.formatGwei)(h)} gwei`,maxPriorityFeePerGas:void 0!==i&&`${(0,T.formatGwei)(i)} gwei`,nonce:j})].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=a}}var X=a.i(143227),Y=a.i(916581),Z=a.i(163593);a.s(["defaultParameters",()=>aH,"prepareTransactionRequest",()=>aK],803079);var $=q;class _ extends $.BaseError{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class aa extends $.BaseError{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class ab extends $.BaseError{constructor({maxPriorityFeePerGas:a}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${(0,T.formatGwei)(a)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}var ac=q;class ad extends ac.BaseError{constructor({blockHash:a,blockNumber:b}){let c="Block";a&&(c=`Block at hash "${a}"`),b&&(c=`Block at number "${b}"`),super(`${c} could not be found.`,{name:"BlockNotFoundError"})}}a.s(["BlockNotFoundError",()=>ad],346628);var ae=a.i(548017);let af={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function ag(a,b){let c={...a,blockHash:a.blockHash?a.blockHash:null,blockNumber:a.blockNumber?BigInt(a.blockNumber):null,chainId:a.chainId?(0,J.hexToNumber)(a.chainId):void 0,gas:a.gas?BigInt(a.gas):void 0,gasPrice:a.gasPrice?BigInt(a.gasPrice):void 0,maxFeePerBlobGas:a.maxFeePerBlobGas?BigInt(a.maxFeePerBlobGas):void 0,maxFeePerGas:a.maxFeePerGas?BigInt(a.maxFeePerGas):void 0,maxPriorityFeePerGas:a.maxPriorityFeePerGas?BigInt(a.maxPriorityFeePerGas):void 0,nonce:a.nonce?(0,J.hexToNumber)(a.nonce):void 0,to:a.to?a.to:null,transactionIndex:a.transactionIndex?Number(a.transactionIndex):null,type:a.type?af[a.type]:void 0,typeHex:a.type?a.type:void 0,value:a.value?BigInt(a.value):void 0,v:a.v?BigInt(a.v):void 0};return a.authorizationList&&(c.authorizationList=a.authorizationList.map(a=>({address:a.address,chainId:Number(a.chainId),nonce:Number(a.nonce),r:a.r,s:a.s,yParity:Number(a.yParity)}))),c.yParity=(()=>{if(a.yParity)return Number(a.yParity);if("bigint"==typeof c.v){if(0n===c.v||27n===c.v)return 0;if(1n===c.v||28n===c.v)return 1;if(c.v>=35n)return+(c.v%2n===0n)}})(),"legacy"===c.type&&(delete c.accessList,delete c.maxFeePerBlobGas,delete c.maxFeePerGas,delete c.maxPriorityFeePerGas,delete c.yParity),"eip2930"===c.type&&(delete c.maxFeePerBlobGas,delete c.maxFeePerGas,delete c.maxPriorityFeePerGas),"eip1559"===c.type&&delete c.maxFeePerBlobGas,c}let ah=(0,ae.defineFormatter)("transaction",ag);function ai(a,b){let c=(a.transactions??[]).map(a=>"string"==typeof a?a:ag(a));return{...a,baseFeePerGas:a.baseFeePerGas?BigInt(a.baseFeePerGas):null,blobGasUsed:a.blobGasUsed?BigInt(a.blobGasUsed):void 0,difficulty:a.difficulty?BigInt(a.difficulty):void 0,excessBlobGas:a.excessBlobGas?BigInt(a.excessBlobGas):void 0,gasLimit:a.gasLimit?BigInt(a.gasLimit):void 0,gasUsed:a.gasUsed?BigInt(a.gasUsed):void 0,hash:a.hash?a.hash:null,logsBloom:a.logsBloom?a.logsBloom:null,nonce:a.nonce?a.nonce:null,number:a.number?BigInt(a.number):null,size:a.size?BigInt(a.size):void 0,timestamp:a.timestamp?BigInt(a.timestamp):void 0,transactions:c,totalDifficulty:a.totalDifficulty?BigInt(a.totalDifficulty):null}}a.s(["defineTransaction",0,ah,"formatTransaction",()=>ag,"transactionType",0,af],397279);let aj=(0,ae.defineFormatter)("block",ai);async function ak(a,{blockHash:b,blockNumber:d,blockTag:e=a.experimental_blockTag??"latest",includeTransactions:f}={}){let g=f??!1,h=void 0!==d?(0,c.numberToHex)(d):void 0,i=null;if(!(i=b?await a.request({method:"eth_getBlockByHash",params:[b,g]},{dedupe:!0}):await a.request({method:"eth_getBlockByNumber",params:[h||e,g]},{dedupe:!!h})))throw new ad({blockHash:b,blockNumber:d});return(a.chain?.formatters?.block?.format||ai)(i,"getBlock")}async function al(a){return BigInt(await a.request({method:"eth_gasPrice"}))}async function am(a,b){return an(a,b)}async function an(a,b){let{block:c,chain:d=a.chain,request:f}=b||{};try{let b=d?.fees?.maxPriorityFeePerGas??d?.fees?.defaultPriorityFee;if("function"==typeof b){let d=c||await (0,e.getAction)(a,ak,"getBlock")({}),g=await b({block:d,client:a,request:f});if(null===g)throw Error();return g}if(void 0!==b)return b;let g=await a.request({method:"eth_maxPriorityFeePerGas"});return(0,J.hexToBigInt)(g)}catch{let[b,d]=await Promise.all([c?Promise.resolve(c):(0,e.getAction)(a,ak,"getBlock")({}),(0,e.getAction)(a,al,"getGasPrice")({})]);if("bigint"!=typeof b.baseFeePerGas)throw new aa;let f=d-b.baseFeePerGas;if(f<0n)return 0n;return f}}async function ao(a,b){return ap(a,b)}async function ap(a,b){let{block:c,chain:d=a.chain,request:f,type:g="eip1559"}=b||{},h=await (async()=>"function"==typeof d?.fees?.baseFeeMultiplier?d.fees.baseFeeMultiplier({block:c,client:a,request:f}):d?.fees?.baseFeeMultiplier??1.2)();if(h<1)throw new _;let i=h.toString().split(".")[1]?.length??0,j=10**i,k=a=>a*BigInt(Math.ceil(h*j))/BigInt(j),l=c||await (0,e.getAction)(a,ak,"getBlock")({});if("function"==typeof d?.fees?.estimateFeesPerGas){let b=await d.fees.estimateFeesPerGas({block:c,client:a,multiply:k,request:f,type:g});if(null!==b)return b}if("eip1559"===g){if("bigint"!=typeof l.baseFeePerGas)throw new aa;let b="bigint"==typeof f?.maxPriorityFeePerGas?f.maxPriorityFeePerGas:await an(a,{block:l,chain:d,request:f}),c=k(l.baseFeePerGas);return{maxFeePerGas:f?.maxFeePerGas??c+b,maxPriorityFeePerGas:b}}return{gasPrice:f?.gasPrice??k(await (0,e.getAction)(a,al,"getGasPrice")({}))}}async function aq(a,{address:b,blockTag:d="latest",blockNumber:e}){let f=await a.request({method:"eth_getTransactionCount",params:[b,"bigint"==typeof e?(0,c.numberToHex)(e):d]},{dedupe:!!e});return(0,J.hexToNumber)(f)}function ar(a){let{kzg:b}=a,d=a.to??("string"==typeof a.blobs[0]?"hex":"bytes"),e="string"==typeof a.blobs[0]?a.blobs.map(a=>(0,s.hexToBytes)(a)):a.blobs,f=[];for(let a of e)f.push(Uint8Array.from(b.blobToKzgCommitment(a)));return"bytes"===d?f:f.map(a=>(0,c.bytesToHex)(a))}function as(a){let{kzg:b}=a,d=a.to??("string"==typeof a.blobs[0]?"hex":"bytes"),e="string"==typeof a.blobs[0]?a.blobs.map(a=>(0,s.hexToBytes)(a)):a.blobs,f="string"==typeof a.commitments[0]?a.commitments.map(a=>(0,s.hexToBytes)(a)):a.commitments,g=[];for(let a=0;a<e.length;a++){let c=e[a],d=f[a];g.push(Uint8Array.from(b.computeBlobKzgProof(c,d)))}return"bytes"===d?g:g.map(a=>(0,c.bytesToHex)(a))}a.s(["defineBlock",0,aj,"formatBlock",()=>ai],390918),a.s(["getBlock",()=>ak],496630),a.s(["getGasPrice",()=>al],666031),a.s(["estimateMaxPriorityFeePerGas",()=>am,"internal_estimateMaxPriorityFeePerGas",()=>an],507752),a.s(["estimateFeesPerGas",()=>ao,"internal_estimateFeesPerGas",()=>ap],100274),a.s(["getTransactionCount",()=>aq],336598),a.s(["blobsToCommitments",()=>ar],496074),a.s(["blobsToProofs",()=>as],95095);var at=a.i(726545);function au(a,b){let d=(0,at.sha256)((0,H.isHex)(a,{strict:!1})?(0,s.toBytes)(a):a);return"bytes"===(b||"hex")?d:(0,c.toHex)(d)}function av(a){let{commitments:b,version:d}=a,e=a.to??("string"==typeof b[0]?"hex":"bytes"),f=[];for(let a of b)f.push(function(a){let{commitment:b,version:d=1}=a,e=a.to??("string"==typeof b?"hex":"bytes"),f=au(b,"bytes");return f.set([d],0),"bytes"===e?f:(0,c.bytesToHex)(f)}({commitment:a,to:e,version:d}));return f}a.s(["sha256",()=>au],834376),a.s(["commitmentsToVersionedHashes",()=>av],354264);a.s(["versionedHashVersionKzg",0,1],59234);var aw=q;class ax extends aw.BaseError{constructor({maxSize:a,size:b}){super("Blob size is too large.",{metaMessages:[`Max: ${a} bytes`,`Given: ${b} bytes`],name:"BlobSizeTooLargeError"})}}class ay extends aw.BaseError{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}class az extends aw.BaseError{constructor({hash:a,size:b}){super(`Versioned hash "${a}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${b}`],name:"InvalidVersionedHashSizeError"})}}class aA extends aw.BaseError{constructor({hash:a,version:b}){super(`Versioned hash "${a}" version is invalid.`,{metaMessages:["Expected: 1",`Received: ${b}`],name:"InvalidVersionedHashVersionError"})}}function aB(a){let{data:b,kzg:d,to:e}=a,f=a.blobs??function(a){let b=a.to??("string"==typeof a.data?"hex":"bytes"),d="string"==typeof a.data?(0,s.hexToBytes)(a.data):a.data,e=(0,I.size)(d);if(!e)throw new ay;if(e>761855)throw new ax({maxSize:761855,size:e});let f=[],g=!0,h=0;for(;g;){let a=(0,O.createCursor)(new Uint8Array(131072)),b=0;for(;b<4096;){let c=d.slice(h,h+31);if(a.pushByte(0),a.pushBytes(c),c.length<31){a.pushByte(128),g=!1;break}b++,h+=31}f.push(a)}return"bytes"===b?f.map(a=>a.bytes):f.map(a=>(0,c.bytesToHex)(a.bytes))}({data:b,to:e}),g=a.commitments??ar({blobs:f,kzg:d,to:e}),h=a.proofs??as({blobs:f,commitments:g,kzg:d,to:e}),i=[];for(let a=0;a<f.length;a++)i.push({blob:f[a],commitment:g[a],proof:h[a]});return i}a.s(["BlobSizeTooLargeError",()=>ax,"EmptyBlobError",()=>ay,"InvalidVersionedHashSizeError",()=>az,"InvalidVersionedHashVersionError",()=>aA],28244),a.s(["toBlobSidecars",()=>aB],276417);var aC=a.i(924790);function aD(a){if(a.type)return a.type;if(void 0!==a.authorizationList)return"eip7702";if(void 0!==a.blobs||void 0!==a.blobVersionedHashes||void 0!==a.maxFeePerBlobGas||void 0!==a.sidecars)return"eip4844";if(void 0!==a.maxFeePerGas||void 0!==a.maxPriorityFeePerGas)return"eip1559";if(void 0!==a.gasPrice)return void 0!==a.accessList?"eip2930":"legacy";throw new V.InvalidSerializableTransactionError({transaction:a})}function aE(a,{docsPath:b,...c}){let d,e=(d=(0,Y.getNodeError)(a,c))instanceof X.UnknownNodeError?a:d;return new V.TransactionExecutionError(e,{docsPath:b,...c})}async function aF(a){let b=await a.request({method:"eth_chainId"},{dedupe:!0});return(0,J.hexToNumber)(b)}async function aG(a,b){let{account:c=a.account,accessList:d,authorizationList:f,chain:g=a.chain,blobVersionedHashes:i,blobs:m,data:n,gas:o,gasPrice:p,maxFeePerBlobGas:q,maxFeePerGas:r,maxPriorityFeePerGas:s,nonce:t,nonceManager:u,to:v,type:w,value:x,...y}=b,z=await (async()=>{if(!c||!u||void 0!==t)return t;let b=(0,h.parseAccount)(c),d=g?g.id:await (0,e.getAction)(a,aF,"getChainId")({});return await u.consume({address:b.address,chainId:d,client:a})})();(0,l.assertRequest)(b);let A=g?.formatters?.transactionRequest?.format,B=(A||k.formatTransactionRequest)({...(0,j.extract)(y,{format:A}),account:c?(0,h.parseAccount)(c):void 0,accessList:d,authorizationList:f,blobs:m,blobVersionedHashes:i,data:n,gas:o,gasPrice:p,maxFeePerBlobGas:q,maxFeePerGas:r,maxPriorityFeePerGas:s,nonce:z,to:v,type:w,value:x},"fillTransaction");try{let c=await a.request({method:"eth_fillTransaction",params:[B]}),d=(g?.formatters?.transaction?.format||ag)(c.tx);delete d.blockHash,delete d.blockNumber,delete d.r,delete d.s,delete d.transactionIndex,delete d.v,delete d.yParity,d.data=d.input,d.gas&&(d.gas=b.gas??d.gas),d.gasPrice&&(d.gasPrice=b.gasPrice??d.gasPrice),d.maxFeePerBlobGas&&(d.maxFeePerBlobGas=b.maxFeePerBlobGas??d.maxFeePerBlobGas),d.maxFeePerGas&&(d.maxFeePerGas=b.maxFeePerGas??d.maxFeePerGas),d.maxPriorityFeePerGas&&(d.maxPriorityFeePerGas=b.maxPriorityFeePerGas??d.maxPriorityFeePerGas),d.nonce&&(d.nonce=b.nonce??d.nonce);let f=await (async()=>{if("function"==typeof g?.fees?.baseFeeMultiplier){let c=await (0,e.getAction)(a,ak,"getBlock")({});return g.fees.baseFeeMultiplier({block:c,client:a,request:b})}return g?.fees?.baseFeeMultiplier??1.2})();if(f<1)throw new _;let h=f.toString().split(".")[1]?.length??0,i=10**h,j=a=>a*BigInt(Math.ceil(f*i))/BigInt(i);return d.maxFeePerGas&&!b.maxFeePerGas&&(d.maxFeePerGas=j(d.maxFeePerGas)),d.gasPrice&&!b.gasPrice&&(d.gasPrice=j(d.gasPrice)),{raw:c.raw,transaction:{from:B.from,...d}}}catch(c){throw aE(c,{...b,chain:a.chain})}}a.s(["getTransactionType",()=>aD],225978),a.s(["getTransactionError",()=>aE],754742),a.s(["getChainId",()=>aF],850486),a.s(["fillTransaction",()=>aG],176559);let aH=["blobVersionedHashes","chainId","fees","gas","nonce","type"],aI=new Map,aJ=new aC.LruMap(128);async function aK(a,b){let c,d,f=b;f.account??=a.account,f.chain??=a.chain,f.parameters??=aH;let{account:g,chain:i,nonceManager:j,parameters:k}=f,m="function"==typeof i?.prepareTransactionRequest?{fn:i.prepareTransactionRequest,runAt:["beforeFillTransaction"]}:Array.isArray(i?.prepareTransactionRequest)?{fn:i.prepareTransactionRequest[0],runAt:i.prepareTransactionRequest[1].runAt}:void 0;async function n(){return c?c:void 0!==f.chainId?f.chainId:i?i.id:c=await (0,e.getAction)(a,aF,"getChainId")({})}let o=g?(0,h.parseAccount)(g):g,p=f.nonce;if(k.includes("nonce")&&void 0===p&&o&&j){let b=await n();p=await j.consume({address:o.address,chainId:b,client:a})}m?.fn&&m.runAt?.includes("beforeFillTransaction")&&(f=await m.fn(f,{phase:"beforeFillTransaction"}),p??=f.nonce);let q=(!(k.includes("blobVersionedHashes")||k.includes("sidecars"))||!f.kzg||!f.blobs)&&!1!==aJ.get(a.uid)&&["fees","gas"].some(a=>k.includes(a))&&(k.includes("chainId")&&"number"!=typeof f.chainId||k.includes("nonce")&&"number"!=typeof p||k.includes("fees")&&"bigint"!=typeof f.gasPrice&&("bigint"!=typeof f.maxFeePerGas||"bigint"!=typeof f.maxPriorityFeePerGas)||k.includes("gas")&&"bigint"!=typeof f.gas)?await (0,e.getAction)(a,aG,"fillTransaction")({...f,nonce:p}).then(b=>{let{chainId:c,from:d,gas:e,gasPrice:g,nonce:h,maxFeePerBlobGas:i,maxFeePerGas:j,maxPriorityFeePerGas:k,type:l,...m}=b.transaction;return aJ.set(a.uid,!0),{...f,...d?{from:d}:{},...l?{type:l}:{},...void 0!==c?{chainId:c}:{},...void 0!==e?{gas:e}:{},...void 0!==g?{gasPrice:g}:{},...void 0!==h?{nonce:h}:{},...void 0!==i?{maxFeePerBlobGas:i}:{},...void 0!==j?{maxFeePerGas:j}:{},...void 0!==k?{maxPriorityFeePerGas:k}:{},..."nonceKey"in m&&void 0!==m.nonceKey?{nonceKey:m.nonceKey}:{}}}).catch(b=>("TransactionExecutionError"!==b.name||b.walk?.(a=>"MethodNotFoundRpcError"===a.name||"MethodNotSupportedRpcError"===a.name)&&aJ.set(a.uid,!1),f)):f;p??=q.nonce;let{blobs:r,gas:s,kzg:t,type:u}=f={...q,...o?{from:o?.address}:{},...p?{nonce:p}:{}};async function v(){return d||(d=await (0,e.getAction)(a,ak,"getBlock")({blockTag:"latest"}))}if(m?.fn&&m.runAt?.includes("beforeFillParameters")&&(f=await m.fn(f,{phase:"beforeFillParameters"})),k.includes("nonce")&&void 0===p&&o&&!j&&(f.nonce=await (0,e.getAction)(a,aq,"getTransactionCount")({address:o.address,blockTag:"pending"})),(k.includes("blobVersionedHashes")||k.includes("sidecars"))&&r&&t){let a=ar({blobs:r,kzg:t});if(k.includes("blobVersionedHashes")){let b=av({commitments:a,to:"hex"});f.blobVersionedHashes=b}if(k.includes("sidecars")){let b=as({blobs:r,commitments:a,kzg:t}),c=aB({blobs:r,commitments:a,proofs:b,to:"hex"});f.sidecars=c}}if(k.includes("chainId")&&(f.chainId=await n()),(k.includes("fees")||k.includes("type"))&&void 0===u)try{f.type=aD(f)}catch{let b=aI.get(a.uid);if(void 0===b){let c=await v();b="bigint"==typeof c?.baseFeePerGas,aI.set(a.uid,b)}f.type=b?"eip1559":"legacy"}if(k.includes("fees"))if("legacy"!==f.type&&"eip2930"!==f.type){if(void 0===f.maxFeePerGas||void 0===f.maxPriorityFeePerGas){let b=await v(),{maxFeePerGas:c,maxPriorityFeePerGas:d}=await ap(a,{block:b,chain:i,request:f});if(void 0===f.maxPriorityFeePerGas&&f.maxFeePerGas&&f.maxFeePerGas<d)throw new ab({maxPriorityFeePerGas:d});f.maxPriorityFeePerGas=d,f.maxFeePerGas=c}}else{if(void 0!==f.maxFeePerGas||void 0!==f.maxPriorityFeePerGas)throw new aa;if(void 0===f.gasPrice){let b=await v(),{gasPrice:c}=await ap(a,{block:b,chain:i,request:f,type:"legacy"});f.gasPrice=c}}return k.includes("gas")&&void 0===s&&(f.gas=await (0,e.getAction)(a,aL,"estimateGas")({...f,account:o,prepare:o?.type==="local"?[]:["blobVersionedHashes"]})),m?.fn&&m.runAt?.includes("afterFillParameters")&&(f=await m.fn(f,{phase:"afterFillParameters"})),(0,l.assertRequest)(f),delete f.parameters,f}async function aL(a,b){let{account:d=a.account,prepare:e=!0}=b,f=d?(0,h.parseAccount)(d):void 0,g=Array.isArray(e)?e:f?.type!=="local"?["blobVersionedHashes"]:void 0;try{let d=await (async()=>b.to?b.to:b.authorizationList&&b.authorizationList.length>0?await R({authorization:b.authorizationList[0]}).catch(()=>{throw new q.BaseError("`to` is required. Could not infer from `authorizationList`")}):void 0)(),{accessList:h,authorizationList:i,blobs:m,blobVersionedHashes:n,blockNumber:o,blockTag:p,data:r,gas:s,gasPrice:t,maxFeePerBlobGas:u,maxFeePerGas:v,maxPriorityFeePerGas:w,nonce:x,value:y,stateOverride:z,...A}=e?await aK(a,{...b,parameters:g,to:d}):b;if(s&&b.gas!==s)return s;let B=("bigint"==typeof o?(0,c.numberToHex)(o):void 0)||p,C=(0,Z.serializeStateOverride)(z);(0,l.assertRequest)(b);let D=a.chain?.formatters?.transactionRequest?.format,E=(D||k.formatTransactionRequest)({...(0,j.extract)(A,{format:D}),account:f,accessList:h,authorizationList:i,blobs:m,blobVersionedHashes:n,data:r,gasPrice:t,maxFeePerBlobGas:u,maxFeePerGas:v,maxPriorityFeePerGas:w,nonce:x,to:d,value:y},"estimateGas");return BigInt(await a.request({method:"eth_estimateGas",params:C?[E,B??a.experimental_blockTag??"latest",C]:B?[E,B]:[E]}))}catch(c){throw function(a,{docsPath:b,...c}){let d;return new W((d=(0,Y.getNodeError)(a,c))instanceof X.UnknownNodeError?a:d,{docsPath:b,...c})}(c,{...b,account:f,chain:a.chain})}}async function aM(a,b){let{abi:c,address:d,args:f,functionName:g,dataSuffix:i,...j}=b,k=(0,E.encodeFunctionData)({abi:c,args:f,functionName:g});try{return await (0,e.getAction)(a,aL,"estimateGas")({data:`${k}${i?i.replace("0x",""):""}`,to:d,...j})}catch(b){let a=j.account?(0,h.parseAccount)(j.account):void 0;throw(0,F.getContractError)(b,{abi:c,address:d,args:f,docsPath:"/docs/contract/estimateContractGas",functionName:g,sender:a?.address})}}a.s(["estimateContractGas",()=>aM],665610)},435755,364101,412692,873852,813e3,271713,662680,546035,235061,385530,538176,771377,1011,540188,133535,863992,750140,685888,a=>{"use strict";async function b(a){return BigInt(await a.request({method:"eth_blobBaseFee"}))}a.s(["getBlobBaseFee",()=>b],435755);let c=new Map,d=new Map;async function e(a,{cacheKey:b,cacheTime:e=1/0}){let f,g,h,i=(g=(f=(a,b)=>({clear:()=>b.delete(a),get:()=>b.get(a),set:c=>b.set(a,c)}))(b,c),{clear:()=>{g.clear(),h.clear()},promise:g,response:h=f(b,d)}),j=i.response.get();if(j&&e>0&&Date.now()-j.created.getTime()<e)return j.data;let k=i.promise.get();k||(k=a(),i.promise.set(k));try{let a=await k;return i.response.set({created:new Date,data:a}),a}finally{i.promise.clear()}}async function f(a,{cacheTime:b=a.cacheTime}={}){let c;return BigInt(await e(()=>a.request({method:"eth_blockNumber"}),{cacheKey:(c=a.uid,`blockNumber.${c}`),cacheTime:b}))}a.s(["getBlockNumber",()=>f],364101);var g=a.i(63363),h=a.i(545913);async function i(a,{blockHash:b,blockNumber:c,blockTag:d="latest"}={}){let e,f=void 0!==c?(0,h.numberToHex)(c):void 0;return e=b?await a.request({method:"eth_getBlockTransactionCountByHash",params:[b]},{dedupe:!0}):await a.request({method:"eth_getBlockTransactionCountByNumber",params:[f||d]},{dedupe:!!f}),(0,g.hexToNumber)(e)}async function j(a,{address:b,blockNumber:c,blockTag:d="latest"}){let e=void 0!==c?(0,h.numberToHex)(c):void 0,f=await a.request({method:"eth_getCode",params:[b,e||d]},{dedupe:!!e});if("0x"!==f)return f}a.s(["getBlockTransactionCount",()=>i],412692),a.s(["getCode",()=>j],873852);var k=a.i(518036),l=a.i(463312),m=a.i(364757),n=a.i(986616),o=a.i(47153),p=a.i(589268),q=a.i(499318),r=a.i(321142),s=a.i(945848),t=a.i(65122),u=a.i(71903),v=a.i(195244);let w="/docs/contract/decodeEventLog";function x(a){let{abi:b,data:c,strict:d,topics:e}=a,f=d??!0,[g,...h]=e;if(!g)throw new r.AbiEventSignatureEmptyTopicsError({docsPath:w});let i=b.find(a=>"event"===a.type&&g===(0,q.toEventSelector)((0,v.formatAbiItem)(a)));if(!(i&&"name"in i)||"event"!==i.type)throw new r.AbiEventSignatureNotFoundError(g,{docsPath:w});let{name:j,inputs:k}=i,l=k?.some(a=>!("name"in a&&a.name)),m=l?[]:{},n=k.map((a,b)=>[a,b]).filter(([a])=>"indexed"in a&&a.indexed);for(let a=0;a<n.length;a++){let[b,c]=n[a],d=h[a];if(!d)throw new r.DecodeLogTopicsMismatch({abiItem:i,param:b});m[l?c:b.name||c]=function({param:a,value:b}){return"string"===a.type||"bytes"===a.type||"tuple"===a.type||a.type.match(/^(.*)\[(\d+)?\]$/)?b:((0,u.decodeAbiParameters)([a],b)||[])[0]}({param:b,value:d})}let o=k.filter(a=>!("indexed"in a&&a.indexed));if(o.length>0){if(c&&"0x"!==c)try{let a=(0,u.decodeAbiParameters)(o,c);if(a)if(l)for(let b=0;b<k.length;b++)m[b]=m[b]??a.shift();else for(let b=0;b<o.length;b++)m[o[b].name]=a[b]}catch(a){if(f){if(a instanceof r.AbiDecodingDataSizeTooSmallError||a instanceof s.PositionOutOfBoundsError)throw new r.DecodeLogDataMismatch({abiItem:i,data:c,params:o,size:(0,t.size)(c)});throw a}}else if(f)throw new r.DecodeLogDataMismatch({abiItem:i,data:"0x",params:o,size:0})}return{eventName:j,args:Object.values(m).length>0?m:void 0}}function y(a){let{abi:b,args:c,logs:d,strict:e=!0}=a,f=(()=>{if(a.eventName)return Array.isArray(a.eventName)?a.eventName:[a.eventName]})();return d.map(a=>{let d,g,h=b.filter(b=>"event"===b.type&&a.topics[0]===(0,q.toEventSelector)(b));if(0===h.length)return null;for(let b of h)try{d=x({...a,abi:[b],strict:!0}),g=b;break}catch{}if(!d&&!e){g=h[0];try{d=x({...a,abi:[g],strict:!1})}catch{let b=g.inputs?.some(a=>!("name"in a&&a.name));return{...a,args:b?[]:{},eventName:g.name}}}return d&&g&&(!f||f.includes(d.eventName))&&function(a){let{args:b,inputs:c,matchArgs:d}=a;if(!d)return!0;if(!b)return!1;function e(a,b,c){try{if("address"===a.type)return(0,n.isAddressEqual)(b,c);if("string"===a.type||"bytes"===a.type)return(0,p.keccak256)((0,o.toBytes)(b))===c;return b===c}catch{return!1}}return Array.isArray(b)&&Array.isArray(d)?d.every((a,d)=>{if(null==a)return!0;let f=c[d];return!!f&&(Array.isArray(a)?a:[a]).some(a=>e(f,a,b[d]))}):!("object"!=typeof b||Array.isArray(b)||"object"!=typeof d||Array.isArray(d))&&Object.entries(d).every(([a,d])=>{if(null==d)return!0;let f=c.find(b=>b.name===a);return!!f&&(Array.isArray(d)?d:[d]).some(c=>e(f,c,b[a]))})}({args:d.args,inputs:g.inputs,matchArgs:c})?{...d,...a}:null}).filter(Boolean)}function z(a,{args:b,eventName:c}={}){return{...a,blockHash:a.blockHash?a.blockHash:null,blockNumber:a.blockNumber?BigInt(a.blockNumber):null,blockTimestamp:a.blockTimestamp?BigInt(a.blockTimestamp):null===a.blockTimestamp?null:void 0,logIndex:a.logIndex?Number(a.logIndex):null,transactionHash:a.transactionHash?a.transactionHash:null,transactionIndex:a.transactionIndex?Number(a.transactionIndex):null,...c?{args:b,eventName:c}:{}}}async function A(a,{address:b,blockHash:c,fromBlock:d,toBlock:e,event:f,events:g,args:i,strict:j}={}){let k=g??(f?[f]:void 0),l=[];k&&(l=[k.flatMap(a=>(0,m.encodeEventTopics)({abi:[a],eventName:a.name,args:g?void 0:i}))],f&&(l=l[0]));let n=(c?await a.request({method:"eth_getLogs",params:[{address:b,topics:l,blockHash:c}]}):await a.request({method:"eth_getLogs",params:[{address:b,topics:l,fromBlock:"bigint"==typeof d?(0,h.numberToHex)(d):d,toBlock:"bigint"==typeof e?(0,h.numberToHex)(e):e}]})).map(a=>z(a));return k?y({abi:k,args:i,logs:n,strict:j??!1}):n}async function B(a,b){let{abi:c,address:d,args:e,blockHash:f,eventName:g,fromBlock:h,toBlock:i,strict:j}=b,m=g?(0,k.getAbiItem)({abi:c,name:g}):void 0,n=m?void 0:c.filter(a=>"event"===a.type);return(0,l.getAction)(a,A,"getLogs")({address:d,args:e,blockHash:f,event:m,events:n,fromBlock:h,toBlock:i,strict:j})}a.s(["decodeEventLog",()=>x],813e3),a.s(["formatLog",()=>z],271713),a.s(["getLogs",()=>A],662680),a.s(["getContractEvents",()=>B],546035);var C=a.i(671977);class D extends C.BaseError{constructor({address:a}){super(`No EIP-712 domain found on contract "${a}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${a}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}var E=a.i(614345);async function F(a,b){let{address:c,factory:d,factoryData:e}=b;try{let[b,f,g,h,i,j,k]=await (0,l.getAction)(a,E.readContract,"readContract")({abi:G,address:c,functionName:"eip712Domain",factory:d,factoryData:e});return{domain:{name:f,version:g,chainId:Number(h),verifyingContract:i,salt:j},extensions:k,fields:b}}catch(a){if("ContractFunctionExecutionError"===a.name&&"ContractFunctionZeroDataError"===a.cause.name)throw new D({address:c});throw a}}let G=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];async function H(a,{blockCount:b,blockNumber:c,blockTag:d="latest",rewardPercentiles:e}){var f;let g="bigint"==typeof c?(0,h.numberToHex)(c):void 0;return{baseFeePerGas:(f=await a.request({method:"eth_feeHistory",params:[(0,h.numberToHex)(b),g||d,e]},{dedupe:!!g})).baseFeePerGas.map(a=>BigInt(a)),gasUsedRatio:f.gasUsedRatio,oldestBlock:BigInt(f.oldestBlock),reward:f.reward?.map(a=>a.map(a=>BigInt(a)))}}async function I(a,{filter:b}){let c="strict"in b&&b.strict,d=await b.request({method:"eth_getFilterChanges",params:[b.id]});if("string"==typeof d[0])return d;let e=d.map(a=>z(a));return"abi"in b&&b.abi?y({abi:b.abi,logs:e,strict:c}):e}async function J(a,{filter:b}){let c=b.strict??!1,d=(await b.request({method:"eth_getFilterLogs",params:[b.id]})).map(a=>z(a));return b.abi?y({abi:b.abi,logs:d,strict:c}):d}async function K(a,{address:b,blockNumber:c,blockTag:d,storageKeys:e}){let f=void 0!==c?(0,h.numberToHex)(c):void 0;var i=await a.request({method:"eth_getProof",params:[b,e,f||(d??"latest")]});return{...i,balance:i.balance?BigInt(i.balance):void 0,nonce:i.nonce?(0,g.hexToNumber)(i.nonce):void 0,storageProof:i.storageProof?i.storageProof.map(a=>({...a,value:BigInt(a.value)})):void 0}}async function L(a,{address:b,blockNumber:c,blockTag:d="latest",slot:e}){let f=void 0!==c?(0,h.numberToHex)(c):void 0;return await a.request({method:"eth_getStorageAt",params:[b,e,f||d]})}a.s(["getEip712Domain",()=>F],235061),a.s(["getFeeHistory",()=>H],385530),a.s(["getFilterChanges",()=>I],538176),a.s(["getFilterLogs",()=>J],771377),a.s(["getProof",()=>K],1011),a.s(["getStorageAt",()=>L],540188);var M=a.i(207389),N=a.i(397279);async function O(a,{blockHash:b,blockNumber:c,blockTag:d,hash:e,index:f,sender:g,nonce:i}){let j=d||"latest",k=void 0!==c?(0,h.numberToHex)(c):void 0,l=null;if(e?l=await a.request({method:"eth_getTransactionByHash",params:[e]},{dedupe:!0}):b?l=await a.request({method:"eth_getTransactionByBlockHashAndIndex",params:[b,(0,h.numberToHex)(f)]},{dedupe:!0}):(k||j)&&"number"==typeof f?l=await a.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[k||j,(0,h.numberToHex)(f)]},{dedupe:!!k}):g&&"number"==typeof i&&(l=await a.request({method:"eth_getTransactionBySenderAndNonce",params:[g,(0,h.numberToHex)(i)]},{dedupe:!0})),!l)throw new M.TransactionNotFoundError({blockHash:b,blockNumber:c,blockTag:j,hash:e,index:f});return(a.chain?.formatters?.transaction?.format||N.formatTransaction)(l,"getTransaction")}async function P(a,{hash:b,transactionReceipt:c}){let[d,e]=await Promise.all([(0,l.getAction)(a,f,"getBlockNumber")({}),b?(0,l.getAction)(a,O,"getTransaction")({hash:b}):void 0]),g=c?.blockNumber||e?.blockNumber;return g?d-g+1n:0n}a.s(["getTransaction",()=>O],133535),a.s(["getTransactionConfirmations",()=>P],863992);var Q=a.i(548017);let R={"0x0":"reverted","0x1":"success"};function S(a,b){let c={...a,blockNumber:a.blockNumber?BigInt(a.blockNumber):null,contractAddress:a.contractAddress?a.contractAddress:null,cumulativeGasUsed:a.cumulativeGasUsed?BigInt(a.cumulativeGasUsed):null,effectiveGasPrice:a.effectiveGasPrice?BigInt(a.effectiveGasPrice):null,gasUsed:a.gasUsed?BigInt(a.gasUsed):null,logs:a.logs?a.logs.map(a=>z(a)):null,to:a.to?a.to:null,transactionIndex:a.transactionIndex?(0,g.hexToNumber)(a.transactionIndex):null,status:a.status?R[a.status]:null,type:a.type?N.transactionType[a.type]||a.type:null};return a.blobGasPrice&&(c.blobGasPrice=BigInt(a.blobGasPrice)),a.blobGasUsed&&(c.blobGasUsed=BigInt(a.blobGasUsed)),c}let T=(0,Q.defineFormatter)("transactionReceipt",S);async function U(a,{hash:b}){let c=await a.request({method:"eth_getTransactionReceipt",params:[b]},{dedupe:!0});if(!c)throw new M.TransactionReceiptNotFoundError({hash:b});return(a.chain?.formatters?.transactionReceipt?.format||S)(c,"getTransactionReceipt")}a.s(["defineTransactionReceipt",0,T,"formatTransactionReceipt",()=>S,"receiptStatuses",0,R],750140),a.s(["getTransactionReceipt",()=>U],685888)},222541,703964,361966,874628,192007,232292,318449,467200,75671,713617,544240,677515,18780,16551,236313,260462,958170,a=>{"use strict";var b=a.i(678339),c=a.i(280432),d=a.i(629380),e=a.i(866738),f=a.i(838829),g=a.i(898622),h=a.i(632113),i=a.i(901855),j=a.i(207680),k=a.i(451009),l=a.i(89659),m=a.i(665610),n=a.i(100274),o=a.i(886599),p=a.i(507752),q=a.i(176559),r=a.i(160687),s=a.i(435755),t=a.i(496630),u=a.i(364101),v=a.i(412692),w=a.i(850486),x=a.i(873852),y=a.i(546035),z=a.i(235061),A=a.i(385530),B=a.i(538176),C=a.i(771377),D=a.i(666031),E=a.i(662680),F=a.i(1011),G=a.i(540188),H=a.i(133535),I=a.i(863992),J=a.i(336598),K=a.i(685888),L=a.i(503544),M=a.i(614345),N=a.i(75441),O=a.i(429635),P=a.i(321142),Q=a.i(179036),R=a.i(143227),S=a.i(87394),T=a.i(942587),U=a.i(766096),V=a.i(545913),W=a.i(530048),X=a.i(916581),Y=a.i(390918),Z=a.i(271713),$=a.i(344772),_=a.i(163593),aa=a.i(311918);async function ab(a,b){let{blockNumber:c,blockTag:d=a.experimental_blockTag??"latest",blocks:e,returnFullTransactions:f,traceTransfers:g,validation:h}=b;try{let b=[];for(let a of e){let c=a.blockOverrides?N.toRpc(a.blockOverrides):void 0,d=a.calls.map(a=>{let b=a.account?(0,O.parseAccount)(a.account):void 0,c=a.abi?(0,T.encodeFunctionData)(a):a.data,d={...a,account:b,data:a.dataSuffix?(0,U.concat)([c||"0x",a.dataSuffix]):c,from:a.from??b?.address};return(0,aa.assertRequest)(d),(0,$.formatTransactionRequest)(d)}),e=a.stateOverrides?(0,_.serializeStateOverride)(a.stateOverrides):void 0;b.push({blockOverrides:c,calls:d,stateOverrides:e})}let i="bigint"==typeof c?(0,V.numberToHex)(c):void 0;return(await a.request({method:"eth_simulateV1",params:[{blockStateCalls:b,returnFullTransactions:f,traceTransfers:g,validation:h},i||d]})).map((a,b)=>({...(0,Y.formatBlock)(a),calls:a.calls.map((a,c)=>{let{abi:d,args:f,functionName:g,to:h}=e[b].calls[c],i=a.error?.data??a.returnData,j=BigInt(a.gasUsed),k=a.logs?.map(a=>(0,Z.formatLog)(a)),l="0x1"===a.status?"success":"failure",m=d&&"success"===l&&"0x"!==i?(0,S.decodeFunctionResult)({abi:d,data:i,functionName:g}):null,n=(()=>{let b;if("success"!==l&&(a.error?.data==="0x"?b=new P.AbiDecodingZeroDataError:a.error&&(b=new Q.RawContractError(a.error)),b))return(0,W.getContractError)(b,{abi:d??[],address:h??"0x",args:f,functionName:g??"<unknown>"})})();return{data:i,gasUsed:j,logs:k,status:l,..."success"===l?{result:m}:{error:n}}})}))}catch(b){let a=(0,X.getNodeError)(b,{});if(a instanceof R.UnknownNodeError)throw b;throw a}}var ac=a.i(230387),ad=a.i(477703),ae=a.i(680592),af=a.i(81443),ag=a.i(482698),ah=a.i(141573),ai=a.i(524601),aj=a.i(726545),ak=a.i(5692),al=a.i(944237);function am(a,b={}){let{as:c="string"==typeof a?"Hex":"Bytes"}=b,d=(0,ai.keccak_256)(ak.from(a));return"Bytes"===c?d:al.fromBytes(d)}function an(a,b={}){let{as:c="string"==typeof a?"Hex":"Bytes"}=b,d=(0,aj.sha256)(ak.from(a));return"Bytes"===c?d:al.fromBytes(d)}function ao(a){return al.validate(a)&&32===al.size(a)}a.s(["keccak256",()=>am,"sha256",()=>an,"validate",()=>ao],703964);class ap extends Map{constructor(a){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=a}get(a){let b=super.get(a);return super.has(a)&&void 0!==b&&(this.delete(a),super.set(a,b)),b}set(a,b){if(super.set(a,b),this.maxSize&&this.size>this.maxSize){let a=this.keys().next().value;a&&this.delete(a)}return this}}let aq={checksum:new ap(8192)}.checksum;var ar=ah,as=ah,at=a.i(660791);function au(a,b={}){let{compressed:c}=b,{prefix:d,x:e,y:f}=a;if(!1===c||"bigint"==typeof e&&"bigint"==typeof f){if(4!==d)throw new aA({prefix:d,cause:new aC});return}if(!0===c||"bigint"==typeof e&&void 0===f){if(3!==d&&2!==d)throw new aA({prefix:d,cause:new aB});return}throw new az({publicKey:a})}function av(a){let b=(()=>{if(al.validate(a))return aw(a);if(ak.validate(a)){var b;return b=a,aw(al.fromBytes(b))}let{prefix:c,x:d,y:e}=a;return"bigint"==typeof d&&"bigint"==typeof e?{prefix:c??4,x:d,y:e}:{prefix:c,x:d}})();return au(b),b}function aw(a){if(132!==a.length&&130!==a.length&&68!==a.length)throw new aD({publicKey:a});if(130===a.length)return{prefix:4,x:BigInt(al.slice(a,0,32)),y:BigInt(al.slice(a,32,64))};if(132===a.length){let b=Number(al.slice(a,0,1));return{prefix:b,x:BigInt(al.slice(a,1,33)),y:BigInt(al.slice(a,33,65))}}return{prefix:Number(al.slice(a,0,1)),x:BigInt(al.slice(a,1,33))}}function ax(a,b={}){return ak.fromHex(ay(a,b))}function ay(a,b={}){au(a);let{prefix:c,x:d,y:e}=a,{includePrefix:f=!0}=b;return al.concat(f?al.fromNumber(c,{size:1}):"0x",al.fromNumber(d,{size:32}),"bigint"==typeof e?al.fromNumber(e,{size:32}):"0x")}class az extends as.BaseError{constructor({publicKey:a}){super(`Value \`${at.stringify(a)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class aA extends as.BaseError{constructor({prefix:a,cause:b}){super(`Prefix "${a}" is invalid.`,{cause:b}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class aB extends as.BaseError{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class aC extends as.BaseError{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}class aD extends as.BaseError{constructor({publicKey:a}){super(`Value \`${a}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${al.size(al.from(a))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}}a.s(["from",()=>av,"toBytes",()=>ax,"toHex",()=>ay],361966);let aE=/^0x[a-fA-F0-9]{40}$/;function aF(a,b={}){let{strict:c=!0}=b;if(!aE.test(a))throw new aK({address:a,cause:new aL});if(c){if(a.toLowerCase()===a)return;if(aG(a)!==a)throw new aK({address:a,cause:new aM})}}function aG(a){if(aq.has(a))return aq.get(a);aF(a,{strict:!1});let b=a.substring(2).toLowerCase(),c=am(ak.fromString(b),{as:"Bytes"}),d=b.split("");for(let a=0;a<40;a+=2)c[a>>1]>>4>=8&&d[a]&&(d[a]=d[a].toUpperCase()),(15&c[a>>1])>=8&&d[a+1]&&(d[a+1]=d[a+1].toUpperCase());let e=`0x${d.join("")}`;return aq.set(a,e),e}function aH(a,b={}){let c=am(`0x${ay(a).slice(4)}`).substring(26);return function(a,b={}){let{checksum:c=!1}=b;return(aF(a),c)?aG(a):a}(`0x${c}`,b)}function aI(a,b){return aF(a,{strict:!1}),aF(b,{strict:!1}),a.toLowerCase()===b.toLowerCase()}function aJ(a,b={}){let{strict:c=!0}=b??{};try{return aF(a,{strict:c}),!0}catch{return!1}}class aK extends ar.BaseError{constructor({address:a,cause:b}){super(`Address "${a}" is invalid.`,{cause:b}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class aL extends ar.BaseError{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class aM extends ar.BaseError{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function aN(a){let b=!0,c="",d=0,e="",f=!1;for(let g=0;g<a.length;g++){let h=a[g];if(["(",")",","].includes(h)&&(b=!0),"("===h&&d++,")"===h&&d--,b){if(0===d){if(" "===h&&["event","function","error",""].includes(e))e="";else if(e+=h,")"===h){f=!0;break}continue}if(" "===h){","!==a[g-1]&&","!==c&&",("!==c&&(c="",b=!1);continue}e+=h,c+=h}}if(!f)throw new ah.BaseError("Unable to normalize signature.");return e}function aO(a,b={}){let{prepare:c=!0}=b,d=Array.isArray(a)||"string"==typeof a?function(a){let b;if("string"==typeof a)b=(0,ag.parseSignature)(a);else{let c=(0,af.parseStructs)(a),d=a.length;for(let e=0;e<d;e++){let d=a[e];if(!(0,ae.isStructSignature)(d)){b=(0,ag.parseSignature)(d,c);break}}}if(!b)throw new ad.InvalidAbiItemError({signature:a});return b}(a):a;return{...d,...c?{hash:aR(d)}:{}}}function aP(a,b,c){let d,{args:e=[],prepare:f=!0}=c??{},g=al.validate(b,{strict:!1}),h=a.filter(a=>g?"function"===a.type||"error"===a.type?aQ(a)===al.slice(b,0,4):"event"===a.type&&aR(a)===b:"name"in a&&a.name===b);if(0===h.length)throw new aT({name:b});if(1===h.length)return{...h[0],...f?{hash:aR(h[0])}:{}};for(let a of h){if("inputs"in a){if(!e||0===e.length){if(!a.inputs||0===a.inputs.length)return{...a,...f?{hash:aR(a)}:{}};continue}if(a.inputs&&0!==a.inputs.length&&a.inputs.length===e.length&&e.every((b,c)=>{let d="inputs"in a&&a.inputs[c];return!!d&&function a(b,c){let d=typeof b,e=c.type;switch(e){case"address":return aJ(b,{strict:!1});case"bool":return"boolean"===d;case"function":case"string":return"string"===d;default:if("tuple"===e&&"components"in c)return Object.values(c.components).every((c,d)=>a(Object.values(b)[d],c));if(/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(e))return"number"===d||"bigint"===d;if(/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(e))return"string"===d||b instanceof Uint8Array;if(/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(e))return Array.isArray(b)&&b.every(b=>a(b,{...c,type:e.replace(/(\[[0-9]{0,}\])$/,"")}));return!1}}(b,d)})){if(d&&"inputs"in d&&d.inputs){let b=function a(b,c,d){for(let e in b){let f=b[e],g=c[e];if("tuple"===f.type&&"tuple"===g.type&&"components"in f&&"components"in g)return a(f.components,g.components,d[e]);let h=[f.type,g.type];if(h.includes("address")&&h.includes("bytes20")||(h.includes("address")&&h.includes("string")||h.includes("address")&&h.includes("bytes"))&&aJ(d[e],{strict:!1}))return h}}(a.inputs,d.inputs,e);if(b)throw new aS({abiItem:a,type:b[0]},{abiItem:d,type:b[1]})}d=a}}}let i=(()=>{if(d)return d;let[a,...b]=h;return{...a,overloads:b}})();if(!i)throw new aT({name:b});return{...i,...f?{hash:aR(i)}:{}}}function aQ(...a){let b=(()=>{if(Array.isArray(a[0])){let[b,c]=a;return aP(b,c)}return a[0]})();return al.slice(aR(b),0,4)}function aR(...a){let b=(()=>{if(Array.isArray(a[0])){let[b,c]=a;return aP(b,c)}return a[0]})();return"string"!=typeof b&&"hash"in b&&b.hash?b.hash:am(al.fromString(function(...a){let b=(()=>{if(Array.isArray(a[0])){let[b,c]=a;return aP(b,c)}return a[0]})();return aN("string"==typeof b?b:ac.formatAbiItem(b))}(b)))}a.s(["assert",()=>aF,"checksum",()=>aG,"fromPublicKey",()=>aH,"isEqual",()=>aI,"validate",()=>aJ],874628);class aS extends ah.BaseError{constructor(a,b){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${a.type}\` in \`${aN(ac.formatAbiItem(a.abiItem))}\`, and`,`\`${b.type}\` in \`${aN(ac.formatAbiItem(b.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class aT extends ah.BaseError{constructor({name:a,data:b,type:c="item"}){super(`ABI ${c}${a?` with name "${a}"`:b?` with data "${b}"`:""} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}ah.BaseError;var aU=a.i(396025),aV=a.i(381101),aW=ah;let aX=/^(.*)\[([0-9]*)\]$/,aY=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,aZ=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,a$=2n**256n-1n;function a_(a){let b=0;for(let c=0;c<a.length;c++){let{dynamic:d,encoded:e}=a[c];d?b+=32:b+=al.size(e)}let c=[],d=[],e=0;for(let f=0;f<a.length;f++){let{dynamic:g,encoded:h}=a[f];g?(c.push(al.fromNumber(b+e,{size:32})),d.push(h),e+=al.size(h)):c.push(h)}return al.concat(...c,...d)}function a0(a){let b=a.match(/^(.*)\[(\d+)?\]$/);return b?[b[2]?Number(b[2]):null,b[1]]:void 0}function a1(a){let{type:b}=a;if("string"===b||"bytes"===b||b.endsWith("[]"))return!0;if("tuple"===b)return a.components?.some(a1);let c=a0(a.type);return!!(c&&a1({...a,type:c[1]}))}var a2=ah;let a3={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:1/0,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new a7({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(a){if(a<0||a>this.bytes.length-1)throw new a6({length:this.bytes.length,position:a})},decrementPosition(a){if(a<0)throw new a5({offset:a});let b=this.position-a;this.assertPosition(b),this.position=b},getReadCount(a){return this.positionReadCount.get(a||this.position)||0},incrementPosition(a){if(a<0)throw new a5({offset:a});let b=this.position+a;this.assertPosition(b),this.position=b},inspectByte(a){let b=a??this.position;return this.assertPosition(b),this.bytes[b]},inspectBytes(a,b){let c=b??this.position;return this.assertPosition(c+a-1),this.bytes.subarray(c,c+a)},inspectUint8(a){let b=a??this.position;return this.assertPosition(b),this.bytes[b]},inspectUint16(a){let b=a??this.position;return this.assertPosition(b+1),this.dataView.getUint16(b)},inspectUint24(a){let b=a??this.position;return this.assertPosition(b+2),(this.dataView.getUint16(b)<<8)+this.dataView.getUint8(b+2)},inspectUint32(a){let b=a??this.position;return this.assertPosition(b+3),this.dataView.getUint32(b)},pushByte(a){this.assertPosition(this.position),this.bytes[this.position]=a,this.position++},pushBytes(a){this.assertPosition(this.position+a.length-1),this.bytes.set(a,this.position),this.position+=a.length},pushUint8(a){this.assertPosition(this.position),this.bytes[this.position]=a,this.position++},pushUint16(a){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,a),this.position+=2},pushUint24(a){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,a>>8),this.dataView.setUint8(this.position+2,255&a),this.position+=3},pushUint32(a){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,a),this.position+=4},readByte(){this.assertReadLimit(),this._touch();let a=this.inspectByte();return this.position++,a},readBytes(a,b){this.assertReadLimit(),this._touch();let c=this.inspectBytes(a);return this.position+=b??a,c},readUint8(){this.assertReadLimit(),this._touch();let a=this.inspectUint8();return this.position+=1,a},readUint16(){this.assertReadLimit(),this._touch();let a=this.inspectUint16();return this.position+=2,a},readUint24(){this.assertReadLimit(),this._touch();let a=this.inspectUint24();return this.position+=3,a},readUint32(){this.assertReadLimit(),this._touch();let a=this.inspectUint32();return this.position+=4,a},get remaining(){return this.bytes.length-this.position},setPosition(a){let b=this.position;return this.assertPosition(a),this.position=a,()=>this.position=b},_touch(){if(this.recursiveReadLimit===1/0)return;let a=this.getReadCount();this.positionReadCount.set(this.position,a+1),a>0&&this.recursiveReadCount++}};function a4(a,{recursiveReadLimit:b=8192}={}){let c=Object.create(a3);return c.bytes=a,c.dataView=new DataView(a.buffer,a.byteOffset,a.byteLength),c.positionReadCount=new Map,c.recursiveReadLimit=b,c}class a5 extends a2.BaseError{constructor({offset:a}){super(`Offset \`${a}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.NegativeOffsetError"})}}class a6 extends a2.BaseError{constructor({length:a,position:b}){super(`Position \`${b}\` is out of bounds (\`0 < position < ${a}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.PositionOutOfBoundsError"})}}class a7 extends a2.BaseError{constructor({count:a,limit:b}){super(`Recursive read limit of \`${b}\` exceeded (recursive read count: \`${a}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.RecursiveReadLimitExceededError"})}}function a8(a,b,c={}){let{as:d="Array",checksumAddress:e=!1}=c,f="string"==typeof b?ak.fromHex(b):b,g=a4(f);if(0===ak.size(f)&&a.length>0)throw new bd;if(ak.size(f)&&32>ak.size(f))throw new bc({data:"string"==typeof b?b:al.fromBytes(b),parameters:a,size:ak.size(f)});let h=0,i="Array"===d?[]:{};for(let b=0;b<a.length;++b){let c=a[b];g.setPosition(h);let[f,j]=function a(b,c,d){var e,f,g;let{checksumAddress:h,staticPosition:i}=d,j=a0(c.type);if(j){let[d,e]=j;return function(b,c,d){let{checksumAddress:e,length:f,staticPosition:g}=d;if(!f){let d=g+ak.toNumber(b.readBytes(32)),f=d+32;b.setPosition(d);let h=ak.toNumber(b.readBytes(32)),i=a1(c),j=0,k=[];for(let d=0;d<h;++d){b.setPosition(f+(i?32*d:j));let[g,h]=a(b,c,{checksumAddress:e,staticPosition:f});j+=h,k.push(g)}return b.setPosition(g+32),[k,32]}if(a1(c)){let d=g+ak.toNumber(b.readBytes(32)),h=[];for(let g=0;g<f;++g){b.setPosition(d+32*g);let[f]=a(b,c,{checksumAddress:e,staticPosition:d});h.push(f)}return b.setPosition(g+32),[h,32]}let h=0,i=[];for(let d=0;d<f;++d){let[d,f]=a(b,c,{checksumAddress:e,staticPosition:g+h});h+=f,i.push(d)}return[i,h]}(b,{...c,type:e},{checksumAddress:h,length:d,staticPosition:i})}if("tuple"===c.type)return function(b,c,d){let{checksumAddress:e,staticPosition:f}=d,g=0===c.components.length||c.components.some(({name:a})=>!a),h=g?[]:{},i=0;if(a1(c)){let d=f+ak.toNumber(b.readBytes(32));for(let f=0;f<c.components.length;++f){let j=c.components[f];b.setPosition(d+i);let[k,l]=a(b,j,{checksumAddress:e,staticPosition:d});i+=l,h[g?f:j?.name]=k}return b.setPosition(f+32),[h,32]}for(let d=0;d<c.components.length;++d){let j=c.components[d],[k,l]=a(b,j,{checksumAddress:e,staticPosition:f});h[g?d:j?.name]=k,i+=l}return[h,i]}(b,c,{checksumAddress:h,staticPosition:i});if("address"===c.type)return function(a,b={}){let c,{checksum:d=!1}=b,e=a.readBytes(32);return[(c=al.fromBytes(ak.slice(e,-20)),d?aG(c):c),32]}(b,{checksum:h});if("bool"===c.type){return e=b,[ak.toBoolean(e.readBytes(32),{size:32}),32]}if(c.type.startsWith("bytes"))return function(a,b,{staticPosition:c}){let[d,e]=b.type.split("bytes");if(!e){let b=ak.toNumber(a.readBytes(32));a.setPosition(c+b);let d=ak.toNumber(a.readBytes(32));if(0===d)return a.setPosition(c+32),["0x",32];let e=a.readBytes(d);return a.setPosition(c+32),[al.fromBytes(e),32]}return[al.fromBytes(a.readBytes(Number.parseInt(e,10),32)),32]}(b,c,{staticPosition:i});if(c.type.startsWith("uint")||c.type.startsWith("int")){let a,d,e;return f=b,a=(g=c).type.startsWith("int"),d=Number.parseInt(g.type.split("int")[1]||"256",10),e=f.readBytes(32),[d>48?ak.toBigInt(e,{signed:a}):ak.toNumber(e,{signed:a}),32]}if("string"===c.type)return function(a,{staticPosition:b}){let c=ak.toNumber(a.readBytes(32));a.setPosition(b+c);let d=ak.toNumber(a.readBytes(32));if(0===d)return a.setPosition(b+32),["",32];let e=a.readBytes(d,32),f=ak.toString(ak.trimLeft(e));return a.setPosition(b+32),[f,32]}(b,{staticPosition:i});throw new bi(c.type)}(g,c,{checksumAddress:e,staticPosition:0});h+=j,"Array"===d?i.push(f):i[c.name??b]=f}return i}function a9(a,b,c){let{checksumAddress:d=!1}=c??{};if(a.length!==b.length)throw new bg({expectedLength:a.length,givenLength:b.length});let e=a_(function({checksumAddress:a,parameters:b,values:c}){let d=[];for(let e=0;e<b.length;e++)d.push(function a({checksumAddress:b=!1,parameter:c,value:d}){let e=a0(c.type);if(e){let[f,g]=e;return function(b,c){let{checksumAddress:d,length:e,parameter:f}=c,g=null===e;if(!Array.isArray(b))throw new bh(b);if(!g&&b.length!==e)throw new be({expectedLength:e,givenLength:b.length,type:`${f.type}[${e}]`});let h=!1,i=[];for(let c=0;c<b.length;c++){let e=a({checksumAddress:d,parameter:f,value:b[c]});e.dynamic&&(h=!0),i.push(e)}if(g||h){let a=a_(i);if(g){let b=al.fromNumber(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?al.concat(b,a):b}}if(h)return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:al.concat(...i.map(({encoded:a})=>a))}}(d,{checksumAddress:b,length:f,parameter:{...c,type:g}})}if("tuple"===c.type)return function(b,c){let{checksumAddress:d,parameter:e}=c,f=!1,g=[];for(let c=0;c<e.components.length;c++){let h=e.components[c],i=Array.isArray(b)?c:h.name,j=a({checksumAddress:d,parameter:h,value:b[i]});g.push(j),j.dynamic&&(f=!0)}return{dynamic:f,encoded:f?a_(g):al.concat(...g.map(({encoded:a})=>a))}}(d,{checksumAddress:b,parameter:c});if("address"===c.type)return function(a,b){let{checksum:c=!1}=b;return aF(a,{strict:c}),{dynamic:!1,encoded:al.padLeft(a.toLowerCase())}}(d,{checksum:b});if("bool"===c.type){var f=d;if("boolean"!=typeof f)throw new ah.BaseError(`Invalid boolean value: "${f}" (type: ${typeof f}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:al.padLeft(al.fromBoolean(f))}}if(c.type.startsWith("uint")||c.type.startsWith("int")){let a=c.type.startsWith("int"),[,,b="256"]=aZ.exec(c.type)??[];return function(a,{signed:b,size:c}){if("number"==typeof c){let d=2n**(BigInt(c)-(b?1n:0n))-1n,e=b?-d-1n:0n;if(a>d||a<e)throw new al.IntegerOutOfRangeError({max:d.toString(),min:e.toString(),signed:b,size:c/8,value:a.toString()})}return{dynamic:!1,encoded:al.fromNumber(a,{size:32,signed:b})}}(d,{signed:a,size:Number(b)})}if(c.type.startsWith("bytes"))return function(a,{type:b}){let[,c]=b.split("bytes"),d=al.size(a);if(!c){let b=a;return d%32!=0&&(b=al.padRight(b,32*Math.ceil((a.length-2)/2/32))),{dynamic:!0,encoded:al.concat(al.padLeft(al.fromNumber(d,{size:32})),b)}}if(d!==Number.parseInt(c,10))throw new bf({expectedSize:Number.parseInt(c,10),value:a});return{dynamic:!1,encoded:al.padRight(a)}}(d,{type:c.type});if("string"===c.type){var g=d;let a=al.fromString(g),b=Math.ceil(al.size(a)/32),c=[];for(let d=0;d<b;d++)c.push(al.padRight(al.slice(a,32*d,(d+1)*32)));return{dynamic:!0,encoded:al.concat(al.padRight(al.fromNumber(al.size(a),{size:32})),...c)}}throw new bi(c.type)}({checksumAddress:a,parameter:b[e],value:c[e]}));return d}({checksumAddress:d,parameters:a,values:b}));return 0===e.length?"0x":e}function ba(a,b){if(a.length!==b.length)throw new bg({expectedLength:a.length,givenLength:b.length});let c=[];for(let d=0;d<a.length;d++){let e=a[d],f=b[d];c.push(ba.encode(e,f))}return al.concat(...c)}function bb(a){return Array.isArray(a)&&"string"==typeof a[0]||"string"==typeof a?function(a){let b=[];if("string"==typeof a){let c=(0,ag.splitParameters)(a),d=c.length;for(let a=0;a<d;a++)b.push((0,ag.parseAbiParameter)(c[a],{modifiers:ae.modifiers}))}else{let c=(0,af.parseStructs)(a),d=a.length;for(let e=0;e<d;e++){let d=a[e];if((0,ae.isStructSignature)(d))continue;let f=(0,ag.splitParameters)(d),g=f.length;for(let a=0;a<g;a++)b.push((0,ag.parseAbiParameter)(f[a],{modifiers:ae.modifiers,structs:c}))}}if(0===b.length)throw new aV.InvalidAbiParametersError({params:a});return b}(a):a}(ba||(ba={})).encode=function a(b,c,d=!1){if("address"===b)return aF(c),al.padLeft(c.toLowerCase(),32*!!d);if("string"===b)return al.fromString(c);if("bytes"===b)return c;if("bool"===b)return al.padLeft(al.fromBoolean(c),d?32:1);let e=b.match(aZ);if(e){let[a,b,f="256"]=e,g=Number.parseInt(f,10)/8;return al.fromNumber(c,{size:d?32:g,signed:"int"===b})}let f=b.match(aY);if(f){let[a,b]=f;if(Number.parseInt(b,10)!==(c.length-2)/2)throw new bf({expectedSize:Number.parseInt(b,10),value:c});return al.padRight(c,32*!!d)}let g=b.match(aX);if(g&&Array.isArray(c)){let[b,d]=g,e=[];for(let b=0;b<c.length;b++)e.push(a(d,c[b],!0));return 0===e.length?"0x":al.concat(...e)}throw new bi(b)};class bc extends aW.BaseError{constructor({data:a,parameters:b,size:c}){super(`Data size of ${c} bytes is too small for given parameters.`,{metaMessages:[`Params: (${aU.formatAbiParameters(b)})`,`Data:   ${a} (${c} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.DataSizeTooSmallError"})}}class bd extends aW.BaseError{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ZeroDataError"})}}class be extends aW.BaseError{constructor({expectedLength:a,givenLength:b,type:c}){super(`Array length mismatch for type \`${c}\`. Expected: \`${a}\`. Given: \`${b}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class bf extends aW.BaseError{constructor({expectedSize:a,value:b}){super(`Size of bytes "${b}" (bytes${al.size(b)}) does not match expected size (bytes${a}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class bg extends aW.BaseError{constructor({expectedLength:a,givenLength:b}){super(`ABI encoding parameters/values length mismatch.
Expected length (parameters): ${a}
Given length (values): ${b}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class bh extends aW.BaseError{constructor(a){super(`Value \`${a}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class bi extends aW.BaseError{constructor(a){super(`Type \`${a}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function bj(a,b={}){return aO(a,b)}function bk(a,b,c){let d=aP(a,b,c);if("function"!==d.type)throw new aT({name:b,type:"function"});return d}let bl="0x0000000000000000000000000000000000000000";var bm=a.i(670765),bn=a.i(671977),bo=a.i(63363);async function bp(a,b){let{blockNumber:c,blockTag:d,calls:e,stateOverrides:f,traceAssetChanges:g,traceTransfers:i,validation:j}=b,k=b.account?(0,O.parseAccount)(b.account):void 0;if(g&&!k)throw new bn.BaseError("`account` is required when `traceAssetChanges` is true");let l=k?function(...a){let[b,c]=(()=>{if(Array.isArray(a[0])){let[b,c]=a;return[function(a){let b=a.find(a=>"constructor"===a.type);if(!b)throw new aT({name:"constructor"});return b}(b),c]}return a})(),{bytecode:d,args:e}=c;return al.concat(d,b.inputs?.length&&e?.length?a9(b.inputs,e):"0x")}(aO("constructor(bytes, bytes)"),{bytecode:bm.deploylessCallViaBytecodeBytecode,args:["0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033",function(...a){let[b,c=[]]=(()=>{if(Array.isArray(a[0])){let[b,c,d]=a;return[bk(b,c,{args:d}),d]}let[b,c]=a;return[b,c]})(),{overloads:d}=b,e=d?bk([b,...d],b.name,{args:c}):b,f=aQ(e),g=c.length>0?a9(e.inputs,c):void 0;return g?al.concat(f,g):f}(bj("function getBalance(address)"),[k.address])]}):void 0,m=g?await Promise.all(b.calls.map(async b=>{if(!b.data&&!b.abi)return;let{accessList:c}=await (0,h.createAccessList)(a,{account:k.address,...b,data:b.abi?(0,T.encodeFunctionData)(b):b.data});return c.map(({address:a,storageKeys:b})=>b.length>0?a:null)})).then(a=>a.flat().filter(Boolean)):[],n=await ab(a,{blockNumber:c,blockTag:d,blocks:[...g?[{calls:[{data:l}],stateOverrides:f},{calls:m.map((a,b)=>({abi:[bj("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[k.address],to:a,from:bl,nonce:b})),stateOverrides:[{address:bl,nonce:0}]}]:[],{calls:[...e,{}].map(a=>({...a,from:k?.address})),stateOverrides:f},...g?[{calls:[{data:l}]},{calls:m.map((a,b)=>({abi:[bj("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[k.address],to:a,from:bl,nonce:b})),stateOverrides:[{address:bl,nonce:0}]},{calls:m.map((a,b)=>({to:a,abi:[bj("function decimals() returns (uint256)")],functionName:"decimals",from:bl,nonce:b})),stateOverrides:[{address:bl,nonce:0}]},{calls:m.map((a,b)=>({to:a,abi:[bj("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:bl,nonce:b})),stateOverrides:[{address:bl,nonce:0}]},{calls:m.map((a,b)=>({to:a,abi:[bj("function symbol() returns (string)")],functionName:"symbol",from:bl,nonce:b})),stateOverrides:[{address:bl,nonce:0}]}]:[]],traceTransfers:i,validation:j}),o=g?n[2]:n[0],[p,q,,r,s,t,u,v]=g?n:[],{calls:w,...x}=o,y=w.slice(0,-1)??[],z=[...p?.calls??[],...q?.calls??[]].map(a=>"success"===a.status?(0,bo.hexToBigInt)(a.data):null),A=[...r?.calls??[],...s?.calls??[]].map(a=>"success"===a.status?(0,bo.hexToBigInt)(a.data):null),B=(t?.calls??[]).map(a=>"success"===a.status?a.result:null),C=(v?.calls??[]).map(a=>"success"===a.status?a.result:null),D=(u?.calls??[]).map(a=>"success"===a.status?a.result:null),E=[];for(let[a,b]of A.entries()){let c=z[a];if("bigint"!=typeof b||"bigint"!=typeof c)continue;let d=B[a-1],e=C[a-1],f=D[a-1],g=0===a?{address:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",decimals:18,symbol:"ETH"}:{address:m[a-1],decimals:f||d?Number(d??1):void 0,symbol:e??void 0};E.some(a=>a.token.address===g.address)||E.push({token:g,value:{pre:c,post:b,diff:b-c}})}return{assetChanges:E,block:x,results:y}}var bq=a.i(463312);async function br(a,b){let{abi:c,address:d,args:e,dataSuffix:f,functionName:h,...i}=b,j=i.account?(0,O.parseAccount)(i.account):a.account,k=(0,T.encodeFunctionData)({abi:c,args:e,functionName:h});try{let{data:l}=await (0,bq.getAction)(a,g.call,"call")({batch:!1,data:`${k}${f?f.replace("0x",""):""}`,to:d,...i,account:j}),m=(0,S.decodeFunctionResult)({abi:c,args:e,functionName:h,data:l||"0x"}),n=c.filter(a=>"name"in a&&a.name===b.functionName);return{result:m,request:{abi:n,address:d,args:e,dataSuffix:f,functionName:h,...i,account:j}}}catch(a){throw(0,W.getContractError)(a,{abi:c,address:d,args:e,docsPath:"/docs/contract/simulateContract",functionName:h,sender:j?.address})}}async function bs(a,{filter:b}){return b.request({method:"eth_uninstallFilter",params:[b.id]})}var bt=ah;let bu="0x6492649264926492649264926492649264926492649264926492649264926492";function bv(a){if(al.slice(a,-32)!==bu)throw new bA(a)}function bw(a){return"string"==typeof a?bx(a):a}function bx(a){bv(a);let[b,c,d]=a8(bb("address, bytes, bytes"),a);return{data:c,signature:d,to:b}}function by(a){let{data:b,signature:c,to:d}=a;return al.concat(a9(bb("address, bytes, bytes"),[d,b,c]),bu)}function bz(a){try{return bv(a),!0}catch{return!1}}class bA extends bt.BaseError{constructor(a){super(`Value \`${a}\` is an invalid ERC-6492 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc6492.InvalidWrappedSignatureError"})}}a.s(["InvalidWrappedSignatureError",()=>bA,"assert",()=>bv,"from",()=>bw,"magicBytes",0,bu,"universalSignatureValidatorAbi",0,[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],"universalSignatureValidatorBytecode",0,"0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572","unwrap",()=>bx,"validate",()=>bz,"wrap",()=>by],47966);var bB=a.i(47966),bB=bB;function bC(a){var b;let c;return b=a,c="Hex",function a(b,c="Hex"){if(0===b.bytes.length)return"Hex"===c?al.fromBytes(b.bytes):b.bytes;let d=b.readByte();if(d<128&&b.decrementPosition(1),d<192){let a=bD(b,d,128),e=b.readBytes(a);return"Hex"===c?al.fromBytes(e):e}let e=bD(b,d,192);var f=b,g=e,h=c;let i=f.position,j=[];for(;f.position-i<g;)j.push(a(f,h));return j}(a4((()=>{if("string"==typeof b){if(b.length>3&&b.length%2!=0)throw new al.InvalidLengthError(b);return ak.fromHex(b)}return b})(),{recursiveReadLimit:1/0}),c)}function bD(a,b,c){if(128===c&&b<128)return 1;if(b<=c+55)return b-c;if(b===c+55+1)return a.readUint8();if(b===c+55+2)return a.readUint16();if(b===c+55+3)return a.readUint24();if(b===c+55+4)return a.readUint32();throw new ah.BaseError("Invalid RLP prefix")}function bE(a,b={}){let{as:c="Hex"}=b;return function(a,b){let{as:c}=b,d=function a(b){var c,d;let e,f,g,h;return Array.isArray(b)?(f=bF(e=(c=b.map(b=>a(b))).reduce((a,b)=>a+b.length,0)),{length:e<=55?1+e:1+f+e,encode(a){for(let{encode:b}of(e<=55?a.pushByte(192+e):(a.pushByte(247+f),1===f?a.pushUint8(e):2===f?a.pushUint16(e):3===f?a.pushUint24(e):a.pushUint32(e)),c))b(a)}}):(h=bF((g="string"==typeof(d=b)?ak.fromHex(d):d).length),{length:1===g.length&&g[0]<128?1:g.length<=55?1+g.length:1+h+g.length,encode(a){1===g.length&&g[0]<128||(g.length<=55?a.pushByte(128+g.length):(a.pushByte(183+h),1===h?a.pushUint8(g.length):2===h?a.pushUint16(g.length):3===h?a.pushUint24(g.length):a.pushUint32(g.length))),a.pushBytes(g)}})}(a),e=a4(new Uint8Array(d.length));return(d.encode(e),"Hex"===c)?al.fromBytes(e.bytes):e.bytes}(a,{as:c})}function bF(a){if(a<=255)return 1;if(a<=65535)return 2;if(a<=0xffffff)return 3;if(a<=0xffffffff)return 4;throw new ah.BaseError("Length is too large.")}a.s(["fromHex",()=>bE,"toHex",()=>bC],192007);var bG=ah;function bH(a,b={}){let{recovered:c}=b;if(void 0===a.r||void 0===a.s||c&&void 0===a.yParity)throw new bT({signature:a});if(a.r<0n||a.r>a$)throw new bU({value:a.r});if(a.s<0n||a.s>a$)throw new bV({value:a.s});if("number"==typeof a.yParity&&0!==a.yParity&&1!==a.yParity)throw new bW({value:a.yParity})}function bI(a){if(130!==a.length&&132!==a.length)throw new bS({signature:a});let b=BigInt(al.slice(a,0,32)),c=BigInt(al.slice(a,32,64)),d=(()=>{let b=Number(`0x${a.slice(130)}`);if(!Number.isNaN(b))try{return bQ(b)}catch{throw new bW({value:b})}})();return void 0===d?{r:b,s:c}:{r:b,s:c,yParity:d}}function bJ(a){if(void 0!==a.r&&void 0!==a.s)return bK(a)}function bK(a){let b=(()=>{var b;if("string"==typeof a)return bI(a);if(a instanceof Uint8Array)return bI(al.fromBytes(a));return"string"==typeof a.r?bL(a):a.v?{r:(b=a).r,s:b.s,yParity:bQ(b.v)}:{r:a.r,s:a.s,...void 0!==a.yParity?{yParity:a.yParity}:{}}})();return bH(b),b}function bL(a){let b=(()=>{let b=a.v?Number(a.v):void 0,c=a.yParity?Number(a.yParity):void 0;if("number"==typeof b&&"number"!=typeof c&&(c=bQ(b)),"number"!=typeof c)throw new bW({value:a.yParity});return c})();return{r:BigInt(a.r),s:BigInt(a.s),yParity:b}}function bM(a){let[b,c,d]=a;return bK({r:"0x"===c?0n:BigInt(c),s:"0x"===d?0n:BigInt(d),yParity:"0x"===b?0:Number(b)})}function bN(a){bH(a);let b=a.r,c=a.s;return al.concat(al.fromNumber(b,{size:32}),al.fromNumber(c,{size:32}),"number"==typeof a.yParity?al.fromNumber(bR(a.yParity),{size:1}):"0x")}function bO(a){let{r:b,s:c,yParity:d}=a;return{r:al.fromNumber(b,{size:32}),s:al.fromNumber(c,{size:32}),yParity:0===d?"0x0":"0x1"}}function bP(a){let{r:b,s:c,yParity:d}=a;return[d?"0x01":"0x",0n===b?"0x":al.trimLeft(al.fromNumber(b)),0n===c?"0x":al.trimLeft(al.fromNumber(c))]}function bQ(a){if(0===a||27===a)return 0;if(1===a||28===a)return 1;if(a>=35)return+(a%2==0);throw new bX({value:a})}function bR(a){if(0===a)return 27;if(1===a)return 28;throw new bW({value:a})}class bS extends bG.BaseError{constructor({signature:a}){super(`Value \`${a}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${al.size(al.from(a))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class bT extends bG.BaseError{constructor({signature:a}){super(`Signature \`${at.stringify(a)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}class bU extends bG.BaseError{constructor({value:a}){super(`Value \`${a}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}class bV extends bG.BaseError{constructor({value:a}){super(`Value \`${a}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}class bW extends bG.BaseError{constructor({value:a}){super(`Value \`${a}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class bX extends bG.BaseError{constructor({value:a}){super(`Value \`${a}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}function bY(a,b={}){return"string"==typeof a.chainId?bZ(a):{...a,...b.signature}}function bZ(a){let{address:b,chainId:c,nonce:d}=a,e=bJ(a);return{address:b,chainId:Number(c),nonce:BigInt(d),...e}}function b$(a){return a.map(bZ)}function b_(a){return function(a,b={}){let{presign:c}=b;return am(al.concat("0x05",bE(function(a){let{address:b,chainId:c,nonce:d}=a,e=bJ(a);return[c?al.fromNumber(c):"0x",b,d?al.fromNumber(d):"0x",...e?bP(e):[]]}(c?{address:a.address,chainId:a.chainId,nonce:a.nonce}:a))))}(a,{presign:!0})}function b0(a){let{address:b,chainId:c,nonce:d,...e}=a;return{address:b,chainId:al.fromNumber(c),nonce:al.fromNumber(d),...bO(e)}}function b1(a){return a.map(b0)}a.s(["assert",()=>bH,"extract",()=>bJ,"from",()=>bK,"fromHex",()=>bI,"fromRpc",()=>bL,"fromTuple",()=>bM,"toHex",()=>bN,"toRpc",()=>bO,"toTuple",()=>bP,"yParityToV",()=>bR],232292),a.s(["from",()=>bY,"fromRpcList",()=>b$,"getSignPayload",()=>b_,"toRpcList",()=>b1],318449);var b2=ah,b3=a.i(850235);function b4(a){return aH(function(a){let{payload:b,signature:c}=a,{r:d,s:e,yParity:f}=c;return av(new b3.secp256k1.Signature(BigInt(d),BigInt(e)).addRecoveryBit(f).recoverPublicKey(al.from(b).substring(2)))}(a))}function b5(a){let{address:b,hash:c,payload:d,publicKey:e,signature:f}=a;return b?aI(b,b4({payload:d,signature:f})):b3.secp256k1.verify(f,ak.from(d),ax(e),...c?[{prehash:!0,lowS:!0}]:[])}b3.secp256k1,a.s(["recoverAddress",()=>b4,"verify",()=>b5],467200);let b6="0x8010801080108010801080108010801080108010801080108010801080108010",b7=bb("(uint256 chainId, address delegation, uint256 nonce, uint8 yParity, uint256 r, uint256 s), address to, bytes data");function b8(a){if("string"==typeof a){if(al.slice(a,-32)!==b6)throw new cd(a)}else bH(a.authorization)}function b9(a){return"string"==typeof a?ca(a):a}function ca(a){b8(a);let b=al.toNumber(al.slice(a,-64,-32)),c=al.slice(a,-b-64,-64),d=al.slice(a,0,-b-64),[e,f,g]=a8(b7,c);return{authorization:bY({address:e.delegation,chainId:Number(e.chainId),nonce:e.nonce,yParity:e.yParity,r:e.r,s:e.s}),signature:d,...g&&"0x"!==g?{data:g,to:f}:{}}}function cb(a){let{data:b,signature:c}=a;b8(a);let d=b4({payload:b_(a.authorization),signature:bK(a.authorization)}),e=a9(b7,[{...a.authorization,delegation:a.authorization.address,chainId:BigInt(a.authorization.chainId)},a.to??d,b??"0x"]),f=al.fromNumber(al.size(e),{size:32});return al.concat(c,e,f,b6)}function cc(a){try{return b8(a),!0}catch{return!1}}class cd extends b2.BaseError{constructor(a){super(`Value \`${a}\` is an invalid ERC-8010 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc8010.InvalidWrappedSignatureError"})}}a.s(["InvalidWrappedSignatureError",()=>cd,"assert",()=>b8,"from",()=>b9,"magicBytes",0,b6,"suffixParameters",0,b7,"unwrap",()=>ca,"validate",()=>cc,"wrap",()=>cb],286937);var ce=a.i(286937),ce=ce,cf=a.i(260694),cg=a.i(901741),ch=a.i(723059),ci=a.i(986616),cj=a.i(822261);async function ck({address:a,authorization:b,signature:c}){return(0,ci.isAddressEqual)((0,ch.getAddress)(a),await (0,cj.recoverAuthorizationAddress)({authorization:b,signature:c}))}var cl=a.i(679922),cm=a.i(797820),cn=a.i(47153);async function co(a,b){let c,{address:d,chain:e=a.chain,hash:f,erc6492VerifierAddress:g=b.universalSignatureVerifierAddress??e?.contracts?.erc6492Verifier?.address,multicallAddress:h=b.multicallAddress??e?.contracts?.multicall3?.address}=b;if(e?.verifyHash)return await e.verifyHash(a,b);let i=(c=b.signature,(0,cl.isHex)(c)?c:"object"==typeof c&&"r"in c&&"s"in c?function({r:a,s:b,to:c="hex",v:d,yParity:e}){let f=(()=>{if(0===e||1===e)return e;if(d&&(27n===d||28n===d||d>=35n))return+(d%2n===0n);throw Error("Invalid `v` or `yParity` value")})(),g=`0x${new b3.secp256k1.Signature((0,bo.hexToBigInt)(a),(0,bo.hexToBigInt)(b)).toCompactHex()}${0===f?"1b":"1c"}`;return"hex"===c?g:(0,cn.hexToBytes)(g)}(c):(0,V.bytesToHex)(c));try{if(ce.validate(i))return await cp(a,{...b,multicallAddress:h,signature:i});return await cq(a,{...b,verifierAddress:g,signature:i})}catch(a){try{if((0,ci.isAddressEqual)((0,ch.getAddress)(d),await (0,cm.recoverAddress)({hash:f,signature:i})))return!0}catch{}if(a instanceof cs)return!1;throw a}}async function cp(a,b){let{address:c,blockNumber:d,blockTag:e,hash:f,multicallAddress:g}=b,{authorization:h,data:i,signature:j,to:k}=ce.unwrap(b.signature);if(await (0,x.getCode)(a,{address:c,blockNumber:d,blockTag:e})===(0,U.concatHex)(["0xef0100",h.address]))return await cr(a,{address:c,blockNumber:d,blockTag:e,hash:f,signature:j});let l={address:h.address,chainId:Number(h.chainId),nonce:Number(h.nonce),r:(0,V.numberToHex)(h.r,{size:32}),s:(0,V.numberToHex)(h.s,{size:32}),yParity:h.yParity};if(!await ck({address:c,authorization:l}))throw new cs;let m=await (0,bq.getAction)(a,M.readContract,"readContract")({...g?{address:g}:{code:bm.multicall3Bytecode},authorizationList:[l],abi:cf.multicall3Abi,blockNumber:d,blockTag:"pending",functionName:"aggregate3",args:[[...i?[{allowFailure:!0,target:k??c,callData:i}]:[],{allowFailure:!0,target:c,callData:(0,T.encodeFunctionData)({abi:cf.erc1271Abi,functionName:"isValidSignature",args:[f,j]})}]]}),n=m[m.length-1]?.returnData;if(n?.startsWith("0x1626ba7e"))return!0;throw new cs}async function cq(a,b){let{address:c,factory:d,factoryData:e,hash:f,signature:h,verifierAddress:i,...j}=b,k=await (async()=>!d&&!e||bB.validate(h)?h:bB.wrap({data:e,signature:h,to:d}))(),l=i?{to:i,data:(0,T.encodeFunctionData)({abi:cf.erc6492SignatureValidatorAbi,functionName:"isValidSig",args:[c,f,k]}),...j}:{data:(0,cg.encodeDeployData)({abi:cf.erc6492SignatureValidatorAbi,args:[c,f,k],bytecode:bm.erc6492SignatureValidatorByteCode}),...j},{data:m}=await (0,bq.getAction)(a,g.call,"call")(l).catch(a=>{if(a instanceof Q.CallExecutionError)throw new cs;throw a});if((0,bo.hexToBool)(m??"0x0"))return!0;throw new cs}async function cr(a,b){let{address:c,blockNumber:d,blockTag:e,hash:f,signature:g}=b;if((await (0,bq.getAction)(a,M.readContract,"readContract")({address:c,abi:cf.erc1271Abi,args:[f,g],blockNumber:d,blockTag:e,functionName:"isValidSignature"}).catch(a=>{if(a instanceof Q.ContractFunctionExecutionError)throw new cs;throw a})).startsWith("0x1626ba7e"))return!0;throw new cs}class cs extends Error{}a.s(["verifyHash",()=>co],75671);var ct=a.i(589268),cu=a.i(65122);function cv(a,b){let c,d;return(0,ct.keccak256)((c="string"==typeof a?(0,V.stringToHex)(a):"string"==typeof a.raw?a.raw:(0,V.bytesToHex)(a.raw),d=(0,V.stringToHex)(`\x19Ethereum Signed Message:
${(0,cu.size)(c)}`),(0,U.concat)([d,c])),b)}async function cw(a,{address:b,message:c,factory:d,factoryData:e,signature:f,...g}){let h=cv(c);return(0,bq.getAction)(a,co,"verifyHash")({address:b,factory:d,factoryData:e,hash:h,signature:f,...g})}a.s(["hashMessage",()=>cv],713617),a.s(["hashTypedData",()=>cJ],677515);var cx=a.i(984963);a.s(["getTypesForEIP712Domain",()=>cI,"serializeTypedData",()=>cG,"validateTypedData",()=>cH],544240);var cy=a.i(790737),cz=a.i(213853),cA=bn;class cB extends cA.BaseError{constructor({domain:a}){super(`Invalid domain "${(0,cz.stringify)(a)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class cC extends cA.BaseError{constructor({primaryType:a,types:b}){super(`Invalid primary type \`${a}\` must be one of \`${JSON.stringify(Object.keys(b))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class cD extends cA.BaseError{constructor({type:a}){super(`Struct type "${a}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}var cE=a.i(395590),cF=a.i(383102);function cG(a){let{domain:b,message:c,primaryType:d,types:e}=a,f=(a,b)=>{let c={...b};for(let b of a){let{name:a,type:d}=b;"address"===d&&(c[a]=c[a].toLowerCase())}return c},g=e.EIP712Domain&&b?f(e.EIP712Domain,b):{},h=(()=>{if("EIP712Domain"!==d)return f(e[d],c)})();return(0,cz.stringify)({domain:g,message:h,primaryType:d,types:e})}function cH(a){let{domain:b,message:c,primaryType:d,types:e}=a,f=(a,b)=>{for(let c of a){let{name:a,type:d}=c,g=b[a],h=d.match(cF.integerRegex);if(h&&("number"==typeof g||"bigint"==typeof g)){let[a,b,c]=h;(0,V.numberToHex)(g,{signed:"int"===b,size:Number.parseInt(c,10)/8})}if("address"===d&&"string"==typeof g&&!(0,cE.isAddress)(g))throw new cy.InvalidAddressError({address:g});let i=d.match(cF.bytesRegex);if(i){let[a,b]=i;if(b&&(0,cu.size)(g)!==Number.parseInt(b,10))throw new P.BytesSizeMismatchError({expectedSize:Number.parseInt(b,10),givenSize:(0,cu.size)(g)})}let j=e[d];j&&(function(a){if("address"===a||"bool"===a||"string"===a||a.startsWith("bytes")||a.startsWith("uint")||a.startsWith("int"))throw new cD({type:a})}(d),f(j,g))}};if(e.EIP712Domain&&b){if("object"!=typeof b)throw new cB({domain:b});f(e.EIP712Domain,b)}if("EIP712Domain"!==d)if(e[d])f(e[d],c);else throw new cC({primaryType:d,types:e})}function cI({domain:a}){return["string"==typeof a?.name&&{name:"name",type:"string"},a?.version&&{name:"version",type:"string"},("number"==typeof a?.chainId||"bigint"==typeof a?.chainId)&&{name:"chainId",type:"uint256"},a?.verifyingContract&&{name:"verifyingContract",type:"address"},a?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function cJ(a){let{domain:b={},message:c,primaryType:d}=a,e={EIP712Domain:cI({domain:b}),...a.types};cH({domain:b,message:c,primaryType:d,types:e});let f=["0x1901"];return b&&f.push(function({domain:a,types:b}){return cK({data:a,primaryType:"EIP712Domain",types:b})}({domain:b,types:e})),"EIP712Domain"!==d&&f.push(cK({data:c,primaryType:d,types:e})),(0,ct.keccak256)((0,U.concat)(f))}function cK({data:a,primaryType:b,types:c}){let d=function a({data:b,primaryType:c,types:d}){let e=[{type:"bytes32"}],f=[function({primaryType:a,types:b}){let c=(0,V.toHex)(function({primaryType:a,types:b}){let c="",d=function a({primaryType:b,types:c},d=new Set){let e=b.match(/^\w*/u),f=e?.[0];if(d.has(f)||void 0===c[f])return d;for(let b of(d.add(f),c[f]))a({primaryType:b.type,types:c},d);return d}({primaryType:a,types:b});for(let e of(d.delete(a),[a,...Array.from(d).sort()]))c+=`${e}(${b[e].map(({name:a,type:b})=>`${b} ${a}`).join(",")})`;return c}({primaryType:a,types:b}));return(0,ct.keccak256)(c)}({primaryType:c,types:d})];for(let g of d[c]){let[c,h]=function b({types:c,name:d,type:e,value:f}){if(void 0!==c[e])return[{type:"bytes32"},(0,ct.keccak256)(a({data:f,primaryType:e,types:c}))];if("bytes"===e)return[{type:"bytes32"},(0,ct.keccak256)(f)];if("string"===e)return[{type:"bytes32"},(0,ct.keccak256)((0,V.toHex)(f))];if(e.lastIndexOf("]")===e.length-1){let a=e.slice(0,e.lastIndexOf("[")),g=f.map(e=>b({name:d,type:a,types:c,value:e}));return[{type:"bytes32"},(0,ct.keccak256)((0,cx.encodeAbiParameters)(g.map(([a])=>a),g.map(([,a])=>a)))]}return[{type:e},f]}({types:d,name:g.name,type:g.type,value:b[g.name]});e.push(c),f.push(h)}return(0,cx.encodeAbiParameters)(e,f)}({data:a,primaryType:b,types:c});return(0,ct.keccak256)(d)}async function cL(a,b){let{address:c,factory:d,factoryData:e,signature:f,message:g,primaryType:h,types:i,domain:j,...k}=b,l=cJ({message:g,primaryType:h,types:i,domain:j});return(0,bq.getAction)(a,co,"verifyHash")({address:c,factory:d,factoryData:e,hash:l,signature:f,...k})}var cM=a.i(346628),cN=a.i(207389);let cO=new Map,cP=new Map,cQ=0;function cR(a,b,c){let d=++cQ,e=()=>cO.get(a)||[],f=()=>{let b,c=e();if(!c.some(a=>a.id===d))return;let f=cP.get(a);if(1===c.length&&f){let a=f();a instanceof Promise&&a.catch(()=>{})}b=e(),cO.set(a,b.filter(a=>a.id!==d))},g=e();if(cO.set(a,[...g,{id:d,fns:b}]),g&&g.length>0)return f;let h={};for(let a in b)h[a]=(...b)=>{let c=e();if(0!==c.length)for(let d of c)d.fns[a]?.(...b)};let i=c(h);return"function"==typeof i&&cP.set(a,i),f}a.s(["observe",()=>cR],18780);var cS=a.i(481807),cT=a.i(953328),cU=a.i(389096);function cV(a,{emitOnBegin:b,initialWaitTime:c,interval:d}){let e=!0,f=()=>e=!1;return(async()=>{let g;b&&(g=await a({unpoll:f}));let h=await c?.(g)??d;await (0,cU.wait)(h);let i=async()=>{e&&(await a({unpoll:f}),await (0,cU.wait)(d),i())};i()})(),f}function cW(a,{emitOnBegin:b=!1,emitMissed:c=!1,onBlockNumber:d,onError:e,poll:f,pollingInterval:g=a.pollingInterval}){let h;return(void 0!==f?f:"webSocket"!==a.transport.type&&"ipc"!==a.transport.type&&("fallback"!==a.transport.type||"webSocket"!==a.transport.transports[0].config.type&&"ipc"!==a.transport.transports[0].config.type))?cR((0,cz.stringify)(["watchBlockNumber",a.uid,b,c,g]),{onBlockNumber:d,onError:e},d=>cV(async()=>{try{let b=await (0,bq.getAction)(a,u.getBlockNumber,"getBlockNumber")({cacheTime:0});if(void 0!==h){if(b===h)return;if(b-h>1&&c)for(let a=h+1n;a<b;a++)d.onBlockNumber(a,h),h=a}(void 0===h||b>h)&&(d.onBlockNumber(b,h),h=b)}catch(a){d.onError?.(a)}},{emitOnBegin:b,interval:g})):cR((0,cz.stringify)(["watchBlockNumber",a.uid,b,c]),{onBlockNumber:d,onError:e},b=>{let c=!0,d=()=>c=!1;return(async()=>{try{let e=(()=>{if("fallback"===a.transport.type){let b=a.transport.transports.find(a=>"webSocket"===a.config.type||"ipc"===a.config.type);return b?b.value:a.transport}return a.transport})(),{unsubscribe:f}=await e.subscribe({params:["newHeads"],onData(a){if(!c)return;let d=(0,bo.hexToBigInt)(a.result?.number);b.onBlockNumber(d,h),h=d},onError(a){b.onError?.(a)}});d=f,c||d()}catch(a){e?.(a)}})(),()=>d()})}async function cX(a,b){let c,d,e,f,g,{checkReplacement:h=!0,confirmations:i=1,hash:j,onReplaced:k,retryCount:l=6,retryDelay:m=({count:a})=>200*~~(1<<a),timeout:n=18e4}=b,o=(0,cz.stringify)(["waitForTransactionReceipt",a.uid,j]),p=b.pollingInterval?b.pollingInterval:a.chain?.experimental_preconfirmationTime?a.chain.experimental_preconfirmationTime:a.pollingInterval,q=!1,{promise:r,resolve:s,reject:u}=(0,cS.withResolvers)(),v=n?setTimeout(()=>{g?.(),f?.(),u(new cN.WaitForTransactionReceiptTimeoutError({hash:j}))},n):void 0;return f=cR(o,{onReplaced:k,resolve:s,reject:u},async b=>{if((e=await (0,bq.getAction)(a,K.getTransactionReceipt,"getTransactionReceipt")({hash:j}).catch(()=>void 0))&&i<=1){clearTimeout(v),b.resolve(e),f?.();return}g=(0,bq.getAction)(a,cW,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:p,async onBlockNumber(k){let n=a=>{clearTimeout(v),g?.(),a(),f?.()},o=k;if(!q)try{if(e){if(i>1&&(!e.blockNumber||o-e.blockNumber+1n<i))return;n(()=>b.resolve(e));return}if(h&&!c&&(q=!0,await (0,cT.withRetry)(async()=>{(c=await (0,bq.getAction)(a,H.getTransaction,"getTransaction")({hash:j})).blockNumber&&(o=c.blockNumber)},{delay:m,retryCount:l}),q=!1),e=await (0,bq.getAction)(a,K.getTransactionReceipt,"getTransactionReceipt")({hash:j}),i>1&&(!e.blockNumber||o-e.blockNumber+1n<i))return;n(()=>b.resolve(e))}catch(f){if(f instanceof cN.TransactionNotFoundError||f instanceof cN.TransactionReceiptNotFoundError){if(!c){q=!1;return}try{d=c,q=!0;let f=await (0,cT.withRetry)(()=>(0,bq.getAction)(a,t.getBlock,"getBlock")({blockNumber:o,includeTransactions:!0}),{delay:m,retryCount:l,shouldRetry:({error:a})=>a instanceof cM.BlockNotFoundError});q=!1;let g=f.transactions.find(({from:a,nonce:b})=>a===d.from&&b===d.nonce);if(!g||(e=await (0,bq.getAction)(a,K.getTransactionReceipt,"getTransactionReceipt")({hash:g.hash}),i>1&&(!e.blockNumber||o-e.blockNumber+1n<i)))return;let h="replaced";g.to===d.to&&g.value===d.value&&g.input===d.input?h="repriced":g.from===g.to&&0n===g.value&&(h="cancelled"),n(()=>{b.onReplaced?.({reason:h,replacedTransaction:d,transaction:g,transactionReceipt:e}),b.resolve(e)})}catch(a){n(()=>b.reject(a))}}else n(()=>b.reject(f))}}})}),r}a.s(["poll",()=>cV],16551),a.s(["waitForTransactionReceipt",()=>cX],236313);var cY=a.i(333102),cZ=a.i(813e3),c$=a.i(364757);let c_=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,c0=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;async function c1(a,b){let{address:c,domain:d,message:e,nonce:f,scheme:g,signature:h,time:i=new Date,...j}=b,k=function(a){let{scheme:b,statement:c,...d}=a.match(c_)?.groups??{},{chainId:e,expirationTime:f,issuedAt:g,notBefore:h,requestId:i,...j}=a.match(c0)?.groups??{},k=a.split("Resources:")[1]?.split("\n- ").slice(1);return{...d,...j,...e?{chainId:Number(e)}:{},...f?{expirationTime:new Date(f)}:{},...g?{issuedAt:new Date(g)}:{},...h?{notBefore:new Date(h)}:{},...i?{requestId:i}:{},...k?{resources:k}:{},...b?{scheme:b}:{},...c?{statement:c}:{}}}(e);if(!k.address||!function(a){let{address:b,domain:c,message:d,nonce:e,scheme:f,time:g=new Date}=a;if(c&&d.domain!==c||e&&d.nonce!==e||f&&d.scheme!==f||d.expirationTime&&g>=d.expirationTime||d.notBefore&&g<d.notBefore)return!1;try{if(!d.address||!(0,cE.isAddress)(d.address,{strict:!1})||b&&!(0,ci.isAddressEqual)(d.address,b))return!1}catch{return!1}return!0}({address:c,domain:d,message:k,nonce:f,scheme:g,time:i}))return!1;let l=cv(e);return co(a,{address:k.address,hash:l,signature:h,...j})}var c2=a.i(803079);async function c3(a,{serializedTransaction:b}){return a.request({method:"eth_sendRawTransaction",params:[b]},{retryCount:0})}a.s(["sendRawTransaction",()=>c3],260462);var c4=a.i(750140);async function c5(a,{serializedTransaction:b,throwOnReceiptRevert:c,timeout:d}){let e=await a.request({method:"eth_sendRawTransactionSync",params:d?[b,(0,V.numberToHex)(d)]:[b]},{retryCount:0}),f=(a.chain?.formatters?.transactionReceipt?.format||c4.formatTransactionReceipt)(e);if("reverted"===f.status&&c)throw new cN.TransactionReceiptRevertedError({receipt:f});return f}function c6(a){return{call:b=>(0,g.call)(a,b),createAccessList:b=>(0,h.createAccessList)(a,b),createBlockFilter:()=>(0,i.createBlockFilter)(a),createContractEventFilter:b=>(0,j.createContractEventFilter)(a,b),createEventFilter:b=>(0,k.createEventFilter)(a,b),createPendingTransactionFilter:()=>(0,l.createPendingTransactionFilter)(a),estimateContractGas:b=>(0,m.estimateContractGas)(a,b),estimateGas:b=>(0,o.estimateGas)(a,b),getBalance:b=>(0,r.getBalance)(a,b),getBlobBaseFee:()=>(0,s.getBlobBaseFee)(a),getBlock:b=>(0,t.getBlock)(a,b),getBlockNumber:b=>(0,u.getBlockNumber)(a,b),getBlockTransactionCount:b=>(0,v.getBlockTransactionCount)(a,b),getBytecode:b=>(0,x.getCode)(a,b),getChainId:()=>(0,w.getChainId)(a),getCode:b=>(0,x.getCode)(a,b),getContractEvents:b=>(0,y.getContractEvents)(a,b),getEip712Domain:b=>(0,z.getEip712Domain)(a,b),getEnsAddress:c=>(0,b.getEnsAddress)(a,c),getEnsAvatar:b=>(0,c.getEnsAvatar)(a,b),getEnsName:b=>(0,d.getEnsName)(a,b),getEnsResolver:b=>(0,e.getEnsResolver)(a,b),getEnsText:b=>(0,f.getEnsText)(a,b),getFeeHistory:b=>(0,A.getFeeHistory)(a,b),estimateFeesPerGas:b=>(0,n.estimateFeesPerGas)(a,b),getFilterChanges:b=>(0,B.getFilterChanges)(a,b),getFilterLogs:b=>(0,C.getFilterLogs)(a,b),getGasPrice:()=>(0,D.getGasPrice)(a),getLogs:b=>(0,E.getLogs)(a,b),getProof:b=>(0,F.getProof)(a,b),estimateMaxPriorityFeePerGas:b=>(0,p.estimateMaxPriorityFeePerGas)(a,b),fillTransaction:b=>(0,q.fillTransaction)(a,b),getStorageAt:b=>(0,G.getStorageAt)(a,b),getTransaction:b=>(0,H.getTransaction)(a,b),getTransactionConfirmations:b=>(0,I.getTransactionConfirmations)(a,b),getTransactionCount:b=>(0,J.getTransactionCount)(a,b),getTransactionReceipt:b=>(0,K.getTransactionReceipt)(a,b),multicall:b=>(0,L.multicall)(a,b),prepareTransactionRequest:b=>(0,c2.prepareTransactionRequest)(a,b),readContract:b=>(0,M.readContract)(a,b),sendRawTransaction:b=>c3(a,b),sendRawTransactionSync:b=>c5(a,b),simulate:b=>ab(a,b),simulateBlocks:b=>ab(a,b),simulateCalls:b=>bp(a,b),simulateContract:b=>br(a,b),verifyHash:b=>co(a,b),verifyMessage:b=>cw(a,b),verifySiweMessage:b=>c1(a,b),verifyTypedData:b=>cL(a,b),uninstallFilter:b=>bs(a,b),waitForTransactionReceipt:b=>cX(a,b),watchBlocks:b=>(function(a,{blockTag:b=a.experimental_blockTag??"latest",emitMissed:c=!1,emitOnBegin:d=!1,onBlock:e,onError:f,includeTransactions:g,poll:h,pollingInterval:i=a.pollingInterval}){let j,k,l,m,n=void 0!==h?h:"webSocket"!==a.transport.type&&"ipc"!==a.transport.type&&("fallback"!==a.transport.type||"webSocket"!==a.transport.transports[0].config.type&&"ipc"!==a.transport.transports[0].config.type),o=g??!1;return n?cR((0,cz.stringify)(["watchBlocks",a.uid,b,c,d,o,i]),{onBlock:e,onError:f},e=>cV(async()=>{try{let d=await (0,bq.getAction)(a,t.getBlock,"getBlock")({blockTag:b,includeTransactions:o});if(null!==d.number&&j?.number!=null){if(d.number===j.number)return;if(d.number-j.number>1&&c)for(let b=j?.number+1n;b<d.number;b++){let c=await (0,bq.getAction)(a,t.getBlock,"getBlock")({blockNumber:b,includeTransactions:o});e.onBlock(c,j),j=c}}(j?.number==null||"pending"===b&&d?.number==null||null!==d.number&&d.number>j.number)&&(e.onBlock(d,j),j=d)}catch(a){e.onError?.(a)}},{emitOnBegin:d,interval:i})):(k=!0,l=!0,m=()=>k=!1,(async()=>{try{d&&(0,bq.getAction)(a,t.getBlock,"getBlock")({blockTag:b,includeTransactions:o}).then(a=>{!k||l&&(e(a,void 0),l=!1)}).catch(f);let c=(()=>{if("fallback"===a.transport.type){let b=a.transport.transports.find(a=>"webSocket"===a.config.type||"ipc"===a.config.type);return b?b.value:a.transport}return a.transport})(),{unsubscribe:g}=await c.subscribe({params:["newHeads"],async onData(b){if(!k)return;let c=await (0,bq.getAction)(a,t.getBlock,"getBlock")({blockNumber:b.result?.number,includeTransactions:o}).catch(()=>{});k&&(e(c,j),l=!1,j=c)},onError(a){f?.(a)}});m=g,k||m()}catch(a){f?.(a)}})(),()=>m())})(a,b),watchBlockNumber:b=>cW(a,b),watchContractEvent:b=>(function(a,b){let c,d,e,f,{abi:g,address:h,args:i,batch:k=!0,eventName:l,fromBlock:m,onError:n,onLogs:o,poll:p,pollingInterval:q=a.pollingInterval,strict:r}=b;return(void 0!==p?p:"bigint"==typeof m||"webSocket"!==a.transport.type&&"ipc"!==a.transport.type&&("fallback"!==a.transport.type||"webSocket"!==a.transport.transports[0].config.type&&"ipc"!==a.transport.transports[0].config.type))?(c=r??!1,cR((0,cz.stringify)(["watchContractEvent",h,i,k,a.uid,l,q,c,m]),{onLogs:o,onError:n},b=>{let d,e;void 0!==m&&(d=m-1n);let f=!1,n=cV(async()=>{if(!f){try{e=await (0,bq.getAction)(a,j.createContractEventFilter,"createContractEventFilter")({abi:g,address:h,args:i,eventName:l,strict:c,fromBlock:m})}catch{}f=!0;return}try{let f;if(e)f=await (0,bq.getAction)(a,B.getFilterChanges,"getFilterChanges")({filter:e});else{let b=await (0,bq.getAction)(a,u.getBlockNumber,"getBlockNumber")({});f=d&&d<b?await (0,bq.getAction)(a,y.getContractEvents,"getContractEvents")({abi:g,address:h,args:i,eventName:l,fromBlock:d+1n,toBlock:b,strict:c}):[],d=b}if(0===f.length)return;if(k)b.onLogs(f);else for(let a of f)b.onLogs([a])}catch(a){e&&a instanceof cY.InvalidInputRpcError&&(f=!1),b.onError?.(a)}},{emitOnBegin:!0,interval:q});return async()=>{e&&await (0,bq.getAction)(a,bs,"uninstallFilter")({filter:e}),n()}})):(d=(0,cz.stringify)(["watchContractEvent",h,i,k,a.uid,l,q,r??!1]),e=!0,f=()=>e=!1,cR(d,{onLogs:o,onError:n},b=>((async()=>{try{let c=(()=>{if("fallback"===a.transport.type){let b=a.transport.transports.find(a=>"webSocket"===a.config.type||"ipc"===a.config.type);return b?b.value:a.transport}return a.transport})(),d=l?(0,c$.encodeEventTopics)({abi:g,eventName:l,args:i}):[],{unsubscribe:j}=await c.subscribe({params:["logs",{address:h,topics:d}],onData(a){if(!e)return;let c=a.result;try{let{eventName:a,args:d}=(0,cZ.decodeEventLog)({abi:g,data:c.data,topics:c.topics,strict:r}),e=(0,Z.formatLog)(c,{args:d,eventName:a});b.onLogs([e])}catch(f){let a,d;if(f instanceof P.DecodeLogDataMismatch||f instanceof P.DecodeLogTopicsMismatch){if(r)return;a=f.abiItem.name,d=f.abiItem.inputs?.some(a=>!("name"in a&&a.name))}let e=(0,Z.formatLog)(c,{args:d?[]:{},eventName:a});b.onLogs([e])}},onError(a){b.onError?.(a)}});f=j,e||f()}catch(a){n?.(a)}})(),()=>f())))})(a,b),watchEvent:b=>(function(a,{address:b,args:c,batch:d=!0,event:e,events:f,fromBlock:g,onError:h,onLogs:i,poll:j,pollingInterval:l=a.pollingInterval,strict:m}){let n,o,p=void 0!==j?j:"bigint"==typeof g||"webSocket"!==a.transport.type&&"ipc"!==a.transport.type&&("fallback"!==a.transport.type||"webSocket"!==a.transport.transports[0].config.type&&"ipc"!==a.transport.transports[0].config.type),q=m??!1;return p?cR((0,cz.stringify)(["watchEvent",b,c,d,a.uid,e,l,g]),{onLogs:i,onError:h},h=>{let i,j;void 0!==g&&(i=g-1n);let m=!1,n=cV(async()=>{if(!m){try{j=await (0,bq.getAction)(a,k.createEventFilter,"createEventFilter")({address:b,args:c,event:e,events:f,strict:q,fromBlock:g})}catch{}m=!0;return}try{let g;if(j)g=await (0,bq.getAction)(a,B.getFilterChanges,"getFilterChanges")({filter:j});else{let d=await (0,bq.getAction)(a,u.getBlockNumber,"getBlockNumber")({});g=i&&i!==d?await (0,bq.getAction)(a,E.getLogs,"getLogs")({address:b,args:c,event:e,events:f,fromBlock:i+1n,toBlock:d}):[],i=d}if(0===g.length)return;if(d)h.onLogs(g);else for(let a of g)h.onLogs([a])}catch(a){j&&a instanceof cY.InvalidInputRpcError&&(m=!1),h.onError?.(a)}},{emitOnBegin:!0,interval:l});return async()=>{j&&await (0,bq.getAction)(a,bs,"uninstallFilter")({filter:j}),n()}}):(n=!0,o=()=>n=!1,(async()=>{try{let d=(()=>{if("fallback"===a.transport.type){let b=a.transport.transports.find(a=>"webSocket"===a.config.type||"ipc"===a.config.type);return b?b.value:a.transport}return a.transport})(),g=f??(e?[e]:void 0),j=[];g&&(j=[g.flatMap(a=>(0,c$.encodeEventTopics)({abi:[a],eventName:a.name,args:c}))],e&&(j=j[0]));let{unsubscribe:k}=await d.subscribe({params:["logs",{address:b,topics:j}],onData(a){if(!n)return;let b=a.result;try{let{eventName:a,args:c}=(0,cZ.decodeEventLog)({abi:g??[],data:b.data,topics:b.topics,strict:q}),d=(0,Z.formatLog)(b,{args:c,eventName:a});i([d])}catch(e){let a,c;if(e instanceof P.DecodeLogDataMismatch||e instanceof P.DecodeLogTopicsMismatch){if(m)return;a=e.abiItem.name,c=e.abiItem.inputs?.some(a=>!("name"in a&&a.name))}let d=(0,Z.formatLog)(b,{args:c?[]:{},eventName:a});i([d])}},onError(a){h?.(a)}});o=k,n||o()}catch(a){h?.(a)}})(),()=>o())})(a,b),watchPendingTransactions:b=>(function(a,{batch:b=!0,onError:c,onTransactions:d,poll:e,pollingInterval:f=a.pollingInterval}){let g,h;return(void 0!==e?e:"webSocket"!==a.transport.type&&"ipc"!==a.transport.type)?cR((0,cz.stringify)(["watchPendingTransactions",a.uid,b,f]),{onTransactions:d,onError:c},c=>{let d,e=cV(async()=>{try{if(!d)try{d=await (0,bq.getAction)(a,l.createPendingTransactionFilter,"createPendingTransactionFilter")({});return}catch(a){throw e(),a}let f=await (0,bq.getAction)(a,B.getFilterChanges,"getFilterChanges")({filter:d});if(0===f.length)return;if(b)c.onTransactions(f);else for(let a of f)c.onTransactions([a])}catch(a){c.onError?.(a)}},{emitOnBegin:!0,interval:f});return async()=>{d&&await (0,bq.getAction)(a,bs,"uninstallFilter")({filter:d}),e()}}):(g=!0,h=()=>g=!1,(async()=>{try{let{unsubscribe:b}=await a.transport.subscribe({params:["newPendingTransactions"],onData(a){if(!g)return;let b=a.result;d([b])},onError(a){c?.(a)}});h=b,g||h()}catch(a){c?.(a)}})(),()=>h())})(a,b)}}a.s(["sendRawTransactionSync",()=>c5],958170),a.s(["publicActions",()=>c6],222541)},327142,a=>{"use strict";var b=a.i(671977);class c extends b.BaseError{constructor({docsPath:a}={}){super("Could not find an Account to execute with this Action.\nPlease provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client.",{docsPath:a,docsSlug:"account",name:"AccountNotFoundError"})}}class d extends b.BaseError{constructor({docsPath:a,metaMessages:b,type:c}){super(`Account type "${c}" is not supported.`,{docsPath:a,metaMessages:b,name:"AccountTypeNotSupportedError"})}}a.s(["AccountNotFoundError",()=>c,"AccountTypeNotSupportedError",()=>d])},477067,a=>{"use strict";var b=a.i(429635),c=a.i(327142),d=a.i(545913);async function e(a,{account:e=a.account,message:f}){if(!e)throw new c.AccountNotFoundError({docsPath:"/docs/actions/wallet/signMessage"});let g=(0,b.parseAccount)(e);if(g.signMessage)return g.signMessage({message:f});let h="string"==typeof f?(0,d.stringToHex)(f):f.raw instanceof Uint8Array?(0,d.toHex)(f.raw):f.raw;return a.request({method:"personal_sign",params:[h,g.address]},{retryCount:0})}a.s(["signMessage",()=>e])},42657,a=>{"use strict";var b=a.i(429635),c=a.i(77315);function d(a){let{batch:d,chain:e,ccipRead:f,key:g="base",name:h="Base Client",type:i="base"}=a,j=a.experimental_blockTag??("number"==typeof e?.experimental_preconfirmationTime?"pending":void 0),k=Math.min(Math.max(Math.floor((e?.blockTime??12e3)/2),500),4e3),l=a.pollingInterval??k,m=a.cacheTime??l,n=a.account?(0,b.parseAccount)(a.account):void 0,{config:o,request:p,value:q}=a.transport({account:n,chain:e,pollingInterval:l}),r={account:n,batch:d,cacheTime:m,ccipRead:f,chain:e,key:g,name:h,pollingInterval:l,request:p,transport:{...o,...q},type:i,uid:(0,c.uid)(),...j?{experimental_blockTag:j}:{}};return Object.assign(r,{extend:function a(b){return c=>{let d=c(b);for(let a in r)delete d[a];let e={...b,...d};return Object.assign(e,{extend:a(e)})}}(r)})}a.s(["createClient",()=>d])},448238,941579,323293,322672,355300,734039,a=>{"use strict";let b={gasPriceOracle:{address:"0x420000000000000000000000000000000000000F"},l1Block:{address:"0x4200000000000000000000000000000000000015"},l2CrossDomainMessenger:{address:"0x4200000000000000000000000000000000000007"},l2Erc721Bridge:{address:"0x4200000000000000000000000000000000000014"},l2StandardBridge:{address:"0x4200000000000000000000000000000000000010"},l2ToL1MessagePasser:{address:"0x4200000000000000000000000000000000000016"}};a.s(["contracts",0,b],941579);var c=a.i(63363),d=a.i(390918),e=a.i(397279),f=a.i(750140);let g={block:(0,d.defineBlock)({format:a=>({transactions:a.transactions?.map(a=>{if("string"==typeof a)return a;let b=(0,e.formatTransaction)(a);return"0x7e"===b.typeHex&&(b.isSystemTx=a.isSystemTx,b.mint=a.mint?(0,c.hexToBigInt)(a.mint):void 0,b.sourceHash=a.sourceHash,b.type="deposit"),b}),stateRoot:a.stateRoot})}),transaction:(0,e.defineTransaction)({format(a){let b={};return"0x7e"===a.type&&(b.isSystemTx=a.isSystemTx,b.mint=a.mint?(0,c.hexToBigInt)(a.mint):void 0,b.sourceHash=a.sourceHash,b.type="deposit"),b}}),transactionReceipt:(0,f.defineTransactionReceipt)({format:a=>({l1GasPrice:a.l1GasPrice?(0,c.hexToBigInt)(a.l1GasPrice):null,l1GasUsed:a.l1GasUsed?(0,c.hexToBigInt)(a.l1GasUsed):null,l1Fee:a.l1Fee?(0,c.hexToBigInt)(a.l1Fee):null,l1FeeScalar:a.l1FeeScalar?Number(a.l1FeeScalar):null})})};a.s(["formatters",0,g],323293);var h=a.i(790737),i=a.i(395590),j=a.i(766096),k=a.i(545913),l=a.i(555272);a.s(["serializeTransaction",()=>D,"toYParitySignatureArray",()=>E],355300);var m=a.i(207389),n=a.i(496074),o=a.i(95095),p=a.i(354264),q=a.i(276417),r=a.i(278072),s=a.i(59234),t=a.i(298344),u=a.i(671977),v=a.i(28244),w=a.i(87933),x=a.i(143227),y=a.i(65122),z=a.i(225677);function A(a){let{chainId:b,maxPriorityFeePerGas:c,maxFeePerGas:d,to:e}=a;if(b<=0)throw new w.InvalidChainIdError({chainId:b});if(e&&!(0,i.isAddress)(e))throw new h.InvalidAddressError({address:e});if(d&&d>t.maxUint256)throw new x.FeeCapTooHighError({maxFeePerGas:d});if(c&&d&&c>d)throw new x.TipAboveFeeCapError({maxFeePerGas:d,maxPriorityFeePerGas:c})}var B=a.i(225978);function C(a){if(!a||0===a.length)return[];let b=[];for(let c=0;c<a.length;c++){let{address:d,storageKeys:e}=a[c];for(let a=0;a<e.length;a++)if(e[a].length-2!=64)throw new m.InvalidStorageKeySizeError({storageKey:e[a]});if(!(0,i.isAddress)(d,{strict:!1}))throw new h.InvalidAddressError({address:d});b.push([d,e])}return b}function D(a,b){let d=(0,B.getTransactionType)(a);return"eip1559"===d?function(a,b){let{chainId:c,gas:d,nonce:e,to:f,value:g,maxFeePerGas:h,maxPriorityFeePerGas:i,accessList:m,data:n}=a;A(a);let o=C(m),p=[(0,k.numberToHex)(c),e?(0,k.numberToHex)(e):"0x",i?(0,k.numberToHex)(i):"0x",h?(0,k.numberToHex)(h):"0x",d?(0,k.numberToHex)(d):"0x",f??"0x",g?(0,k.numberToHex)(g):"0x",n??"0x",o,...E(a,b)];return(0,j.concatHex)(["0x02",(0,l.toRlp)(p)])}(a,b):"eip2930"===d?function(a,b){let{chainId:c,gas:d,data:e,nonce:f,to:g,value:m,accessList:n,gasPrice:o}=a;!function(a){let{chainId:b,maxPriorityFeePerGas:c,gasPrice:d,maxFeePerGas:e,to:f}=a;if(b<=0)throw new w.InvalidChainIdError({chainId:b});if(f&&!(0,i.isAddress)(f))throw new h.InvalidAddressError({address:f});if(c||e)throw new u.BaseError("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(d&&d>t.maxUint256)throw new x.FeeCapTooHighError({maxFeePerGas:d})}(a);let p=C(n),q=[(0,k.numberToHex)(c),f?(0,k.numberToHex)(f):"0x",o?(0,k.numberToHex)(o):"0x",d?(0,k.numberToHex)(d):"0x",g??"0x",m?(0,k.numberToHex)(m):"0x",e??"0x",p,...E(a,b)];return(0,j.concatHex)(["0x01",(0,l.toRlp)(q)])}(a,b):"eip4844"===d?function(a,b){let{chainId:d,gas:e,nonce:f,to:g,value:h,maxFeePerBlobGas:i,maxFeePerGas:m,maxPriorityFeePerGas:r,accessList:t,data:u}=a;!function(a){let{blobVersionedHashes:b}=a;if(b){if(0===b.length)throw new v.EmptyBlobError;for(let a of b){let b=(0,y.size)(a),d=(0,c.hexToNumber)((0,z.slice)(a,0,1));if(32!==b)throw new v.InvalidVersionedHashSizeError({hash:a,size:b});if(d!==s.versionedHashVersionKzg)throw new v.InvalidVersionedHashVersionError({hash:a,version:d})}}A(a)}(a);let w=a.blobVersionedHashes,x=a.sidecars;if(a.blobs&&(void 0===w||void 0===x)){let b="string"==typeof a.blobs[0]?a.blobs:a.blobs.map(a=>(0,k.bytesToHex)(a)),c=a.kzg,d=(0,n.blobsToCommitments)({blobs:b,kzg:c});if(void 0===w&&(w=(0,p.commitmentsToVersionedHashes)({commitments:d})),void 0===x){let a=(0,o.blobsToProofs)({blobs:b,commitments:d,kzg:c});x=(0,q.toBlobSidecars)({blobs:b,commitments:d,proofs:a})}}let B=C(t),D=[(0,k.numberToHex)(d),f?(0,k.numberToHex)(f):"0x",r?(0,k.numberToHex)(r):"0x",m?(0,k.numberToHex)(m):"0x",e?(0,k.numberToHex)(e):"0x",g??"0x",h?(0,k.numberToHex)(h):"0x",u??"0x",B,i?(0,k.numberToHex)(i):"0x",w??[],...E(a,b)],F=[],G=[],H=[];if(x)for(let a=0;a<x.length;a++){let{blob:b,commitment:c,proof:d}=x[a];F.push(b),G.push(c),H.push(d)}return(0,j.concatHex)(["0x03",x?(0,l.toRlp)([D,F,G,H]):(0,l.toRlp)(D)])}(a,b):"eip7702"===d?function(a,b){let{authorizationList:c,chainId:d,gas:e,nonce:f,to:g,value:m,maxFeePerGas:n,maxPriorityFeePerGas:o,accessList:p,data:q}=a;!function(a){let{authorizationList:b}=a;if(b)for(let a of b){let{chainId:b}=a,c=a.address;if(!(0,i.isAddress)(c))throw new h.InvalidAddressError({address:c});if(b<0)throw new w.InvalidChainIdError({chainId:b})}A(a)}(a);let r=C(p),s=function(a){if(!a||0===a.length)return[];let b=[];for(let c of a){let{chainId:a,nonce:d,...e}=c,f=c.address;b.push([a?(0,k.toHex)(a):"0x",f,d?(0,k.toHex)(d):"0x",...E({},e)])}return b}(c);return(0,j.concatHex)(["0x04",(0,l.toRlp)([(0,k.numberToHex)(d),f?(0,k.numberToHex)(f):"0x",o?(0,k.numberToHex)(o):"0x",n?(0,k.numberToHex)(n):"0x",e?(0,k.numberToHex)(e):"0x",g??"0x",m?(0,k.numberToHex)(m):"0x",q??"0x",r,s,...E(a,b)])])}(a,b):function(a,b){let{chainId:c=0,gas:d,data:e,nonce:f,to:g,value:j,gasPrice:n}=a;!function(a){let{chainId:b,maxPriorityFeePerGas:c,gasPrice:d,maxFeePerGas:e,to:f}=a;if(f&&!(0,i.isAddress)(f))throw new h.InvalidAddressError({address:f});if(void 0!==b&&b<=0)throw new w.InvalidChainIdError({chainId:b});if(c||e)throw new u.BaseError("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(d&&d>t.maxUint256)throw new x.FeeCapTooHighError({maxFeePerGas:d})}(a);let o=[f?(0,k.numberToHex)(f):"0x",n?(0,k.numberToHex)(n):"0x",d?(0,k.numberToHex)(d):"0x",g??"0x",j?(0,k.numberToHex)(j):"0x",e??"0x"];if(b){let a=(()=>{if(b.v>=35n)return(b.v-35n)/2n>0?b.v:27n+(35n===b.v?0n:1n);if(c>0)return BigInt(2*c)+BigInt(35n+b.v-27n);let a=27n+(27n===b.v?0n:1n);if(b.v!==a)throw new m.InvalidLegacyVError({v:b.v});return a})(),d=(0,r.trim)(b.r),e=(0,r.trim)(b.s);o=[...o,(0,k.numberToHex)(a),"0x00"===d?"0x":d,"0x00"===e?"0x":e]}else c>0&&(o=[...o,(0,k.numberToHex)(c),"0x","0x"]);return(0,l.toRlp)(o)}(a,b)}function E(a,b){let c=b??a,{v:d,yParity:e}=c;if(void 0===c.r||void 0===c.s||void 0===d&&void 0===e)return[];let f=(0,r.trim)(c.r),g=(0,r.trim)(c.s);return["number"==typeof e?e?(0,k.numberToHex)(1):"0x":0n===d?"0x":1n===d?(0,k.numberToHex)(1):27n===d?"0x":(0,k.numberToHex)(1),"0x00"===f?"0x":f,"0x00"===g?"0x":g]}function F(a,b){var c;return"deposit"===(c=a).type||void 0!==c.sourceHash?function(a){!function(a){let{from:b,to:c}=a;if(b&&!(0,i.isAddress)(b))throw new h.InvalidAddressError({address:b});if(c&&!(0,i.isAddress)(c))throw new h.InvalidAddressError({address:c})}(a);let{sourceHash:b,data:c,from:d,gas:e,isSystemTx:f,mint:g,to:m,value:n}=a,o=[b,d,m??"0x",g?(0,k.toHex)(g):"0x",n?(0,k.toHex)(n):"0x",e?(0,k.toHex)(e):"0x",f?"0x1":"0x",c??"0x"];return(0,j.concatHex)(["0x7e",(0,l.toRlp)(o)])}(a):D(a,b)}a.s(["serializeAccessList",()=>C],322672);let G={transaction:F};a.s(["serializeTransaction",()=>F,"serializers",0,G],734039),a.s(["chainConfig",0,{blockTime:2e3,contracts:b,formatters:g,serializers:G}],448238)},130459,a=>{"use strict";var b=a.i(448238),c=a.i(896289);let d=(0,c.defineChain)({...b.chainConfig,id:84532,network:"base-sepolia",name:"Base Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.base.org"]}},blockExplorers:{default:{name:"Basescan",url:"https://sepolia.basescan.org",apiUrl:"https://api-sepolia.basescan.org/api"}},contracts:{...b.chainConfig.contracts,disputeGameFactory:{0xaa36a7:{address:"0xd6E6dBf4F7EA0ac412fD8b65ED297e64BB7a06E1"}},l2OutputOracle:{0xaa36a7:{address:"0x84457ca9D0163FbC4bbfe4Dfbb20ba46e48DF254"}},portal:{0xaa36a7:{address:"0x49f53e41452c74589e85ca1677426ba426459e85",blockCreated:4446677}},l1StandardBridge:{0xaa36a7:{address:"0xfd0Bf71F60660E2f608ed56e1659C450eB113120",blockCreated:4446677}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:1059647}},testnet:!0,sourceId:0xaa36a7}),e=(0,c.defineChain)({...d,experimental_preconfirmationTime:200,rpcUrls:{default:{http:["https://sepolia-preconf.base.org"]}}});a.s(["baseSepolia",0,d,"baseSepoliaPreconf",0,e])}];

//# sourceMappingURL=28ea8_23a725fa._.js.map